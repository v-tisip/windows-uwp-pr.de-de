---
author: mcleanbyron
ms.assetid: cc24ba75-a185-4488-b70c-fd4078bc4206
description: Hier erfahren Sie, wie Sie die AdScheduler-Klasse verwenden, um Anzeigen in Videoinhalten anzuzeigen.
title: Anzeigen von Werbung in Videoinhalten
ms.author: mcleans
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows10, UWP, Anzeigen, Werbung, Video, Planer, JavaScript
ms.openlocfilehash: 834547db2d58291e3bbf75a738d9775e25fbb8e5
ms.sourcegitcommit: 9d1ca16a7edcbbcae03fad50a4a10183a319c63a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 06/09/2017
---
# <a name="show-ads-in-video-content"></a><span data-ttu-id="4c230-104">Anzeigen von Werbung in Videoinhalten</span><span class="sxs-lookup"><span data-stu-id="4c230-104">Show ads in video content</span></span>


<span data-ttu-id="4c230-105">In dieser exemplarischen Vorgehensweise wird veranschaulicht, wie Sie die [AdScheduler](https://msdn.microsoft.com/library/windows/apps/mt732197.aspx)-Klasse zum Anzeigen von Videoinhalten in einer App für die universelle Windows-Plattform (UWP) verwenden, die mit JavaScript und HTML geschrieben wurde.</span><span class="sxs-lookup"><span data-stu-id="4c230-105">This walkthrough shows how to use the [AdScheduler](https://msdn.microsoft.com/library/windows/apps/mt732197.aspx) class to show ads in video content in a Universal Windows Platform (UWP) app that was written using JavaScript with HTML.</span></span>

> [!NOTE]
> <span data-ttu-id="4c230-106">Diese Funktion wird derzeit nur für UWP-Apps unterstützt, die mit JavaScript und HTML geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="4c230-106">This feature is currently supported only for UWP apps that are written using JavaScript with HTML.</span></span>

<span data-ttu-id="4c230-107">[AdScheduler](https://msdn.microsoft.com/library/windows/apps/mt732197.aspx) funktioniert mit progressiven Medien und Streamingmedien und nutzt Video Ad Serving Template (VAST) 2.0/3.0 nach IAB-Standard und VMAP-Nutzlastformate.</span><span class="sxs-lookup"><span data-stu-id="4c230-107">[AdScheduler](https://msdn.microsoft.com/library/windows/apps/mt732197.aspx) works with both progressive and streaming media, and uses IAB standard Video Ad Serving Template (VAST) 2.0/3.0 and VMAP payload formats.</span></span> <span data-ttu-id="4c230-108">Durch die Verwendung von Standards ist [AdScheduler](https://msdn.microsoft.com/library/windows/apps/mt732197.aspx) agnostisch gegenüber dem Anzeigendienst, mit dem die Interaktion erfolgt.</span><span class="sxs-lookup"><span data-stu-id="4c230-108">By using standards, [AdScheduler](https://msdn.microsoft.com/library/windows/apps/mt732197.aspx) is agnostic to the ad service with which it interacts.</span></span>

<span data-ttu-id="4c230-109">Werbung für Videoinhalte variiert in Abhängigkeit davon, ob das Programm kürzer als zehn Minuten (kurzes Format) oder länger als zehn Minuten (langes Format) ist.</span><span class="sxs-lookup"><span data-stu-id="4c230-109">Advertising for video content differs based upon whether the program is under ten minutes (short form), or over ten minutes (long form).</span></span> <span data-ttu-id="4c230-110">Die Einrichtung des letzteren Formats für den Dienst ist zwar komplizierter, aber es besteht eigentlich kein Unterschied darin, wie der clientseitige Code geschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="4c230-110">Although the latter is more complicated to set up on the service, there is actually no difference in how one writes the client side code.</span></span> <span data-ttu-id="4c230-111">Wenn [AdScheduler](https://msdn.microsoft.com/library/windows/apps/mt732197.aspx) eine VAST-Nutzlast mit einer einzelnen Werbeanzeige anstelle eines Manifests empfängt, wird dies so behandelt, als ob das Manifest eine einzelne Pre-Roll-Anzeige (eine Unterbrechung bei 00:00) aufgerufen hat.</span><span class="sxs-lookup"><span data-stu-id="4c230-111">If the [AdScheduler](https://msdn.microsoft.com/library/windows/apps/mt732197.aspx) receives a VAST payload with a single ad instead of a manifest, it is treated as if the manifest called for a single pre-roll ad (one break at time 00:00).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="4c230-112">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="4c230-112">Prerequisites</span></span>

* <span data-ttu-id="4c230-113">Installieren Sie das [Microsoft Advertising-SDK](http://aka.ms/ads-sdk-uwp) mit Visual Studio2015 oder einer neueren Version.</span><span class="sxs-lookup"><span data-stu-id="4c230-113">Install the [Microsoft Advertising SDK](http://aka.ms/ads-sdk-uwp) with Visual Studio 2015 or a later release.</span></span>

* <span data-ttu-id="4c230-114">In Ihrem Projekt muss das [MediaPlayer](https://github.com/Microsoft/TVHelpers/wiki/MediaPlayer-Overview)-Steuerelement verwendet werden, um die Videoinhalte bereitstellen zu können, für die die Anzeigen eingeplant werden.</span><span class="sxs-lookup"><span data-stu-id="4c230-114">Your project must use the [MediaPlayer](https://github.com/Microsoft/TVHelpers/wiki/MediaPlayer-Overview) control to serve the video content in which the ads will be scheduled.</span></span> <span data-ttu-id="4c230-115">Dieses Steuerelement ist in der Bibliotheksammlung [TVHelpers](https://github.com/Microsoft/TVHelpers) von Microsoft auf GitHub verfügbar.</span><span class="sxs-lookup"><span data-stu-id="4c230-115">This control is available in the [TVHelpers](https://github.com/Microsoft/TVHelpers) collection of libraries available from Microsoft on GitHub.</span></span>

  <span data-ttu-id="4c230-116">Das folgende Beispiel zeigt, wie Sie einen [MediaPlayer](https://github.com/Microsoft/TVHelpers/wiki/MediaPlayer-Overview) im HTML-Markup deklarieren.</span><span class="sxs-lookup"><span data-stu-id="4c230-116">The following example shows how to declare a [MediaPlayer](https://github.com/Microsoft/TVHelpers/wiki/MediaPlayer-Overview) in HTML markup.</span></span> <span data-ttu-id="4c230-117">Dieser Markupcode gehört normalerweise in den Abschnitt `<body>` in der Datei „index.html“ (oder einer anderen HTML-Datei, je nach Eignung für Ihr Projekt).</span><span class="sxs-lookup"><span data-stu-id="4c230-117">Typically, this markup belongs in the `<body>` section in the index.html file (or another html file as appropriate for your project).</span></span>

  ``` html
  <div id="MediaPlayerDiv" data-win-control="TVJS.MediaPlayer">
    <video src="URL to your content">
    </video>
  </div>
  ```

  <span data-ttu-id="4c230-118">Im folgenden Beispiel wird veranschaulicht, wie Sie einen [MediaPlayer](https://github.com/Microsoft/TVHelpers/wiki/MediaPlayer-Overview) in JavaScript-Code einrichten.</span><span class="sxs-lookup"><span data-stu-id="4c230-118">The following example shows how to establish a [MediaPlayer](https://github.com/Microsoft/TVHelpers/wiki/MediaPlayer-Overview) in JavaScript code.</span></span>

  [!code-javascript[<span data-ttu-id="4c230-119">TrialVersion</span><span class="sxs-lookup"><span data-stu-id="4c230-119">TrialVersion</span></span>](./code/AdvertisingSamples/AdSchedulerSamples/js/js/main.js#Snippet1)]

## <a name="how-to-use-the-adscheduler-class-in-your-code"></a><span data-ttu-id="4c230-120">Verwenden der AdScheduler-Klasse im Code</span><span class="sxs-lookup"><span data-stu-id="4c230-120">How to use the AdScheduler class in your code</span></span>

1. <span data-ttu-id="4c230-121">Öffnen Sie in Visual Studio Ihr Projekt, oder erstellen Sie ein neues Projekt.</span><span class="sxs-lookup"><span data-stu-id="4c230-121">In Visual Studio, open your project or create a new project.</span></span>

2. <span data-ttu-id="4c230-122">Sollte in Ihrem Projekt die Zielplattform **ANYCPU** definiert sein, müssen Sie eine architekturspezifische Buildausgabe verwenden (z. B. **X86**) und das Projekt entsprechend aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="4c230-122">If your project targets **Any CPU**, update your project to use an architecture-specific build output (for example, **x86**).</span></span> <span data-ttu-id="4c230-123">Sollte in Ihrem Projekt die Zielplattform **ANYCPU** definiert sein, können Sie bei den folgenden Schritten keinen Verweis auf die Microsoft Advertising-Bibliotheken hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="4c230-123">If your project targets **Any CPU**, you will not be able to successfully add a reference to the Microsoft advertising library in the following steps.</span></span> <span data-ttu-id="4c230-124">Weitere Informationen finden Sie unter [Referenzfehler, die durch die Ausrichtung auf eine beliebige CPU (Any CPU) in Ihrem Projekt verursacht werden](known-issues-for-the-advertising-libraries.md#reference_errors).</span><span class="sxs-lookup"><span data-stu-id="4c230-124">For more information, see [Reference errors caused by targeting Any CPU in your project](known-issues-for-the-advertising-libraries.md#reference_errors).</span></span>

3. <span data-ttu-id="4c230-125">Fügen Sie Ihrem Projekt einen Verweis auf die Bibliothek **Microsoft Advertising SDK für JavaScript** hinzu.</span><span class="sxs-lookup"><span data-stu-id="4c230-125">Add a reference to the **Microsoft Advertising SDK for JavaScript** library to your project.</span></span>

  <span data-ttu-id="4c230-126">a.</span><span class="sxs-lookup"><span data-stu-id="4c230-126">a.</span></span> <span data-ttu-id="4c230-127">Klicken Sie im **Projektmappen-Explorer** mit der rechten Maustaste auf **Verweise**, und wählen Sie **Verweis hinzufügen...** aus.</span><span class="sxs-lookup"><span data-stu-id="4c230-127">From the **Solution Explorer** window, right click **References**, and select **Add Reference…**</span></span>

  <span data-ttu-id="4c230-128">b.</span><span class="sxs-lookup"><span data-stu-id="4c230-128">b.</span></span> <span data-ttu-id="4c230-129">Erweitern Sie im **Verweis-Manager** den Knoten **Universal Windows**, klicken Sie auf **Erweiterungen**, und wählen Sie dann das Kontrollkästchen neben **Microsoft Advertising SDK für JavaScript** (Version10.0).</span><span class="sxs-lookup"><span data-stu-id="4c230-129">In **Reference Manager**, expand **Universal Windows**, click **Extensions**, and then select the check box next to **Microsoft Advertising SDK for JavaScript** (Version 10.0).</span></span>

  <span data-ttu-id="4c230-130">c.</span><span class="sxs-lookup"><span data-stu-id="4c230-130">c.</span></span> <span data-ttu-id="4c230-131">Klicken Sie im **Verweis-Manager** auf „OK“.</span><span class="sxs-lookup"><span data-stu-id="4c230-131">In **Reference Manager**, click OK.</span></span>

4.  <span data-ttu-id="4c230-132">Fügen Sie dem Projekt die Datei „AdScheduler.js“ hinzu:</span><span class="sxs-lookup"><span data-stu-id="4c230-132">Add the AdScheduler.js file to your project:</span></span>

  <span data-ttu-id="4c230-133">a.</span><span class="sxs-lookup"><span data-stu-id="4c230-133">a.</span></span>  <span data-ttu-id="4c230-134">Klicken Sie in Visual Studio auf **Projekt** und **NuGet-Pakete verwalten**.</span><span class="sxs-lookup"><span data-stu-id="4c230-134">In Visual Studio, click **Project** and **Manage NuGet Packages**.</span></span>

  <span data-ttu-id="4c230-135">b.</span><span class="sxs-lookup"><span data-stu-id="4c230-135">b.</span></span>  <span data-ttu-id="4c230-136">Geben Sie im Suchfeld den Suchbegriff **Microsoft.StoreServices.VideoAdScheduler** ein, und installieren Sie das Microsoft.StoreServices.VideoAdScheduler-Paket.</span><span class="sxs-lookup"><span data-stu-id="4c230-136">In the search box, type **Microsoft.StoreServices.VideoAdScheduler** and install the Microsoft.StoreServices.VideoAdScheduler package.</span></span> <span data-ttu-id="4c230-137">Die Datei „AdScheduler.js“ wird dem Unterverzeichnis „../js“ Ihres Projekts hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="4c230-137">The AdScheduler.js file is added to the ../js subdirectory in your project.</span></span>

5.  <span data-ttu-id="4c230-138">Öffnen Sie die Datei „index.html“ (oder je nach Projekt eine andere HTML-Datei).</span><span class="sxs-lookup"><span data-stu-id="4c230-138">Open the index.html file (or other html file as appropriate for your project).</span></span> <span data-ttu-id="4c230-139">Fügen Sie im Abschnitt `<head>` nach den JavaScript-Verweisen auf „default.css“ und „main.js“ des Projekts den Verweis auf „ad.js“ und „adscheduler.js“ hinzu.</span><span class="sxs-lookup"><span data-stu-id="4c230-139">In the `<head>` section, after the project’s JavaScript references of default.css and main.js, add the reference to ad.js and adscheduler.js.</span></span>

  ``` html
  <script src="//Microsoft.Advertising.JavaScript/ad.js"></script>
  <script src="/js/adscheduler.js"></script>
  ```

  <span/>
  > <span data-ttu-id="4c230-140">**Hinweis**&nbsp;&nbsp;Diese Zeile muss im Bereich `<head>` nach der Datei „main.js“ platziert werden. Andernfalls tritt bei der Erstellung des Projekts ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="4c230-140">**Note**&nbsp;&nbsp;This line must be placed in the `<head>` section after the include of main.js; otherwise, you will encounter an error when you build your project.</span></span>

6.  <span data-ttu-id="4c230-141">Fügen Sie der Datei „main.js“ des Projekts Code hinzu, mit dem ein neues [AdScheduler](https://msdn.microsoft.com/library/windows/apps/mt732197.aspx)-Objekt erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="4c230-141">In the main.js file in your project, add code that creates a new [AdScheduler](https://msdn.microsoft.com/library/windows/apps/mt732197.aspx) object.</span></span> <span data-ttu-id="4c230-142">Übergeben Sie den **MediaPlayer**, mit dem Ihre Videoinhalte gehostet werden.</span><span class="sxs-lookup"><span data-stu-id="4c230-142">Pass in the **MediaPlayer** that hosts your video content.</span></span> <span data-ttu-id="4c230-143">Der Code muss so angeordnet werden, dass er nach [WinJS.UI.processAll](https://msdn.microsoft.com/library/windows/apps/hh440975.aspx) ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="4c230-143">The code must be placed so that it runs after [WinJS.UI.processAll](https://msdn.microsoft.com/library/windows/apps/hh440975.aspx).</span></span>

  [!code-javascript[<span data-ttu-id="4c230-144">TrialVersion</span><span class="sxs-lookup"><span data-stu-id="4c230-144">TrialVersion</span></span>](./code/AdvertisingSamples/AdSchedulerSamples/js/js/main.js#Snippet2)]

7.  <span data-ttu-id="4c230-145">Verwenden Sie die Methode [requestSchedule](https://msdn.microsoft.com/library/windows/apps/mt732208.aspx) oder [requestScheduleByUrl](https://msdn.microsoft.com/library/windows/apps/mt732210.aspx), um einen Anzeigenzeitplan vom Server anzufordern und in die **MediaPlayer**-Zeitachse einzufügen. Anschließend werden die Videomedien wiedergegeben.</span><span class="sxs-lookup"><span data-stu-id="4c230-145">Use the [requestSchedule](https://msdn.microsoft.com/library/windows/apps/mt732208.aspx) or [requestScheduleByUrl](https://msdn.microsoft.com/library/windows/apps/mt732210.aspx) methods to request an ad schedule from the server and insert it into the **MediaPlayer** timeline, and then play the video media.</span></span>

  * <span data-ttu-id="4c230-146">Wenn Sie Microsoft-Partner sind und eine Berechtigung zum Anfordern eines Anzeigenzeitplans vom Microsoft-Anzeigenserver erhalten haben, können Sie [requestSchedule](https://msdn.microsoft.com/library/windows/apps/mt732208.aspx) verwenden und die IDs für die Anwendung und die Anzeigeneinheit angeben, die von Ihrem Microsoft-Vertreter bereitgestellt wurden.</span><span class="sxs-lookup"><span data-stu-id="4c230-146">If you are a Microsoft partner who has received permission to request an ad schedule from the Microsoft ad server, use [requestSchedule](https://msdn.microsoft.com/library/windows/apps/mt732208.aspx) and specify the application ID and ad unit ID that were provided to you by your Microsoft representative.</span></span> <span data-ttu-id="4c230-147">Bei dieser Methode handelt es sich um eine **Zusage**. Dies ist ein asynchrones Konstrukt, bei dem zwei Funktionszeiger übergeben werden, um jeweils den Erfolgs- bzw. Fehlerfall zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="4c230-147">This method takes the form of a **Promise**, which is an asynchronous construct where two function pointers are passed to handle the success and failure cases, respectively.</span></span> <span data-ttu-id="4c230-148">Weitere Informationen finden Sie unter [Asynchrone Muster in UWP mit JavaScript](https://msdn.microsoft.com/windows/uwp/threading-async/asynchronous-programming-universal-windows-platform-apps#asynchronous-patterns-in-uwp-using-javascript).</span><span class="sxs-lookup"><span data-stu-id="4c230-148">For more information, see [Asynchronous patterns in UWP using JavaScript](https://msdn.microsoft.com/windows/uwp/threading-async/asynchronous-programming-universal-windows-platform-apps#asynchronous-patterns-in-uwp-using-javascript).</span></span>

      [!code-javascript[<span data-ttu-id="4c230-149">TrialVersion</span><span class="sxs-lookup"><span data-stu-id="4c230-149">TrialVersion</span></span>](./code/AdvertisingSamples/AdSchedulerSamples/js/js/main.js#Snippet3)]

  * <span data-ttu-id="4c230-150">Verwenden Sie zum Anfordern eines Anzeigenzeitplans von einem anderen Server als dem Microsoft-Anzeigenserver [requestScheduleByUrl](https://msdn.microsoft.com/library/windows/apps/mt732210.aspx), und übergeben Sie die Server-URL.</span><span class="sxs-lookup"><span data-stu-id="4c230-150">To request an ad schedule from a non-Microsoft ad server, use [requestScheduleByUrl](https://msdn.microsoft.com/library/windows/apps/mt732210.aspx), and pass in the server URL.</span></span> <span data-ttu-id="4c230-151">Diese Methode ist ebenfalls eine **Zusage**.</span><span class="sxs-lookup"><span data-stu-id="4c230-151">This method also takes the form of a **Promise**.</span></span>

      [!code-javascript[<span data-ttu-id="4c230-152">TrialVersion</span><span class="sxs-lookup"><span data-stu-id="4c230-152">TrialVersion</span></span>](./code/AdvertisingSamples/AdSchedulerSamples/js/js/main.js#Snippet4)]

    <span/>
    ><span data-ttu-id="4c230-153">**Hinweis**&nbsp;&nbsp;Sie müssen **play** auch aufrufen, wenn für die Funktion ein Fehler auftritt. [AdScheduler](https://msdn.microsoft.com/library/windows/apps/mt732197.aspx) weist **MediaPlayer** nämlich an, dass die Anzeigen übersprungen werden sollen und direkt zum Inhalt navigiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="4c230-153">**Note**&nbsp;&nbsp;You must call **play** even if the function fails, because the [AdScheduler](https://msdn.microsoft.com/library/windows/apps/mt732197.aspx) will tell the **MediaPlayer** to skip the ad(s) and move straight to the content.</span></span> <span data-ttu-id="4c230-154">Unter Umständen besteht bei Ihnen auch eine andere geschäftliche Anforderung, z.B. das Einfügen einer integrierten Anzeige, falls eine Anzeige nicht erfolgreich von einem Remotestandort abgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="4c230-154">You may have a different business requirement, such as inserting a built-in ad if an ad can't be successfully fetched remotely.</span></span>

8.  <span data-ttu-id="4c230-155">Während der Wiedergabe können Sie zusätzliche Ereignisse verarbeiten, mit denen Ihre App den Status bzw. Fehler nachverfolgen kann, die nach dem ersten Anzeigenabgleich auftreten.</span><span class="sxs-lookup"><span data-stu-id="4c230-155">During playback, you can handle additional events that let your app track progress and/or errors which may occur after the initial ad matching process.</span></span> <span data-ttu-id="4c230-156">Der folgende Code zeigt einige dieser Ereignisse, einschließlich [onPodStart](https://msdn.microsoft.com/library/windows/apps/mt732206.aspx), [onPodEnd](https://msdn.microsoft.com/library/windows/apps/mt732205.aspx), [onPodCountdown](https://msdn.microsoft.com/library/windows/apps/mt732204.aspx), [onAdProgress](https://msdn.microsoft.com/library/windows/apps/mt732201.aspx), [onAllComplete](https://msdn.microsoft.com/library/windows/apps/mt732202.aspx) und [onErrorOccurred](https://msdn.microsoft.com/library/windows/apps/mt732203.aspx).</span><span class="sxs-lookup"><span data-stu-id="4c230-156">The following code shows some of these events, including [onPodStart](https://msdn.microsoft.com/library/windows/apps/mt732206.aspx), [onPodEnd](https://msdn.microsoft.com/library/windows/apps/mt732205.aspx), [onPodCountdown](https://msdn.microsoft.com/library/windows/apps/mt732204.aspx), [onAdProgress](https://msdn.microsoft.com/library/windows/apps/mt732201.aspx), [onAllComplete](https://msdn.microsoft.com/library/windows/apps/mt732202.aspx), and [onErrorOccurred](https://msdn.microsoft.com/library/windows/apps/mt732203.aspx).</span></span>

  [!code-javascript[<span data-ttu-id="4c230-157">TrialVersion</span><span class="sxs-lookup"><span data-stu-id="4c230-157">TrialVersion</span></span>](./code/AdvertisingSamples/AdSchedulerSamples/js/js/main.js#Snippet5)]
