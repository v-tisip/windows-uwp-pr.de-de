---
ms.assetid: B356C442-998F-4B2C-B550-70070C5E4487
description: Erfahren Sie, wie Sie den Windows.Services.Store-Namespace verwenden, um eine App oder ein Add-on zu erwerben.
title: Aktivieren von In-App-Käufen von Apps und Add-Ons
keywords: windows10, uwp, add-ons, in-app-käufe, IAPs, Windows.Services.Store
ms.date: 08/25/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: a64a52005221c418ea82e8fffa9ecf94b6d1bef3
ms.sourcegitcommit: d7613c791107f74b6a3dc12a372d9de916c0454b
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/05/2018
ms.locfileid: "8731432"
---
# <a name="enable-in-app-purchases-of-apps-and-add-ons"></a><span data-ttu-id="dfe84-104">Aktivieren von In-App-Käufen von Apps und Add-Ons</span><span class="sxs-lookup"><span data-stu-id="dfe84-104">Enable in-app purchases of apps and add-ons</span></span>

<span data-ttu-id="dfe84-105">In diesem Artikel wird veranschaulicht, wie Sie Mitglieder im [Windows.Services.Store](https://msdn.microsoft.com/library/windows/apps/windows.services.store.aspx)-Namespace verwenden, um für den Benutzer den Kauf der aktuellen App oder eines ihrer Add-Ons anzufordern.</span><span class="sxs-lookup"><span data-stu-id="dfe84-105">This article demonstrates how to use members in the [Windows.Services.Store](https://msdn.microsoft.com/library/windows/apps/windows.services.store.aspx) namespace to request the purchase the current app or one of its add-ons for the user.</span></span> <span data-ttu-id="dfe84-106">Wenn der Benutzer beispielsweise aktuell über eine Testversion der App verfügt, können Sie diesen Vorgang verwenden, um für den Benutzer eine Volllizenz zu erwerben.</span><span class="sxs-lookup"><span data-stu-id="dfe84-106">For example, if the user currently has a trial version of the app, you can use this process to purchase a full license for the user.</span></span> <span data-ttu-id="dfe84-107">Alternativ können Sie diesen Prozess auch verwenden, um für den Benutzer ein Add-On wie z.B. ein neues Gamelevel zu erwerben.</span><span class="sxs-lookup"><span data-stu-id="dfe84-107">Alternatively, you can use this process to purchase an add-on, such as a new game level for the user.</span></span>

<span data-ttu-id="dfe84-108">Um den Kauf einer App oder eines Add-Ons anzufordern, bietet der [Windows.Services.Store](https://msdn.microsoft.com/library/windows/apps/windows.services.store.aspx)-Namespace verschiedene Methoden:</span><span class="sxs-lookup"><span data-stu-id="dfe84-108">To request the purchase of an app or add-on, the [Windows.Services.Store](https://msdn.microsoft.com/library/windows/apps/windows.services.store.aspx) namespace provides several different methods:</span></span>
* <span data-ttu-id="dfe84-109">Wenn Sie die [Store-ID](in-app-purchases-and-trials.md#store_ids) der App bzw. des Add-Ons kennen, verwenden Sie die [RequestPurchaseAsync](https://docs.microsoft.com/uwp/api/windows.services.store.storecontext.requestpurchaseasync)-Methode der [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx)-Klasse.</span><span class="sxs-lookup"><span data-stu-id="dfe84-109">If you know the [Store ID](in-app-purchases-and-trials.md#store_ids) of the app or add-on, you can use the [RequestPurchaseAsync](https://docs.microsoft.com/uwp/api/windows.services.store.storecontext.requestpurchaseasync) method of the [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx) class.</span></span>
* <span data-ttu-id="dfe84-110">Wenn Sie bereits über ein [**StoreProduct**](in-app-purchases-and-trials.md#products-skus)-, **StoreSku**- oder **StoreAvailability**-Objekt verfügen, das die App bzw. das Add-On darstellt, können Sie die **RequestPurchaseAsync**-Methoden dieser Objekte verwenden.</span><span class="sxs-lookup"><span data-stu-id="dfe84-110">If you already have a [**StoreProduct**, **StoreSku**, or **StoreAvailability** object](in-app-purchases-and-trials.md#products-skus) that represents the app or add-on, you can use the **RequestPurchaseAsync** methods of these objects.</span></span> <span data-ttu-id="dfe84-111">Beispiele für die verschiedenen Methoden zum Abrufen einer **StoreProduct** in Ihrem Code finden Sie unter [Abrufen von Produktinformationen für Apps und Add-Ons](get-product-info-for-apps-and-add-ons.md).</span><span class="sxs-lookup"><span data-stu-id="dfe84-111">For examples of different ways to retrieve a **StoreProduct** in your code, see [Get product info for apps and add-ons](get-product-info-for-apps-and-add-ons.md).</span></span>

<span data-ttu-id="dfe84-112">Jede Methode zeigt dem Benutzer eine Standardbenutzeroberfläche für den Einkauf an und führt den Vorgang nach Abschluss der Transaktion asynchron aus.</span><span class="sxs-lookup"><span data-stu-id="dfe84-112">Each method presents a standard purchase UI to the user and then completes asynchronously after the transaction is complete.</span></span> <span data-ttu-id="dfe84-113">Die Methode gibt ein Objekt zurück, das angibt, ob die Transaktion erfolgreich war.</span><span class="sxs-lookup"><span data-stu-id="dfe84-113">The method returns an object that indicates whether the transaction was successful.</span></span>

> [!NOTE]
> <span data-ttu-id="dfe84-114">Der **Windows.Services.Store**-Namespace wurde in Windows10, Version 1607, eingeführt und kann nur in Projekten für die **Windows10 Anniversary Edition (10.0; Build 14393)** oder einer neueren Version in Visual Studio verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="dfe84-114">The **Windows.Services.Store** namespace was introduced in Windows 10, version 1607, and it can only be used in projects that target **Windows 10 Anniversary Edition (10.0; Build 14393)** or a later release in Visual Studio.</span></span> <span data-ttu-id="dfe84-115">Wenn Ihre App für eine frühere Version von Windows 10 geeignet ist, müssen Sie den [Windows.ApplicationModel.Store](https://msdn.microsoft.com/library/windows/apps/windows.applicationmodel.store.aspx)-Namespace anstelle des **Windows.Services.Store**-Namespace verwenden.</span><span class="sxs-lookup"><span data-stu-id="dfe84-115">If your app targets an earlier version of Windows 10, you must use the [Windows.ApplicationModel.Store](https://msdn.microsoft.com/library/windows/apps/windows.applicationmodel.store.aspx) namespace instead of the **Windows.Services.Store** namespace.</span></span> <span data-ttu-id="dfe84-116">Weitere Informationen finden Sie in [diesem Artikel](in-app-purchases-and-trials-using-the-windows-applicationmodel-store-namespace.md).</span><span class="sxs-lookup"><span data-stu-id="dfe84-116">For more information, see [this article](in-app-purchases-and-trials-using-the-windows-applicationmodel-store-namespace.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="dfe84-117">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="dfe84-117">Prerequisites</span></span>

<span data-ttu-id="dfe84-118">Für dieses Beispiel gelten die folgenden Voraussetzungen:</span><span class="sxs-lookup"><span data-stu-id="dfe84-118">This example has the following prerequisites:</span></span>
* <span data-ttu-id="dfe84-119">Ein Visual Studio-Projekt für eine UWP (Universelle Windows-Plattform)-App, die für **Windows 10 Anniversary Edition (10.0; Build 14393)** oder höher, geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="dfe84-119">A Visual Studio project for a Universal Windows Platform (UWP) app that targets **Windows 10 Anniversary Edition (10.0; Build 14393)** or a later release.</span></span>
* <span data-ttu-id="dfe84-120">Sie haben [eine app-Übermittlung erstellt haben](https://msdn.microsoft.com/windows/uwp/publish/app-submissions) , im Partner Center und diese app im Store veröffentlicht ist.</span><span class="sxs-lookup"><span data-stu-id="dfe84-120">You have [created an app submission](https://msdn.microsoft.com/windows/uwp/publish/app-submissions) in Partner Center and this app is published in the Store.</span></span> <span data-ttu-id="dfe84-121">Optional können Sie die App so konfigurieren, daher sie während der Tests im Store nicht auffindbar ist.</span><span class="sxs-lookup"><span data-stu-id="dfe84-121">You can optionally configure the app so it is not discoverable in the Store while you test it.</span></span> <span data-ttu-id="dfe84-122">Weitere Informationen finden Sie unter [Hinweise für Tests](in-app-purchases-and-trials.md#testing).</span><span class="sxs-lookup"><span data-stu-id="dfe84-122">For more information, see our [testing guidance](in-app-purchases-and-trials.md#testing).</span></span>
* <span data-ttu-id="dfe84-123">Wenn Sie in-app-Käufe für ein Add-on für die app aktivieren möchten, müssen Sie auch [das Add-on im Partner Center erstellen](../publish/add-on-submissions.md).</span><span class="sxs-lookup"><span data-stu-id="dfe84-123">If you want to enable in-app purchases for an add-on for the app, you must also [create the add-on in Partner Center](../publish/add-on-submissions.md).</span></span>

<span data-ttu-id="dfe84-124">Der Code in diesem Beispiel geht von folgenden Voraussetzungen aus:</span><span class="sxs-lookup"><span data-stu-id="dfe84-124">The code in this example assumes:</span></span>
* <span data-ttu-id="dfe84-125">Die Ausführung des Codes erfolgt im Kontext einer [Seite](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.page.aspx), die einen [ProgressRing](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.progressring.aspx) mit dem Namen ```workingProgressRing``` und einen [TextBlock](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.textblock.aspx) mit dem Namen ```textBlock``` enthält.</span><span class="sxs-lookup"><span data-stu-id="dfe84-125">The code runs in the context of a [Page](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.page.aspx) that contains a [ProgressRing](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.progressring.aspx) named ```workingProgressRing``` and a [TextBlock](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.textblock.aspx) named ```textBlock```.</span></span> <span data-ttu-id="dfe84-126">Diese Objekte werden verwendet, um anzugeben, dass ein asynchroner Vorgang ausgeführt wird, bzw. um Ausgabemeldungen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="dfe84-126">These objects are used to indicate that an asynchronous operation is occurring and to display output messages, respectively.</span></span>
* <span data-ttu-id="dfe84-127">Die Codedatei enthält eine **using**-Anweisung für den **Windows.Services.Store**-Namespace.</span><span class="sxs-lookup"><span data-stu-id="dfe84-127">The code file has a **using** statement for the **Windows.Services.Store** namespace.</span></span>
* <span data-ttu-id="dfe84-128">Die App ist eine Einzelbenutzer-App, die nur im Kontext des Benutzers ausgeführt wird, der die App gestartet hat.</span><span class="sxs-lookup"><span data-stu-id="dfe84-128">The app is a single-user app that runs only in the context of the user that launched the app.</span></span> <span data-ttu-id="dfe84-129">Weitere Informationen finden Sie unter [In-App-Käufe und Testversionen](in-app-purchases-and-trials.md#api_intro).</span><span class="sxs-lookup"><span data-stu-id="dfe84-129">For more information, see [In-app purchases and trials](in-app-purchases-and-trials.md#api_intro).</span></span>

> [!NOTE]
> <span data-ttu-id="dfe84-130">Wenn Sie über eine Desktopanwendung verfügen, die die [Desktop-Brücke](https://developer.microsoft.com/windows/bridges/desktop) verwendet, müssen Sie möglicherweise zusätzlichen, in diesem Beispiel nicht aufgeführten Code hinzufügen, um das [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx)-Objekt zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="dfe84-130">If you have a desktop application that uses the [Desktop Bridge](https://developer.microsoft.com/windows/bridges/desktop), you may need to add additional code not shown in this example to configure the [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx) object.</span></span> <span data-ttu-id="dfe84-131">Weitere Informationen finden Sie unter [Verwenden der StoreContext-Klasse in einer Desktopanwendung, die die Desktop-Brücke verwendet](in-app-purchases-and-trials.md#desktop).</span><span class="sxs-lookup"><span data-stu-id="dfe84-131">For more information, see [Using the StoreContext class in a desktop application that uses the Desktop Bridge](in-app-purchases-and-trials.md#desktop).</span></span>

## <a name="code-example"></a><span data-ttu-id="dfe84-132">Codebeispiel</span><span class="sxs-lookup"><span data-stu-id="dfe84-132">Code example</span></span>

<span data-ttu-id="dfe84-133">In diesem Beispiel wird die Verwendung der [RequestPurchaseAsync](https://docs.microsoft.com/uwp/api/windows.services.store.storecontext.requestpurchaseasync)-Methode der [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx)-Klasse veranschaulicht, um eine App oder ein Add-On mit bekannter [Store-ID](in-app-purchases-and-trials.md#store-ids) zu erwerben.</span><span class="sxs-lookup"><span data-stu-id="dfe84-133">This example demonstrates how to use the [RequestPurchaseAsync](https://docs.microsoft.com/uwp/api/windows.services.store.storecontext.requestpurchaseasync) method of the [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx) class to purchase an app or add-on with a known [Store ID](in-app-purchases-and-trials.md#store-ids).</span></span> <span data-ttu-id="dfe84-134">Eine vollständige Beispielanwendung finden Sie im [Store-Beispiel](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/Store).</span><span class="sxs-lookup"><span data-stu-id="dfe84-134">For a complete sample application, see the [Store sample](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/Store).</span></span>

> [!div class="tabbedCodeSnippets"]
[!code-cs[EnablePurchases](./code/InAppPurchasesAndLicenses_RS1/cs/PurchaseAddOnPage.xaml.cs#PurchaseAddOn)]

## <a name="video"></a><span data-ttu-id="dfe84-135">Video</span><span class="sxs-lookup"><span data-stu-id="dfe84-135">Video</span></span>

<span data-ttu-id="dfe84-136">Sehen Sie sich das folgende Video mit einer Übersicht über In-App-Käufe in Ihrer App an.</span><span class="sxs-lookup"><span data-stu-id="dfe84-136">Watch the following video for an overview of how to implement in-app purchases in your app.</span></span>
<br/>
<br/>
> [!VIDEO https://channel9.msdn.com/Blogs/One-Dev-Minute/Adding-In-App-Purchases-to-Your-UWP-App/player]

## <a name="related-topics"></a><span data-ttu-id="dfe84-137">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="dfe84-137">Related topics</span></span>

* [<span data-ttu-id="dfe84-138">In-App-Käufe und Testversionen</span><span class="sxs-lookup"><span data-stu-id="dfe84-138">In-app purchases and trials</span></span>](in-app-purchases-and-trials.md)
* [<span data-ttu-id="dfe84-139">Abrufen von Produktinformationen zu Apps und Add-Ons</span><span class="sxs-lookup"><span data-stu-id="dfe84-139">Get product info for apps and add-ons</span></span>](get-product-info-for-apps-and-add-ons.md)
* [<span data-ttu-id="dfe84-140">Abrufen von Lizenzinformationen zu Apps und Add-Ons</span><span class="sxs-lookup"><span data-stu-id="dfe84-140">Get license info for apps and add-ons</span></span>](get-license-info-for-apps-and-add-ons.md)
* [<span data-ttu-id="dfe84-141">Unterstützen von Käufen konsumierbarer Add-Ons</span><span class="sxs-lookup"><span data-stu-id="dfe84-141">Enable consumable add-on purchases</span></span>](enable-consumable-add-on-purchases.md)
* [<span data-ttu-id="dfe84-142">Implementieren einer Testversion der App</span><span class="sxs-lookup"><span data-stu-id="dfe84-142">Implement a trial version of your app</span></span>](implement-a-trial-version-of-your-app.md)
* [<span data-ttu-id="dfe84-143">Store-Beispiel</span><span class="sxs-lookup"><span data-stu-id="dfe84-143">Store sample</span></span>](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/Store)
