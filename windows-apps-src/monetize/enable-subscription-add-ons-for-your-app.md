---
author: mcleanbyron
description: Erfahren Sie, wie Sie den Windows.Services.Store-Namespace verwenden, um mit abonnementbasierte Add-Ons zu implementieren.
title: Aktivieren von Abonnements für Add-Ons für Ihre App
keywords: Windows10, UWP, Abonnements, Lizenzen, Apps, Add-Ons, In-App-Einkäufe, IAPs, Windows.Services.Store
ms.author: mcleans
ms.date: 12/06/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
ms.localizationpriority: medium
ms.openlocfilehash: 59a85512eacf880b61b3245726f4d15bb359a7ad
ms.sourcegitcommit: 2470c6596d67e1f5ca26b44fad56a2f89773e9cc
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/22/2018
ms.locfileid: "1674887"
---
# <a name="enable-subscription-add-ons-for-your-app"></a><span data-ttu-id="7d0e6-104">Aktivieren von Abonnements für Add-Ons für Ihre App</span><span class="sxs-lookup"><span data-stu-id="7d0e6-104">Enable subscription add-ons for your app</span></span>

<span data-ttu-id="7d0e6-105">Ihre Universelle Windows-Plattform-App (UWP) bietet In-App-Käufen von *abonnementbasierte* Add-Ons für Ihre Kunden an.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-105">Your Universal Windows Platform (UWP) app can offer in-app purchases of *subscription* add-ons to your customers.</span></span> <span data-ttu-id="7d0e6-106">Sie können Abonnements nutzen, um digitale Produkte in Ihrer App zu verkaufen (z.B. App-Features oder digitale Inhalte), die mit einer automatisierten wiederkehrenden Abrechnung arbeiten.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-106">You can use subscriptions to sell digital products in your app (such as app features or digital content) with automated recurring billing periods.</span></span>

> [!NOTE]
> <span data-ttu-id="7d0e6-107">Um den Kauf des Abonnements von Add-Ons in Ihrer App zu aktivieren, muss Ihr Projekt für **Windows10 Anniversary Edition (10.0; Build 14393)** oder eine höhere Version in Visual Studio entwickelt sein (dies entspricht Windows10, Version 1607). Sie muss die APIs im **Windows.Services.Store**-Namespace verwenden, um die In-App Käufe anstelle von **Windows.ApplicationModel.Store** zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-107">To enable the purchase of subscription add-ons in your app, your project must target **Windows 10 Anniversary Edition (10.0; Build 14393)** or a later release in Visual Studio (this corresponds to Windows 10, version 1607), and it must use the APIs in the **Windows.Services.Store** namespace to implement the in-app purchase experience instead of the **Windows.ApplicationModel.Store** namespace.</span></span> <span data-ttu-id="7d0e6-108">Weitere Informationen zu den Unterschieden zwischen diesen Namespaces finden Sie unter [In-App-Käufe und Testversionen](in-app-purchases-and-trials.md).</span><span class="sxs-lookup"><span data-stu-id="7d0e6-108">For more information about the differences between these namespaces, see [In-app purchases and trials](in-app-purchases-and-trials.md).</span></span>

## <a name="feature-highlights"></a><span data-ttu-id="7d0e6-109">Wichtigste Features</span><span class="sxs-lookup"><span data-stu-id="7d0e6-109">Feature highlights</span></span>

<span data-ttu-id="7d0e6-110">Abonnement-Add-Ons für UWP-Apps unterstützen die folgenden Features:</span><span class="sxs-lookup"><span data-stu-id="7d0e6-110">Subscription add-ons for UWP apps support the following features:</span></span>

* <span data-ttu-id="7d0e6-111">Sie können Abonnementszeiträume von 1Monat, 3Monaten, 6Monaten, 1 Jahr bzw. 2Jahren auswählen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-111">You can choose from subscription periods of 1 month, 3 months, 6 months, 1 year, or 2 years.</span></span>
* <span data-ttu-id="7d0e6-112">Sie können die kostenlose Testversionzeiträume von 1 Woche oder 1Monat zu Ihrem Abonnement hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-112">You can add free trial periods of 1 week or 1 month to your subscription.</span></span>
* <span data-ttu-id="7d0e6-113">Das Windows SDK [bietet APIs](#code-examples), die Sie in Ihrer App zum Abrufen von Informationen zu verfügbaren Abonnement-Add-Ons für die App und zum aktivieren des Kaufs eines Abonnement-Add-Ons nutzen können.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-113">The Windows SDK [provides APIs](#code-examples) you can use in your app to get info about available subscription add-ons for the app and enable the purchase of a subscription add-on.</span></span> <span data-ttu-id="7d0e6-114">Wir bieten außerdem REST-APIs, die Sie aus Ihren Diensten zum [Verwalten von Abonnements für einen Benutzer](#manage-subscriptions) aufrufen können.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-114">We also provide REST APIs you can call from your services to [manage subscriptions for a user](#manage-subscriptions).</span></span>
* <span data-ttu-id="7d0e6-115">Sie können Analyseberichte anzeigen, welche die Anzahl der Abonnementkäufe, der aktiven Abonnenten und der stornierte Abonnements in einem bestimmten Zeitraum anzeigen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-115">You can view analytic reports that provide the number of subscription acquisitions, active subscribers, and canceled subscriptions in a given time period.</span></span>
* <span data-ttu-id="7d0e6-116">Die Kunden können ihr Abonnement auf der Seite [http://account.microsoft.com/services](http://account.microsoft.com/services) ihres Microsoft-Kontos verwalten.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-116">Customers can manage their subscription on the [http://account.microsoft.com/services](http://account.microsoft.com/services) page for their Microsoft account.</span></span> <span data-ttu-id="7d0e6-117">Die Kunden können diese Seite verwenden, um alle Abonnements anzeigen, die sie erworben haben, ein Abonnement zu kündigen und die Zahlungsmethode für ihr Abonnement zu ändern.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-117">Customers can use this page to view all of the subscriptions they have acquired, cancel a subscription, and change the form of payment that is associated with their subscription.</span></span>

## <a name="steps-to-enable-a-subscription-add-on-for-your-app"></a><span data-ttu-id="7d0e6-118">Schritte zum Aktivieren von Abonnements für Add-Ons für Ihre App</span><span class="sxs-lookup"><span data-stu-id="7d0e6-118">Steps to enable a subscription add-on for your app</span></span>

<span data-ttu-id="7d0e6-119">Gehen Sie folgendermaßen vor, um den Kauf von Abonnement-Add-Ons in Ihrer App zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-119">To enable the purchase of subscription add-ons in your app, follow these steps.</span></span>

1. <span data-ttu-id="7d0e6-120">[Erstellen Sie eine Add-On-Übermittlung](../publish/add-on-submissions.md) für Ihr Abonnement im Dev Center-Dashboard und veröffentlichen Sie die Übermittlung.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-120">[Create an add-on submission](../publish/add-on-submissions.md) for your subscription in the Dev Center dashboard and publish the submission.</span></span> <span data-ttu-id="7d0e6-121">Beachten Sie im Rahmen des Add-On-Übermittlungsprozesses die folgenden Eigenschaften:</span><span class="sxs-lookup"><span data-stu-id="7d0e6-121">As you follow the add-on submission process, pay close attention to the following properties:</span></span>

  * <span data-ttu-id="7d0e6-122">[Produkttyp](../publish/set-your-add-on-product-id.md#product-type): Stellen Sie sicher, dass Sie **Abonnement** ausgewählt haben.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-122">[Product type](../publish/set-your-add-on-product-id.md#product-type): Make sure you select **Subscription**.</span></span>

  * <span data-ttu-id="7d0e6-123">[Abonnementzeitraum](../publish/enter-add-on-properties.md#subscription-period): Wählen Sie den wiederholte Abrechnungszeitraum für Ihr Abonnement aus.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-123">[Subscription period](../publish/enter-add-on-properties.md#subscription-period): Choose the recurring billing period for your subscription.</span></span> <span data-ttu-id="7d0e6-124">Der können den Abonnementszeitraum nach der Veröffentlichung des Add-Ons nicht mehr ändern.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-124">You cannot change the subscription period after you publish your add-on.</span></span>

    <span data-ttu-id="7d0e6-125">Jedes Abonnement-Add-On unterstützt einen einzelnen Abonnementzeitraum und einen Testzeitraum.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-125">Each subscription add-on supports a single subscription period and trial period.</span></span> <span data-ttu-id="7d0e6-126">Sie müssen ein anderes Abonnement-Add-On für jedes Abonnement erstellen, das Sie in Ihrer App anbieten möchten.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-126">You must create a different subscription add-on for each type of subscription you want to offer in your app.</span></span> <span data-ttu-id="7d0e6-127">Wenn Sie z. B. ein monatliches Abonnement ohne Teste, ein monatliches Abonnement mit einmonatigem Test, ein Jahresabonnement ohne Test und ein Jahresabonnement mit einem einmonatigen Test anbieten möchten, benötigen Sie vier Abonnement-Add-Ons.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-127">For example, if you wanted to offer a monthly subscription with no trial, a monthly subscription with a one-month trial, an annual subscription with no trial, and an annual subscription with a one-month trial, you would need to create four subscription add-ons.</span></span>

  * <span data-ttu-id="7d0e6-128">[Testzeitraum](../publish/enter-add-on-properties.md#free-trial): Wählen Sie einen 1 Woche oder 1Monat Testzeitraum für Ihr Abonnement, damit Benutzer Ihre Abonnement testen können, bevor sie dieses kaufen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-128">[Trial period](../publish/enter-add-on-properties.md#free-trial): Consider choosing a 1 week or 1 month trial period for your subscription to enable users to try your subscription content before they buy it.</span></span> <span data-ttu-id="7d0e6-129">Der können den Abonnementszeitraum und den Testzeitraum nach der Veröffentlichung des Abonnement-Add-Ons nicht mehr ändern.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-129">You cannot change or remove the trial period after you publish your subscription add-on.</span></span>

    <span data-ttu-id="7d0e6-130">Um eine kostenlose Testversion Ihres Abonnements zu erwerben, muss der Benutzer Ihr Abonnement über den Standard-In-App-Einkauf-(inkl. gültiger Zahlungsmethode) erwerben.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-130">To acquire a free trial of your subscription, a user must purchase your subscription through the standard in-app purchase process, including a valid form of payment.</span></span> <span data-ttu-id="7d0e6-131">Während der Testphase wird nichts in Rechnung gestellt.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-131">They are not charged any money during the trial period.</span></span> <span data-ttu-id="7d0e6-132">Am Ende des Testzeitraums wandelt sich das Abonnement automatisch in ein vollständiges Abonnement um und die Zahlungsmittel des Benutzers werden für den ersten kostenpflichtigen Zeitraum des Abonnements belastet.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-132">At the end of the trial period, the subscription automatically converts to the full subscription and the user's payment instrument will be charged for the first period of the paid subscription.</span></span> <span data-ttu-id="7d0e6-133">Wenn der Benutzer das Abonnement während des Testzeitraums abbricht, bleibt das Abonnement bis zum Ende des Testzeitraums aktiv.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-133">If the user chooses to cancel their subscription during the trial period, the subscription remains active until the end of the trial period.</span></span> <span data-ttu-id="7d0e6-134">Einige Testzeiträume sind nicht für alle Abonnements verfügbar.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-134">Some trial periods are not available for all subscription periods.</span></span>
        > [!NOTE]
        > Each customer can acquire a free trial for a subscription add-on only one time. After a customer acquires a free trial for a subscription, the Store prevents the same customer from ever acquiring the same free trial subscription again.

  * <span data-ttu-id="7d0e6-135">[Sichtbarkeit](../publish/set-add-on-pricing-and-availability.md#visibility): Wenn Sie ein Test-Add-On erstellen, das Sie nur verwenden, um die In-App-Einkaufserfahrung für Ihre Abonnement zu testen, empfehlen wir, eine der **Im Store ausgeblendet**-Optionen zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-135">[Visibility](../publish/set-add-on-pricing-and-availability.md#visibility): If you are creating a test add-on that you will only use to test the in-app purchase experience for your subscription, we recommend that you select one of the **Hidden in the Store** options.</span></span> <span data-ttu-id="7d0e6-136">Andernfalls können Sie die beste Sichtbarkeitsoption für Ihr Szenario auswählen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-136">Otherwise, you can select the best visibility option for your scenario.</span></span>

  * <span data-ttu-id="7d0e6-137">[Preise](../publish/set-add-on-pricing-and-availability.md?#pricing): Wählen Sie in diesem Abschnitt den Preis für Ihr Abonnement aus.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-137">[Pricing](../publish/set-add-on-pricing-and-availability.md?#pricing): Choose the price of your subscription in this section.</span></span> <span data-ttu-id="7d0e6-138">Der können den Abonnementszeitraum nach der Veröffentlichung des Add-Ons nicht mehr erhöhen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-138">You cannot raise the price of the subscription after you publish the add-on.</span></span> <span data-ttu-id="7d0e6-139">Sie können den Preis jedoch später senken.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-139">However, you can lower the price later.</span></span>
      > [!IMPORTANT]
      > <span data-ttu-id="7d0e6-140">Standardmäßig wird der Preis bei der Erstellung des Add-Ons auf **Kostenlos** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-140">By default, when you create any add-on the price is initially set to **Free**.</span></span> <span data-ttu-id="7d0e6-141">Da Sie den Preis nach Abschluss der Add-On-Übermittlung nicht anheben können, stellen Sie sicher, dass Sie hier den gewünschten Preis für Ihr Abonnement auswählen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-141">Because you cannot raise the price of a subscription add-on after you complete the add-on submission, be sure to choose the price of your subscription here.</span></span>

2. <span data-ttu-id="7d0e6-142">Verwenden Sie in Ihrer App die APIs im Namespace [**Windows.Services.Store**](https://docs.microsoft.com/uwp/api/windows.services.store), um zu ermitteln, ob der aktuelle Benutzer bereits Ihr Abonnement-Add-On erworben hat, und um es als In-App-Kauf anzubieten.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-142">In your app, use APIs in the [**Windows.Services.Store**](https://docs.microsoft.com/uwp/api/windows.services.store) namespace to determine whether the current user has already acquired your subscription add-on and then offer it for sale to the user as an in-app purchase.</span></span> <span data-ttu-id="7d0e6-143">In den [Codebeispielen](#code-examples) in diesem Artikel erhalten Sie weitere Informationen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-143">See the [code examples](#code-examples) in this article for more details.</span></span>

3. <span data-ttu-id="7d0e6-144">Testen Sie die In-App-Kauf-Implementierung Ihres Abonnements in Ihrer App.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-144">Test the in-app purchase implementation of your subscription in your app.</span></span> <span data-ttu-id="7d0e6-145">Sie müssen die App aus dem Store auf Ihr Entwicklungsgerät herunterladen, um dessen Lizenz zum Testen zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-145">You'll need to download your app once from the Store to your development device to use its license for testing.</span></span> <span data-ttu-id="7d0e6-146">Weitere Informationen finden Sie unter [Anweisungen zum Testen](in-app-purchases-and-trials.md#testing) für In-App-Käufe.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-146">For more information, see our [testing guidance](in-app-purchases-and-trials.md#testing) for in-app purchases.</span></span>  

4. <span data-ttu-id="7d0e6-147">Erstellen und Veröffentlichen Sie eine App-Übermittlung, die das aktualisierte App-Paket inkl. des getesteten Codes enthält.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-147">Create and publish an app submission that includes your updated app package, including your tested code.</span></span> <span data-ttu-id="7d0e6-148">Weitere Informationen finden Sie unter [App-Übermittlungen](../publish/app-submissions.md).</span><span class="sxs-lookup"><span data-stu-id="7d0e6-148">For more information, see [App submissions](../publish/app-submissions.md).</span></span>

<span id="code-examples"/>

## <a name="code-examples"></a><span data-ttu-id="7d0e6-149">Codebeispiele</span><span class="sxs-lookup"><span data-stu-id="7d0e6-149">Code examples</span></span>

<span data-ttu-id="7d0e6-150">Die Codebeispiele in diesem Abschnittzeigen, wie Sie die APIs im [**Windows.Services.Store**](https://docs.microsoft.com/uwp/api/windows.services.store)-Namespace zum Abrufen von Informationen zu Abonnement-Add-Ons für die aktuelle App nutzen und den Kauf eines Abonnement-Add-Ons im Namen des aktuellen Benutzers anfordern.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-150">The code examples in this section demonstrate how to use the APIs in the [**Windows.Services.Store**](https://docs.microsoft.com/uwp/api/windows.services.store) namespace to get info about subscription add-ons for the current app and request the purchase a subscription add-on on behalf of the current user.</span></span>

<span data-ttu-id="7d0e6-151">Für diese Beispiele gelten die folgenden Voraussetzungen:</span><span class="sxs-lookup"><span data-stu-id="7d0e6-151">These examples have the following prerequisites:</span></span>
* <span data-ttu-id="7d0e6-152">Ein Visual Studio-Projekt für eine UWP (Universelle Windows-Plattform)-App, die für **Windows 10 Anniversary Edition (10.0; Build 14393)** oder höher, geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-152">A Visual Studio project for a Universal Windows Platform (UWP) app that targets **Windows 10 Anniversary Edition (10.0; Build 14393)** or a later release.</span></span>
* <span data-ttu-id="7d0e6-153">Sie haben eine [App-Übermittlung](https://docs.microsoft.com/windows/uwp/publish/app-submissions) im Windows Dev Center-Dashboard erstellt. Diese App wird veröffentlicht und ist im Store verfügbar.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-153">You have [created an app submission](https://docs.microsoft.com/windows/uwp/publish/app-submissions) in the Windows Dev Center dashboard and this app is published in the Store.</span></span> <span data-ttu-id="7d0e6-154">Sie können Ihre App optional so konfigurieren, dass Sie während der Tests im Store ausgeblendet ist.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-154">You can optionally configure the app so it is not discoverable in the Store while you test it.</span></span> <span data-ttu-id="7d0e6-155">Weitere Informationen finden Sie unter [Hinweise für Tests](in-app-purchases-and-trials.md#testing).</span><span class="sxs-lookup"><span data-stu-id="7d0e6-155">For more information, see the [testing guidance](in-app-purchases-and-trials.md#testing).</span></span>
* <span data-ttu-id="7d0e6-156">Sie haben [ein Abonnement-Add-On für die App](../publish/add-on-submissions.md) im Dev Center-Dashboard erstellt.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-156">You have [created a subscription add-on for the app](../publish/add-on-submissions.md) in the Dev Center dashboard.</span></span>

<span data-ttu-id="7d0e6-157">Der Code in diesen Beispielen geht von Folgendem aus:</span><span class="sxs-lookup"><span data-stu-id="7d0e6-157">The code in these examples assumes:</span></span>
* <span data-ttu-id="7d0e6-158">Die Codedatei enthält **using**-Anweisungen für die Namespaces **Windows.Services.Store** und **System.Threading.Tasks**.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-158">The code file has **using** statements for the **Windows.Services.Store** and **System.Threading.Tasks** namespaces.</span></span>
* <span data-ttu-id="7d0e6-159">Die App ist eine Einzelbenutzer-App, die nur im Kontext des Benutzers ausgeführt wird, der die App gestartet hat.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-159">The app is a single-user app that runs only in the context of the user that launched the app.</span></span> <span data-ttu-id="7d0e6-160">Weitere Informationen finden Sie unter [In-App-Käufe und Testversionen](in-app-purchases-and-trials.md#api_intro).</span><span class="sxs-lookup"><span data-stu-id="7d0e6-160">For more information, see [In-app purchases and trials](in-app-purchases-and-trials.md#api_intro).</span></span>

> [!NOTE]
> <span data-ttu-id="7d0e6-161">Wenn Sie über eine Desktopanwendung verfügen, die die [Desktop-Brücke](https://developer.microsoft.com/windows/bridges/desktop) verwendet, müssen Sie möglicherweise zusätzlichen, in diesen Beispielen nicht aufgeführten Code hinzufügen, um das [**StoreContext**](https://docs.microsoft.com/uwp/api/Windows.Services.Store.StoreContext)-Objekt zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-161">If you have a desktop application that uses the [Desktop Bridge](https://developer.microsoft.com/windows/bridges/desktop), you may need to add additional code not shown in these examples to configure the [**StoreContext**](https://docs.microsoft.com/uwp/api/Windows.Services.Store.StoreContext) object.</span></span> <span data-ttu-id="7d0e6-162">Weitere Informationen finden Sie unter [Verwenden der StoreContext-Klasse in einer Desktopanwendung, die die Desktop-Brücke verwendet](in-app-purchases-and-trials.md#desktop).</span><span class="sxs-lookup"><span data-stu-id="7d0e6-162">For more information, see [Using the StoreContext class in a desktop application that uses the Desktop Bridge](in-app-purchases-and-trials.md#desktop).</span></span>

### <a name="purchase-a-subscription-add-on"></a><span data-ttu-id="7d0e6-163">Ein Abonnement-Add-On erwerben</span><span class="sxs-lookup"><span data-stu-id="7d0e6-163">Purchase a subscription add-on</span></span>

<span data-ttu-id="7d0e6-164">In diesem Beispiel wird veranschaulicht, wie Sie den Kauf eines bekannten Abonnement-Add-Ons für Ihre App im Auftrag des aktuellen Kunden anfordern.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-164">This example demonstrates how to request the purchase of a known subscription add-on for your app on behalf of the current customer.</span></span> <span data-ttu-id="7d0e6-165">Außerdem wird veranschaulicht, wie Sie den Fall behandeln, dass für das Abonnement ein Testzeitraum gilt.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-165">This example also shows how to handle the case where the subscription has a trial period.</span></span>

1. <span data-ttu-id="7d0e6-166">Der Code bestimmt zunächst, ob der Kunde bereits eine aktive Lizenz für das Abonnement besitzt.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-166">The code first determines whether the customer already has an active license for the subscription.</span></span> <span data-ttu-id="7d0e6-167">Wenn der Kunde bereits über eine aktive Lizenz verfügt, sollte der Code die Abonnementfeatures nach Bedarf entsperren. (Da dies für Ihre App proprietär ist, ist dies im Beispiel mit einem Kommentar gekennzeichnet).</span><span class="sxs-lookup"><span data-stu-id="7d0e6-167">If the customer already has an active license, your code should unlock the subscription features as necessary (because this is proprietary to your app, this is identified with a comment in the example).</span></span>
2. <span data-ttu-id="7d0e6-168">Als Nächstes ruft der Code das Objekt [**StoreProduct**](https://docs.microsoft.com/uwp/api/windows.services.store.storeproduct) ab. Es stellt das Abonnement dar, das Sie im Auftrag des Kunden erwerben möchten.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-168">Next, the code gets the [**StoreProduct**](https://docs.microsoft.com/uwp/api/windows.services.store.storeproduct) object that represents the subscription you want to purchase on behalf of the customer.</span></span> <span data-ttu-id="7d0e6-169">Der Code setzt voraus, dass Sie die [Store ID](in-app-purchases-and-trials.md#store-ids) des Abonnement-Add-Ons, das Sie kaufen möchten, bereits kennen, und dass Sie diesen Wert der Variablen *subscriptionStoreId* zugewiesen haben.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-169">The code assumes that you already know the [Store ID](in-app-purchases-and-trials.md#store-ids) of the subscription add-on you want to purchase, and that you have assigned this value to the *subscriptionStoreId* variable.</span></span>
3. <span data-ttu-id="7d0e6-170">Der Code ermittelt dann, ob eine Testversion für das Abonnement verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-170">The code then determines whether a trial is available for the subscription.</span></span> <span data-ttu-id="7d0e6-171">Optional kann Ihre App diese Informationen verwenden, um Details zur verfügbaren Testversion oder zum vollständigen Abonnement für den Kunden anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-171">Optionally, your app can use this information to display details about the available trial or full subscription to the customer.</span></span>
4. <span data-ttu-id="7d0e6-172">Schließlich ruft der Code die Methode [**RequestPurchaseAsync**](https://docs.microsoft.com/uwp/api/windows.services.store.storeproduct.RequestPurchaseAsync) auf, um den Kauf des Abonnements anzufordern.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-172">Finally, the code calls [**RequestPurchaseAsync**](https://docs.microsoft.com/uwp/api/windows.services.store.storeproduct.RequestPurchaseAsync) method to request the purchase of the subscription.</span></span> <span data-ttu-id="7d0e6-173">Wenn eine Testversion für das Abonnement verfügbar ist, wird diese dem Kunden zum Kauf angeboten.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-173">If a trial is available for the subscription, the trial will be offered to the customer for purchase.</span></span> <span data-ttu-id="7d0e6-174">Andernfalls wird das vollständige Abonnement zum Kauf angeboten.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-174">Otherwise, the full subscription will be offered for purchase.</span></span>

> [!div class="tabbedCodeSnippets"]
[!code-cs[Subscriptions](./code/InAppPurchasesAndLicenses_RS1/cs/PurchaseSubscriptionAddOnTrialPage.xaml.cs#PurchaseTrialSubscription)]

### <a name="get-info-about-subscription-add-ons-for-the-current-app"></a><span data-ttu-id="7d0e6-175">Abrufen von Informationen zu Abonnement-Add-Ons für die aktuelle App</span><span class="sxs-lookup"><span data-stu-id="7d0e6-175">Get info about subscription add-ons for the current app</span></span>

<span data-ttu-id="7d0e6-176">In diesem Codebeispiel wird veranschaulicht, wie Sie Informationen für alle Abonnement-Add-Ons abrufen, die in Ihrer App verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-176">This code example demonstrates how to get info for all the subscription add-ons that are available in your app.</span></span> <span data-ttu-id="7d0e6-177">Um diese Informationen zu erhalten, verwenden Sie zunächst die [**GetAssociatedStoreProductsAsync**](https://docs.microsoft.com/uwp/api/Windows.Services.Store.StoreContext.GetAssociatedStoreProductsAsync)-Methode, um eine Sammlung der [**StoreProduct**](https://docs.microsoft.com/uwp/api/Windows.Services.Store.StoreProduct)-Objekte für alle in der App verfügbaren Add-Ons abzurufen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-177">To get this info, first use the [**GetAssociatedStoreProductsAsync**](https://docs.microsoft.com/uwp/api/Windows.Services.Store.StoreContext.GetAssociatedStoreProductsAsync) method to get the collection of [**StoreProduct**](https://docs.microsoft.com/uwp/api/Windows.Services.Store.StoreProduct) objects that represent each of the available add-ons for the app.</span></span> <span data-ttu-id="7d0e6-178">Rufen Sie dann die [**StoreSku**](https://docs.microsoft.com/uwp/api/windows.services.store.storesku) für jedes Produkt und ab und verwenden Sie die Eigenschaften [**IsSubscription**](https://docs.microsoft.com/uwp/api/windows.services.store.storesku.IsSubscription) und [**SubscriptionInfo**](https://docs.microsoft.com/uwp/api/windows.services.store.storesku.SubscriptionInfo), um auf die Abonnementinformationen zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-178">Then, get the [**StoreSku**](https://docs.microsoft.com/uwp/api/windows.services.store.storesku) for each product and use the [**IsSubscription**](https://docs.microsoft.com/uwp/api/windows.services.store.storesku.IsSubscription) and [**SubscriptionInfo**](https://docs.microsoft.com/uwp/api/windows.services.store.storesku.SubscriptionInfo) properties to access the subscription info.</span></span>

> [!div class="tabbedCodeSnippets"]
[!code-cs[Subscriptions](./code/InAppPurchasesAndLicenses_RS1/cs/GetSubscriptionAddOnsPage.xaml.cs#GetSubscriptions)]

<span id="manage-subscriptions" />

## <a name="manage-subscriptions-from-your-services"></a><span data-ttu-id="7d0e6-179">Verwalten von Abonnements über Ihre Dienste</span><span class="sxs-lookup"><span data-stu-id="7d0e6-179">Manage subscriptions from your services</span></span>

<span data-ttu-id="7d0e6-180">Nachdem die aktualisierte App im Store verfügbar ist und die Kunden Ihr Abonnement-Add-On erwerben können, gibt es möglicherweise Szenarien, in denen Sie das Abonnement für einen Kunden verwalten müssen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-180">After your updated app is in the Store and customers can buy your subscription add-on, you may have scenarios where you need to manage the subscription for a customer.</span></span> <span data-ttu-id="7d0e6-181">Wir bieten REST-APIs, die Sie aus Ihren Diensten zum Ausführen der folgenden Abonnement Verwaltungsaufgaben aufrufen können:</span><span class="sxs-lookup"><span data-stu-id="7d0e6-181">We provide REST APIs you can call from your services to perform the following subscription management tasks:</span></span>

* <span data-ttu-id="7d0e6-182">[Rufen Sie die Abonnements ab, für die ein Benutzer berechtigt ist](get-subscriptions-for-a-user.md).</span><span class="sxs-lookup"><span data-stu-id="7d0e6-182">[Get the subscriptions that a user has an entitlement to use](get-subscriptions-for-a-user.md).</span></span> <span data-ttu-id="7d0e6-183">Wenn Ihr Abonnement Teil eines plattformübergreifende Dienstes ist, können Sie diese API nutzen, um zu bestimmen, ob der angegebene Benutzer eine Berechtigung für Ihr Abonnement hat, und den Status ihrer Abonnements im Kontext Ihrer UWP-App abrufen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-183">If your subscription is part of a cross-platform service, you can call this API to determine whether the specified user has an entitlement for your subscription and the status of their subscription in the context of your UWP app.</span></span> <span data-ttu-id="7d0e6-184">Diese Informationen können dann zum Aktualisieren des Status des Abonnements auf anderen von Ihrem Dienst unterstützten Plattformen nutzen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-184">You can then use this information to update the status of the subscription on other platforms that your service supports.</span></span>

* <span data-ttu-id="7d0e6-185">[Ändern des Abrechnungszustands eines Abonnements für einen bestimmten Benutzer](change-the-billing-state-of-a-subscription-for-a-user.md).</span><span class="sxs-lookup"><span data-stu-id="7d0e6-185">[Change the billing state of a subscription for a given user](change-the-billing-state-of-a-subscription-for-a-user.md).</span></span> <span data-ttu-id="7d0e6-186">Verwenden Sie diese API, um die automatische Verlängerung für ein Abonnement zu stornieren, zu verlängern oder zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-186">Use this API to cancel, extend, or disable automatic renewal for a subscription.</span></span>

## <a name="cancellations"></a><span data-ttu-id="7d0e6-187">Stornierungen</span><span class="sxs-lookup"><span data-stu-id="7d0e6-187">Cancellations</span></span>

<span data-ttu-id="7d0e6-188">Die Kunden können die Seite [http://account.microsoft.com/services](http://account.microsoft.com/services) in ihrem Microsoft-Konto verwenden, um alle Abonnements anzuzeigen, die sie erworben haben, um ein Abonnement zu kündigen und um die Zahlungsmethode für ihr Abonnement zu ändern.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-188">Customers can use the [http://account.microsoft.com/services](http://account.microsoft.com/services) page for their Microsoft account to view all of the subscriptions they have acquired, cancel a subscription, and change the form of payment that is associated with their subscription.</span></span> <span data-ttu-id="7d0e6-189">Wenn ein Kunde ein Abonnement auf dieser Seite storniert, kann er für die Dauer der aktuellen Abrechnungsperiode weiterhin auf das Abonnement zugreifen.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-189">When a customer cancels a subscription using this page, they continue to have access to the subscription for the duration of the current billing period.</span></span> <span data-ttu-id="7d0e6-190">Er erhält keine Rückerstattung für einen Teil der aktuellen Abrechnungsperiode.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-190">They do not get a refund for any part of the current billing period.</span></span> <span data-ttu-id="7d0e6-191">Am Ende der aktuellen Abrechnungsperiode wird das Abonnement deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-191">At the end of the current billing period, their subscription is deactivated.</span></span>

<span data-ttu-id="7d0e6-192">Sie können ein Abonnement auch im Auftrag eines Benutzers mithilfe unserer REST-API stornieren, um [Abrechnungszustand eines Abonnements für einen bestimmten Benutzer zu ändern](change-the-billing-state-of-a-subscription-for-a-user.md).</span><span class="sxs-lookup"><span data-stu-id="7d0e6-192">You can also cancel a subscription on behalf of a user by using our REST API to [change the billing state of a subscription for a given user](change-the-billing-state-of-a-subscription-for-a-user.md).</span></span>

## <a name="subscription-renewals-and-grace-periods"></a><span data-ttu-id="7d0e6-193">Verlängerung des Abonnements und Karenzzeiten</span><span class="sxs-lookup"><span data-stu-id="7d0e6-193">Subscription renewals and grace periods</span></span>

<span data-ttu-id="7d0e6-194">Zu einem bestimmten Zeitpunkt während jeder Abrechnungsperiode werden wir versuchen, die Kreditkarte des Kunden für die nächste Abrechnungsperiode zu belasten.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-194">At some point during each billing period, we will attempt to charge the customer's credit card for the next billing period.</span></span> <span data-ttu-id="7d0e6-195">Wenn die Belastung fehlschlägt, gilt für das Abonnement des Kunden der Status *Mahnung*.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-195">If the charge fails, the customer's subscription enters the *dunning* state.</span></span> <span data-ttu-id="7d0e6-196">Dies bedeutet, dass ihr Abonnement für den Rest der aktuellen Abrechnungsperiode noch aktiv ist, wir jedoch regelmäßig versuchen werden, die Kreditkarte zu belasten, um das Abonnement automatisch zu erneuern.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-196">This means that their subscription is still active for the remainder of the current billing period, but we will periodically try to charge their credit card to automatically renew the subscription.</span></span> <span data-ttu-id="7d0e6-197">Dieser Status kann bis zu zwei Wochen dauern, bis zum Ende des aktuellen Abrechnungszeitraums und dem Erneuerungsdatum für die nächsten Abrechnungsperiode</span><span class="sxs-lookup"><span data-stu-id="7d0e6-197">This state can last up to two weeks, until the end of the current billing period and the renew date for the next billing period.</span></span>

<span data-ttu-id="7d0e6-198">Wir gewähren keine Karenzzeit für die Abonnementabrechnung.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-198">We do not offer grace periods for subscription billing.</span></span> <span data-ttu-id="7d0e6-199">Wenn wir die Kreditkarte des Kunden bis zum Ende der aktuellen Abrechnungsperiode nicht erfolgreich belasten können, wird das Abonnement storniert, und der Kunde hat nach Ablauf der aktuellen Abrechnungsperiode keinen Zugriff mehr auf das Abonnement.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-199">If we are unable to successfully charge the customer's credit card by the end of the current billing period, the subscription will be canceled and the customer will no longer have access to the subscription after the current billing period.</span></span>

## <a name="unsupported-scenarios"></a><span data-ttu-id="7d0e6-200">Nicht unterstützte Szenarien</span><span class="sxs-lookup"><span data-stu-id="7d0e6-200">Unsupported scenarios</span></span>

<span data-ttu-id="7d0e6-201">Die folgenden Szenarien werden für die Abonnement-Add-Ons derzeit nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-201">The following scenarios are not currently supported for subscription add-ons.</span></span>

* <span data-ttu-id="7d0e6-202">Das Verkaufen von Abonnements direkt an Kunden über den Store wird zu diesem Zeitpunkt nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-202">Selling subscriptions to customers directly via the Store is not supported at this time.</span></span> <span data-ttu-id="7d0e6-203">Abonnements sind nur für In-App-Käufe von digitalen Produkten verfügbar.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-203">Subscriptions are available for in-app purchases of digital products only.</span></span>
* <span data-ttu-id="7d0e6-204">Kunden können die Abonnementperioden nicht über die Seite [http://account.microsoft.com/services](http://account.microsoft.com/services) ihres Microsoft-Kontos ändern.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-204">Customers cannot switch subscription periods using the [http://account.microsoft.com/services](http://account.microsoft.com/services) page for their Microsoft account.</span></span> <span data-ttu-id="7d0e6-205">Um zu einem anderen Abonnementszeitraum zu wechseln, müssen die Kunden das aktuelle Abonnement kündigen und ein Abonnement mit einem anderen Abonnementzeitraum in Ihrer App erwerben.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-205">To switch to a different subscription period, customers much cancel their current subscription and then purchase a subscription with a different subscription period from your app.</span></span>
* <span data-ttu-id="7d0e6-206">Das Wechseln von Ebenen wird aktuell nicht für Abonnement-Add-Ons unterstützt (z.B., wenn ein Kunde aus einem einfachen Abonnement in ein Premium-Abonnement mit mehr Features wechseln will).</span><span class="sxs-lookup"><span data-stu-id="7d0e6-206">Tier switching is currently not supported for subscription add-ons (for example, switching a customer from a basic subscription to a premium subscription with more features).</span></span>
* <span data-ttu-id="7d0e6-207">[Verkäufe](../publish/put-apps-and-add-ons-on-sale.md) und [Werbecodes](../publish/generate-promotional-codes.md) für die Abonnement-Add-Ons werden derzeit nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="7d0e6-207">[Sales](../publish/put-apps-and-add-ons-on-sale.md) and [promotional codes](../publish/generate-promotional-codes.md) are currently not supported for subscription add-ons.</span></span>


## <a name="related-topics"></a><span data-ttu-id="7d0e6-208">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="7d0e6-208">Related topics</span></span>

* [<span data-ttu-id="7d0e6-209">In-App-Käufe und Testversionen</span><span class="sxs-lookup"><span data-stu-id="7d0e6-209">In-app purchases and trials</span></span>](in-app-purchases-and-trials.md)
* [<span data-ttu-id="7d0e6-210">Abrufen von Produktinformationen zu Apps und Add-Ons</span><span class="sxs-lookup"><span data-stu-id="7d0e6-210">Get product info for apps and add-ons</span></span>](get-product-info-for-apps-and-add-ons.md)
