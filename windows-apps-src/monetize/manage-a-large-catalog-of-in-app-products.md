---
author: mcleanbyron
ms.assetid: 5E722AFF-539D-456E-8C4A-ADE90CF7674A
description: "Wenn Ihre App einen großen In-App-Produktkatalog enthält, können Sie optional das in diesem Thema beschriebene Verfahren zum Verwalten des Katalogs ausführen."
title: "Verwalten eines großen Katalogs von In-App-Produkten"
ms.author: mcleans
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: "Windows10, UWP, In-App-Käufe, IAPs, Add-Ons, Katalog, Windows.ApplicationModel.Store"
ms.openlocfilehash: 264db118c3d9f84cffcc966f017ddab4c14e28fb
ms.sourcegitcommit: 6c6f3c265498d7651fcc4081c04c41fafcbaa5e7
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 08/09/2017
---
# <a name="manage-a-large-catalog-of-in-app-products"></a><span data-ttu-id="fb51e-104">Verwalten eines großen Katalogs von In-App-Produkten</span><span class="sxs-lookup"><span data-stu-id="fb51e-104">Manage a large catalog of in-app products</span></span>


> [!NOTE]
> <span data-ttu-id="fb51e-105">In diesem Artikel wird veranschaulicht, wie Mitglieder des [Windows.ApplicationModel.Store](https://msdn.microsoft.com/library/windows/apps/windows.applicationmodel.store.aspx)-Namespace verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="fb51e-105">This article demonstrates how to use members of the [Windows.ApplicationModel.Store](https://msdn.microsoft.com/library/windows/apps/windows.applicationmodel.store.aspx) namespace.</span></span> <span data-ttu-id="fb51e-106">Wenn Ihre App für Windows10, Version 1607, oder höher entwickelt wurde, empfehlen wir Ihnen, Member des [Windows.Services.Store](https://msdn.microsoft.com/library/windows/apps/windows.services.store.aspx)-Namespace und nicht des **Windows.ApplicationModel.Store**-Namespace zur Verwaltung von Add-Ons zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="fb51e-106">If your app targets Windows 10, version 1607, or later, we recommend that you use members of the [Windows.Services.Store](https://msdn.microsoft.com/library/windows/apps/windows.services.store.aspx) namespace to manage add-ons instead of the **Windows.ApplicationModel.Store** namespace.</span></span> <span data-ttu-id="fb51e-107">Weitere Informationen finden Sie unter [In-App-Käufe und Testversionen](in-app-purchases-and-trials.md).</span><span class="sxs-lookup"><span data-stu-id="fb51e-107">For more information, see [In-app purchases and trials](in-app-purchases-and-trials.md).</span></span>

<span data-ttu-id="fb51e-108">Wenn Ihre App einen großen In-App-Produktkatalog enthält, können Sie optional das in diesem Thema beschriebene Verfahren zum Verwalten des Katalogs ausführen.</span><span class="sxs-lookup"><span data-stu-id="fb51e-108">If your app offers a large in-app product catalog, you can optionally follow the process described in this topic to help manage your catalog.</span></span> <span data-ttu-id="fb51e-109">In Versionen vor Windows10 galt eine Store-Einschränkung von 200Produkteinträgen pro Entwicklerkonto. Das in diesem Thema beschriebene Verfahren kann zur Umgehung dieser Einschränkung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="fb51e-109">In releases before Windows 10, the Store has a limit of 200 product listings per developer account, and the process described in this topic can be used to work around that limitation.</span></span> <span data-ttu-id="fb51e-110">Ab Windows10 gibt es keine Einschränkung der Anzahl von Produkteinträgen pro Entwicklerkonto im Store. Das in diesem Artikel beschriebene Verfahren ist nicht mehr erforderlich.</span><span class="sxs-lookup"><span data-stu-id="fb51e-110">Starting with Windows 10, the Store has no limit to the number of product listings per developer account, and the process described in this article is no longer necessary.</span></span>

<span data-ttu-id="fb51e-111">Um diese Funktionalität zu aktivieren, erstellen Sie einige wenige Produkteinträge für bestimmte Preisniveaus. Jeder kann Hunderte von Produkten innerhalb eines Katalogs repräsentieren.</span><span class="sxs-lookup"><span data-stu-id="fb51e-111">To enable this capability, you will create a handful of product entries for specific price tiers, with each one able to represent hundreds of products within a catalog.</span></span> <span data-ttu-id="fb51e-112">Sie verwenden die [RequestProductPurchaseAsync](https://msdn.microsoft.com/library/windows/apps/dn263382)-Methodenüberladung, die ein App-definiertes Angebot angibt, das mit einem im Store aufgelisteten In-App-Produkt verknüpft ist.</span><span class="sxs-lookup"><span data-stu-id="fb51e-112">Use the [RequestProductPurchaseAsync](https://msdn.microsoft.com/library/windows/apps/dn263382) method overload that specifies an app-defined offer associated with an in-app product listed in the Store.</span></span> <span data-ttu-id="fb51e-113">Zusätzlich zur Angabe einer Verknüpfung von Angebot und Produkt während des Aufrufs sollte Ihre App auch ein [ProductPurchaseDisplayProperties](https://msdn.microsoft.com/library/windows/apps/dn263384)-Objekt übergeben, das die Angebotsdetails des großen Katalogs enthält.</span><span class="sxs-lookup"><span data-stu-id="fb51e-113">In addition to specifying an offer and product association during the call, your app should also pass a [ProductPurchaseDisplayProperties](https://msdn.microsoft.com/library/windows/apps/dn263384) object that contains the large catalog offer details.</span></span> <span data-ttu-id="fb51e-114">Wenn diese Details nicht angegeben sind, werden stattdessen die Details für das gelistete Produkt verwendet.</span><span class="sxs-lookup"><span data-stu-id="fb51e-114">If these details are not provided, the details for the listed product will be used instead.</span></span>

<span data-ttu-id="fb51e-115">Der Store verwendet nur die *offerId* aus der Kaufanforderung im entsprechenden [PurchaseResults](https://msdn.microsoft.com/library/windows/apps/dn263392).</span><span class="sxs-lookup"><span data-stu-id="fb51e-115">The Store will only use the *offerId* from the purchase request in the resulting [PurchaseResults](https://msdn.microsoft.com/library/windows/apps/dn263392).</span></span> <span data-ttu-id="fb51e-116">Mit diesem Verfahren werden die Informationen, die ursprünglich bei der [Eintragung des In-App-Produkts im Store](https://msdn.microsoft.com/library/windows/apps/mt148551) bereitgestellt wurden, nicht direkt geändert.</span><span class="sxs-lookup"><span data-stu-id="fb51e-116">This process does not directly modify the information originally provided when [listing the in-app product in the Store](https://msdn.microsoft.com/library/windows/apps/mt148551).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="fb51e-117">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="fb51e-117">Prerequisites</span></span>

-   <span data-ttu-id="fb51e-118">In diesem Thema wird die Store-Unterstützung für die Darstellung mehrerer In-App-Angebote mithilfe eines einzelnen im Store aufgeführten In-App-Produkts erläutert.</span><span class="sxs-lookup"><span data-stu-id="fb51e-118">This topic covers Store support for the representation of multiple in-app offers using a single in-app product listed in the Store.</span></span> <span data-ttu-id="fb51e-119">Wenn Sie mit In-App-Käufen noch nicht vertraut sind, lesen Sie [Aktivieren von In-App-Produktkäufen](enable-in-app-product-purchases.md). Dort finden Sie Lizenzinformationen und eine Anleitung zur richtigen Eintragung Ihres In-App-Kaufs im Store.</span><span class="sxs-lookup"><span data-stu-id="fb51e-119">If you are unfamiliar with in-app purchases please review [Enable in-app product purchases](enable-in-app-product-purchases.md) to learn about license information, and how to properly list your in-app purchase in the Store.</span></span>
-   <span data-ttu-id="fb51e-120">Wenn Sie zum ersten Mal Code für neue In-App-Angebote schreiben und testen, müssen Sie anstelle des [CurrentApp](https://msdn.microsoft.com/library/windows/apps/hh779766)-Objekts das [CurrentAppSimulator](https://msdn.microsoft.com/library/windows/apps/hh779765)-Objekt verwenden.</span><span class="sxs-lookup"><span data-stu-id="fb51e-120">When you code and test new in-app offers for the first time, you must use the [CurrentAppSimulator](https://msdn.microsoft.com/library/windows/apps/hh779766) object instead of the [CurrentApp](https://msdn.microsoft.com/library/windows/apps/hh779765) object.</span></span> <span data-ttu-id="fb51e-121">Auf diese Weise können Sie überprüfen, ob die Lizenzlogik simulierte Aufrufe an den Lizenzserver und nicht an den Liveserver verwendet.</span><span class="sxs-lookup"><span data-stu-id="fb51e-121">This way you can verify your license logic using simulated calls to the license server instead of calling the live server.</span></span> <span data-ttu-id="fb51e-122">Dazu müssen Sie die Datei mit dem Namen „WindowsStoreProxy.xml“ in %userprofile%\\AppData\\local\\packages\\&lt;Paketname&gt;\\LocalState\\Microsoft\\Windows Store\\ApiData anpassen.</span><span class="sxs-lookup"><span data-stu-id="fb51e-122">To do this, you need to customize the file named WindowsStoreProxy.xml in %userprofile%\\AppData\\local\\packages\\&lt;package name&gt;\\LocalState\\Microsoft\\Windows Store\\ApiData.</span></span> <span data-ttu-id="fb51e-123">Diese Datei wird vom Simulator in Microsoft Visual Studio erstellt, wenn Sie Ihre App zum ersten Mal ausführen. Sie können jedoch auch eine benutzerdefinierte Version dieser Datei zur Laufzeit laden.</span><span class="sxs-lookup"><span data-stu-id="fb51e-123">The Microsoft Visual Studio simulator creates this file when you run your app for the first time—or you can also load a custom one at runtime.</span></span> <span data-ttu-id="fb51e-124">Weitere Informationen finden Sie unter [Verwenden der Datei „WindowsStoreProxy.xml“ mit CurrentAppSimulator](in-app-purchases-and-trials-using-the-windows-applicationmodel-store-namespace.md#proxy).</span><span class="sxs-lookup"><span data-stu-id="fb51e-124">For more info, see [Using the WindowsStoreProxy.xml file with CurrentAppSimulator](in-app-purchases-and-trials-using-the-windows-applicationmodel-store-namespace.md#proxy).</span></span>
-   <span data-ttu-id="fb51e-125">In diesem Thema wird auch auf Codebeispiele verwiesen, die im [Store-Beispiel](https://github.com/Microsoft/Windows-universal-samples/tree/win10-1507/Samples/Store) zu finden sind.</span><span class="sxs-lookup"><span data-stu-id="fb51e-125">This topic also references code examples provided in the [Store sample](https://github.com/Microsoft/Windows-universal-samples/tree/win10-1507/Samples/Store).</span></span> <span data-ttu-id="fb51e-126">Dieses Beispiel bietet eine hervorragende Möglichkeit, die verschiedenen Monetarisierungsoptionen zu testen, die für universelle Windows-Plattform (UWP)-Apps verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="fb51e-126">This sample is a great way to get hands-on experience with the different monetization options provided for Universal Windows Platform (UWP) apps.</span></span>

## <a name="make-the-purchase-request-for-the-in-app-product"></a><span data-ttu-id="fb51e-127">Durchführen der Kaufanforderung für das In-App-Produkt</span><span class="sxs-lookup"><span data-stu-id="fb51e-127">Make the purchase request for the in-app product</span></span>

<span data-ttu-id="fb51e-128">Die Kaufanforderung für ein bestimmtes Produkt in einem umfangreichen Katalog wird ähnlich gehandhabt wie andere In-App-Kaufanforderungen.</span><span class="sxs-lookup"><span data-stu-id="fb51e-128">The purchase request for a specific product within a large catalog is handled in much the same way as any other purchase request within an app.</span></span> <span data-ttu-id="fb51e-129">Wenn Ihre App die neue [RequestProductPurchaseAsync](https://msdn.microsoft.com/library/windows/apps/dn263382)-Methodenüberladung aufruft, stellt die App sowohl ein *OfferId*- als auch ein [ProductPurchaseDisplayProperties](https://msdn.microsoft.com/library/windows/apps/dn263390)-Objekt bereit, aufgefüllt mit dem Namen des In-App-Produkts.</span><span class="sxs-lookup"><span data-stu-id="fb51e-129">When your app calls the new [RequestProductPurchaseAsync](https://msdn.microsoft.com/library/windows/apps/dn263382) method overload, your app provides both an *OfferId* and a [ProductPurchaseDisplayProperties](https://msdn.microsoft.com/library/windows/apps/dn263390) object populated with the name of the in-app product.</span></span>

> [!div class="tabbedCodeSnippets"]
[!code-cs[<span data-ttu-id="fb51e-130">ManageCatalog</span><span class="sxs-lookup"><span data-stu-id="fb51e-130">ManageCatalog</span></span>](./code/InAppPurchasesAndLicenses/cs/ManageCatalog.cs#MakePurchaseRequest)]

## <a name="report-fulfillment-of-the-in-app-offer"></a><span data-ttu-id="fb51e-131">Melden der Erfüllung des In-App-Angebots</span><span class="sxs-lookup"><span data-stu-id="fb51e-131">Report fulfillment of the in-app offer</span></span>

<span data-ttu-id="fb51e-132">Die App muss die Produkterfüllung an den Store melden, sobald die lokale Erfüllung für das Angebot abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="fb51e-132">Your app will need to report product fulfillment to the Store as soon as the offer has been fulfilled locally.</span></span> <span data-ttu-id="fb51e-133">Wenn die App die Erfüllung des Angebots bei Verwendung eines großen Katalogs nicht meldet, kann der Benutzer keine In-App-Angebote erwerben, für die der gleiche Store-Produkteintrag genutzt wird.</span><span class="sxs-lookup"><span data-stu-id="fb51e-133">In a large catalog scenario, if your app does not report offer fulfillment, the user will be unable to purchase any in-app offers using that same Store product listing.</span></span>

<span data-ttu-id="fb51e-134">Wie bereits erwähnt, verwendet der Store nur bereitgestellte Angebotsinformationen zum Auffüllen von [PurchaseResults](https://msdn.microsoft.com/library/windows/apps/dn263392) und erstellt keine persistente Verknüpfung zwischen einem Angebot aus einem großen Katalog und einem Produkteintrag im Store.</span><span class="sxs-lookup"><span data-stu-id="fb51e-134">As mentioned earlier, the Store only uses provided offer info to populate the [PurchaseResults](https://msdn.microsoft.com/library/windows/apps/dn263392), and does not create a persistent association between a large catalog offer and Store product listing.</span></span> <span data-ttu-id="fb51e-135">Daher müssen Sie die Benutzerberechtigungen für Produkte aus großen Katalogen nachverfolgen und dem Benutzer produktspezifischen Kontext (wie den Namen des gekauften Artikels oder Details zu diesem) außerhalb des [RequestProductPurchaseAsync](https://msdn.microsoft.com/library/windows/apps/dn263382)-Vorgangs zur Verfügung stellen.</span><span class="sxs-lookup"><span data-stu-id="fb51e-135">As a result you need to track user entitlement for products, and provide product-specific context (such as the name of the item being purchased or details about it) to the user outside of the [RequestProductPurchaseAsync](https://msdn.microsoft.com/library/windows/apps/dn263382) operation.</span></span>

<span data-ttu-id="fb51e-136">Der folgende Code veranschaulicht den Erfüllungsaufruf sowie ein Muster für Meldungen auf der Benutzeroberfläche, in das die angebotsspezifischen Informationen eingefügt werden.</span><span class="sxs-lookup"><span data-stu-id="fb51e-136">The following code demonstrates the fulfillment call, and a UI messaging pattern in which the specific offer info is inserted.</span></span> <span data-ttu-id="fb51e-137">Da keine produktspezifischen Informationen vorhanden sind, werden im Beispiel Informationen aus [ListingInformation](https://msdn.microsoft.com/library/windows/apps/br225163) des Produkts verwendet.</span><span class="sxs-lookup"><span data-stu-id="fb51e-137">In the absence of that specific product info, the example uses info from the product [ListingInformation](https://msdn.microsoft.com/library/windows/apps/br225163).</span></span>

> [!div class="tabbedCodeSnippets"]
[!code-cs[<span data-ttu-id="fb51e-138">ManageCatalog</span><span class="sxs-lookup"><span data-stu-id="fb51e-138">ManageCatalog</span></span>](./code/InAppPurchasesAndLicenses/cs/ManageCatalog.cs#ReportFulfillment)]

## <a name="related-topics"></a><span data-ttu-id="fb51e-139">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="fb51e-139">Related topics</span></span>

* [<span data-ttu-id="fb51e-140">Unterstützen des Kaufs von In-App-Produkten</span><span class="sxs-lookup"><span data-stu-id="fb51e-140">Enable in-app product purchases</span></span>](enable-in-app-product-purchases.md)
* [<span data-ttu-id="fb51e-141">Käufe von konsumierbaren In-App-Produkten aktivieren</span><span class="sxs-lookup"><span data-stu-id="fb51e-141">Enable consumable in-app product purchases</span></span>](enable-consumable-in-app-product-purchases.md)
* [<span data-ttu-id="fb51e-142">Store-Beispiel (zeigt Testversionen und In-App-Einkäufe)</span><span class="sxs-lookup"><span data-stu-id="fb51e-142">Store sample (demonstrates trials and in-app purchases)</span></span>](https://github.com/Microsoft/Windows-universal-samples/tree/win10-1507/Samples/Store)
* [<span data-ttu-id="fb51e-143">RequestProductPurchaseAsync</span><span class="sxs-lookup"><span data-stu-id="fb51e-143">RequestProductPurchaseAsync</span></span>](https://msdn.microsoft.com/library/windows/apps/dn263382)
* [<span data-ttu-id="fb51e-144">ProductPurchaseDisplayProperties</span><span class="sxs-lookup"><span data-stu-id="fb51e-144">ProductPurchaseDisplayProperties</span></span>](https://msdn.microsoft.com/library/windows/apps/dn263384)
