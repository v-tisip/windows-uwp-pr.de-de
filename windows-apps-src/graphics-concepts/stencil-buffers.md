---
title: Schablonenpuffer
description: Mit einem Schablonenpuffer werden Pixel in einem Bild maskiert, um Spezialeffekte zu erzeugen.
ms.assetid: 544B3B9E-31E3-41DA-8081-CC3477447E94
keywords:
- Schablonenpuffer
author: michaelfromredmond
ms.author: mithom
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 090dcab3b46b031a16be35973e1183220d5b1da0
ms.sourcegitcommit: 4d88adfaf544a3dab05f4660e2f59bbe60311c00
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/12/2018
ms.locfileid: "6471675"
---
# <a name="stencil-buffers"></a><span data-ttu-id="584ce-104">Schablonenpuffer</span><span class="sxs-lookup"><span data-stu-id="584ce-104">Stencil buffers</span></span>


<span data-ttu-id="584ce-105">Ein *Schablonenpuffer* wird verwendet, um die Pixel in einem Bild zu maskieren und Spezialeffekte zu erzeugen.</span><span class="sxs-lookup"><span data-stu-id="584ce-105">A *stencil buffer* is used to mask pixels in an image, to produce special effects.</span></span> <span data-ttu-id="584ce-106">Die Maske steuert, ob das Pixel gezeichnet wird oder nicht.</span><span class="sxs-lookup"><span data-stu-id="584ce-106">The mask controls whether the pixel is drawn or not.</span></span> <span data-ttu-id="584ce-107">Diese Spezialeffekte umfassen Zusammensetzungen, Auflösungen, Rasterungen, Ein- und Ausblendungen, Wischungen, Umrisse und Silhouetten sowie das Feature „zweiseitige Schablone”.</span><span class="sxs-lookup"><span data-stu-id="584ce-107">These special effects include compositing; decaling; dissolves, fades, and swipes; outlines and silhouettes; and two-sided stencil.</span></span> <span data-ttu-id="584ce-108">Einige der häufigeren Effekte sind unten dargestellt.</span><span class="sxs-lookup"><span data-stu-id="584ce-108">Some of the more common effects are shown below.</span></span>

<span data-ttu-id="584ce-109">Der Schablonenpuffer aktiviert oder deaktiviert das Zeichnen auf der Renderzieloberfläche pixelweise.</span><span class="sxs-lookup"><span data-stu-id="584ce-109">The stencil buffer enables or disables drawing to the rendering target surface on a pixel-by-pixel basis.</span></span> <span data-ttu-id="584ce-110">Auf der Basisebene ermöglicht der Schablonenpuffer, dass Anwendungen Abschnitte des gerenderten Bilds maskieren, damit sie nicht angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="584ce-110">At its most fundamental level, it enables applications to mask sections of the rendered image so that they are not displayed.</span></span> <span data-ttu-id="584ce-111">Anwendungen verwenden Schablonenpuffer häufig für Spezialeffekte wie Auflösungen, Rasterungen und Umrisse.</span><span class="sxs-lookup"><span data-stu-id="584ce-111">Applications often use stencil buffers for special effects such as dissolves, decaling, and outlining.</span></span>

<span data-ttu-id="584ce-112">Informationen des Schablonenpuffers sind in die Z-Pufferdaten eingebettet.</span><span class="sxs-lookup"><span data-stu-id="584ce-112">Stencil buffer information is embedded in the z-buffer data.</span></span>

## <a name="span-idhowthestencilbufferworksspanspan-idhowthestencilbufferworksspanspan-idhowthestencilbufferworksspanhow-the-stencil-buffer-works"></a><span data-ttu-id="584ce-113"><span id="How_the_Stencil_Buffer_Works"></span><span id="how_the_stencil_buffer_works"></span><span id="HOW_THE_STENCIL_BUFFER_WORKS"></span>So funktioniert der Schablonenpuffer</span><span class="sxs-lookup"><span data-stu-id="584ce-113"><span id="How_the_Stencil_Buffer_Works"></span><span id="how_the_stencil_buffer_works"></span><span id="HOW_THE_STENCIL_BUFFER_WORKS"></span>How the stencil buffer works</span></span>


<span data-ttu-id="584ce-114">Direct3D führt einen pixelweisen Test der Inhalte des Schablonenpuffers durch.</span><span class="sxs-lookup"><span data-stu-id="584ce-114">Direct3D performs a test on the contents of the stencil buffer on a pixel-by-pixel basis.</span></span> <span data-ttu-id="584ce-115">Für jedes Pixel in der Zieloberfläche wird ein Test mit dem entsprechenden Wert im Schablonenpuffer, einem Schablonenreferenzwert und einem Schablonenmaskenwert durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="584ce-115">For each pixel in the target surface, it performs a test using the corresponding value in the stencil buffer, a stencil reference value, and a stencil mask value.</span></span> <span data-ttu-id="584ce-116">Wenn der Test erfolgreich ist, führt Direct3D eine Aktion aus.</span><span class="sxs-lookup"><span data-stu-id="584ce-116">If the test passes, Direct3D performs an action.</span></span> <span data-ttu-id="584ce-117">Der Test wird in den folgenden Schritten ausausgeführt:</span><span class="sxs-lookup"><span data-stu-id="584ce-117">The test is performed using the following steps.</span></span>

1.  <span data-ttu-id="584ce-118">Durchführen einer bitweisen AND-Operation des Schablonenreferenzwerts mit der Schablonenmaske.</span><span class="sxs-lookup"><span data-stu-id="584ce-118">Perform a bitwise AND operation of the stencil reference value with the stencil mask.</span></span>
2.  <span data-ttu-id="584ce-119">Durchführen einer bitweisen AND-Operation des Schablonenpufferwerts für das aktuelle Pixel mit der Schablonenmaske.</span><span class="sxs-lookup"><span data-stu-id="584ce-119">Perform a bitwise AND operation of the stencil buffer value for the current pixel with the stencil mask.</span></span>
3.  <span data-ttu-id="584ce-120">Vergleichen des Ergebnisses von Schritt1 mit dem Ergebnis von Schritt2 anhand der Vergleichsfunktion.</span><span class="sxs-lookup"><span data-stu-id="584ce-120">Compare the result of step 1 to the result of step 2, using the comparison function.</span></span>

<span data-ttu-id="584ce-121">Die oben aufgeführten Schritte sind in der folgenden Codezeile dargestellt:</span><span class="sxs-lookup"><span data-stu-id="584ce-121">The above steps are shown in the following line of code:</span></span>

```
(StencilRef & StencilMask) CompFunc (StencilBufferValue & StencilMask)
```

-   <span data-ttu-id="584ce-122">StencilRef stellt den Schablonenreferenzwert dar.</span><span class="sxs-lookup"><span data-stu-id="584ce-122">StencilRef represents the stencil reference value.</span></span>
-   <span data-ttu-id="584ce-123">StencilMask stellt den Wert der Schablonenmaske dar.</span><span class="sxs-lookup"><span data-stu-id="584ce-123">StencilMask represents the value of the stencil mask.</span></span>
-   <span data-ttu-id="584ce-124">CompFunc ist die Vergleichsfunktion.</span><span class="sxs-lookup"><span data-stu-id="584ce-124">CompFunc is the comparison function.</span></span>
-   <span data-ttu-id="584ce-125">StencilBufferValue ist der Inhalt des Schablonenpuffers für das aktuelle Pixel.</span><span class="sxs-lookup"><span data-stu-id="584ce-125">StencilBufferValue is the contents of the stencil buffer for the current pixel.</span></span>
-   <span data-ttu-id="584ce-126">Das kaufmännische Und-Zeichen (&) stellt die bitweise AND-Operation dar.</span><span class="sxs-lookup"><span data-stu-id="584ce-126">The ampersand (&) symbol represents the bitwise AND operation.</span></span>

<span data-ttu-id="584ce-127">Wenn der Schablonentest erfolgreich ist, wird das aktuelle Pixel auf die Zieloberfläche geschrieben, und andernfalls ignoriert.</span><span class="sxs-lookup"><span data-stu-id="584ce-127">The current pixel is written to the target surface if the stencil test passes, and is ignored otherwise.</span></span> <span data-ttu-id="584ce-128">Das Standardverhalten des Vergleichs ist das Pixel unabhängig davon, wie Vorgänge bitweise herausstellt schreiben. Sie können dieses Verhalten ändern, indem Sie den Wert eines Aufzählungstyps auf die gewünschte Vergleichsfunktion zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="584ce-128">The default comparison behavior is to write the pixel, no matter how each bitwise operation turns out. You can change this behavior by changing the value of an enumerated type to identify the desired comparison function.</span></span>

<span data-ttu-id="584ce-129">Sie können in Ihrer Anwendung die Funktionsweise des Schablonenpuffers anpassen.</span><span class="sxs-lookup"><span data-stu-id="584ce-129">Your application can customize the operation of the stencil buffer.</span></span> <span data-ttu-id="584ce-130">In der Anwendung kann die Vergleichsfunktion, die Schablonenmaske und der Schablonenreferenzwert festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="584ce-130">It can set the comparison function, the stencil mask, and the stencil reference value.</span></span> <span data-ttu-id="584ce-131">Es kann auch die Aktion gesteuert werden, die Direct3D im Falle eines erfolgreichen oder eines misslungenen Schablonentests ausführt.</span><span class="sxs-lookup"><span data-stu-id="584ce-131">It can also control the action that Direct3D takes when the stencil test passes or fails.</span></span>

## <a name="span-idcompositingspanspan-idcompositingspanspan-idcompositingspancompositing"></a><span data-ttu-id="584ce-132"><span id="Compositing"></span><span id="compositing"></span><span id="COMPOSITING"></span>Zusammensetzung</span><span class="sxs-lookup"><span data-stu-id="584ce-132"><span id="Compositing"></span><span id="compositing"></span><span id="COMPOSITING"></span>Compositing</span></span>


<span data-ttu-id="584ce-133">Ihre Anwendung kann die Schablonenpuffer verwenden, um 2D- oder 3D-Bilder mit einer 3D-Szene zu kombinieren.</span><span class="sxs-lookup"><span data-stu-id="584ce-133">Your application can use the stencil buffer to composite 2D or 3D images onto a 3D scene.</span></span> <span data-ttu-id="584ce-134">Auf der Renderzieloberfläche wird mit einer Maske in dem Schablonenpuffer ein Bereich verdeckt.</span><span class="sxs-lookup"><span data-stu-id="584ce-134">A mask in the stencil buffer is used to occlude an area of the rendering target surface.</span></span> <span data-ttu-id="584ce-135">Gespeicherte 2D-Informationen, z.B. Text oder Bitmaps, können dann in den verdeckten Bereich geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="584ce-135">Stored 2D information, such as text or bitmaps, can then be written to the occluded area.</span></span> <span data-ttu-id="584ce-136">Alternativ kann die Anwendung weitere 3D-Grundtypen auf den durch die Schablone maskierten Bereich der Renderzieloberfläche rendern.</span><span class="sxs-lookup"><span data-stu-id="584ce-136">Alternately, your application can render additional 3D primitives to the stencil-masked region of the rendering target surface.</span></span> <span data-ttu-id="584ce-137">Es kann sogar eine ganze Szene gerendert werden.</span><span class="sxs-lookup"><span data-stu-id="584ce-137">It can even render an entire scene.</span></span>

<span data-ttu-id="584ce-138">In Spielen sind häufig mehrere 3D-Szenen zusammengesetzt.</span><span class="sxs-lookup"><span data-stu-id="584ce-138">Games often composite multiple 3D scenes together.</span></span> <span data-ttu-id="584ce-139">Zum Beispiel gibt es in Fahrspielen normalerweise einen Rückspiegel.</span><span class="sxs-lookup"><span data-stu-id="584ce-139">For instance, driving games typically display a rear-view mirror.</span></span> <span data-ttu-id="584ce-140">Im Spiegel ist die Ansicht der 3D-Szene hinter dem Fahrer sichtbar.</span><span class="sxs-lookup"><span data-stu-id="584ce-140">The mirror contains the view of the 3D scene behind the driver.</span></span> <span data-ttu-id="584ce-141">Das ist im Grunde eine zweite 3D-Szene, die mit der Sicht des Fahrers nach vorne zusammengesetzt ist.</span><span class="sxs-lookup"><span data-stu-id="584ce-141">It is essentially a second 3D scene composited with the driver's forward view.</span></span>

## <a name="span-iddecalingspanspan-iddecalingspanspan-iddecalingspandecaling"></a><span data-ttu-id="584ce-142"><span id="Decaling"></span><span id="decaling"></span><span id="DECALING"></span>Rasterung</span><span class="sxs-lookup"><span data-stu-id="584ce-142"><span id="Decaling"></span><span id="decaling"></span><span id="DECALING"></span>Decaling</span></span>


<span data-ttu-id="584ce-143">Direct3D-Anwendungen steuern über die Rasterung, welche Pixel aus einem bestimmten Grundtypbild auf die Renderzieloberfläche gezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="584ce-143">Direct3D applications use decaling to control which pixels from a particular primitive image are drawn to the rendering target surface.</span></span> <span data-ttu-id="584ce-144">Anwendungen wenden Rasterungen für die Bilder der Grundtypen an, um komplanare Polygone richtig zu rendern.</span><span class="sxs-lookup"><span data-stu-id="584ce-144">Applications apply decals to the images of primitives to enable coplanar polygons to render correctly.</span></span>

<span data-ttu-id="584ce-145">Zum Beispiel sollten für die Darstellung von Reifenspuren und gelben Linien auf einer Straße die Reifenspuren direkt auf der Straße angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="584ce-145">For instance, when applying tire marks and yellow lines to a roadway, the markings should appear directly on top of the road.</span></span> <span data-ttu-id="584ce-146">Die Z-Werte für die Reifenspuren und die Straße sind aber gleich.</span><span class="sxs-lookup"><span data-stu-id="584ce-146">However, the z values of the markings and the road are the same.</span></span> <span data-ttu-id="584ce-147">Der Tiefenpuffer kann deshalb eventuell keine klare Trennung zwischen den beiden erzeugen.</span><span class="sxs-lookup"><span data-stu-id="584ce-147">Therefore, the depth buffer might not produce a clean separation between the two.</span></span> <span data-ttu-id="584ce-148">Einige Pixel im Hintergrund-Grundtyp werden möglicherweise auf dem Vordergrund-Grundtyp (und umgekehrt) gerendert.</span><span class="sxs-lookup"><span data-stu-id="584ce-148">Some pixels in the back primitive may be rendered on top of the front primitive and vice versa.</span></span> <span data-ttu-id="584ce-149">Das resultierende Bild scheint von Frame zu Frame zu schimmern.</span><span class="sxs-lookup"><span data-stu-id="584ce-149">The resulting image appears to shimmer from frame to frame.</span></span> <span data-ttu-id="584ce-150">Dieser Effekt wird *Z-Konflikt* oder *Flimmern* genannt.</span><span class="sxs-lookup"><span data-stu-id="584ce-150">This effect is called *z-fighting* or *flimmering*.</span></span>

<span data-ttu-id="584ce-151">Um dieses Problem zu beheben, verwenden Sie eine Schablone, mit der der Abschnitt des Hintergrund-Grundtyps maskiert wird, an dem die Rasterung angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="584ce-151">To solve this problem, use a stencil to mask the section of the back primitive where the decal will appear.</span></span> <span data-ttu-id="584ce-152">Deaktivieren Sie die Z-Pufferung, und rendern Sie das Bild des Vordergrund-Grundtyps in den maskierten Bereich der Renderzieloberfläche.</span><span class="sxs-lookup"><span data-stu-id="584ce-152">Turn off z-buffering and render the image of the front primitive into the masked-off area of the render-target surface.</span></span>

<span data-ttu-id="584ce-153">Dieses Problem könnte auch durch mehrere Texturvermischungen behoben werden, aber dies würde die Anzahl der anderen Spezialeffekte, die Ihre Anwendung erzeugen kann, einschränken.</span><span class="sxs-lookup"><span data-stu-id="584ce-153">Although multiple texture blending can be used to solve this problem, doing so limits the number of other special effects that your application can produce.</span></span> <span data-ttu-id="584ce-154">Durch die Verwendung des Schablonenpuffers für Rasterungen werden Texturvermischungsphasen für andere Effekte freigegeben.</span><span class="sxs-lookup"><span data-stu-id="584ce-154">Using the stencil buffer to apply decals frees up texture blending stages for other effects.</span></span>

## <a name="span-iddissolvesfadesandswipesspanspan-iddissolvesfadesandswipesspanspan-iddissolvesfadesandswipesspandissolves-fades-and-swipes"></a><span data-ttu-id="584ce-155"><span id="Dissolves__fades__and_swipes"></span><span id="dissolves__fades__and_swipes"></span><span id="DISSOLVES__FADES__AND_SWIPES"></span>Auflösungen, Ein- und Ausblendungen, Wischungen</span><span class="sxs-lookup"><span data-stu-id="584ce-155"><span id="Dissolves__fades__and_swipes"></span><span id="dissolves__fades__and_swipes"></span><span id="DISSOLVES__FADES__AND_SWIPES"></span>Dissolves, fades, and swipes</span></span>


<span data-ttu-id="584ce-156">Immer mehr Anwendungen setzen Spezialeffekte ein, die häufig in Filmen und Videos verwendet werden, wie Auflösungen, Wischungen sowie Ein- und Ausblendungen.</span><span class="sxs-lookup"><span data-stu-id="584ce-156">Increasingly, applications employ special effects that are commonly used in movies and video, such as dissolves, swipes, and fades.</span></span>

<span data-ttu-id="584ce-157">Bei einer Auflösung wird ein Bild allmählich durch ein anderes in einer übergangslosen Framesequenz ersetzt.</span><span class="sxs-lookup"><span data-stu-id="584ce-157">In a dissolve, one image is gradually replaced by another in a smooth sequence of frames.</span></span> <span data-ttu-id="584ce-158">Direct3D stellt zwar Methoden für die Verwendung mehrerer Texturvermischungen bereit, um den gleichen Effekt zu erzielen, aber Anwendungen, die den Schablonenpuffer für Auflösungen verwenden, können die Texturvermischungsfunktionen bei einer Auflösung für andere Effekte nutzen.</span><span class="sxs-lookup"><span data-stu-id="584ce-158">Although Direct3D provides methods of using multiple texture blending to achieve the same effect, applications that use the stencil buffer for dissolves can use texture-blending capabilities for other effects while they do a dissolve.</span></span>

<span data-ttu-id="584ce-159">Wenn Ihre Anwendung eine Auflösung durchführt, muss sie zwei verschiedene Bilder rendern.</span><span class="sxs-lookup"><span data-stu-id="584ce-159">When your application performs a dissolve, it must render two different images.</span></span> <span data-ttu-id="584ce-160">Die Anwendung steuert mit dem Schablonenpuffer, welche Pixel aus jedem Bild auf die Renderzieloberfläche gezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="584ce-160">It uses the stencil buffer to control which pixels from each image are drawn to the rendering target surface.</span></span> <span data-ttu-id="584ce-161">Sie können eine Reihe von Schablonenmasken definieren und sie in den Schablonenpuffer in aufeinanderfolgende Frames kopieren.</span><span class="sxs-lookup"><span data-stu-id="584ce-161">You can define a series of stencil masks and copy them into the stencil buffer on successive frames.</span></span> <span data-ttu-id="584ce-162">Alternativ können Sie eine Basisschablonenmaske für den ersten Frame definieren und diese inkrementell ändern.</span><span class="sxs-lookup"><span data-stu-id="584ce-162">Alternately, you can define a base stencil mask for the first frame and alter it incrementally.</span></span>

<span data-ttu-id="584ce-163">Am Anfang der Auflösung legt die Anwendung die Schablonenfunktion und die Schablonenmaske fest, sodass der Schablonentest für die meisten Pixel aus dem Startbild erfolgreich ist.</span><span class="sxs-lookup"><span data-stu-id="584ce-163">At the beginning of the dissolve, your application sets the stencil function and stencil mask so that most of the pixels from the starting image pass the stencil test.</span></span> <span data-ttu-id="584ce-164">Der Schablonentest für die meisten Pixel aus dem Endbild sollte nicht erfolgreich sein.</span><span class="sxs-lookup"><span data-stu-id="584ce-164">Most of the pixels from the ending image should fail the stencil test.</span></span> <span data-ttu-id="584ce-165">In aufeinanderfolgenden Frames wird die Schablonenmaske aktualisiert, sodass der Test für immer weniger Pixel aus dem Startbild erfolgreich ist.</span><span class="sxs-lookup"><span data-stu-id="584ce-165">On successive frames, the stencil mask is updated so that fewer and fewer of the pixels in the starting image pass the test.</span></span> <span data-ttu-id="584ce-166">Mit jedem weiteren Frame ist der Test für immer weniger Pixel aus dem Endbild nicht erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="584ce-166">As the frames progress, fewer and fewer of the pixels in the ending image fail the test.</span></span> <span data-ttu-id="584ce-167">Auf diese Weise kann die Anwendung mit jedem beliebigen Auflösungsmuster eine Auflösung durchführen.</span><span class="sxs-lookup"><span data-stu-id="584ce-167">In this manner, your application can perform a dissolve using any arbitrary dissolve pattern.</span></span>

<span data-ttu-id="584ce-168">Einblendungen oder Ausblendungen sind ein Sonderfälle der Auflösung.</span><span class="sxs-lookup"><span data-stu-id="584ce-168">Fading in or fading out is a special case of dissolving.</span></span> <span data-ttu-id="584ce-169">Beim Einblenden wird der Schablonenpuffer verwendet, um ein schwarzes oder weißes Bild in ein Rendering einer 3D-Szene aufzulösen.</span><span class="sxs-lookup"><span data-stu-id="584ce-169">When fading in, the stencil buffer is used to dissolve from a black or white image to a rendering of a 3D scene.</span></span> <span data-ttu-id="584ce-170">Ausblenden ist das Gegenteil. Die Anwendung beginnt mit einem Rendering einer 3D-Szene und löst sie in Schwarz oder Weiß auf.</span><span class="sxs-lookup"><span data-stu-id="584ce-170">Fading out is the opposite, your application starts with a rendering of a 3D scene and dissolves to black or white.</span></span> <span data-ttu-id="584ce-171">Ein- oder Ausblenden kann mit jedem beliebigen Muster, das Sie verwenden möchten, durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="584ce-171">The fade can be done using any arbitrary pattern you want to employ.</span></span>

<span data-ttu-id="584ce-172">Direct3D-Anwendungen verwenden eine ähnliche Technik für Wischungen.</span><span class="sxs-lookup"><span data-stu-id="584ce-172">Direct3D applications use a similar technique for swipes.</span></span> <span data-ttu-id="584ce-173">Wenn eine Anwendung zum Beispiel eine Wischung von links nach rechts durchführt, gleitet das Endbild nach und nach von links nach rechts auf das Startbild.</span><span class="sxs-lookup"><span data-stu-id="584ce-173">For example, when an application performs a left-to-right swipe, the ending image appears to slide gradually on top of the starting image from left to right.</span></span> <span data-ttu-id="584ce-174">Wie bei einer Auflösung müssen Sie eine Reihe von Schablonenmasken definieren, die in aufeinanderfolgenden Frames in den Schablonenpuffer geladen werden, oder fortlaufend die erste Schablonenmaske ändern.</span><span class="sxs-lookup"><span data-stu-id="584ce-174">As in a dissolve, you must define a series of stencil masks that are loaded into the stencil buffer on successive frames, or successively modify the starting stencil mask.</span></span> <span data-ttu-id="584ce-175">Die Schablonenmasken werden verwendet, um das Schreiben von Pixeln aus dem Startbild zu deaktivieren und das Schreiben von Pixeln aus dem Endbild zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="584ce-175">The stencil masks are used to disable the writing of pixels from the starting image and to enable the writing of pixels from the ending image.</span></span>

<span data-ttu-id="584ce-176">Eine Wischung ist etwas komplexer als eine Auflösung, da die Anwendung Pixel aus dem Endbild in umgekehrter Reihenfolge der Wischung lesen muss.</span><span class="sxs-lookup"><span data-stu-id="584ce-176">A swipe is somewhat more complex than a dissolve in that your application must read pixels from the ending image in the reverse order of the swipe.</span></span> <span data-ttu-id="584ce-177">Das heißt, wenn sich die Wischung von links nach rechts bewegt, muss die Anwendung Pixel aus dem Endbild von rechts nach links lesen.</span><span class="sxs-lookup"><span data-stu-id="584ce-177">That is, if the swipe is moving from left to right, your application must read pixels from the ending image from right to left.</span></span>

## <a name="span-idoutlinesandsilhouettesspanspan-idoutlinesandsilhouettesspanspan-idoutlinesandsilhouettesspanoutlines-and-silhouettes"></a><span data-ttu-id="584ce-178"><span id="Outlines_and_silhouettes"></span><span id="outlines_and_silhouettes"></span><span id="OUTLINES_AND_SILHOUETTES"></span>Umrisse und Silhouetten</span><span class="sxs-lookup"><span data-stu-id="584ce-178"><span id="Outlines_and_silhouettes"></span><span id="outlines_and_silhouettes"></span><span id="OUTLINES_AND_SILHOUETTES"></span>Outlines and silhouettes</span></span>


<span data-ttu-id="584ce-179">Sie können den Schablonenpuffer für abstraktere Effekte, wie Umrisse und Silhouetten, verwenden.</span><span class="sxs-lookup"><span data-stu-id="584ce-179">You can use the stencil buffer for more abstract effects, such as outlining and silhouetting.</span></span>

<span data-ttu-id="584ce-180">Wenn die Anwendung eine Schablonenmaske mit der gleichen, aber etwas kleineren Form auf das Bild eines Grundtyps anwendet, enthält das resultierende Bild nur den Umriss des Grundtyps.</span><span class="sxs-lookup"><span data-stu-id="584ce-180">If your application applies a stencil mask to the image of a primitive that is the same shape but slightly smaller, the resulting image contains only the primitive's outline.</span></span> <span data-ttu-id="584ce-181">Die Anwendung kann dann den durch die Schablone maskierten Bereich des Bilds mit einer Volltonfarbe ausfüllen. Der Grundtyp erhält so ein geprägtes Aussehen.</span><span class="sxs-lookup"><span data-stu-id="584ce-181">The application can then fill the stencil-masked area of the image with a solid color, giving the primitive an embossed look.</span></span>

<span data-ttu-id="584ce-182">Wenn die Schablonenmaske die gleiche Größe und Form wie der Grundtyp hat, den Sie rendern, enthält das resultierende Bild an der Stelle eine Lücke, an der sich der Grundtyp befinden sollte.</span><span class="sxs-lookup"><span data-stu-id="584ce-182">If the stencil mask is the same size and shape as the primitive you are rendering, the resulting image contains a hole where the primitive should be.</span></span> <span data-ttu-id="584ce-183">Die Anwendung kann die Lücke mit Schwarz ausfüllen, um eine Silhouette des Grundtyps zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="584ce-183">Your application can then fill the hole with black to produce a silhouette of the primitive.</span></span>

## <a name="span-idtwo-sidedstencilspanspan-idtwo-sidedstencilspanspan-idtwo-sidedstencilspantwo-sided-stencil"></a><span data-ttu-id="584ce-184"><span id="Two-sided_stencil"></span><span id="two-sided_stencil"></span><span id="TWO-SIDED_STENCIL"></span>Zweiseitige Schablone</span><span class="sxs-lookup"><span data-stu-id="584ce-184"><span id="Two-sided_stencil"></span><span id="two-sided_stencil"></span><span id="TWO-SIDED_STENCIL"></span>Two-sided stencil</span></span>


<span data-ttu-id="584ce-185">Zum Zeichnen von Schatten mit dem Schablonenpuffer werden Schattenvolumen verwendet.</span><span class="sxs-lookup"><span data-stu-id="584ce-185">Shadow Volumes are used for drawing shadows with the stencil buffer.</span></span> <span data-ttu-id="584ce-186">Die Anwendung berechnet die Schattenvolumenumwandlung durch verdeckende Geometrie, indem die Ränder der Silhouette berechnet und aus dem Licht in eine Gruppe von 3D-Volumen extrudiert werden.</span><span class="sxs-lookup"><span data-stu-id="584ce-186">The application computes the shadow volumes cast by occluding geometry, by computing the silhouette edges and extruding them away from the light into a set of 3D volumes.</span></span> <span data-ttu-id="584ce-187">Diese Volumen werden dann zweimal in den Schablonenpuffer gerendert.</span><span class="sxs-lookup"><span data-stu-id="584ce-187">These volumes are then rendered twice into the stencil buffer.</span></span>

<span data-ttu-id="584ce-188">Beim ersten Rendern werden die nach vorne gerichteten Polygone gezeichnet und die Werte im Schablonenpuffer erhöht.</span><span class="sxs-lookup"><span data-stu-id="584ce-188">The first render draws forward-facing polygons, and increments the stencil-buffer values.</span></span> <span data-ttu-id="584ce-189">Beim zweiten Rendern werden die nach hinten gerichteten Polygone des Schattenvolumens gezeichnet und die Werte im Schablonenpuffer verringert.</span><span class="sxs-lookup"><span data-stu-id="584ce-189">The second render draws the back-facing polygons of the shadow volume, and decrements the stencil buffer values.</span></span> <span data-ttu-id="584ce-190">In der Regel heben sich alle verringerten Werte gegenseitig. Allerdings wurde die Szene bereits mit normaler Geometrie, die für einige Pixel den Z-Puffer-Test fehlschlägt, wie das Volume Schatten gerendert wird beim gerendert.</span><span class="sxs-lookup"><span data-stu-id="584ce-190">Normally, all incremented and decremented values cancel each other out. However, the scene was already rendered with normal geometry causing some pixels to fail the z-buffer test as the shadow volume is rendered.</span></span> <span data-ttu-id="584ce-191">Werte, die im Schablonenpuffer verblieben sind, entsprechen den Pixeln, die sich im Schatten befinden.</span><span class="sxs-lookup"><span data-stu-id="584ce-191">Values left in the stencil buffer correspond to pixels that are in the shadow.</span></span> <span data-ttu-id="584ce-192">Dieser verbliebene Inhalt des Schablonenpuffers wird als Maske verwendet, um ein großes, allumfassendes schwarzes Viereck in der Szene per Alpha-Überblendung zu überlagern.</span><span class="sxs-lookup"><span data-stu-id="584ce-192">These remaining stencil-buffer contents are used as a mask, to alpha-blend a large, all-encompassing black quad into the scene.</span></span> <span data-ttu-id="584ce-193">Das Ergebnis der Verwendung des Schablonenpuffers als Maske besteht darin, dass Pixel, die im Schatten liegen, dunkler werden.</span><span class="sxs-lookup"><span data-stu-id="584ce-193">With the stencil buffer acting as a mask, the result is to darken pixels that are in the shadows.</span></span>

<span data-ttu-id="584ce-194">Dies bedeutet, dass die Schattengeometrie zweimal pro Lichtquelle gezeichnet wird, und somit der Vertexdurchsatz der GPU stark belastet wird.</span><span class="sxs-lookup"><span data-stu-id="584ce-194">This means that the shadow geometry is drawn twice per light source, hence putting pressure on the vertex throughput of the GPU.</span></span> <span data-ttu-id="584ce-195">Das Feature „zweiseitige Schablone” wurde entwickelt, um diese Situation abzuschwächen.</span><span class="sxs-lookup"><span data-stu-id="584ce-195">The two-sided stencil feature has been designed to mitigate this situation.</span></span> <span data-ttu-id="584ce-196">In diesen Ansatz gibt es zwei Gruppen von Schablonenzuständen, einen für die nach vorne gerichteten Dreiecke und den anderen für die nach hinten gerichteten Dreiecke.</span><span class="sxs-lookup"><span data-stu-id="584ce-196">In this approach, there are two sets of stencil state (named below), one set each for the front-facing triangles and the other for the back-facing triangles.</span></span> <span data-ttu-id="584ce-197">Auf diese Weise wird nur ein einziger Durchlauf pro Schattenvolumen und pro Licht gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="584ce-197">This way, only a single pass is drawn per shadow volume, per light.</span></span>

## <a name="span-idrelated-topicsspanrelated-topics"></a><span data-ttu-id="584ce-198"><span id="related-topics"></span>Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="584ce-198"><span id="related-topics"></span>Related topics</span></span>


[<span data-ttu-id="584ce-199">Tiefen- und Schablonenpuffer</span><span class="sxs-lookup"><span data-stu-id="584ce-199">Depth and stencil buffers</span></span>](depth-and-stencil-buffers.md)

 

 




