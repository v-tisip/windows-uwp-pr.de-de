---
title: Sampling am nächstgelegenen Punkt
description: Apps müssen nicht die Texturfilterung verwenden.
ms.assetid: D7F88320-2C61-47E9-9B92-EC31D48DB079
keywords:
- Sampling am nächstgelegenen Punkt
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 18703a75747e09436e7938e1229dda09cd457fa5
ms.sourcegitcommit: 49d58bc66c1c9f2a4f81473bcb25af79e2b1088d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/11/2018
ms.locfileid: "8946727"
---
# <a name="span-iddirect3dconceptsnearest-pointsamplingspannearest-point-sampling"></a><span data-ttu-id="6f1f2-104"><span id="direct3dconcepts.nearest-point_sampling"></span>Sampling am nächstgelegenen Punkt</span><span class="sxs-lookup"><span data-stu-id="6f1f2-104"><span id="direct3dconcepts.nearest-point_sampling"></span>Nearest-point sampling</span></span>


<span data-ttu-id="6f1f2-105">Apps müssen nicht die Texturfilterung verwenden.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-105">Applications are not required to use texture filtering.</span></span> <span data-ttu-id="6f1f2-106">Direct3D kann so eingerichtet werden, dass es die Texeladresse berechnet, die häufig nicht auf ganze Zahlen geschätzt wird, und die Farbe des Texels mit der nächstgelegenen ganzzahligen Adresse kopiert.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-106">Direct3D can be set so that it computes the texel address, which often does not evaluate to integers, and copies the color of the texel with the closest integer address.</span></span> <span data-ttu-id="6f1f2-107">Dieser Prozess wird bezeichnet als *Sampling am nächstgelegenen Punkt*.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-107">This process is called *nearest-point sampling*.</span></span> <span data-ttu-id="6f1f2-108">Sampling am nächstgelegenen Punkt kann eine schnelle und effiziente Möglichkeit zum Verarbeiten von Texturen darstellen, wenn die Größe der Textur der Größe der Abbildung der Primitive auf dem Bildschirm ähnelt.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-108">Nearest-point sampling can be a fast and efficient way to process textures if the size of the texture is similar to the size of the primitive's image on the screen.</span></span> <span data-ttu-id="6f1f2-109">Ist dies nicht der Fall, muss die Textur vergrößert oder verkleinert werden.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-109">If not, the texture must be magnified or minified.</span></span> <span data-ttu-id="6f1f2-110">Das Ergebnis einer mangelnden Übereinstimmung zwischen Texturgröße und der Größe der Abbildung der Primitive kann ein grobes, nicht kantengeglättetes oder verschwommenes Bild sein.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-110">The result of mismatching texture sizes to primitive image size can be a chunky, aliased, or blurred image.</span></span>

<span data-ttu-id="6f1f2-111">Verwenden Sie Sampling am nächstgelegenen Punkt vorsichtig, da es manchmal Grafikartefakte verursachen kann, wenn die Textur an der Grenze zwischen zwei Texeln gesampelt wird.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-111">Use nearest-point sampling carefully, because it can sometimes cause graphic artifacts when the texture is sampled at the boundary between two texels.</span></span> <span data-ttu-id="6f1f2-112">Diese Grenze ist die Position entlang der Textur (u oder v), an der das gesampelte Texel von einem Texel-zum nächsten übergeht.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-112">This boundary is the position along the texture (u or v) at which the sampled texel transitions from one texel to the next.</span></span> <span data-ttu-id="6f1f2-113">Wenn Punktsampling verwendet wird, wählt das System ein Probe-Texel oder das andere aus, und das Ergebnis kann sich von einem Texel zum nächsten Texel bei Überschreiten der Grenze abrupt ändern.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-113">When point sampling is used, the system chooses one sample texel or the other, and the result can change abruptly from one texel to the next texel as the boundary is crossed.</span></span> <span data-ttu-id="6f1f2-114">Dieser Effekt kann als unerwünschte Grafikartefakte in der angezeigten Textur erscheinen.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-114">This effect can appear as undesired graphic artifacts in the displayed texture.</span></span> <span data-ttu-id="6f1f2-115">Wenn lineare Filterung verwendet wird, wird das resultierende Texel aus beiden benachbarten Texeln berechnet und fügt sich reibungslos zwischen diese ein, wenn sich der Texturindex über die Grenze bewegt.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-115">When linear filtering is used, the resulting texel is computed from both adjacent texels and smoothly blends between them as the texture index moves through the boundary.</span></span>

<span data-ttu-id="6f1f2-116">Dieser Effekt tritt auf, wenn Sie eine sehr kleine Textur auf ein sehr großes Polygon abbilden: ein Vorgang, der häufig als Vergrößerung bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-116">This effect can be seen when mapping a very small texture onto a very large polygon: an operation often called magnification.</span></span> <span data-ttu-id="6f1f2-117">Bei der Verwendung einer Textur, die wie ein Schachbrett aussieht, ergibt das Sampling am nächstgelegenen Punkt beispielsweise ein größeres Schachbrett, das ausgeprägte Ränder zeigt.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-117">For example, when using a texture that looks like a checkerboard, nearest-point sampling results in a larger checkerboard that shows distinct edges.</span></span> <span data-ttu-id="6f1f2-118">Im Gegensatz dazu führt die lineare Filterung der Textur zu einem Bild, in dem die Farben des Schachbretts reibungslos über das Polygon variieren.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-118">By contrast, linear texture filtering results in an image where the checkerboard colors vary smoothly across the polygon.</span></span>

<span data-ttu-id="6f1f2-119">In den meisten Fällen erreichen Anwendungen die besten Ergebnisse durch Vermeiden von Sampling am nächstgelegenen Punkt, wann immer dies möglich ist.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-119">In most cases, applications receive the best results by avoiding nearest-point sample wherever possible.</span></span> <span data-ttu-id="6f1f2-120">Die Mehrzahl der Hardware ist heute für die lineare Filterung optimiert, so dass Ihre Anwendung nicht unter einer Leistungsminderung leiden sollte.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-120">The majority of hardware today is optimized for linear filtering, so your application should not suffer degraded performance.</span></span> <span data-ttu-id="6f1f2-121">Wenn der gewünschte Effekt die Verwendung von Sampling am nächstgelegenen Punkt unbedingt erfordert - z. B. beim Verwenden von Texturen zum Anzeigen lesbarer Textzeichen - sollte Ihre Anwendung extrem vorsichtig sein, um ein Sampling an den Texel-Grenzen zu vermeiden, was zu unerwünschten Effekten führen könnte.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-121">If the effect you desire absolutely requires the use of the nearest-point sampling - such as when using textures to display readable text characters - then your application should be extremely careful to avoid sampling at the texel boundaries, which might result in undesired effects.</span></span> <span data-ttu-id="6f1f2-122">Die folgende Abbildungzeigt, wie diese Artefakte aussehen könnten.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-122">The following illustration shows what these artifacts can look like.</span></span>

![Abbildungeines in sechs Abschnitte unterteilten Feldes mit nicht durchgehenden horizontalen Linien in den beiden Quadraten oben rechts](images/ptrtfct.png)

<span data-ttu-id="6f1f2-124">Die zwei Quadrate oben rechts in der Gruppe scheinen anders als ihre Nachbarn, wobei diagonale Versätze durch sie hindurchlaufen.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-124">The two squares in the upper right of the group appear different than their neighbors, with diagonal offsets running through them.</span></span> <span data-ttu-id="6f1f2-125">Um solche Grafikartefakte zu vermeiden, müssen Sie mit Direct3D-Textur-Sampling-Regeln für die Filterung am nächstgelegenen Punkt vertraut sein.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-125">To avoid graphic artifacts like these, you must be familiar with Direct3D texture sampling rules for nearest-point filtering.</span></span> <span data-ttu-id="6f1f2-126">Direct3D ordnet eine Gleitkomma-Texturkoordinate zwischen \[0,0, 1,0\] (einschließlich 0,0 und 1,0) einem ganzzahligen Texel-Raumwert zwischen \ [- ,.5, n - 0,5\] zu, mit n als die Anzahl der Texel in einer bestimmten Dimension auf die Textur.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-126">Direct3D maps a floating-point texture coordinate ranging from \[0.0, 1.0\] (0.0 to 1.0, inclusive) to an integer texel space value ranging from \[ - 0.5, n - 0.5\], where n is the number of texels in a given dimension on the texture.</span></span> <span data-ttu-id="6f1f2-127">Der resultierende Texturindex wird auf die nächste ganze Zahl gerundet.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-127">The resulting texture index is rounded to the nearest integer.</span></span> <span data-ttu-id="6f1f2-128">Diese Zuordnung kann Sampling-Ungenauigkeiten an Texel-Grenzen einführen.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-128">This mapping can introduce sampling inaccuracies at texel boundaries.</span></span>

<span data-ttu-id="6f1f2-129">Ein einfaches Beispiel: Stellen Sie sich eine Anwendung vor, die Polygone mit dem Wrap-Textur-Adressierungsmodus berechnet und ausgibt.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-129">For a simple example, imagine an application that renders polygons with the Wrap texture addressing mode.</span></span> <span data-ttu-id="6f1f2-130">Mithilfe der Zuordnung von Direct3D ordnet der u-Texturindex, wie im folgenden Diagramm für eine Textur mit einer Breite von 4 Texeln veranschaulicht, zu.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-130">Using the mapping employed by Direct3D, the u texture index maps as show in the following diagram for a texture with a width of 4 texels.</span></span>

![Diagramm der Texturkoordinaten 0,0 und 1,0 an der Grenze zwischen Texeln](images/ptsmpprb.png)

<span data-ttu-id="6f1f2-132">Die Texturkoordinaten 0,0 und 1,0 für diese Abbildungsind genau an der Grenze zwischen Texeln.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-132">The texture coordinates, 0.0 and 1.0 for this illustration, are exactly at the boundary between texels.</span></span> <span data-ttu-id="6f1f2-133">Bei Verwendung der Methode, mit der Direct3D Werte zuordnet, liegen die Texturkoordinaten in einem Bereich zwischen \ [- 0,5, 4 - 0,5\], wobei 4 die Breite der Textur ist.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-133">Using the method by which Direct3D maps values, the texture coordinates range from \[ - 0.5, 4 - 0.5\], where 4 is the width of the texture.</span></span> <span data-ttu-id="6f1f2-134">Für diesen Fall ist das aufgenommene Texel das Texel 0 für einen Texturindex von 1,0.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-134">For this case, the sampled texel is the 0 texel for a texture index of 1.0.</span></span> <span data-ttu-id="6f1f2-135">Wenn die Texturkoordinate jedoch lediglich leicht unter 1,0 lag, würde das aufgenommene Texel das Texel n sein, und nicht das Texel 0.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-135">However, if the texture coordinate was only slightly less than 1.0, the sampled texel would be the n texel instead of the 0 texel.</span></span>

<span data-ttu-id="6f1f2-136">Das bedeutet, dass eine Vergrößerung einer kleinen Textur unter Verwendung von Texturkoordinaten von genau 0,0 und 1,0 mit Filterung am nächstgelegenen Punkt auf einem mit dem Bildschirmbereich ausgerichteten Dreieck zu Pixeln führt, für die die Texturzuordnung an der Grenze zwischen Texeln gesampelt wird.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-136">The implication of this is that magnifying a small texture using texture coordinates of exactly 0.0 and 1.0 with nearest-point filtering on a screen-space aligned triangle results in pixels for which the texture map is sampled at the boundary between texels.</span></span> <span data-ttu-id="6f1f2-137">Eventuelle Ungenauigkeiten bei der Berechnung von Texturkoordinaten, wie geringfügig sie auch sein mögen, führen zu Artefakten entlang der Bereiche des ausgegebenen Bildes, die den Texel-Kanten der Texturzuordnung entsprechen.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-137">Any inaccuracies in the computation of texture coordinates, however small, results in artifacts along the areas in the rendered image which correspond to the texel edges of the texture map.</span></span>

<span data-ttu-id="6f1f2-138">Die Zuordnung von Gleitkomma-Texturkoordinaten zu ganzzahligen Texeln mit absoluter Genauigkeit ist schwierig, erfordert eine lange Rechenzeit und ist in der Regel nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-138">Performing this mapping of floating point texture coordinates to integer texels with perfect accuracy is difficult, computationally time-consuming, and generally not necessary.</span></span> <span data-ttu-id="6f1f2-139">Die meisten Hardwareimplementierungen verwenden einen iterativen Ansatz zum Berechnen der Texturkoordinaten an jedem Pixelstandort in einem Dreieck.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-139">Most hardware implementations use an iterative approach for computing texture coordinates at each pixel location within a triangle.</span></span> <span data-ttu-id="6f1f2-140">Iterative Ansätze neigen dazu, diese Ungenauigkeiten auszublenden, da die Fehler während der Iteration gleichmäßig auflaufen.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-140">Iterative approaches tend to hide these inaccuracies because the errors are accumulated evenly during iteration.</span></span>

<span data-ttu-id="6f1f2-141">Der Direct3D-Referenz-Rasterizer verwendet einen direkten Bewertungsansatz zum Berechnen der Texturindizes an jedem Pixelstandort.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-141">The Direct3D reference rasterizer uses a direct-evaluation approach for computing texture indexes at each pixel location.</span></span> <span data-ttu-id="6f1f2-142">Eine direkte Bewertung unterscheidet sich vom iterativen Ansatz dahingehend, dass alle Ungenauigkeiten im Vorgang eine zufälligere Verteilung der Fehler aufweisen.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-142">Direct evaluation differs from the iterative approach in that any inaccuracy in the operation exhibits a more random error distribution.</span></span> <span data-ttu-id="6f1f2-143">Im Ergebnis können die an den Grenzen auftretenden Samplingfehler deutlicher bemerkbar werden, da der Referenz-Rasterizer diesen Vorgang nicht mit absoluter Genauigkeit durchführt.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-143">The result of this is that the sampling errors that occur at the boundaries can be more noticeable because the reference rasterizer does not perform this operation with perfect accuracy.</span></span>

<span data-ttu-id="6f1f2-144">Der beste Ansatz besteht in der Verwendung der Filterung am nächstgelegenen Punkt nur bei Bedarf.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-144">The best approach is to use nearest-point filtering only when necessary.</span></span> <span data-ttu-id="6f1f2-145">Wenn Sie diese verwenden müssen, empfiehlt es sich die Texturkoordinaten geringfügig von den Grenzpositionen zu versetzen, um Artefakte zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="6f1f2-145">When you must use it, it is recommended that you offset texture coordinates slightly from the boundary positions to avoid artifacts.</span></span>

## <a name="span-idrelated-topicsspanrelated-topics"></a><span data-ttu-id="6f1f2-146"><span id="related-topics"></span>Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="6f1f2-146"><span id="related-topics"></span>Related topics</span></span>


[<span data-ttu-id="6f1f2-147">Texturfilterung</span><span class="sxs-lookup"><span data-stu-id="6f1f2-147">Texture filtering</span></span>](texture-filtering.md)

 

 




