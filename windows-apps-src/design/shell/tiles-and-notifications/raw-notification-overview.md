---
Description: Raw notifications are short, general purpose push notifications.
title: Übersicht über unformatierte Benachrichtigungen
ms.assetid: A867C75D-D16E-4AB5-8B44-614EEB9179C7
template: detail.hbs
ms.date: 05/19/2017
ms.topic: article
keywords: windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: ad00090fdfc3ce7be34ef6271d16e76541b584bb
ms.sourcegitcommit: b4c502d69a13340f6e3c887aa3c26ef2aeee9cee
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/03/2018
ms.locfileid: "8461546"
---
# <a name="raw-notification-overview"></a><span data-ttu-id="f979c-103">Übersicht über unformatierte Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="f979c-103">Raw notification overview</span></span>


<span data-ttu-id="f979c-104">Unformatierte Benachrichtigungen sind kurze, allgemeine Pushbenachrichtigungen.</span><span class="sxs-lookup"><span data-stu-id="f979c-104">Raw notifications are short, general purpose push notifications.</span></span> <span data-ttu-id="f979c-105">Sie dienen ausschließlich zu Anweisungszwecken und enthalten keine UI-Komponente.</span><span class="sxs-lookup"><span data-stu-id="f979c-105">They are strictly instructional and do not include a UI component.</span></span> <span data-ttu-id="f979c-106">Wie bei anderen Pushbenachrichtigungen übermittelt das Feature für den Windows-Pushbenachrichtigungsdienst (Windows Push Notification Service, WNS) unformatierte Benachrichtigungen von Ihrem Clouddienst an Ihre App.</span><span class="sxs-lookup"><span data-stu-id="f979c-106">As with other push notifications, the Windows Push Notification Services (WNS) feature delivers raw notifications from your cloud service to your app.</span></span>

<span data-ttu-id="f979c-107">Unformatierte Benachrichtigungen können für verschiedenste Zwecke verwendet werden, z.B. zum Auslösen einer Hintergrundaufgabe in der App, wenn der Benutzer der App die entsprechende Berechtigung erteilt hat.</span><span class="sxs-lookup"><span data-stu-id="f979c-107">You can use raw notifications for a variety of purposes, including to trigger your app to run a background task if the user has given the app permission to do so.</span></span> <span data-ttu-id="f979c-108">Durch die Verwendung von WNS für die Kommunikation mit der App entfällt der Verarbeitungsaufwand für das Erstellen dauerhafter Socketverbindungen, Senden von HTTPGET-Nachrichten und andere Verbindungen zwischen Dienst und App.</span><span class="sxs-lookup"><span data-stu-id="f979c-108">By using WNS to communicate with your app, you can avoid the processing overhead of creating persistent socket connections, sending HTTP GET messages, and other service-to-app connections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f979c-109">Um die Funktionsweise von unformatierten Benachrichtigungen verstehen zu können, sollten Sie mit den in [Übersicht über den den Windows-Pushbenachrichtigungsdienst (Windows Push Notification Service, WNS)](windows-push-notification-services--wns--overview.md) erörterten Konzepten vertraut sein.</span><span class="sxs-lookup"><span data-stu-id="f979c-109">To understand raw notifications, it's best to be familiar with the concepts discussed in the [Windows Push Notification Services (WNS) overview](windows-push-notification-services--wns--overview.md).</span></span>

 

<span data-ttu-id="f979c-110">Wie bei Popup-, Kachel- und Signalpushbenachrichtigungen wird eine unformatierte Benachrichtigung vom Clouddienst Ihrer App über einen zugewiesenen Kanal-URI (Uniform Resource Identifier) an WNS gesendet.</span><span class="sxs-lookup"><span data-stu-id="f979c-110">As with toast, tile, and badge push notifications, a raw notification is pushed from your app's cloud service over an assigned channel Uniform Resource Identifier (URI) to WNS.</span></span> <span data-ttu-id="f979c-111">WNS wiederum übermittelt die Benachrichtigung an das Gerät und das Benutzerkonto, das diesem Kanal zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="f979c-111">WNS, in turn, delivers the notification to the device and user account associated with that channel.</span></span> <span data-ttu-id="f979c-112">Im Gegensatz zu anderen Pushbenachrichtigungen weisen unformatierte Benachrichtigungen kein bestimmtes Format auf.</span><span class="sxs-lookup"><span data-stu-id="f979c-112">Unlike other push notifications, raw notifications don't have a specified format.</span></span> <span data-ttu-id="f979c-113">Der Inhalt der Nutzlast wird ausschließlich durch die App definiert.</span><span class="sxs-lookup"><span data-stu-id="f979c-113">The content of the payload is entirely app-defined.</span></span>

<span data-ttu-id="f979c-114">Als Beispiel für eine App, die von der Verwendung unformatierter Benachrichtigungen profitieren könnte, nehmen wir hier eine theoretische Zusammenarbeits-App für Dokumente.</span><span class="sxs-lookup"><span data-stu-id="f979c-114">As an illustration of an app that could benefit from raw notifications, let's look at a theoretical document collaboration app.</span></span> <span data-ttu-id="f979c-115">Angenommen, zwei Benutzer bearbeiten gleichzeitig das gleiche Dokument.</span><span class="sxs-lookup"><span data-stu-id="f979c-115">Consider two users who are editing the same document at the same time.</span></span> <span data-ttu-id="f979c-116">Der Clouddienst, der das freigegebene Dokument hostet, könnte jeden Benutzer mithilfe von unformatierten Benachrichtigungen informieren, wenn Änderungen vom anderen Benutzer vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="f979c-116">The cloud service, which hosts the shared document, could use raw notifications to notify each user when changes are made by the other user.</span></span> <span data-ttu-id="f979c-117">Die unformatierten Benachrichtigungen müssen dabei nicht die Änderungen am Dokument enthalten. Stattdessen weisen sie die App-Instanzen der beiden Benutzer an, eine Verbindung mit dem zentralen Speicherort herzustellen und die verfügbaren Änderungen zu synchronisieren.</span><span class="sxs-lookup"><span data-stu-id="f979c-117">The raw notifications would not necessarily contain the changes to the document, but instead would signal each user's copy of the app to contact the central location and sync the available changes.</span></span> <span data-ttu-id="f979c-118">Durch die Verwendung von unformatierten Benachrichtigungen entfällt für die App und ihren Clouddienst der Mehraufwand, während der gesamten Zeit, in der das Dokument geöffnet ist, dauerhafte Verbindungen aufrecht zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="f979c-118">By using raw notifications, the app and the its cloud service can save the overhead of maintaining persistent connections the entire time the document is open.</span></span>

## <a name="how-raw-notifications-work"></a><span data-ttu-id="f979c-119">Funktionsweise von unformatierten Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="f979c-119">How raw notifications work</span></span>


<span data-ttu-id="f979c-120">Alle unformatierten Benachrichtigungen sind Pushbenachrichtigungen.</span><span class="sxs-lookup"><span data-stu-id="f979c-120">All raw notifications are push notifications.</span></span> <span data-ttu-id="f979c-121">Daher gilt die zum Senden und Empfangen von Pushbenachrichtigungen erforderliche Konfiguration auch für unformatierte Benachrichtigungen:</span><span class="sxs-lookup"><span data-stu-id="f979c-121">Therefore, the setup required to send and receive push notifications applies to raw notifications as well:</span></span>

-   <span data-ttu-id="f979c-122">Sie benötigen einen gültigen WNS-Kanal zum Senden von unformatierten Benachrichtigungen.</span><span class="sxs-lookup"><span data-stu-id="f979c-122">You must have a valid WNS channel to send raw notifications.</span></span> <span data-ttu-id="f979c-123">Weitere Informationen zum Anfordern eines Pushbenachrichtigungskanals finden Sie unter [Anfordern, Erstellen und Speichern eines Benachrichtigungskanals](https://msdn.microsoft.com/library/windows/apps/hh465412).</span><span class="sxs-lookup"><span data-stu-id="f979c-123">For more information about acquiring a push notification channel, see [How to request, create, and save a notification channel](https://msdn.microsoft.com/library/windows/apps/hh465412).</span></span>
-   <span data-ttu-id="f979c-124">Die **Internet**-Funktion muss im App-Manifest hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="f979c-124">You must include the **Internet** capability in your app's manifest.</span></span> <span data-ttu-id="f979c-125">Im Manifest-Editor von Microsoft Visual Studio befindet sich diese Option auf der Registerkarte **Funktionen** unter **Internet (Client)**.</span><span class="sxs-lookup"><span data-stu-id="f979c-125">In the Microsoft Visual Studio manifest editor, you will find this option under the **Capabilities** tab as **Internet (Client)**.</span></span> <span data-ttu-id="f979c-126">Weitere Informationen finden Sie unter [**Funktionen**](https://docs.microsoft.com/uwp/schemas/appxpackage/appxmanifestschema/element-capabilities).</span><span class="sxs-lookup"><span data-stu-id="f979c-126">For more information, see [**Capabilities**](https://docs.microsoft.com/uwp/schemas/appxpackage/appxmanifestschema/element-capabilities).</span></span>

<span data-ttu-id="f979c-127">Für den Textkörper der Benachrichtigung wird ein von der App definiertes Format verwendet.</span><span class="sxs-lookup"><span data-stu-id="f979c-127">The body of the notification is in an app-defined format.</span></span> <span data-ttu-id="f979c-128">Der Client empfängt die Daten als eine mit Null beendete Zeichenfolge (**HSTRING**), die nur von der App verstanden werden muss.</span><span class="sxs-lookup"><span data-stu-id="f979c-128">The client receives the data as a null-terminated string (**HSTRING**) that only needs to be understood by the app.</span></span>

<span data-ttu-id="f979c-129">Wenn der Client offline ist, werden unformatierte Benachrichtigungen nur dann von WNS zwischengespeichert, wenn der [X-WNS-Cache-Policy](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_cache)-Header in der Benachrichtigung enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="f979c-129">If the client is offline, raw notifications will be cached by WNS only if the [X-WNS-Cache-Policy](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_cache) header is included in the notification.</span></span> <span data-ttu-id="f979c-130">Es wird jedoch jeweils nur eine unformatierte Benachrichtigung zwischengespeichert und übermittelt, sobald das Gerät wieder online ist.</span><span class="sxs-lookup"><span data-stu-id="f979c-130">However, only one raw notification will be cached and delivered once the device comes back online.</span></span>

<span data-ttu-id="f979c-131">Auf dem Client gibt es nur drei Möglichkeiten für die Verarbeitung einer unformatierten Benachrichtigung: Sie wird durch ein Benachrichtigungsübermittlungsereignis an die aktive App übermittelt, an eine Hintergrundaufgabe gesendet oder verworfen.</span><span class="sxs-lookup"><span data-stu-id="f979c-131">There are only three possible paths for a raw notification to take on the client: they will be delivered to your running app through a notification delivery event, sent to a background task, or dropped.</span></span> <span data-ttu-id="f979c-132">Ist der Client offline, wenn WNS versucht, eine unformatierte Benachrichtigung zu übermitteln, wird die Benachrichtigung daher verworfen.</span><span class="sxs-lookup"><span data-stu-id="f979c-132">Therefore, if the client is offline and WNS attempts to deliver a raw notification, the notification is dropped.</span></span>

## <a name="creating-a-raw-notification"></a><span data-ttu-id="f979c-133">Erstellen einer unformatierten Benachrichtigung</span><span class="sxs-lookup"><span data-stu-id="f979c-133">Creating a raw notification</span></span>


<span data-ttu-id="f979c-134">Mit Ausnahme der folgenden Unterschiede ist das Senden einer unformatierten Benachrichtigung mit dem einer Kachel-, Popup- oder Signalpushbenachrichtigung identisch:</span><span class="sxs-lookup"><span data-stu-id="f979c-134">Sending a raw notification is similar to sending a tile, toast, or badge push notification, with these differences:</span></span>

-   <span data-ttu-id="f979c-135">Der HTTP Content-Type-Header muss auf "application/octet-stream" festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="f979c-135">The HTTP Content-Type header must be set to "application/octet-stream".</span></span>
-   <span data-ttu-id="f979c-136">Der HTTP [X-WNS-Type](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_type)-Header muss auf "wns/raw" festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="f979c-136">The HTTP [X-WNS-Type](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_type) header must be set to "wns/raw".</span></span>
-   <span data-ttu-id="f979c-137">Der Textkörper der Benachrichtigung kann eine beliebige Nutzlast kleiner 5KB enthalten.</span><span class="sxs-lookup"><span data-stu-id="f979c-137">The notification body can contain any string payload smaller than 5 KB in size.</span></span>

<span data-ttu-id="f979c-138">Unformatierte Benachrichtigungen sollen als Kurznachrichten verwendet werden, die eine Aktion der App auslösen (z.B. Herstellen einer direkten Verbindung mit dem Dienst, um eine größere Datenmenge zu synchronisieren, oder Durchführen einer lokalen Statusänderung auf Grundlage des Benachrichtigungsinhalts).</span><span class="sxs-lookup"><span data-stu-id="f979c-138">Raw notifications are intended to be used as short messages that trigger your app to take an action, such as to directly contact the service to sync a larger amount of data or to make a local state modification based on the notification content.</span></span> <span data-ttu-id="f979c-139">Beachten Sie, dass die Übermittlung von WNS-Pushbenachrichtigungen nicht garantiert werden kann. In der App und dem Clouddienst muss daher die Möglichkeit berücksichtigt werden, dass die unformatierte Benachrichtigung den Client nicht erreicht, z.B. wenn dieser offline ist.</span><span class="sxs-lookup"><span data-stu-id="f979c-139">Note that WNS push notifications cannot be guaranteed to be delivered, so your app and cloud service must account for the possibility that the raw notification might not reach the client, such as when the client is offline.</span></span>

<span data-ttu-id="f979c-140">Weitere Informationen zum Senden von Pushbenachrichtigungen finden Sie unter [Schnellstart: Senden einer Pushbenachrichtigung](https://msdn.microsoft.com/library/windows/apps/xaml/hh868252).</span><span class="sxs-lookup"><span data-stu-id="f979c-140">For more information on sending push notifications, see [Quickstart: Sending a push notification](https://msdn.microsoft.com/library/windows/apps/xaml/hh868252).</span></span>

## <a name="receiving-a-raw-notification"></a><span data-ttu-id="f979c-141">Empfangen einer unformatierten Benachrichtigung</span><span class="sxs-lookup"><span data-stu-id="f979c-141">Receiving a raw notification</span></span>


<span data-ttu-id="f979c-142">Es sind zwei Mechanismen verfügbar, über die Ihre App unformatierte Benachrichtigungen empfangen kann:</span><span class="sxs-lookup"><span data-stu-id="f979c-142">There are two avenues through which your app can be receive raw notifications:</span></span>

-   <span data-ttu-id="f979c-143">Durch [Benachrichtigungsübermittlungsereignisse](#notification-delivery-events) während die App ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="f979c-143">Through [notification delivery events](#notification-delivery-events) while your application is running.</span></span>
-   <span data-ttu-id="f979c-144">Durch [von der unformatierten Benachrichtigung ausgelöste Hintergrundaufgaben](#background-tasks-triggered-by-raw-notifications), wenn die App Hintergrundaufgaben ausführen kann.</span><span class="sxs-lookup"><span data-stu-id="f979c-144">Through [background tasks triggered by the raw notification](#background-tasks-triggered-by-raw-notifications) if your app is enabled to run background tasks.</span></span>

<span data-ttu-id="f979c-145">Eine App kann beide Mechanismen zum Empfangen von unformatierten Benachrichtigungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="f979c-145">An app can use both mechanisms to receive raw notifications.</span></span> <span data-ttu-id="f979c-146">Bei einer App, die sowohl den Benachrichtigungsübermittlungs-Ereignishandler als auch von unformatierten Benachrichtigungen ausgelöste Hintergrundaufgaben implementiert, hat das Benachrichtigungsübermittlungsereignis Priorität, wenn die App ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="f979c-146">If an app implements both the notification delivery event handler and background tasks that are triggered by raw notifications, the notification delivery event will take priority when the app is running.</span></span>

-   <span data-ttu-id="f979c-147">Ist die App aktiv, hat das Benachrichtigungsübermittlungsereignis Vorrang vor der Hintergrundaufgabe, und die App erhält als Erstes die Gelegenheit, die Benachrichtigung zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="f979c-147">If the app is running, the notification delivery event will take priority over the background task and the app will have the first opportunity to process the notification.</span></span>
-   <span data-ttu-id="f979c-148">Der Benachrichtigungsübermittlungs-Ereignishandler kann festlegen, dass die unformatierte Benachrichtigung bei der Beendigung des Handlers nicht an die Hintergrundaufgabe übergeben werden soll, indem er die [**PushNotificationReceivedEventArgs.Cancel**](https://docs.microsoft.com/uwp/api/Windows.Networking.PushNotifications.PushNotificationReceivedEventArgs.Cancel)-Eigenschaft des Ereignisses auf **true** festlegt.</span><span class="sxs-lookup"><span data-stu-id="f979c-148">The notification delivery event handler can specify, by setting the event's [**PushNotificationReceivedEventArgs.Cancel**](https://docs.microsoft.com/uwp/api/Windows.Networking.PushNotifications.PushNotificationReceivedEventArgs.Cancel) property to **true**, that the raw notification should not be passed to its background task once the handler exits.</span></span> <span data-ttu-id="f979c-149">Wenn die **Cancel**-Eigenschaft auf **false** oder nicht festgelegt ist (der Standardwert ist **false**), löst die unformatierte Benachrichtigung die Hintergrundaufgabe aus, nachdem der Benachrichtigungsübermittlungs-Ereignishandler beendet wurde.</span><span class="sxs-lookup"><span data-stu-id="f979c-149">If the **Cancel** property is set to **false** or is not set (the default value is **false**), the raw notification will trigger the background task after the notification delivery event handler has done its work.</span></span>

### <a name="notification-delivery-events"></a><span data-ttu-id="f979c-150">Benachrichtigungsübermittlungsereignisse</span><span class="sxs-lookup"><span data-stu-id="f979c-150">Notification delivery events</span></span>

<span data-ttu-id="f979c-151">Ihre App kann über ein Benachrichtigungsübermittlungsereignis ([**PushNotificationReceived**](https://docs.microsoft.com/uwp/api/Windows.Networking.PushNotifications.PushNotificationChannel.PushNotificationReceived)) unformatierte Benachrichtigungen erhalten, während die App verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="f979c-151">Your app can use a notification delivery event ([**PushNotificationReceived**](https://docs.microsoft.com/uwp/api/Windows.Networking.PushNotifications.PushNotificationChannel.PushNotificationReceived)) to receive raw notifications while the app is in use.</span></span> <span data-ttu-id="f979c-152">Wenn der Clouddienst eine unformatierte Benachrichtigung sendet, kann die aktive App die Benachrichtigung empfangen, indem sie das Benachrichtigungsübermittlungsereignis für den Kanal-URI behandelt.</span><span class="sxs-lookup"><span data-stu-id="f979c-152">When the cloud service sends a raw notification, the running app can receive it by handling the notification delivery event on the channel URI.</span></span>

<span data-ttu-id="f979c-153">Falls die App nicht aktiv ist und keine [Hintergrundaufgaben](#background-tasks-triggered-by-raw-notifications) verwendet, werden alle an sie gesendeten unformatierten Benachrichtigungen beim Empfang von WNS verworfen.</span><span class="sxs-lookup"><span data-stu-id="f979c-153">If your app is not running and does not use [background tasks](#background-tasks-triggered-by-raw-notifications)), any raw notification sent to that app is dropped by WNS on receipt.</span></span> <span data-ttu-id="f979c-154">Um zu verhindern, dass Ressourcen des Clouddiensts vergeudet werden, sollten Sie ggf. eine Logik implementieren, mit der der Dienst nachverfolgen kann, ob die App aktiv ist.</span><span class="sxs-lookup"><span data-stu-id="f979c-154">To avoid wasting your cloud service's resources, you should consider implementing logic on the service to track whether the app is active.</span></span> <span data-ttu-id="f979c-155">Für diese Informationen kommen zwei Quellen in Frage: Eine App kann dem Dienst explizit mitteilen, dass sie für den Empfang von Benachrichtigungen bereit ist, und WNS kann dem Dienst mitteilen, wann er die Übermittlung beenden soll.</span><span class="sxs-lookup"><span data-stu-id="f979c-155">There are two sources of this information: an app can explicitly tell the service that it's ready to start receiving notifications, and WNS can tell the service when to stop.</span></span>

-   <span data-ttu-id="f979c-156">**Die App benachrichtigt den Clouddienst**: Die App kann eine Verbindung mit dem Dienst herstellen, um ihm mitzuteilen, dass sie im Vordergrund ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="f979c-156">**The app notifies the cloud service**: The app can contact its service to let it know that the app is running in the foreground.</span></span> <span data-ttu-id="f979c-157">Der Nachteil bei diesem Ansatz ist, dass die App u.U. sehr oft eine Verbindung mit dem Dienst herstellt.</span><span class="sxs-lookup"><span data-stu-id="f979c-157">The disadvantage of this approach is that the app can end up contacting your service very frequently.</span></span> <span data-ttu-id="f979c-158">Der Vorteil ist jedoch, dass der Dienst immer weiß, wann die App für den Empfang eingehender unformatierter Benachrichtigungen bereit ist.</span><span class="sxs-lookup"><span data-stu-id="f979c-158">However, it has the advantage that the service will always know when the app is ready to receive incoming raw notifications.</span></span> <span data-ttu-id="f979c-159">Ein weiterer Vorteil: Wenn die App eine Verbindung mit dem Dienst herstellt, kann der Dienst unformatierte Benachrichtigungen an die spezifische Instanz der App senden, anstatt einen Broadcast zu senden.</span><span class="sxs-lookup"><span data-stu-id="f979c-159">Another advantage is that when the app contacts its service, the service then knows to send raw notifications to the specific instance of that app rather than broadcast.</span></span>
-   <span data-ttu-id="f979c-160">**Der Clouddienst antwortet auf WNS-Antwortnachrichten**: Der App-Dienst kann anhand der von WNS zurückgegebenen Informationen [X-WNS-NotificationStatus](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_notification) und [X-WNS-DeviceConnectionStatus](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_dcs) feststellen, wann keine unformatierten Benachrichtigungen mehr an die App gesendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="f979c-160">**The cloud service responds to WNS response messages** : Your app service can use the [X-WNS-NotificationStatus](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_notification) and [X-WNS-DeviceConnectionStatus](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_dcs) information returned by WNS to determine when to stop sending raw notifications to the app.</span></span> <span data-ttu-id="f979c-161">Wenn Ihr Dienst eine Benachrichtigung als HTTP-POST an einen Kanal sendet, kann er als Antwort eine der folgenden Nachrichten erhalten:</span><span class="sxs-lookup"><span data-stu-id="f979c-161">When your service sends a notification to a channel as an HTTP POST, it can receive one of these messages in the response:</span></span>

    -   <span data-ttu-id="f979c-162">**X-WNS-NotificationStatus: dropped**: Gibt an, dass die Benachrichtigung nicht vom Client empfangen wurde.</span><span class="sxs-lookup"><span data-stu-id="f979c-162">**X-WNS-NotificationStatus: dropped**: This indicates that the notification was not received by the client.</span></span> <span data-ttu-id="f979c-163">Die **dropped**-Antwort ist in der Regel darauf zurückzuführen, dass die App auf dem Gerät des Benutzers nicht mehr im Vordergrund ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="f979c-163">It's a safe assumption that the **dropped** response is caused by your app no longer being in the foreground on the user's device.</span></span>
    -   <span data-ttu-id="f979c-164">**X-WNS-DeviceConnectionStatus: disconnected** oder **X-WNS-DeviceConnectionStatus: tempconnected**: Gibt an, dass der Windows-Client nicht mehr mit WNS verbunden ist.</span><span class="sxs-lookup"><span data-stu-id="f979c-164">**X-WNS-DeviceConnectionStatus: disconnected** or **X-WNS-DeviceConnectionStatus: tempconnected**: This indicates that the Windows client no longer has a connection to WNS.</span></span> <span data-ttu-id="f979c-165">Diese Nachricht von WNS kann nur empfangen werden, wenn Sie sie durch Festlegen des [X-WNS-RequestForStatus](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_request)-Headers in der HTTP-POST-Nachricht der Benachrichtigung anfordern.</span><span class="sxs-lookup"><span data-stu-id="f979c-165">Note that to receive this message from WNS, you have to ask for it by setting the [X-WNS-RequestForStatus](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_request) header in the notification's HTTP POST.</span></span>

    <span data-ttu-id="f979c-166">Der Clouddienst Ihrer App kann die Informationen in diesen Statusnachrichten verwenden, um Kommunikationsversuche durch unformatierte Benachrichtigungen zu beenden.</span><span class="sxs-lookup"><span data-stu-id="f979c-166">Your app's cloud service can use the information in these status messages to cease communication attempts through raw notifications.</span></span> <span data-ttu-id="f979c-167">Der Dienst kann das Senden von unformatierten Benachrichtigungen fortsetzen, wenn die App wieder im Vordergrund ausgeführt wird und eine Verbindung mit ihm herstellt.</span><span class="sxs-lookup"><span data-stu-id="f979c-167">The service can resume sending raw notifications once it is contacted by the app, when the app switches back into the foreground.</span></span>

    <span data-ttu-id="f979c-168">Sie sollten sich nicht auf [X-WNS-NotificationStatus](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_notification) verlassen, um festzustellen, ob die Benachrichtigung erfolgreich an den Client übermittelt wurde.</span><span class="sxs-lookup"><span data-stu-id="f979c-168">Note that you should not rely on [X-WNS-NotificationStatus](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_notification) to determine whether the notification was successfully delivered to the client.</span></span>

    <span data-ttu-id="f979c-169">Weitere Informationen finden Sie unter [Anforderungs- und Antwortheader des Pushbenachrichtigungsdiensts](https://msdn.microsoft.com/library/windows/apps/hh465435).</span><span class="sxs-lookup"><span data-stu-id="f979c-169">For more information, see [Push notification service request and response headers](https://msdn.microsoft.com/library/windows/apps/hh465435)</span></span>

### <a name="background-tasks-triggered-by-raw-notifications"></a><span data-ttu-id="f979c-170">Von unformatierten Benachrichtigungen ausgelöste Hintergrundaufgaben</span><span class="sxs-lookup"><span data-stu-id="f979c-170">Background tasks triggered by raw notifications</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f979c-171">Vor der Verwendung von Hintergrundaufgaben für unformatierte Benachrichtigungen, muss einer App über [**BackgroundExecutionManager.RequestAccessAsync**](https://docs.microsoft.com/uwp/api/Windows.ApplicationModel.Background.BackgroundExecutionManager#Windows_ApplicationModel_Background_BackgroundExecutionManager_RequestAccessAsync_System_String_) die Berechtigung zum Ausführen von Hintergrundaufgaben erteilt werden.</span><span class="sxs-lookup"><span data-stu-id="f979c-171">Before using raw notification background tasks, an app must be granted background access via [**BackgroundExecutionManager.RequestAccessAsync**](https://docs.microsoft.com/uwp/api/Windows.ApplicationModel.Background.BackgroundExecutionManager#Windows_ApplicationModel_Background_BackgroundExecutionManager_RequestAccessAsync_System_String_).</span></span>

 

<span data-ttu-id="f979c-172">Die Hintergrundaufgabe muss mit einem [**PushNotificationTrigger**](https://docs.microsoft.com/uwp/api/Windows.ApplicationModel.Background.PushNotificationTrigger) registriert sein.</span><span class="sxs-lookup"><span data-stu-id="f979c-172">Your background task must be registered with a [**PushNotificationTrigger**](https://docs.microsoft.com/uwp/api/Windows.ApplicationModel.Background.PushNotificationTrigger).</span></span> <span data-ttu-id="f979c-173">Ist die Aufgabe nicht registriert, wird sie beim Empfang einer unformatierten Benachrichtigung nicht ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="f979c-173">If it is not registered, the task will not run when a raw notification is received.</span></span>

<span data-ttu-id="f979c-174">Eine von einer unformatierten Benachrichtigung ausgelöste Hintergrundaufgabe ermöglicht es dem Clouddienst Ihrer App, eine Verbindung mit der App herzustellen, auch wenn die App nicht ausgeführt wird (sie kann die Ausführung jedoch auslösen).</span><span class="sxs-lookup"><span data-stu-id="f979c-174">A background task that is triggered by a raw notification enables your app's cloud service to contact your app, even when the app is not running (though it might trigger it to run).</span></span> <span data-ttu-id="f979c-175">Dies ist möglich, ohne dass die App eine dauerhafte Verbindung aufrecht erhalten muss.</span><span class="sxs-lookup"><span data-stu-id="f979c-175">This happens without the app having to maintain a continuous connection.</span></span> <span data-ttu-id="f979c-176">Unformatierte Benachrichtigungen sind der einzige Benachrichtigungstyp, der Hintergrundaufgaben auslösen kann.</span><span class="sxs-lookup"><span data-stu-id="f979c-176">Raw notifications are the only notification type that can trigger background tasks.</span></span> <span data-ttu-id="f979c-177">Doch obwohl Popup-, Kachel- und Signalpushbenachrichtigungen keine Hintergrundaufgaben auslösen können, können durch unformatierte Benachrichtigungen ausgelöste Hintergrundaufgaben Kacheln aktualisieren und Popupbenachrichtigungen über lokale API-Aufrufe aufrufen.</span><span class="sxs-lookup"><span data-stu-id="f979c-177">However, while toast, tile, and badge push notifications cannot trigger background tasks, background tasks triggered by raw notifications can update tiles and invoke toast notifications through local API calls.</span></span>

<span data-ttu-id="f979c-178">Zur Veranschaulichung der Funktionsweise von Hintergrundaufgaben, die durch unformatierte Benachrichtigungen ausgelöst werden, nehmen wir als Beispiel eine App zum Lesen von E-Books.</span><span class="sxs-lookup"><span data-stu-id="f979c-178">As an illustration of how background tasks that are triggered by raw notifications work, let's consider an app used to read e-books.</span></span> <span data-ttu-id="f979c-179">Als Erstes kauft ein Benutzer (möglicherweise auf einem anderen Gerät) online ein Buch.</span><span class="sxs-lookup"><span data-stu-id="f979c-179">First, a user purchases a book online, possibly on another device.</span></span> <span data-ttu-id="f979c-180">Als Reaktion kann der Clouddienst der App eine unformatierte Benachrichtigung, deren Nutzlast besagt, dass das Buch gekauft wurde und von der App heruntergeladen werden soll, an jedes Gerät des Benutzers senden.</span><span class="sxs-lookup"><span data-stu-id="f979c-180">In response, the app's cloud service can send a raw notification to each of the user's devices, with a payload that states that the book was purchased and the app should download it.</span></span> <span data-ttu-id="f979c-181">Die App stellt dann eine direkte Verbindung mit dem Clouddienst der App her, um einen Hintergrunddownload des neuen Buchs zu starten, damit das Buch später, wenn der Benutzer die App startet, schon da ist und gelesen werden kann.</span><span class="sxs-lookup"><span data-stu-id="f979c-181">The app then directly contacts the app's cloud service to begin a background download of the new book so that later, when the user launches the app, the book is already there and ready for reading.</span></span>

<span data-ttu-id="f979c-182">Um eine Hintergrundaufgabe mit einer unformatierten Benachrichtigung auszulösen, muss Ihre App:</span><span class="sxs-lookup"><span data-stu-id="f979c-182">To use a raw notification to trigger a background task, your app must:</span></span>

1.  <span data-ttu-id="f979c-183">die Berechtigung zum Ausführen von Hintergrundaufgaben (die der Benutzer jederzeit widerrufen kann) über [**BackgroundExecutionManager.RequestAccessAsync**](https://docs.microsoft.com/uwp/api/Windows.ApplicationModel.Background.BackgroundExecutionManager#Windows_ApplicationModel_Background_BackgroundExecutionManager_RequestAccessAsync_System_String_) anfordern.</span><span class="sxs-lookup"><span data-stu-id="f979c-183">Request permission to run tasks in the background (which the user can revoke at any time) by using [**BackgroundExecutionManager.RequestAccessAsync**](https://docs.microsoft.com/uwp/api/Windows.ApplicationModel.Background.BackgroundExecutionManager#Windows_ApplicationModel_Background_BackgroundExecutionManager_RequestAccessAsync_System_String_).</span></span>
2.  <span data-ttu-id="f979c-184">die Hintergrundaufgabe implementieren.</span><span class="sxs-lookup"><span data-stu-id="f979c-184">Implement the background task.</span></span> <span data-ttu-id="f979c-185">Weitere Informationen finden Sie unter [Unterstützen der App mit Hintergrundaufgaben](../../../launch-resume/support-your-app-with-background-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="f979c-185">For more information, see [Support your app with background tasks](../../../launch-resume/support-your-app-with-background-tasks.md)</span></span>

<span data-ttu-id="f979c-186">Die Hintergrundaufgabe wird dann jedes Mal als Reaktion auf den [**PushNotificationTrigger**](https://docs.microsoft.com/uwp/api/Windows.ApplicationModel.Background.PushNotificationTrigger) aufgerufen, wenn eine unformatierte Benachrichtigung für die App empfangen wird.</span><span class="sxs-lookup"><span data-stu-id="f979c-186">Your background task is then invoked in response to the [**PushNotificationTrigger**](https://docs.microsoft.com/uwp/api/Windows.ApplicationModel.Background.PushNotificationTrigger), each time a raw notification is received for your app.</span></span> <span data-ttu-id="f979c-187">Die Hintergrundaufgabe interpretiert die App-spezifische Nutzlast der unformatierten Benachrichtigung und führt die entsprechenden Aktionen aus.</span><span class="sxs-lookup"><span data-stu-id="f979c-187">Your background task interprets the raw notification's app-specific payload and acts on it.</span></span>

<span data-ttu-id="f979c-188">Für jede App kann jeweils nur eine Hintergrundaufgabe ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="f979c-188">For each app, only one background task can run at a time.</span></span> <span data-ttu-id="f979c-189">Wird eine Hintergrundaufgabe für eine App ausgelöst, für die bereits eine Hintergrundaufgabe ausgeführt wird, muss die erste Hintergrundaufgabe abgeschlossen werden, bevor die neue Aufgabe ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="f979c-189">If a background task is triggered for an app for which a background task is already running, the first background task must complete before the new one is run.</span></span>

## <a name="other-resources"></a><span data-ttu-id="f979c-190">Weitere Ressourcen</span><span class="sxs-lookup"><span data-stu-id="f979c-190">Other resources</span></span>


<span data-ttu-id="f979c-191">Erfahren Sie mehr, indem Sie das [Beispiel für unformatierte Benachrichtigungen](http://go.microsoft.com/fwlink/p/?linkid=241553) für Windows8.1 und [Pushbenachrichtigungen und regelmäßige benachrichtigungsbeispiel](http://go.microsoft.com/fwlink/p/?LinkId=231476) für Windows8.1 herunterladen und ihren Quellcode in Ihrer Windows 10-app wiederverwenden.</span><span class="sxs-lookup"><span data-stu-id="f979c-191">You can learn more by downloading the [Raw notifications sample](http://go.microsoft.com/fwlink/p/?linkid=241553) for Windows8.1, and the [Push and periodic notifications sample](http://go.microsoft.com/fwlink/p/?LinkId=231476) for Windows8.1, and re-using their source code in your Windows10 app.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f979c-192">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="f979c-192">Related topics</span></span>

* [<span data-ttu-id="f979c-193">Richtlinien für unformatierte Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="f979c-193">Guidelines for raw notifications</span></span>](https://msdn.microsoft.com/library/windows/apps/hh761463)
* [<span data-ttu-id="f979c-194">Schnellstart: Erstellen und Registrieren einer Hintergrundaufgabe, für die unformatierte Benachrichtigungen verwendet werden</span><span class="sxs-lookup"><span data-stu-id="f979c-194">Quickstart: Creating and registering a raw notification background task</span></span>](https://msdn.microsoft.com/library/windows/apps/jj676800)
* [<span data-ttu-id="f979c-195">Schnellstart: Abfangen von Pushbenachrichtigungen für aktive Apps</span><span class="sxs-lookup"><span data-stu-id="f979c-195">Quickstart: Intercepting push notifications for running apps</span></span>](https://msdn.microsoft.com/library/windows/apps/jj709908)
* [**<span data-ttu-id="f979c-196">RawNotification</span><span class="sxs-lookup"><span data-stu-id="f979c-196">RawNotification</span></span>**](https://docs.microsoft.com/uwp/api/Windows.Networking.PushNotifications.RawNotification)
* [**<span data-ttu-id="f979c-197">BackgroundExecutionManager.RequestAccessAsync</span><span class="sxs-lookup"><span data-stu-id="f979c-197">BackgroundExecutionManager.RequestAccessAsync</span></span>**](https://docs.microsoft.com/uwp/api/Windows.ApplicationModel.Background.BackgroundExecutionManager#Windows_ApplicationModel_Background_BackgroundExecutionManager_RequestAccessAsync_System_String_)
 

 




