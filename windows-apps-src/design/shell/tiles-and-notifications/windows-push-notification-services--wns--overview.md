---
Description: The Windows Push Notification Services (WNS) enables third-party developers to send toast, tile, badge, and raw updates from their own cloud service. This provides a mechanism to deliver new updates to your users in a power-efficient and dependable way.
title: Übersicht über Windows-Pushbenachrichtigungsdienste (Windows Push Notification Services, WNS)
ms.assetid: 2125B09F-DB90-4515-9AA6-516C7E9ACCCD
template: detail.hbs
ms.date: 05/19/2017
ms.topic: article
keywords: windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 267e6e1cf9a004b6703e000b694274b802220f60
ms.sourcegitcommit: bf600a1fb5f7799961914f638061986d55f6ab12
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/05/2019
ms.locfileid: "9047525"
---
# <a name="windows-push-notification-services-wns-overview"></a><span data-ttu-id="352fd-103">Übersicht über Windows-Pushbenachrichtigungsdienste (Windows Push Notification Services, WNS)</span><span class="sxs-lookup"><span data-stu-id="352fd-103">Windows Push Notification Services (WNS) overview</span></span>
 

<span data-ttu-id="352fd-104">Mithilfe des Windows-Pushbenachrichtigungsdiensts (WNS) können Drittanbieterentwickler Popup-, Kachel-, Signalupdates und unformatierte Updates von ihren eigenen Clouddiensten aus senden.</span><span class="sxs-lookup"><span data-stu-id="352fd-104">The Windows Push Notification Services (WNS) enables third-party developers to send toast, tile, badge, and raw updates from their own cloud service.</span></span> <span data-ttu-id="352fd-105">Dadurch steht ein Mechanismus zur Verfügung, mit dem Sie Ihren Benutzern auf energieeffiziente und verlässliche Weise neue Updates bereitstellen können.</span><span class="sxs-lookup"><span data-stu-id="352fd-105">This provides a mechanism to deliver new updates to your users in a power-efficient and dependable way.</span></span>

## <a name="how-it-works"></a><span data-ttu-id="352fd-106">Funktionsweise</span><span class="sxs-lookup"><span data-stu-id="352fd-106">How it works</span></span>


<span data-ttu-id="352fd-107">Das folgende Diagramm gibt Aufschluss über den vollständigen Datenfluss beim Senden einer Pushbenachrichtigung.</span><span class="sxs-lookup"><span data-stu-id="352fd-107">The following diagram shows the complete data flow for sending a push notification.</span></span> <span data-ttu-id="352fd-108">Er umfasst die folgenden Schritte:</span><span class="sxs-lookup"><span data-stu-id="352fd-108">It involves these steps:</span></span>

1.  <span data-ttu-id="352fd-109">Ihre App fordert einen Pushbenachrichtigungskanal von der universellen Windows-Plattform an.</span><span class="sxs-lookup"><span data-stu-id="352fd-109">Your app requests a push notification channel from the Universal Windows Platform.</span></span>
2.  <span data-ttu-id="352fd-110">Windows fordert WNS zum Erstellen eines Benachrichtigungskanals auf.</span><span class="sxs-lookup"><span data-stu-id="352fd-110">Windows asks WNS to create a notification channel.</span></span> <span data-ttu-id="352fd-111">Dieser Kanal wird an das aufrufende Gerät in Form eines URIs (Uniform Resource Identifier) zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="352fd-111">This channel is returned to the calling device in the form of a Uniform Resource Identifier (URI).</span></span>
3.  <span data-ttu-id="352fd-112">Windows gibt den URI des Benachrichtigungskanals an Ihre App zurück.</span><span class="sxs-lookup"><span data-stu-id="352fd-112">The notification channel URI is returned by Windows to your app.</span></span>
4.  <span data-ttu-id="352fd-113">Ihre App sendet den URI an Ihren eigenen Clouddienst.</span><span class="sxs-lookup"><span data-stu-id="352fd-113">Your app sends the URI to your own cloud service.</span></span> <span data-ttu-id="352fd-114">Dann speichern Sie den URI in Ihrem eigenen Clouddienst, damit Sie auf den URI zugreifen können, wenn Sie Benachrichtigungen senden.</span><span class="sxs-lookup"><span data-stu-id="352fd-114">You then store the URI on your own cloud service so that you can access the URI when you send notifications.</span></span> <span data-ttu-id="352fd-115">Der URI ist eine Schnittstelle zwischen Ihrer App und Ihrem Dienst. Es liegt in Ihrer Verantwortung, diese Schnittstelle mit sicheren Webstandards zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="352fd-115">The URI is an interface between your own app and your own service; it's your responsibility to implement this interface with safe and secure web standards.</span></span>
5.  <span data-ttu-id="352fd-116">Wenn Ihr Clouddienst über ein zu sendendes Update verfügt, benachrichtigt er WNS über den Kanal-URI.</span><span class="sxs-lookup"><span data-stu-id="352fd-116">When your cloud service has an update to send, it notifies WNS using the channel URI.</span></span> <span data-ttu-id="352fd-117">Zu diesem Zweck wird eine HTTP POST-Anforderung (einschließlich der Benachrichtigungsnutzlast) über SSL (Secure Sockets Layer) ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="352fd-117">This is done by issuing an HTTP POST request, including the notification payload, over Secure Sockets Layer (SSL).</span></span> <span data-ttu-id="352fd-118">Dieser Schritt erfordert eine Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="352fd-118">This step requires authentication.</span></span>
6.  <span data-ttu-id="352fd-119">WNS empfängt die Anforderung und leitet die Benachrichtigung an das entsprechende Gerät weiter.</span><span class="sxs-lookup"><span data-stu-id="352fd-119">WNS receives the request and routes the notification to the appropriate device.</span></span>

![WNS-Datenflussdiagramm für Pushbenachrichtigungen](images/wns-diagram-01.png)

## <a name="registering-your-app-and-receiving-the-credentials-for-your-cloud-service"></a><span data-ttu-id="352fd-121">Registrieren Ihrer App und Empfangen der Anmeldeinformationen für Ihren Clouddienst</span><span class="sxs-lookup"><span data-stu-id="352fd-121">Registering your app and receiving the credentials for your cloud service</span></span>


<span data-ttu-id="352fd-122">Um Benachrichtigungen mithilfe von WNS senden zu können, muss Ihre App zunächst beim Dashboard des Store registriert werden.</span><span class="sxs-lookup"><span data-stu-id="352fd-122">Before you can send notifications using WNS, your app must be registered with the Store Dashboard.</span></span> <span data-ttu-id="352fd-123">Dadurch erhalten Sie die Anmeldeinformationen für Ihre App, mit denen sich Ihr Clouddienst gegenüber WNS authentifizieren kann.</span><span class="sxs-lookup"><span data-stu-id="352fd-123">This will provide you with credentials for your app that your cloud service will use in authenticating with WNS.</span></span> <span data-ttu-id="352fd-124">Diese Anmeldeinformationen bestehen aus einer Paket-Sicherheits-ID (Security Identifier, SID) und einem geheimen Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="352fd-124">These credentials consist of a Package Security Identifier (SID) and a secret key.</span></span> <span data-ttu-id="352fd-125">Um diese Registrierung durchzuführen, melden Sie sich beim [Partner Center](https://partner.microsoft.com/dashboard).</span><span class="sxs-lookup"><span data-stu-id="352fd-125">To perform this registration, sign in to [Partner Center](https://partner.microsoft.com/dashboard).</span></span> <span data-ttu-id="352fd-126">Nachdem Sie Ihre App erstellt haben, können Sie die Anmeldeinformationen abrufen, gemäß den Anweisungen auf der Seite **App-Verwaltung – WNS/MPNS**.</span><span class="sxs-lookup"><span data-stu-id="352fd-126">After you create your app, you can retrieve the credentials by following the instructions on the **App Management - WNS/MPNS** page.</span></span> <span data-ttu-id="352fd-127">Wenn Sie die Live Services-Lösung verwenden möchten, folgen Sie dem Link **Live Services-Website** auf dieser Seite.</span><span class="sxs-lookup"><span data-stu-id="352fd-127">If you want to use the Live Services solution, follow the **Live services site** link on this page.</span></span>

<span data-ttu-id="352fd-128">Jede App verfügt über einen eigenen Satz von Anmeldeinformationen für den zugehörigen Clouddienst.</span><span class="sxs-lookup"><span data-stu-id="352fd-128">Each app has its own set of credentials for its cloud service.</span></span> <span data-ttu-id="352fd-129">Mit diesen Anmeldeinformationen können keine Benachrichtigungen an andere Apps gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="352fd-129">These credentials cannot be used to send notifications to any other app.</span></span>

<span data-ttu-id="352fd-130">Ausführlichere Informationen zum Registrieren Ihrer App finden Sie unter [So wird's gemacht: Authentifizieren mit den Windows-Pushbenachrichtigungsdiensten (Windows Push Notification Services, WNS)](https://msdn.microsoft.com/library/windows/apps/hh465407).</span><span class="sxs-lookup"><span data-stu-id="352fd-130">For more details on how to register your app, please see [How to authenticate with the Windows Notification Service (WNS)](https://msdn.microsoft.com/library/windows/apps/hh465407).</span></span>

## <a name="requesting-a-notification-channel"></a><span data-ttu-id="352fd-131">Anfordern eines Benachrichtigungskanals</span><span class="sxs-lookup"><span data-stu-id="352fd-131">Requesting a notification channel</span></span>


<span data-ttu-id="352fd-132">Wenn eine App ausgeführt wird, die Pushbenachrichtigungen empfangen kann, muss sie zunächst mithilfe von [**CreatePushNotificationChannelForApplicationAsync**](https://docs.microsoft.com/uwp/api/Windows.Networking.PushNotifications.PushNotificationChannelManager#Windows_Networking_PushNotifications_PushNotificationChannelManager_CreatePushNotificationChannelForApplicationAsync_System_String_) einen Benachrichtigungskanal anfordern.</span><span class="sxs-lookup"><span data-stu-id="352fd-132">When an app that is capable of receiving push notifications runs, it must first request a notification channel through the [**CreatePushNotificationChannelForApplicationAsync**](https://docs.microsoft.com/uwp/api/Windows.Networking.PushNotifications.PushNotificationChannelManager#Windows_Networking_PushNotifications_PushNotificationChannelManager_CreatePushNotificationChannelForApplicationAsync_System_String_).</span></span> <span data-ttu-id="352fd-133">Eine umfassende Erläuterung sowie Beispielcode finden Sie in [Anfordern, Erstellen und Speichern eines Benachrichtigungskanals](https://msdn.microsoft.com/library/windows/apps/hh465412).</span><span class="sxs-lookup"><span data-stu-id="352fd-133">For a full discussion and example code, see [How to request, create, and save a notification channel](https://msdn.microsoft.com/library/windows/apps/hh465412).</span></span> <span data-ttu-id="352fd-134">Diese API gibt einen Kanal-URI zurück, der eindeutig mit der aufrufenden Anwendung und der zugehörigen Kachel verknüpft ist und über den alle Benachrichtigungstypen gesendet werden können.</span><span class="sxs-lookup"><span data-stu-id="352fd-134">This API returns a channel URI that is uniquely linked to the calling application and its tile, and through which all notification types can be sent.</span></span>

<span data-ttu-id="352fd-135">Nach erfolgreicher Erstellung eines Kanal-URIs sendet die App den URI zusammen mit den App-spezifischen Metadaten, die dem URI zugeordnet werden sollen, an den zugehörigen Clouddienst.</span><span class="sxs-lookup"><span data-stu-id="352fd-135">After the app has successfully created a channel URI, it sends it to its cloud service, together with any app-specific metadata that should be associated with this URI.</span></span>

### <a name="important-notes"></a><span data-ttu-id="352fd-136">Wichtige Hinweise</span><span class="sxs-lookup"><span data-stu-id="352fd-136">Important notes</span></span>

-   <span data-ttu-id="352fd-137">Wir können nicht garantieren, dass der Benachrichtigungskanal-URI für eine App jederzeit gleich bleibt.</span><span class="sxs-lookup"><span data-stu-id="352fd-137">We do not guarantee that the notification channel URI for an app will always remain the same.</span></span> <span data-ttu-id="352fd-138">Wenn sich der URI ändert, empfehlen wir, die App immer einen neuen Kanal anfordern zu lassen, wenn sie ausgeführt wird und ihren Dienst aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="352fd-138">We advise that the app requests a new channel every time it runs and updates its service when the URI changes.</span></span> <span data-ttu-id="352fd-139">Der Entwickler sollte den Kanal-URI niemals ändern und ihn als Blackbox-Zeichenfolge betrachten.</span><span class="sxs-lookup"><span data-stu-id="352fd-139">The developer should never modify the channel URI and should consider it as a black-box string.</span></span> <span data-ttu-id="352fd-140">Derzeit laufen Kanal-URIs nach 30Tagen ab.</span><span class="sxs-lookup"><span data-stu-id="352fd-140">At this time, channel URIs expire after 30 days.</span></span> <span data-ttu-id="352fd-141">Wenn Ihre app für Windows 10 in regelmäßigen Abständen den Kanal im Hintergrund verlängert werden, können Sie die [Pushbenachrichtigungen und regelmäßige benachrichtigungsbeispiel](https://go.microsoft.com/fwlink/p/?linkid=231476) für Windows8.1 herunterladen und erneut verwenden Sie den Quellcode und/oder das Muster, das veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="352fd-141">If your Windows10 app will periodically renew its channel in the background then you can download the [Push and periodic notifications sample](https://go.microsoft.com/fwlink/p/?linkid=231476) for Windows8.1 and re-use its source code and/or the pattern it demonstrates.</span></span>
-   <span data-ttu-id="352fd-142">Die Schnittstelle zwischen dem Clouddienst und dem der Client-App wird von Ihnen (dem Entwickler) implementiert.</span><span class="sxs-lookup"><span data-stu-id="352fd-142">The interface between the cloud service and the client app is implemented by you, the developer.</span></span> <span data-ttu-id="352fd-143">Wir empfehlen, die App mit dem eigenen Dienst einen Authentifizierungsprozess durchlaufen zu lassen und die Daten über ein sicheres Protokoll (beispielsweise HTTPS) zu übermitteln.</span><span class="sxs-lookup"><span data-stu-id="352fd-143">We recommend that the app go through an authentication process with its own service and transmit data over a secure protocol such as HTTPS.</span></span>
-   <span data-ttu-id="352fd-144">Der Clouddienst muss stets sicherstellen, dass der Kanal-URI die Domäne „notify.windows.com” verwendet.</span><span class="sxs-lookup"><span data-stu-id="352fd-144">It is important that the cloud service always ensures that the channel URI uses the domain "notify.windows.com".</span></span> <span data-ttu-id="352fd-145">Der Dienst darf Benachrichtigungen niemals per Push an einen Kanal aus einer anderen Domäne übertragen.</span><span class="sxs-lookup"><span data-stu-id="352fd-145">The service should never push notifications to a channel on any other domain.</span></span> <span data-ttu-id="352fd-146">Im Falle einer Kompromittierung des Rückrufs für Ihre App könnte ein böswilliger Angreifer einen Kanal-URI übermitteln, um WNS zu täuschen.</span><span class="sxs-lookup"><span data-stu-id="352fd-146">If the callback for your app is ever compromised, a malicious attacker could submit a channel URI to spoof WNS.</span></span> <span data-ttu-id="352fd-147">Ohne Überprüfung der Domäne gibt Ihr Clouddienst unter Umständen unwissentlich Informationen an diesen Angreifer weiter.</span><span class="sxs-lookup"><span data-stu-id="352fd-147">Without inspecting the domain, your cloud service could be potentially disclose information to this attacker unknowingly.</span></span>
-   <span data-ttu-id="352fd-148">Wenn der Clouddienst versucht, eine Benachrichtigung an einen abgelaufenen Kanal zu senden, wird von WNS der [Antwortcode 410](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#WNSResponseCodes) zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="352fd-148">If your cloud service attempts to deliver a notification to an expired channel, WNS will return [response code 410](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#WNSResponseCodes).</span></span> <span data-ttu-id="352fd-149">Als Reaktion auf diesen Code sollte der Dienst keine Benachrichtigungen mehr an diesen URI senden.</span><span class="sxs-lookup"><span data-stu-id="352fd-149">In response to that code, your service should no longer attempt to send notifications to that URI.</span></span>

## <a name="authenticating-your-cloud-service"></a><span data-ttu-id="352fd-150">Authentifizieren Ihres Clouddiensts</span><span class="sxs-lookup"><span data-stu-id="352fd-150">Authenticating your cloud service</span></span>


<span data-ttu-id="352fd-151">Zum Senden einer Authentifizierung muss der Clouddienst per WNS authentifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="352fd-151">To send a notification, the cloud service must be authenticated through WNS.</span></span> <span data-ttu-id="352fd-152">Der erste Schritt in diesem Prozess erfolgt, wenn Sie Ihre App beim Microsoft Store-Dashboard registrieren.</span><span class="sxs-lookup"><span data-stu-id="352fd-152">The first step in this process occurs when you register your app with the Microsoft Store Dashboard.</span></span> <span data-ttu-id="352fd-153">Im Rahmen der Registrierung erhält Ihre App eine Paket-Sicherheits-ID (Security Identifier, SID) sowie einen geheimen Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="352fd-153">During the registration process, your app is given a Package security identifier (SID) and a secret key.</span></span> <span data-ttu-id="352fd-154">Anhand dieser Informationen kann sich Ihr Clouddienst gegenüber WNS authentifizieren.</span><span class="sxs-lookup"><span data-stu-id="352fd-154">This information is used by your cloud service to authenticate with WNS.</span></span>

<span data-ttu-id="352fd-155">Das WNS-Authentifizierungsschema wird unter Verwendung des Client-Anmeldeinformationsprofils aus dem Protokoll [OAuth2.0](https://go.microsoft.com/fwlink/p/?linkid=226787) implementiert.</span><span class="sxs-lookup"><span data-stu-id="352fd-155">The WNS authentication scheme is implemented using the client credentials profile from the [OAuth 2.0](https://go.microsoft.com/fwlink/p/?linkid=226787) protocol.</span></span> <span data-ttu-id="352fd-156">Der Clouddienst authentifiziert sich gegenüber WNS durch Angeben seiner Anmeldeinformationen (Paket-SID und geheimer Schlüssel).</span><span class="sxs-lookup"><span data-stu-id="352fd-156">The cloud service authenticates with WNS by providing its credentials (Package SID and secret key).</span></span> <span data-ttu-id="352fd-157">Im Gegenzug erhält er ein Zugriffstoken.</span><span class="sxs-lookup"><span data-stu-id="352fd-157">In return, it receives an access token.</span></span> <span data-ttu-id="352fd-158">Dieses Zugriffstoken ermöglicht einem Clouddienst das Senden von Benachrichtigungen.</span><span class="sxs-lookup"><span data-stu-id="352fd-158">This access token allows a cloud service to send a notification.</span></span> <span data-ttu-id="352fd-159">Das Token wird bei jeder an WNS gesendeten Benachrichtigungsanforderung benötigt.</span><span class="sxs-lookup"><span data-stu-id="352fd-159">The token is required with every notification request sent to the WNS.</span></span>

<span data-ttu-id="352fd-160">Im Anschluss finden Sie eine Übersicht über die Informationskette:</span><span class="sxs-lookup"><span data-stu-id="352fd-160">At a high level, the information chain is as follows:</span></span>

1.  <span data-ttu-id="352fd-161">Der Clouddienst sendet seine Anmeldeinformationen per HTTPS und gemäß OAuth2.0-Protokoll an WNS.</span><span class="sxs-lookup"><span data-stu-id="352fd-161">The cloud service sends its credentials to WNS over HTTPS following the OAuth 2.0 protocol.</span></span> <span data-ttu-id="352fd-162">Dadurch wird der Dienst gegenüber WNS authentifiziert.</span><span class="sxs-lookup"><span data-stu-id="352fd-162">This authenticates the service with WNS.</span></span>
2.  <span data-ttu-id="352fd-163">Bei erfolgreicher Authentifizierung gibt WNS ein Zugriffstoken zurück.</span><span class="sxs-lookup"><span data-stu-id="352fd-163">WNS returns an access token if the authentication was successful.</span></span> <span data-ttu-id="352fd-164">Dieses Zugriffstoken wird bis zu seinem Ablauf in allen weiteren Benachrichtigungsanforderungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="352fd-164">This access token is used in all subsequent notification requests until it expires.</span></span>

![WNS-Diagramm für Clouddienstauthentifizierung](images/wns-diagram-02.png)

<span data-ttu-id="352fd-166">Im Rahmen der Authentifizierung gegenüber WNS übermittelt der Clouddienst eine HTTP-Anforderung per SSL (Secure Sockets Layer).</span><span class="sxs-lookup"><span data-stu-id="352fd-166">In the authentication with WNS, the cloud service submits an HTTP request over Secure Sockets Layer (SSL).</span></span> <span data-ttu-id="352fd-167">Die Parameter werden im Format „application/x-www-for-urlencoded” angegeben.</span><span class="sxs-lookup"><span data-stu-id="352fd-167">The parameters are supplied in the "application/x-www-for-urlencoded" format.</span></span> <span data-ttu-id="352fd-168">Geben Sie im Feld „client\_id” Ihre Paket-SID und im Feld „client\_secret” Ihren geheimen Schlüssel an.</span><span class="sxs-lookup"><span data-stu-id="352fd-168">Supply your Package SID in the "client\_id" field and your secret key in the "client\_secret" field.</span></span> <span data-ttu-id="352fd-169">Ausführliche Informationen zur Syntax finden Sie in der Referenz zur [Zugriffstokenanforderung](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#access_token_request).</span><span class="sxs-lookup"><span data-stu-id="352fd-169">For syntax details, see the [access token request](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#access_token_request) reference.</span></span>

<span data-ttu-id="352fd-170">**Hinweis:** Dies ist nur ein Beispiel, nicht ausschneiden und Einfügen-Code, mit denen Sie erfolgreich in Ihrem eigenen Code.</span><span class="sxs-lookup"><span data-stu-id="352fd-170">**Note**This is just an example, not cut-and-paste code that you can successfully use in your own code.</span></span>

 

``` http
 POST /accesstoken.srf HTTP/1.1
 Content-Type: application/x-www-form-urlencoded
 Host: https://login.live.com
 Content-Length: 211
 
 grant_type=client_credentials&client_id=ms-app%3a%2f%2fS-1-15-2-2972962901-2322836549-3722629029-1345238579-3987825745-2155616079-650196962&client_secret=Vex8L9WOFZuj95euaLrvSH7XyoDhLJc7&scope=notify.windows.com
```

<span data-ttu-id="352fd-171">WNS authentifiziert den Clouddienst und sendet bei erfolgreicher Authentifizierung die Antwort „200 OK”.</span><span class="sxs-lookup"><span data-stu-id="352fd-171">The WNS authenticates the cloud service and, if successful, sends a response of "200 OK".</span></span> <span data-ttu-id="352fd-172">Das Zugriffstoken wird in den Parametern innerhalb des Texts der HTTP-Antwort zurückgegeben. Hierbei wird der Medientyp „application/json” verwendet.</span><span class="sxs-lookup"><span data-stu-id="352fd-172">The access token is returned in the parameters included in the body of the HTTP response, using the "application/json" media type.</span></span> <span data-ttu-id="352fd-173">Sobald Ihr Dienst das Zugriffstoken erhalten hat, können Sie Benachrichtigungen senden.</span><span class="sxs-lookup"><span data-stu-id="352fd-173">After your service has received the access token, you are ready to send notifications.</span></span>

<span data-ttu-id="352fd-174">Das folgende Beispiel zeigt eine erfolgreiche Authentifizierungsantwort einschließlich Zugriffstoken.</span><span class="sxs-lookup"><span data-stu-id="352fd-174">The following example shows a successful authentication response, including the access token.</span></span> <span data-ttu-id="352fd-175">Ausführliche Informationen zur Syntax finden Sie unter [Anforderungs- und Antwortheader des Pushbenachrichtigungsdiensts](https://msdn.microsoft.com/library/windows/apps/hh465435).</span><span class="sxs-lookup"><span data-stu-id="352fd-175">For syntax details, see [Push notification service request and response headers](https://msdn.microsoft.com/library/windows/apps/hh465435).</span></span>

``` http
 HTTP/1.1 200 OK   
 Cache-Control: no-store
 Content-Length: 422
 Content-Type: application/json
 
 {
     "access_token":"EgAcAQMAAAAALYAAY/c+Huwi3Fv4Ck10UrKNmtxRO6Njk2MgA=", 
     "token_type":"bearer"
 }
```

### <a name="important-notes"></a><span data-ttu-id="352fd-176">Wichtige Hinweise</span><span class="sxs-lookup"><span data-stu-id="352fd-176">Important notes</span></span>

-   <span data-ttu-id="352fd-177">Das in dieser Prozedur unterstützte OAuth2.0-Protokoll folgt der EntwurfsversionV16.</span><span class="sxs-lookup"><span data-stu-id="352fd-177">The OAuth 2.0 protocol supported in this procedure follows draft version V16.</span></span>
-   <span data-ttu-id="352fd-178">Die OAuth-RFC (Request for Comments) verwendet für den Clouddienst den Begriff "Client".</span><span class="sxs-lookup"><span data-stu-id="352fd-178">The OAuth Request for Comments (RFC) uses the term "client" to refer to the cloud service.</span></span>
-   <span data-ttu-id="352fd-179">Diese Prozedur wird bis zur Finalisierung des OAuth-Entwurfs unter Umständen noch geändert.</span><span class="sxs-lookup"><span data-stu-id="352fd-179">There might be changes to this procedure when the OAuth draft is finalized.</span></span>
-   <span data-ttu-id="352fd-180">Das Zugriffstoken kann für mehrere Benachrichtigungsanforderungen wiederverwendet werden.</span><span class="sxs-lookup"><span data-stu-id="352fd-180">The access token can be reused for multiple notification requests.</span></span> <span data-ttu-id="352fd-181">Dadurch muss sich der Clouddienst zum Senden mehrerer Benachrichtigungen lediglich einmal authentifizieren.</span><span class="sxs-lookup"><span data-stu-id="352fd-181">This allows the cloud service to authenticate just once to send many notifications.</span></span> <span data-ttu-id="352fd-182">Nach Ablauf des Zugriffstokens muss sich der Clouddienst allerdings erneut authentifizieren, um ein neues Zugriffstoken zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="352fd-182">However, when the access token expires, the cloud service must authenticate again to receive a new access token.</span></span>

## <a name="sending-a-notification"></a><span data-ttu-id="352fd-183">Senden einer Benachrichtigung</span><span class="sxs-lookup"><span data-stu-id="352fd-183">Sending a notification</span></span>


<span data-ttu-id="352fd-184">Mit dem Kanal-URI kann der Clouddienst eine Benachrichtigung senden, sobald ein Update für den Benutzer zur Verfügung steht.</span><span class="sxs-lookup"><span data-stu-id="352fd-184">Using the channel URI, the cloud service can send a notification whenever it has an update for the user.</span></span>

<span data-ttu-id="352fd-185">Das weiter oben beschriebene Zugriffstoken kann für mehrere Benachrichtigungsanforderungen wiederverwendet werden. Der Cloudserver muss nicht für jede Benachrichtigung ein neues Zugriffstoken anfordern.</span><span class="sxs-lookup"><span data-stu-id="352fd-185">The access token described above can be reused for multiple notification requests; the cloud server is not required to request a new access token for every notification.</span></span> <span data-ttu-id="352fd-186">Nach Ablauf des Zugriffstokens gibt die Benachrichtigungsanforderung einen Fehler zurück.</span><span class="sxs-lookup"><span data-stu-id="352fd-186">If the access token has expired, the notification request will return an error.</span></span> <span data-ttu-id="352fd-187">Wir empfehlen, das Senden der Benachrichtigung bei Ablehnung des Zugriffstokens höchstens einmal zu wiederholen.</span><span class="sxs-lookup"><span data-stu-id="352fd-187">We recommended that you do not try to re-send your notification more than once if the access token is rejected.</span></span> <span data-ttu-id="352fd-188">Im Falle dieses Fehlers müssen Sie ein neues Zugriffstoken anfordern und die Benachrichtigung erneut senden.</span><span class="sxs-lookup"><span data-stu-id="352fd-188">If you encounter this error, you will need to request a new access token and resend the notification.</span></span> <span data-ttu-id="352fd-189">Den genauen Fehlercode finden Sie unter [Antwortcodes für Pushbenachrichtigungen](https://msdn.microsoft.com/library/windows/apps/hh465435).</span><span class="sxs-lookup"><span data-stu-id="352fd-189">For the exact error code, see [Push notification response codes](https://msdn.microsoft.com/library/windows/apps/hh465435).</span></span>

1.  <span data-ttu-id="352fd-190">Der Clouddienst führt eine HTTP-POST-Anforderung an den Kanal-URI aus.</span><span class="sxs-lookup"><span data-stu-id="352fd-190">The cloud service makes an HTTP POST to the channel URI.</span></span> <span data-ttu-id="352fd-191">Diese Anforderung enthält die erforderlichen Header sowie die Benachrichtigungsnutzlast und muss per SSL erfolgen.</span><span class="sxs-lookup"><span data-stu-id="352fd-191">This request must be made over SSL and contains the necessary headers and the notification payload.</span></span> <span data-ttu-id="352fd-192">Der Autorisierungsheader muss das erhaltene Zugriffstoken für die Autorisierung enthalten.</span><span class="sxs-lookup"><span data-stu-id="352fd-192">The authorization header must include the acquired access token for authorization.</span></span>

    <span data-ttu-id="352fd-193">Hier sehen Sie eine Beispielanforderung.</span><span class="sxs-lookup"><span data-stu-id="352fd-193">An example request is shown here.</span></span> <span data-ttu-id="352fd-194">Ausführliche Informationen zur Syntax finden Sie unter [Antwortcodes für Pushbenachrichtigungen](https://msdn.microsoft.com/library/windows/apps/hh465435).</span><span class="sxs-lookup"><span data-stu-id="352fd-194">For syntax details, see [Push notification response codes](https://msdn.microsoft.com/library/windows/apps/hh465435).</span></span>

    <span data-ttu-id="352fd-195">Ausführliche Informationen zum Erstellen der Benachrichtigungsnutzlast finden Sie unter [Schnellstart: Senden einer Pushbenachrichtigung](https://msdn.microsoft.com/library/windows/apps/xaml/hh868252).</span><span class="sxs-lookup"><span data-stu-id="352fd-195">For details on composing the notification payload, see [Quickstart: Sending a push notification](https://msdn.microsoft.com/library/windows/apps/xaml/hh868252).</span></span> <span data-ttu-id="352fd-196">Die Nutzlast einer Kachel-, Popup- oder Signalpushbenachrichtigung wird als XML-Inhalt bereitgestellt, der den entsprechenden definierten [Schemas für adaptive Kacheln](adaptive-tiles-schema.md) oder [Schema für Legacykacheln](https://msdn.microsoft.com/library/windows/apps/br212853) entspricht.</span><span class="sxs-lookup"><span data-stu-id="352fd-196">The payload of a tile, toast, or badge push notification is supplied as XML content that adheres to their respective defined [Adaptive tiles schema](adaptive-tiles-schema.md) or [Legacy tiles schema](https://msdn.microsoft.com/library/windows/apps/br212853).</span></span> <span data-ttu-id="352fd-197">Die Nutzlast einer unformatierten Benachrichtigung muss keine festgelegte Struktur aufweisen.</span><span class="sxs-lookup"><span data-stu-id="352fd-197">The payload of a raw notification does not have a specified structure.</span></span> <span data-ttu-id="352fd-198">Sie wird durch die App definiert.</span><span class="sxs-lookup"><span data-stu-id="352fd-198">It is strictly app-defined.</span></span>

    ``` http
     POST https://cloud.notify.windows.com/?token=AQE%bU%2fSjZOCvRjjpILow%3d%3d HTTP/1.1
     Content-Type: text/xml
     X-WNS-Type: wns/tile
     Authorization: Bearer EgAcAQMAAAAALYAAY/c+Huwi3Fv4Ck10UrKNmtxRO6Njk2MgA=
     Host: cloud.notify.windows.com
     Content-Length: 24

     <body>
     ....
    ```

2.  <span data-ttu-id="352fd-199">WNS antwortet, um anzugeben, dass die Benachrichtigung empfangen wurde und bei nächster Gelegenheit übermittelt wird.</span><span class="sxs-lookup"><span data-stu-id="352fd-199">WNS responds to indicate that the notification has been received and will be delivered at the next available opportunity.</span></span> <span data-ttu-id="352fd-200">WNS liefert jedoch keine End-to-End-Bestätigung, dass Ihre Benachrichtigung vom Gerät oder von der Anwendung empfangen wurde.</span><span class="sxs-lookup"><span data-stu-id="352fd-200">However, WNS does not provide end-to-end confirmation that your notification has been received by the device or application.</span></span>

<span data-ttu-id="352fd-201">Dieses Diagramm veranschaulicht den Datenfluss:</span><span class="sxs-lookup"><span data-stu-id="352fd-201">This diagram illustrates the data flow:</span></span>

![WNS-Diagramm für das Senden einer Benachrichtigung](images/wns-diagram-03.png)

### <a name="important-notes"></a><span data-ttu-id="352fd-203">Wichtige Hinweise</span><span class="sxs-lookup"><span data-stu-id="352fd-203">Important notes</span></span>

-   <span data-ttu-id="352fd-204">WNS garantiert nicht die Zuverlässigkeit oder Latenz einer Benachrichtigung.</span><span class="sxs-lookup"><span data-stu-id="352fd-204">WNS does not guarantee the reliability or latency of a notification.</span></span>
-   <span data-ttu-id="352fd-205">Benachrichtigungen dürfen niemals vertrauliche oder sensible Daten enthalten.</span><span class="sxs-lookup"><span data-stu-id="352fd-205">Notifications should never include confidential or sensitive data.</span></span>
-   <span data-ttu-id="352fd-206">Zum Senden einer Benachrichtigung muss sich der Clouddienst zunächst gegenüber WNS authentifizieren und ein Zugriffstoken erhalten.</span><span class="sxs-lookup"><span data-stu-id="352fd-206">To send a notification, the cloud service must first authenticate with WNS and receive an access token.</span></span>
-   <span data-ttu-id="352fd-207">Mit einem Zugriffstoken kann der Clouddienst nur Benachrichtigungen an genau die App senden, für die das Token erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="352fd-207">An access token only allows a cloud service to send notifications to the single app for which the token was created.</span></span> <span data-ttu-id="352fd-208">Ein einzelnes Zugriffstoken kann nicht dazu verwendet werden, Benachrichtigungen an mehrere Apps zu senden.</span><span class="sxs-lookup"><span data-stu-id="352fd-208">One access token cannot be used to send notifications across multiple apps.</span></span> <span data-ttu-id="352fd-209">Unterstützt Ihr Clouddienst also mehrere Apps, muss er das korrekte Zugriffstoken für die jeweilige App angeben, wenn er eine Benachrichtigung per Push an die einzelnen Kanal-URIs übermittelt.</span><span class="sxs-lookup"><span data-stu-id="352fd-209">Therefore, if your cloud service supports multiple apps, it must provide the correct access token for the app when pushing a notification to each channel URI.</span></span>
-   <span data-ttu-id="352fd-210">Ist das Gerät offline, speichert WNS standardmäßig für jede App bis zu fünfKachelbenachrichtigungen (bei aktivierter Warteschlange, ansonsten nur eine), eine Signalbenachrichtigung für jeden Kanal-URI und keine unformatierten Benachrichtigungen.</span><span class="sxs-lookup"><span data-stu-id="352fd-210">When the device is offline, by default WNS will store up to five tile notifications (if queuing is enabled; otherwise, one tile notification) and one badge notification for each channel URI, and no raw notifications.</span></span> <span data-ttu-id="352fd-211">Dieses standardmäßige Zwischenspeicherungsverhalten kann über den [X-WNS-Cache-Policy-Header](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_cache) geändert werden.</span><span class="sxs-lookup"><span data-stu-id="352fd-211">This default caching behavior can be changed through the [X-WNS-Cache-Policy header](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_cache).</span></span> <span data-ttu-id="352fd-212">Beachten Sie, dass Popupbenachrichtigungen nie gespeichert werden, wenn das Gerät offline ist.</span><span class="sxs-lookup"><span data-stu-id="352fd-212">Note that toast notifications are never stored when the device is offline.</span></span>
-   <span data-ttu-id="352fd-213">In Szenarien mit personalisiertem Benachrichtigungsinhalt für den Benutzer empfiehlt WNS, dass der Clouddienst die Updates umgehend nach Eingang übermittelt.</span><span class="sxs-lookup"><span data-stu-id="352fd-213">In scenarios where the notification content is personalized to the user, WNS recommends that the cloud service immediately send those updates when those are received.</span></span> <span data-ttu-id="352fd-214">Beispiele für ein solches Szenario wären Feedupdates für soziale Medien, Chateinladungen, Benachrichtigungen über neue Nachrichten oder Warnungen.</span><span class="sxs-lookup"><span data-stu-id="352fd-214">Examples of this scenario include social media feed updates, instant communication invitations, new message notifications, or alerts.</span></span> <span data-ttu-id="352fd-215">Als Alternative ist auch denkbar, dass das gleiche allgemeine Update häufig an eine große Untergruppe von Benutzern gesendet wird (beispielsweise Wetterinfos, Börsendaten oder Nachrichten).</span><span class="sxs-lookup"><span data-stu-id="352fd-215">As an alternative, you can have scenarios in which the same generic update is frequently delivered to a large subset of your users; for example, weather, stock, and news updates.</span></span> <span data-ttu-id="352fd-216">Gemäß den WNS-Richtlinien muss der zeitliche Abstand zwischen diesen Updates mindestens 30Minuten betragen.</span><span class="sxs-lookup"><span data-stu-id="352fd-216">WNS guidelines specify that the frequency of these updates should be at most one every 30 minutes.</span></span> <span data-ttu-id="352fd-217">Häufigere Routineupdates werden vom Endbenutzer oder von WNS unter Umständen als Missbrauch wahrgenommen.</span><span class="sxs-lookup"><span data-stu-id="352fd-217">The end user or WNS may determine more frequent routine updates to be abusive.</span></span>

## <a name="expiration-of-tile-and-badge-notifications"></a><span data-ttu-id="352fd-218">Ablauf der Kachel- und Signalbenachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="352fd-218">Expiration of tile and badge notifications</span></span>


<span data-ttu-id="352fd-219">Standardmäßig laufen die Kachel- und Signalbenachrichtigungen drei Tage, nachdem sie heruntergeladen wurden, ab.</span><span class="sxs-lookup"><span data-stu-id="352fd-219">By default, tile and badge notifications expire three days after being downloaded.</span></span> <span data-ttu-id="352fd-220">Wenn eine Benachrichtigung abläuft, wird der Inhalt von der Kachel oder aus der Warteschlange entfernt und nicht mehr angezeigt.</span><span class="sxs-lookup"><span data-stu-id="352fd-220">When a notification expires, the content is removed from the tile or queue and is no longer shown to the user.</span></span> <span data-ttu-id="352fd-221">Daher wird empfohlen, für alle Kachel- und Signalbenachrichtigungen eine Gültigkeitsdauer festzulegen. Verwenden Sie eine Ablaufzeit, die für Ihre App sinnvoll ist. So können Sie sicherstellen, dass der Inhalt einer Kachel nur so lange beibehalten wird, wie er von Bedeutung ist.</span><span class="sxs-lookup"><span data-stu-id="352fd-221">It's a best practice to set an expiration (using a time that makes sense for your app) on all tile and badge notifications so that your tile's content doesn't persist longer than it is relevant.</span></span> <span data-ttu-id="352fd-222">Eine explizite Ablaufzeit ist für Inhalte mit definierter Lebensdauer von großer Bedeutung.</span><span class="sxs-lookup"><span data-stu-id="352fd-222">An explicit expiration time is essential for content with a defined lifespan.</span></span> <span data-ttu-id="352fd-223">Durch sie wird außerdem sichergestellt, dass veraltete Inhalte entfernt werden, wenn Ihr Clouddienst keine Benachrichtigungen mehr sendet oder der Benutzer die Verbindung mit dem Netzwerk für längere Zeit trennt.</span><span class="sxs-lookup"><span data-stu-id="352fd-223">This also assures the removal of stale content if your cloud service stops sending notifications, or if the user disconnects from the network for an extended period.</span></span>

<span data-ttu-id="352fd-224">Ihr Clouddienst kann eine Gültigkeitsdauer für jede Benachrichtigung festlegen, indem der X-WNS-TTL-HTTP-Header so festgelegt wird, dass er die Dauer (in Sekunden) angibt, die Ihre Benachrichtigung nach dem Senden gültig bleibt.</span><span class="sxs-lookup"><span data-stu-id="352fd-224">Your cloud service can set an expiration for each notification by setting the X-WNS-TTL HTTP header to specify the time (in seconds) that your notification will remain valid after it is sent.</span></span> <span data-ttu-id="352fd-225">Weitere Informationen finden Sie unter [Anforderungs- und Antwortheader des Pushbenachrichtigungsdiensts](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_ttl).</span><span class="sxs-lookup"><span data-stu-id="352fd-225">For more information, see [Push notification service request and response headers](https://msdn.microsoft.com/library/windows/apps/hh465435.aspx#pncodes_x_wns_ttl).</span></span>

<span data-ttu-id="352fd-226">Während eines aktiven Börsenhandelstags können Sie beispielsweise die Gültigkeitsdauer für eine Aktienpreisaktualisierung gegenüber dem Sendeintervall verdoppeln (wie z.B. eine Stunde nach Empfang beim Senden von Benachrichtigungen zu jeder halben Stunde).</span><span class="sxs-lookup"><span data-stu-id="352fd-226">For example, during a stock market's active trading day, you can set the expiration for a stock price update to twice that of your sending interval (such as one hour after receipt if you are sending notifications every half-hour).</span></span> <span data-ttu-id="352fd-227">Als weiteres Beispiel dient eine News-App, bei der festgestellt wird, dass ein Intervall von einem Tag für eine tägliche Kachelaktualisierung angemessen ist.</span><span class="sxs-lookup"><span data-stu-id="352fd-227">As another example, a news app might determine that one day is an appropriate expiration time for a daily news tile update.</span></span>

## <a name="push-notifications-and-battery-saver"></a><span data-ttu-id="352fd-228">Pushbenachrichtigungen und Stromsparmodus</span><span class="sxs-lookup"><span data-stu-id="352fd-228">Push notifications and battery saver</span></span>


<span data-ttu-id="352fd-229">Der Stromsparmodus schränkt Hintergrundaktivitäten auf dem Gerät ein und verlängert dadurch die Akkulaufzeit.</span><span class="sxs-lookup"><span data-stu-id="352fd-229">Battery saver extends battery life by limiting background activity on the device.</span></span> <span data-ttu-id="352fd-230">Windows 10 können Benutzer den Stromsparmodus auf automatisch aktiviert wird, wenn der Akkustand einen bestimmten Schwellenwert unterschreitet festlegen.</span><span class="sxs-lookup"><span data-stu-id="352fd-230">Windows10 lets the user set battery saver to turn on automatically when the battery drops below a specified threshold.</span></span> <span data-ttu-id="352fd-231">Wenn der Stromsparmodus aktiviert ist, ist der Empfang von Pushbenachrichtigungen deaktiviert, um Energie zu sparen.</span><span class="sxs-lookup"><span data-stu-id="352fd-231">When battery saver is on, the receipt of push notifications is disabled to save energy.</span></span> <span data-ttu-id="352fd-232">Es gibt allerdings einige Ausnahmen.</span><span class="sxs-lookup"><span data-stu-id="352fd-232">But there are a couple exceptions to this.</span></span> <span data-ttu-id="352fd-233">Die folgenden Windows 10 Einstellungen für den Stromsparmodus (finden Sie in den **Einstellungen** ) ermöglichen Ihrer app Pushbenachrichtigungen zu empfangen, auch wenn der Stromsparmodus aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="352fd-233">The following Windows10 battery saver settings (found in the **Settings** app) allow your app to receive push notifications even when battery saver is on.</span></span>

-   <span data-ttu-id="352fd-234">**Im Stromsparmodus Pushbenachrichtigungen von jeder App zulassen**: Alle Apps können Pushbenachrichtigungen empfangen, wenn der Stromsparmodus aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="352fd-234">**Allow push notifications from any app while in battery saver**: This setting lets all apps receive push notifications while battery saver is on.</span></span> <span data-ttu-id="352fd-235">Beachten Sie, dass diese Einstellung nur für Windows 10 für Desktopeditionen (Home, Pro, Enterprise und Education) gilt.</span><span class="sxs-lookup"><span data-stu-id="352fd-235">Note that this setting applies only to Windows10 for desktop editions (Home, Pro, Enterprise, and Education).</span></span>
-   <span data-ttu-id="352fd-236">**Immer zugelassen**: Bestimmte Apps können im Hintergrund ausgeführt werden, wenn der Stromsparmodus aktiviert ist, und dabei Pushbenachrichtigungen empfangen.</span><span class="sxs-lookup"><span data-stu-id="352fd-236">**Always allowed**: This setting lets specific apps run in the background while battery saver is on - including receiving push notifications.</span></span> <span data-ttu-id="352fd-237">Die Liste wird manuell vom Benutzer verwaltet.</span><span class="sxs-lookup"><span data-stu-id="352fd-237">This list is maintained manually by the user.</span></span>

<span data-ttu-id="352fd-238">Es ist nicht möglich, den Status dieser beiden Einstellungen zu überprüfen, Sie können aber den Status des Stromsparmodus feststellen.</span><span class="sxs-lookup"><span data-stu-id="352fd-238">There is no way to check the state of these two settings, but you can check the state of battery saver.</span></span> <span data-ttu-id="352fd-239">Verwenden Sie in Windows 10 die [**EnergySaverStatus**](https://docs.microsoft.com/uwp/api/Windows.System.Power.PowerManager.EnergySaverStatus) -Eigenschaft, um den Status des Stromsparmodus zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="352fd-239">In Windows10, use the [**EnergySaverStatus**](https://docs.microsoft.com/uwp/api/Windows.System.Power.PowerManager.EnergySaverStatus) property to check battery saver state.</span></span> <span data-ttu-id="352fd-240">Ihre App kann auch mithilfe des [**EnergySaverStatusChanged**](https://docs.microsoft.com/uwp/api/Windows.System.Power.PowerManager.EnergySaverStatusChanged)-Ereignisses Änderungen des Stromsparmodus überwachen.</span><span class="sxs-lookup"><span data-stu-id="352fd-240">Your app can also use the [**EnergySaverStatusChanged**](https://docs.microsoft.com/uwp/api/Windows.System.Power.PowerManager.EnergySaverStatusChanged) event to listen for changes to battery saver.</span></span>

<span data-ttu-id="352fd-241">Falls Pushbenachrichtigungen bei Ihrer App sehr wichtig sind, sollten Sie die Benutzer darüber informieren, dass sie bei aktiviertem Stromsparmodus keine Benachrichtigungen erhalten, und eine einfache Möglichkeit zum Anpassen der **Einstellungen für den Stromsparmodus** vorsehen.</span><span class="sxs-lookup"><span data-stu-id="352fd-241">If your app depends heavily on push notifications, we recommend notifying users that they may not receive notifications while battery saver is on and to make it easy for them to adjust **battery saver settings**.</span></span> <span data-ttu-id="352fd-242">Verwenden den Akku Stromsparmodus URI-Schema in Windows 10, `ms-settings:batterysaver-settings`, Sie können einen praktischen Link zu der Einstellungs-app bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="352fd-242">Using the battery saver settings URI scheme in Windows10, `ms-settings:batterysaver-settings`, you can provide a convenient link to the Settings app.</span></span>

<span data-ttu-id="352fd-243">**Tipp:**  , wenn den Benutzer über die Einstellungen für den Stromsparmodus informieren, wir empfehlen, eine Möglichkeit, die Meldung in der Zukunft zu unterdrücken.</span><span class="sxs-lookup"><span data-stu-id="352fd-243">**Tip** When notifying the user about battery saver settings, we recommend providing a way to suppress the message in the future.</span></span> <span data-ttu-id="352fd-244">Das Kontrollkästchen `dontAskMeAgainBox` im folgenden Beispiel speichert z.B. die Benutzereinstellung in [**LocalSettings**](https://docs.microsoft.com/uwp/api/Windows.Storage.ApplicationData.LocalSettings).</span><span class="sxs-lookup"><span data-stu-id="352fd-244">For example, the `dontAskMeAgainBox` checkbox in the following example persists the user's preference in [**LocalSettings**](https://docs.microsoft.com/uwp/api/Windows.Storage.ApplicationData.LocalSettings).</span></span>

 

<span data-ttu-id="352fd-245">Hier ist ein Beispiel dafür, wie Sie überprüfen, ob der Stromsparmodus in Windows 10 aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="352fd-245">Here's an example of how to check if battery saver is turned on in Windows10.</span></span> <span data-ttu-id="352fd-246">In diesem Beispiel wird der Benutzer benachrichtigt, und die Einstellungs-App wird gestartet, um **Einstellungen für Stromsparmodus** anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="352fd-246">This example notifies the user and launches the Settings app to **battery saver settings**.</span></span> <span data-ttu-id="352fd-247">Mit dem Kontrollkästchen `dontAskAgainSetting` kann der Benutzer die Meldung unterdrücken, wenn er nicht erneut benachrichtigt werden möchte.</span><span class="sxs-lookup"><span data-stu-id="352fd-247">The `dontAskAgainSetting` lets the user suppress the message if they don't want to be notified again.</span></span>

```cs
using System;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Navigation;
using Windows.System;
using Windows.System.Power;
...
...
async public void CheckForEnergySaving()
{
   //Get reminder preference from LocalSettings
   bool dontAskAgain;
   var localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;
   object dontAskSetting = localSettings.Values["dontAskAgainSetting"];
   if (dontAskSetting == null)
   {  // Setting does not exist
      dontAskAgain = false;
   }
   else
   {  // Retrieve setting value
      dontAskAgain = Convert.ToBoolean(dontAskSetting);
   }
   
   // Check if battery saver is on and that it's okay to raise dialog
   if ((PowerManager.EnergySaverStatus == EnergySaverStatus.On)
         && (dontAskAgain == false))
   {
      // Check dialog results
      ContentDialogResult dialogResult = await saveEnergyDialog.ShowAsync();
      if (dialogResult == ContentDialogResult.Primary)
      {
         // Launch battery saver settings (settings are available only when a battery is present)
         await Launcher.LaunchUriAsync(new Uri("ms-settings:batterysaver-settings"));
      }

      // Save reminder preference
      if (dontAskAgainBox.IsChecked == true)
      {  // Don't raise dialog again
         localSettings.Values["dontAskAgainSetting"] = "true";
      }
   }
}
```

<span data-ttu-id="352fd-248">Dies ist der XAML-Code für das in diesem Beispiel vorgestellte [**ContentDialog**](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.ContentDialog).</span><span class="sxs-lookup"><span data-stu-id="352fd-248">This is the XAML for the [**ContentDialog**](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.ContentDialog) featured in this example.</span></span>

```xaml
<ContentDialog x:Name="saveEnergyDialog"
               PrimaryButtonText="Open battery saver settings"
               SecondaryButtonText="Ignore"
               Title="Battery saver is on."> 
   <StackPanel>
      <TextBlock TextWrapping="WrapWholeWords">
         <LineBreak/><Run>Battery saver is on and you may 
          not receive push notifications.</Run><LineBreak/>
         <LineBreak/><Run>You can choose to allow this app to work normally
         while in battery saver, including receiving push notifications.</Run>
         <LineBreak/>
      </TextBlock>
      <CheckBox x:Name="dontAskAgainBox" Content="OK, got it."/>
   </StackPanel>
</ContentDialog>
```

## <a name="related-topics"></a><span data-ttu-id="352fd-249">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="352fd-249">Related topics</span></span>


* [<span data-ttu-id="352fd-250">Senden einer lokalen Kachelbenachrichtigung</span><span class="sxs-lookup"><span data-stu-id="352fd-250">Send a local tile notification</span></span>](sending-a-local-tile-notification.md)
* [<span data-ttu-id="352fd-251">Schnellstart: Senden einer Pushbenachrichtigung</span><span class="sxs-lookup"><span data-stu-id="352fd-251">Quickstart: Sending a push notification</span></span>](https://msdn.microsoft.com/library/windows/apps/xaml/hh868252)
* [<span data-ttu-id="352fd-252">So wird's gemacht: Aktualisieren eines Signals durch Pushbenachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="352fd-252">How to update a badge through push notifications</span></span>](https://msdn.microsoft.com/library/windows/apps/hh465450)
* [<span data-ttu-id="352fd-253">So wird's gemacht: Anfordern, Erstellen und Speichern eines Benachrichtigungskanals</span><span class="sxs-lookup"><span data-stu-id="352fd-253">How to request, create, and save a notification channel</span></span>](https://msdn.microsoft.com/library/windows/apps/hh465412)
* [<span data-ttu-id="352fd-254">So wird's gemacht: Abfangen von Benachrichtigungen für ausgeführte Anwendungen</span><span class="sxs-lookup"><span data-stu-id="352fd-254">How to intercept notifications for running applications</span></span>](https://msdn.microsoft.com/library/windows/apps/xaml/jj709907.aspx)
* [<span data-ttu-id="352fd-255">So wird's gemacht: Authentifizieren mit dem Windows-Pushbenachrichtigungsdienst (Windows Push Notification Service, WNS)</span><span class="sxs-lookup"><span data-stu-id="352fd-255">How to authenticate with the Windows Push Notification Service (WNS)</span></span>](https://msdn.microsoft.com/library/windows/apps/hh465407)
* [<span data-ttu-id="352fd-256">Anforderungs- und Antwortheader des Pushbenachrichtigungsdiensts</span><span class="sxs-lookup"><span data-stu-id="352fd-256">Push notification service request and response headers</span></span>](https://msdn.microsoft.com/library/windows/apps/hh465435)
* [<span data-ttu-id="352fd-257">Richtlinien und Prüfliste für Pushbenachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="352fd-257">Guidelines and checklist for push notifications</span></span>](https://msdn.microsoft.com/library/windows/apps/hh761462)
* [<span data-ttu-id="352fd-258">Unformatierte Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="352fd-258">Raw notifications</span></span>](https://msdn.microsoft.com/library/windows/apps/hh761488)
 

 




