---
Description: The core text APIs in the Windows.UI.Text.Core namespace enable a Universal Windows Platform (UWP) app to receive text input from any text service supported on Windows devices.
title: Übersicht über benutzerdefinierte Texteingabe
ms.assetid: 58F5F7AC-6A4B-45FC-8C2A-942730FD7B74
label: Custom text input
template: detail.hbs
keywords: Tastatur, Text, Core-Text, benutzerdefinierter Text, Textdienstframework, Eingabe, Benutzerinteraktionen
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 161278dc5fe0bb8c7d4c790def6a9f7ba88b83d2
ms.sourcegitcommit: c01c29cd97f1cbf050950526e18e15823b6a12a0
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/05/2018
ms.locfileid: "8701665"
---
# <a name="custom-text-input"></a><span data-ttu-id="6749c-103">Benutzerdefinierte Texteingabe</span><span class="sxs-lookup"><span data-stu-id="6749c-103">Custom text input</span></span>



<span data-ttu-id="6749c-104">Mit den Core-Text-APIs im [**Windows.UI.Text.Core**](https://msdn.microsoft.com/library/windows/apps/dn958238)-Namespace kann eine UWP-App (Universelle Windows-Plattform) Texteingaben von beliebigen Textdiensten empfangen, die auf Windows-Geräten unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="6749c-104">The core text APIs in the [**Windows.UI.Text.Core**](https://msdn.microsoft.com/library/windows/apps/dn958238) namespace enable a Universal Windows Platform (UWP) app to receive text input from any text service supported on Windows devices.</span></span> <span data-ttu-id="6749c-105">Die APIs sind den [Textdienstframework](https://msdn.microsoft.com/library/windows/desktop/ms629032)-APIs dahingehend ähnlich, dass die App keine detaillierten Kenntnisse über die Textdienste benötigt.</span><span class="sxs-lookup"><span data-stu-id="6749c-105">The APIs are similar to the [Text Services Framework](https://msdn.microsoft.com/library/windows/desktop/ms629032) APIs in that the app is not required to have detailed knowledge of the text services.</span></span> <span data-ttu-id="6749c-106">Auf diese Weise kann die App Text in einer beliebigen Sprache und von einem beliebigen Eingabegerät wie Tastatur, Sprache oder Stift empfangen.</span><span class="sxs-lookup"><span data-stu-id="6749c-106">This enables the app to receive text in any language and from any input type, like keyboard, speech, or pen.</span></span>

> <span data-ttu-id="6749c-107">**Wichtige APIs**: [**Windows.UI.Text.Core**](https://msdn.microsoft.com/library/windows/apps/dn958238), [**CoreTextEditContext**](https://msdn.microsoft.com/library/windows/apps/dn958158)</span><span class="sxs-lookup"><span data-stu-id="6749c-107">**Important APIs**: [**Windows.UI.Text.Core**](https://msdn.microsoft.com/library/windows/apps/dn958238), [**CoreTextEditContext**](https://msdn.microsoft.com/library/windows/apps/dn958158)</span></span>

## <a name="why-use-core-text-apis"></a><span data-ttu-id="6749c-108">Gründe für die Verwendung von Core-Text-APIs</span><span class="sxs-lookup"><span data-stu-id="6749c-108">Why use core text APIs?</span></span>


<span data-ttu-id="6749c-109">Für zahlreiche Apps sind die XAML- oder HTML-Textfeld-Steuerelemente für Texteingabe und Textbearbeitung ausreichend.</span><span class="sxs-lookup"><span data-stu-id="6749c-109">For many apps, the XAML or HTML text box controls are sufficient for text input and editing.</span></span> <span data-ttu-id="6749c-110">Wenn Ihre App jedoch komplexe Textszenarien behandelt, beispielsweise eine Textverarbeitungs-App ist, benötigen Sie vielleicht die Flexibilität eines benutzerdefinierten Textbearbeitungssteuerelements.</span><span class="sxs-lookup"><span data-stu-id="6749c-110">However, if your app handles complex text scenarios, like a word processing app, you might need the flexibility of a custom text edit control.</span></span> <span data-ttu-id="6749c-111">Sie könnten die [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225)-Tastatur APIs verwenden, um das Textbearbeitungssteuerelement zu erstellen. Diese ermöglichen jedoch keinen Empfang von kompositionsbasierten Texteingaben, die für die Unterstützung ostasiatischer Sprachen erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="6749c-111">You could use the [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) keyboard APIs to create your text edit control, but these don't provide a way to receive composition-based text input, which is required to support East Asian languages.</span></span>

<span data-ttu-id="6749c-112">Verwenden Sie stattdessen die [**Windows.UI.Text.Core**](https://msdn.microsoft.com/library/windows/apps/dn958238)-APIs, wenn Sie ein benutzerdefiniertes Textbearbeitungssteuerelement erstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="6749c-112">Instead, use the [**Windows.UI.Text.Core**](https://msdn.microsoft.com/library/windows/apps/dn958238) APIs when you need to create a custom text edit control.</span></span> <span data-ttu-id="6749c-113">Diese APIs sind so konzipiert, dass sie Ihnen ein hohes Maß an Flexibilität bei der Verarbeitung von Texteingaben in allen Sprachen bieten. Sie können daher Textverarbeitung so gestalten, wie dies für Ihre App am besten ist.</span><span class="sxs-lookup"><span data-stu-id="6749c-113">These APIs are designed to give you a lot of flexibility in processing text input, in any language, and let you provide the text experience best suited to your app.</span></span> <span data-ttu-id="6749c-114">Texteingabe- und Textbearbeitungssteuerelemente, die mit den Core-Text-APIs erstellt wurde, können Texteingaben von allen vorhandenen Texteingabemethoden auf Windows-Geräten empfangen, von [Textdienstframework](https://msdn.microsoft.com/library/windows/desktop/ms629032)-basierten Eingabemethoden-Editoren (IMEs) und Handschrift auf PCs bis hin zu der WordFlow-Tastatur (die AutoKorrektur, Vorhersage und Diktat bereitstellt) auf mobilen Geräten.</span><span class="sxs-lookup"><span data-stu-id="6749c-114">Text input and edit controls built with the core text APIs can receive text input from all existing text input methods on Windows devices, from [Text Services Framework](https://msdn.microsoft.com/library/windows/desktop/ms629032) based Input Method Editors (IMEs) and handwriting on PCs to the WordFlow keyboard (which provides auto-correction, prediction, and dictation) on mobile devices.</span></span>

## <a name="architecture"></a><span data-ttu-id="6749c-115">Architektur</span><span class="sxs-lookup"><span data-stu-id="6749c-115">Architecture</span></span>


<span data-ttu-id="6749c-116">Im Folgenden finden Sie eine einfache Darstellung des Texteingabesystems.</span><span class="sxs-lookup"><span data-stu-id="6749c-116">The following is a simple representation of the text input system.</span></span>

-   <span data-ttu-id="6749c-117">„Anwendung“ ist eine UWP-App, die ein benutzerdefiniertes Bearbeitungssteuerelement mit den Core-Text-APIs hostet.</span><span class="sxs-lookup"><span data-stu-id="6749c-117">"Application" represents a UWP app hosting a custom edit control built using the core text APIs.</span></span>
-   <span data-ttu-id="6749c-118">Die [**Windows.UI.Text.Core**](https://msdn.microsoft.com/library/windows/apps/dn958238)-APIs ermöglichen die Kommunikation mit Textdiensten über Windows.</span><span class="sxs-lookup"><span data-stu-id="6749c-118">The [**Windows.UI.Text.Core**](https://msdn.microsoft.com/library/windows/apps/dn958238) APIs facilitate the communication with text services through Windows.</span></span> <span data-ttu-id="6749c-119">Die Kommunikation zwischen dem Textbearbeitungssteuerelement und den Textdiensten erfolgt in erster Linie über ein [**CoreTextEditContext**](https://msdn.microsoft.com/library/windows/apps/dn958158)-Objekt, das die Methoden und Ereignisse für die Kommunikation bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="6749c-119">Communication between the text edit control and the text services is handled primarily through a [**CoreTextEditContext**](https://msdn.microsoft.com/library/windows/apps/dn958158) object that provides the methods and events to facilitate the communication.</span></span>

![Diagramm für die Kerntextarchitektur](images/coretext/architecture.png)

## <a name="text-ranges-and-selection"></a><span data-ttu-id="6749c-121">Textbereiche und Auswahl</span><span class="sxs-lookup"><span data-stu-id="6749c-121">Text ranges and selection</span></span>


<span data-ttu-id="6749c-122">Bearbeitungssteuerelemente bieten Platz für die Eingabe von Text, und Benutzer erwarten, dass Text an einer beliebigen Stelle in diesem Bereich bearbeitet werden kann.</span><span class="sxs-lookup"><span data-stu-id="6749c-122">Edit controls provide space for text entry and users expect to edit text anywhere in this space.</span></span> <span data-ttu-id="6749c-123">Hier wird das von den Core-Text-APIs verwendete Textpositionierungssystem erläutert und wie Bereiche und Auswahlen in diesem System dargestellt werden.</span><span class="sxs-lookup"><span data-stu-id="6749c-123">Here, we explain the text positioning system used by the core text APIs and how ranges and selections are represented in this system.</span></span>

### <a name="application-caret-position"></a><span data-ttu-id="6749c-124">Textcursorposition der Anwendung</span><span class="sxs-lookup"><span data-stu-id="6749c-124">Application caret position</span></span>

<span data-ttu-id="6749c-125">Textbereiche, die mit den Core-Text-APIs verwendet werden, werden mittels Textcursorpositionen ausgedrückt.</span><span class="sxs-lookup"><span data-stu-id="6749c-125">Text ranges used with the core text APIs are expressed in terms of caret positions.</span></span> <span data-ttu-id="6749c-126">Eine „Textcursorposition der Anwendung“ (Application Caret Position, ACP) ist eine nullbasierte Zahl, die die Anzahl der Zeichen vom Anfang des Textstreams bis unmittelbar vor dem Textcursor angibt, wie hier gezeigt.</span><span class="sxs-lookup"><span data-stu-id="6749c-126">An "Application Caret Position (ACP)" is a zero-based number that indicates the count of characters from the start of the text stream immediately before the caret, as shown here.</span></span>

![Beispieldiagramm für einen Textstream](images/coretext/stream-1.png)
### <a name="text-ranges-and-selection"></a><span data-ttu-id="6749c-128">Textbereiche und Auswahl</span><span class="sxs-lookup"><span data-stu-id="6749c-128">Text ranges and selection</span></span>

<span data-ttu-id="6749c-129">Textbereiche und -auswahlen werden anhand der [**CoreTextRange**](https://msdn.microsoft.com/library/windows/apps/dn958201)-Struktur dargestellt, die zwei Felder enthält:</span><span class="sxs-lookup"><span data-stu-id="6749c-129">Text ranges and selections are represented by the [**CoreTextRange**](https://msdn.microsoft.com/library/windows/apps/dn958201) structure which contains two fields:</span></span>

| <span data-ttu-id="6749c-130">Feld</span><span class="sxs-lookup"><span data-stu-id="6749c-130">Field</span></span>                  | <span data-ttu-id="6749c-131">Datentyp</span><span class="sxs-lookup"><span data-stu-id="6749c-131">Data type</span></span>                                                                 | <span data-ttu-id="6749c-132">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="6749c-132">Description</span></span>                                                                      |
|------------------------|---------------------------------------------------------------------------|----------------------------------------------------------------------------------|
| **<span data-ttu-id="6749c-133">StartCaretPosition</span><span class="sxs-lookup"><span data-stu-id="6749c-133">StartCaretPosition</span></span>** | <span data-ttu-id="6749c-134">**Number** \[JavaScript\]</span><span class="sxs-lookup"><span data-stu-id="6749c-134">**Number** \[JavaScript\]</span></span> | <span data-ttu-id="6749c-135">**System.Int32** \[.NET\]</span><span class="sxs-lookup"><span data-stu-id="6749c-135">**System.Int32** \[.NET\]</span></span> | <span data-ttu-id="6749c-136">**int32** \[C++\]</span><span class="sxs-lookup"><span data-stu-id="6749c-136">**int32** \[C++\]</span></span> | <span data-ttu-id="6749c-137">Die Startposition eines Bereichs ist die Textcursorposition der Anwendung unmittelbar vor dem ersten Zeichen.</span><span class="sxs-lookup"><span data-stu-id="6749c-137">The start position of a range is the ACP immediately before the first character.</span></span> |
| **<span data-ttu-id="6749c-138">EndCaretPosition</span><span class="sxs-lookup"><span data-stu-id="6749c-138">EndCaretPosition</span></span>**   | <span data-ttu-id="6749c-139">**Number** \[JavaScript\]</span><span class="sxs-lookup"><span data-stu-id="6749c-139">**Number** \[JavaScript\]</span></span> | <span data-ttu-id="6749c-140">**System.Int32** \[.NET\]</span><span class="sxs-lookup"><span data-stu-id="6749c-140">**System.Int32** \[.NET\]</span></span> | <span data-ttu-id="6749c-141">**int32** \[C++\]</span><span class="sxs-lookup"><span data-stu-id="6749c-141">**int32** \[C++\]</span></span> | <span data-ttu-id="6749c-142">Die Endposition eines Bereichs ist Textcursorposition der Anwendung unmittelbar nach dem letzten Zeichen.</span><span class="sxs-lookup"><span data-stu-id="6749c-142">The end position of a range is the ACP immediately after the last character.</span></span>     |

 

<span data-ttu-id="6749c-143">In dem zuvor dargestellten Textbereich gibt der Bereich \[0, 5\] beispielsweise das Wort „Hello“ an.</span><span class="sxs-lookup"><span data-stu-id="6749c-143">For example, in the text range shown previously, the range \[0, 5\] specifies the word "Hello".</span></span> <span data-ttu-id="6749c-144">**StartCaretPosition** muss stets kleiner oder gleich der **EndCaretPosition** sein.</span><span class="sxs-lookup"><span data-stu-id="6749c-144">**StartCaretPosition** must always be less than or equal to the **EndCaretPosition**.</span></span> <span data-ttu-id="6749c-145">Der Bereich \[5, 0\] ist ungültig.</span><span class="sxs-lookup"><span data-stu-id="6749c-145">The range \[5, 0\] is invalid.</span></span>

### <a name="insertion-point"></a><span data-ttu-id="6749c-146">Einfügemarke</span><span class="sxs-lookup"><span data-stu-id="6749c-146">Insertion point</span></span>

<span data-ttu-id="6749c-147">Die aktuelle Textcursorposition, häufig als Einfügemarke bezeichnet, wird durch dargestellt, indem **StartCaretPosition** als gleich **EndCaretPosition** festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="6749c-147">The current caret position, frequently referred to as the insertion point, is represented by setting the **StartCaretPosition** to be equal to the **EndCaretPosition**.</span></span>

### <a name="noncontiguous-selection"></a><span data-ttu-id="6749c-148">Nicht zusammenhängende Auswahl</span><span class="sxs-lookup"><span data-stu-id="6749c-148">Noncontiguous selection</span></span>

<span data-ttu-id="6749c-149">Einige Bearbeitungssteuerelemente unterstützen nicht zusammenhängende Auswahlen.</span><span class="sxs-lookup"><span data-stu-id="6749c-149">Some edit controls support noncontiguous selections.</span></span> <span data-ttu-id="6749c-150">Microsoft Office-Apps unterstützen z. B. eine beliebige Mehrfachauswahl, und viele Quellcode-Editoren unterstützen die Spaltenauswahl.</span><span class="sxs-lookup"><span data-stu-id="6749c-150">For example, Microsoft Office apps support multiple arbitrary selections, and many source code editors support column selection.</span></span> <span data-ttu-id="6749c-151">Von Core-Text-APIs wird jedoch eine nicht zusammenhängende Auswahl nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="6749c-151">However, the core text APIs do not support noncontiguous selections.</span></span> <span data-ttu-id="6749c-152">Bearbeitungssteuerelemente müssen nur eine einzige zusammenhängende Auswahl melden; meistens ist dies der aktive Unterbereich der nicht zusammenhängenden Auswahlen.</span><span class="sxs-lookup"><span data-stu-id="6749c-152">Edit controls must report only a single contiguous selection, most often the active sub-range of the noncontiguous selections.</span></span>

<span data-ttu-id="6749c-153">Betrachten Sie beispielsweise den folgenden Textstream:</span><span class="sxs-lookup"><span data-stu-id="6749c-153">For example, consider this text stream:</span></span>

![<span data-ttu-id="6749c-154">Beispieldiagramm für einen Textstream](images/coretext/stream-2.png) Es gibt zwei Auswahlen: \[0, 1\] und \[6, 11\].</span><span class="sxs-lookup"><span data-stu-id="6749c-154">example text stream diagram](images/coretext/stream-2.png) There are two selections: \[0, 1\] and \[6, 11\].</span></span> <span data-ttu-id="6749c-155">Das Bearbeitungssteuerelement muss nur eine von diesen melden: \[0, 1\] oder \[6, 11\].</span><span class="sxs-lookup"><span data-stu-id="6749c-155">The edit control must report only one of them; either \[0, 1\] or \[6, 11\].</span></span>

## <a name="working-with-text"></a><span data-ttu-id="6749c-156">Arbeiten mit Text</span><span class="sxs-lookup"><span data-stu-id="6749c-156">Working with text</span></span>


<span data-ttu-id="6749c-157">Die [**CoreTextEditContext**](https://msdn.microsoft.com/library/windows/apps/dn958158)-Klasse ermöglicht einen Textfluss zwischen Windows und Bearbeitungssteuerelementen über das [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176)-Ereignis, das [**TextRequested**](https://msdn.microsoft.com/library/windows/apps/dn958175)-Ereignis und die [**NotifyTextChanged**](https://msdn.microsoft.com/library/windows/apps/dn958172)-Methode.</span><span class="sxs-lookup"><span data-stu-id="6749c-157">The [**CoreTextEditContext**](https://msdn.microsoft.com/library/windows/apps/dn958158) class enables text flow between Windows and edit controls through the [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176) event, the [**TextRequested**](https://msdn.microsoft.com/library/windows/apps/dn958175) event, and the [**NotifyTextChanged**](https://msdn.microsoft.com/library/windows/apps/dn958172) method.</span></span>

<span data-ttu-id="6749c-158">Das Bearbeitungssteuerelement empfängt Text über die [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176)-Ereignisse, die generiert werden, wenn Benutzer mit Texteingabemethoden wie Tastaturen, Sprache oder IMEs interagieren.</span><span class="sxs-lookup"><span data-stu-id="6749c-158">Your edit control receives text through [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176) events that are generated when users interact with text input methods like keyboards, speech, or IMEs.</span></span>

<span data-ttu-id="6749c-159">Wenn Sie Text im Bearbeitungssteuerelement ändern, beispielsweise durch Einfügen von Text in das Steuerelement, müssen Sie Windows benachrichtigen, indem Sie [**NotifyTextChanged**](https://msdn.microsoft.com/library/windows/apps/dn958172) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="6749c-159">When you change text in your edit control, for example, by pasting text into the control, you need to notify Windows by calling [**NotifyTextChanged**](https://msdn.microsoft.com/library/windows/apps/dn958172).</span></span>

<span data-ttu-id="6749c-160">Wenn der Textdienst den neuen Text erfordert, wird ein [**TextRequested**](https://msdn.microsoft.com/library/windows/apps/dn958175)-Ereignis ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="6749c-160">If the text service requires the new text, then a [**TextRequested**](https://msdn.microsoft.com/library/windows/apps/dn958175) event is raised.</span></span> <span data-ttu-id="6749c-161">Sie müssen den neuen Text in den **TextRequested**-Ereignishandler eingeben.</span><span class="sxs-lookup"><span data-stu-id="6749c-161">You must provide the new text in the **TextRequested** event handler.</span></span>

### <a name="accepting-text-updates"></a><span data-ttu-id="6749c-162">Akzeptieren von Textupdates</span><span class="sxs-lookup"><span data-stu-id="6749c-162">Accepting text updates</span></span>

<span data-ttu-id="6749c-163">Ihr Bearbeitungssteuerelement sollte in der Regel Textaktualisierungsanforderungen akzeptieren, da diese den Text darstellen, den der Benutzer eingeben möchte.</span><span class="sxs-lookup"><span data-stu-id="6749c-163">Your edit control should typically accept text update requests because they represent the text the user wants to enter.</span></span> <span data-ttu-id="6749c-164">Im [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176)-Ereignishandler werden die folgenden Aktionen vom Bearbeitungssteuerelement erwartet:</span><span class="sxs-lookup"><span data-stu-id="6749c-164">In the [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176) event handler, these actions are expected of your edit control:</span></span>

1.  <span data-ttu-id="6749c-165">Einfügen des Texts, der in [**CoreTextTextUpdatingEventArgs.Text**](https://msdn.microsoft.com/library/windows/apps/dn958236) an der Position angegeben wurde, die in [**CoreTextTextUpdatingEventArgs.Range**](https://msdn.microsoft.com/library/windows/apps/dn958234) angegeben wurde</span><span class="sxs-lookup"><span data-stu-id="6749c-165">Insert the text specified in [**CoreTextTextUpdatingEventArgs.Text**](https://msdn.microsoft.com/library/windows/apps/dn958236) in the position specified in [**CoreTextTextUpdatingEventArgs.Range**](https://msdn.microsoft.com/library/windows/apps/dn958234).</span></span>
2.  <span data-ttu-id="6749c-166">Platzieren der Auswahl an der in [**CoreTextTextUpdatingEventArgs.NewSelection**](https://msdn.microsoft.com/library/windows/apps/dn958233) angegebenen Position</span><span class="sxs-lookup"><span data-stu-id="6749c-166">Place selection at the position specified in [**CoreTextTextUpdatingEventArgs.NewSelection**](https://msdn.microsoft.com/library/windows/apps/dn958233).</span></span>
3.  <span data-ttu-id="6749c-167">Benachrichtigen des Systems, dass das Update erfolgreich war, indem [**CoreTextTextUpdatingEventArgs.Result**](https://msdn.microsoft.com/library/windows/apps/dn958235) auf [**CoreTextTextUpdatingResult.Succeeded**](https://msdn.microsoft.com/library/windows/apps/dn958237) festgelegt wird</span><span class="sxs-lookup"><span data-stu-id="6749c-167">Notify the system that the update succeeded by setting [**CoreTextTextUpdatingEventArgs.Result**](https://msdn.microsoft.com/library/windows/apps/dn958235) to [**CoreTextTextUpdatingResult.Succeeded**](https://msdn.microsoft.com/library/windows/apps/dn958237).</span></span>

<span data-ttu-id="6749c-168">Dies ist beispielsweise der Zustand eines Bearbeitungssteuerelements, bevor der Benutzer „d“ eingibt.</span><span class="sxs-lookup"><span data-stu-id="6749c-168">For example, this is the state of an edit control before the user types "d".</span></span> <span data-ttu-id="6749c-169">Die Einfügemarke befindet sich bei \[10, 10\].</span><span class="sxs-lookup"><span data-stu-id="6749c-169">The insertion point is at \[10, 10\].</span></span>

![<span data-ttu-id="6749c-170">Beispieldiagramm für einen Textstream](images/coretext/stream-3.png) Wenn der Benutzer „d“ eingibt, wird ein [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176)-Ereignis mit den folgenden [**CoreTextTextUpdatingEventArgs**](https://msdn.microsoft.com/library/windows/apps/dn958229)-Daten ausgelöst:</span><span class="sxs-lookup"><span data-stu-id="6749c-170">example text stream diagram](images/coretext/stream-3.png) When the user types "d", a [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176) event is raised with the following [**CoreTextTextUpdatingEventArgs**](https://msdn.microsoft.com/library/windows/apps/dn958229) data:</span></span>

-   <span data-ttu-id="6749c-171">[**Range**](https://msdn.microsoft.com/library/windows/apps/dn958234) = \[10, 10\]</span><span class="sxs-lookup"><span data-stu-id="6749c-171">[**Range**](https://msdn.microsoft.com/library/windows/apps/dn958234) = \[10, 10\]</span></span>
-   <span data-ttu-id="6749c-172">[**Text**](https://msdn.microsoft.com/library/windows/apps/dn958236) = "d"</span><span class="sxs-lookup"><span data-stu-id="6749c-172">[**Text**](https://msdn.microsoft.com/library/windows/apps/dn958236) = "d"</span></span>
-   <span data-ttu-id="6749c-173">[**NewSelection**](https://msdn.microsoft.com/library/windows/apps/dn958233) = \[11, 11\]</span><span class="sxs-lookup"><span data-stu-id="6749c-173">[**NewSelection**](https://msdn.microsoft.com/library/windows/apps/dn958233) = \[11, 11\]</span></span>

<span data-ttu-id="6749c-174">Wenden Sie in Ihrem Bearbeitungssteuerelement die angegebenen Änderungen an, und legen Sie [**Result**](https://msdn.microsoft.com/library/windows/apps/dn958235) auf **Succeeded** fest.</span><span class="sxs-lookup"><span data-stu-id="6749c-174">In your edit control, apply the specified changes and set [**Result**](https://msdn.microsoft.com/library/windows/apps/dn958235) to **Succeeded**.</span></span> <span data-ttu-id="6749c-175">Hier sehen Sie den Zustand des Steuerelements, nachdem die Änderungen angewendet wurden.</span><span class="sxs-lookup"><span data-stu-id="6749c-175">Here's the state of the control after the changes are applied.</span></span>

![Beispieldiagramm für einen Textstream](images/coretext/stream-4.png)
### <a name="rejecting-text-updates"></a><span data-ttu-id="6749c-177">Ablehnen von Textupdates</span><span class="sxs-lookup"><span data-stu-id="6749c-177">Rejecting text updates</span></span>

<span data-ttu-id="6749c-178">Manchmal können Textaktualisierungen nicht angewendet werden, da sich der angeforderte Bereich in einem Bereich des Bearbeitungssteuerelements befindet, der nicht geändert werden darf.</span><span class="sxs-lookup"><span data-stu-id="6749c-178">Sometimes, you cannot apply text updates because the requested range is in an area of the edit control that should not be changed.</span></span> <span data-ttu-id="6749c-179">In diesem Fall sollten Sie keine Änderungen anwenden.</span><span class="sxs-lookup"><span data-stu-id="6749c-179">In this case, you should not apply any changes.</span></span> <span data-ttu-id="6749c-180">Benachrichtigen Sie stattdessen das System, dass die Aktualisierung fehlgeschlagen ist, indem Sie [**CoreTextTextUpdatingEventArgs.Result**](https://msdn.microsoft.com/library/windows/apps/dn958235) auf [**CoreTextTextUpdatingResult.Failed**](https://msdn.microsoft.com/library/windows/apps/dn958237) festlegen.</span><span class="sxs-lookup"><span data-stu-id="6749c-180">Instead, notify the system that the update failed by setting [**CoreTextTextUpdatingEventArgs.Result**](https://msdn.microsoft.com/library/windows/apps/dn958235) to [**CoreTextTextUpdatingResult.Failed**](https://msdn.microsoft.com/library/windows/apps/dn958237).</span></span>

<span data-ttu-id="6749c-181">Angenommen, Sie haben ein Bearbeitungssteuerelement, das nur eine E-Mail-Adresse akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="6749c-181">For example, consider an edit control that accepts only an e-mail address.</span></span> <span data-ttu-id="6749c-182">Leerzeichen sollten zurückgewiesen werden, da E-Mail-Adressen keine Leerzeichen enthalten dürfen. Wenn daher [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176)-Ereignisse für die Leertaste ausgelöst werden, können Sie [**Result**](https://msdn.microsoft.com/library/windows/apps/dn958235) im Bearbeitungssteuerelement einfach auf **Failed** festlegen.</span><span class="sxs-lookup"><span data-stu-id="6749c-182">Spaces should be rejected because e-mail addresses cannot contain spaces, so when [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176) events are raised for the space key, you should simply set [**Result**](https://msdn.microsoft.com/library/windows/apps/dn958235) to **Failed** in your edit control.</span></span>

### <a name="notifying-text-changes"></a><span data-ttu-id="6749c-183">Benachrichtigen über Textänderungen</span><span class="sxs-lookup"><span data-stu-id="6749c-183">Notifying text changes</span></span>

<span data-ttu-id="6749c-184">Manchmal nimmt das Bearbeitungssteuerelement Änderungen am Text vor, wenn beispielsweise Text eingefügt oder automatische korrigiert wird.</span><span class="sxs-lookup"><span data-stu-id="6749c-184">Sometimes, your edit control makes changes to text such as when text is pasted or auto-corrected.</span></span> <span data-ttu-id="6749c-185">In diesen Fällen müssen Sie die Textdienste über diese Änderungen benachrichtigen, indem Sie die [**NotifyTextChanged**](https://msdn.microsoft.com/library/windows/apps/dn958172)-Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="6749c-185">In these cases, you must notify the text services of these changes by calling the [**NotifyTextChanged**](https://msdn.microsoft.com/library/windows/apps/dn958172) method.</span></span>

<span data-ttu-id="6749c-186">Dies ist beispielsweise der Zustand eines Bearbeitungssteuerelements, bevor der Benutzer „World“ einfügt.</span><span class="sxs-lookup"><span data-stu-id="6749c-186">For example, this is the state of an edit control before the user pastes "World".</span></span> <span data-ttu-id="6749c-187">Die Einfügemarke befindet sich bei \[6, 6\].</span><span class="sxs-lookup"><span data-stu-id="6749c-187">The insertion point is at \[6, 6\].</span></span>

![<span data-ttu-id="6749c-188">Beispieldiagramm für einen Textstream](images/coretext/stream-5.png) Der Benutzer führt die Einfügeaktion durch, und das Bearbeitungssteuerelement endet mit dem folgenden Text:</span><span class="sxs-lookup"><span data-stu-id="6749c-188">example text stream diagram](images/coretext/stream-5.png) The user performs the paste action and the edit control ends up with the following text:</span></span>

![<span data-ttu-id="6749c-189">Beispieldiagramm für einen Textstream](images/coretext/stream-4.png) In diesem Fall sollten Sie [**NotifyTextChanged**](https://msdn.microsoft.com/library/windows/apps/dn958172) mit diesen Argumenten aufrufen:</span><span class="sxs-lookup"><span data-stu-id="6749c-189">example text stream diagram](images/coretext/stream-4.png) When this happens, you should call [**NotifyTextChanged**](https://msdn.microsoft.com/library/windows/apps/dn958172) with these arguments:</span></span>

-   <span data-ttu-id="6749c-190">*modifiedRange* = \[6, 6\]</span><span class="sxs-lookup"><span data-stu-id="6749c-190">*modifiedRange* = \[6, 6\]</span></span>
-   <span data-ttu-id="6749c-191">*newLength* = 5</span><span class="sxs-lookup"><span data-stu-id="6749c-191">*newLength* = 5</span></span>
-   <span data-ttu-id="6749c-192">*newSelection* = \[11, 11\]</span><span class="sxs-lookup"><span data-stu-id="6749c-192">*newSelection* = \[11, 11\]</span></span>

<span data-ttu-id="6749c-193">Es folgt mindestens ein [**TextRequested**](https://msdn.microsoft.com/library/windows/apps/dn958175)-Ereignis, das Sie zum Aktualisieren des Texts behandeln, mit dem die Textdienste arbeiten.</span><span class="sxs-lookup"><span data-stu-id="6749c-193">One or more [**TextRequested**](https://msdn.microsoft.com/library/windows/apps/dn958175) events will follow, which you handle to update the text that the text services are working with.</span></span>

### <a name="overriding-text-updates"></a><span data-ttu-id="6749c-194">Überschreiben von Textaktualisierungen</span><span class="sxs-lookup"><span data-stu-id="6749c-194">Overriding text updates</span></span>

<span data-ttu-id="6749c-195">Vielleicht möchten Sie in Ihrem Bearbeitungssteuerelement eine Textaktualisierung überschreiben, um AutoKorrektur-Funktionen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="6749c-195">In your edit control, you might want to override a text update to provide auto-correction features.</span></span>

<span data-ttu-id="6749c-196">Angenommen, Sie haben ein Bearbeitungssteuerelement, das eine Korrekturfunktion bereitstellt, das kontrahierte Schreibweisen formalisiert.</span><span class="sxs-lookup"><span data-stu-id="6749c-196">For example, consider an edit control that provides a correction feature that formalizes contractions.</span></span> <span data-ttu-id="6749c-197">Dies ist der Zustand des Bearbeitungssteuerelements, bevor der Benutzer die Leertaste drückt, um die Korrektur auszulösen.</span><span class="sxs-lookup"><span data-stu-id="6749c-197">This is the state of the edit control before the user types the space key to trigger the correction.</span></span> <span data-ttu-id="6749c-198">Die Einfügemarke befindet sich bei \[3, 3\].</span><span class="sxs-lookup"><span data-stu-id="6749c-198">The insertion point is at \[3, 3\].</span></span>

![<span data-ttu-id="6749c-199">Beispieldiagramm für einen Textstream](images/coretext/stream-6.png) Der Benutzer drückt die Leertaste, und ein entsprechendes [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176)-Ereignis wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="6749c-199">example text stream diagram](images/coretext/stream-6.png) The user presses the space key and a corresponding [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176) event is raised.</span></span> <span data-ttu-id="6749c-200">Das Bearbeitungssteuerelement akzeptiert die Textaktualisierung.</span><span class="sxs-lookup"><span data-stu-id="6749c-200">The edit control accepts the text update.</span></span> <span data-ttu-id="6749c-201">Dies ist der Zustand des Bearbeitungssteuerelements für einen kurzen Moment, bevor die Korrektur abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="6749c-201">This is the state of the edit control for a brief moment before the correction is completed.</span></span> <span data-ttu-id="6749c-202">Die Einfügemarke befindet sich bei \[4, 4\].</span><span class="sxs-lookup"><span data-stu-id="6749c-202">The insertion point is at \[4, 4\].</span></span>

![<span data-ttu-id="6749c-203">Beispieldiagramm für einen Textstream](images/coretext/stream-7.png) Außerhalb des [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176)-Ereignishandlers nimmt das Bearbeitungssteuerelement die folgende Korrektur vor.</span><span class="sxs-lookup"><span data-stu-id="6749c-203">example text stream diagram](images/coretext/stream-7.png) Outside of the [**TextUpdating**](https://msdn.microsoft.com/library/windows/apps/dn958176) event handler, the edit control makes the following correction.</span></span> <span data-ttu-id="6749c-204">Dies ist der Zustand des Bearbeitungssteuerelements nach Abschluss der Korrektur.</span><span class="sxs-lookup"><span data-stu-id="6749c-204">This is the state of the edit control after the correction is complete.</span></span> <span data-ttu-id="6749c-205">Die Einfügemarke befindet sich bei \[5, 5\].</span><span class="sxs-lookup"><span data-stu-id="6749c-205">The insertion point is at \[5, 5\].</span></span>

![<span data-ttu-id="6749c-206">Beispieldiagramm für einen Textstream](images/coretext/stream-8.png) In diesem Fall sollten Sie [**NotifyTextChanged**](https://msdn.microsoft.com/library/windows/apps/dn958172) mit diesen Argumenten aufrufen:</span><span class="sxs-lookup"><span data-stu-id="6749c-206">example text stream diagram](images/coretext/stream-8.png) When this happens, you should call [**NotifyTextChanged**](https://msdn.microsoft.com/library/windows/apps/dn958172) with these arguments:</span></span>

-   <span data-ttu-id="6749c-207">*modifiedRange* = \[1, 2\]</span><span class="sxs-lookup"><span data-stu-id="6749c-207">*modifiedRange* = \[1, 2\]</span></span>
-   <span data-ttu-id="6749c-208">*newLength* = 2</span><span class="sxs-lookup"><span data-stu-id="6749c-208">*newLength* = 2</span></span>
-   <span data-ttu-id="6749c-209">*newSelection* = \[5, 5\]</span><span class="sxs-lookup"><span data-stu-id="6749c-209">*newSelection* = \[5, 5\]</span></span>

<span data-ttu-id="6749c-210">Es folgt mindestens ein [**TextRequested**](https://msdn.microsoft.com/library/windows/apps/dn958175)-Ereignis, das Sie zum Aktualisieren des Texts behandeln, mit dem die Textdienste arbeiten.</span><span class="sxs-lookup"><span data-stu-id="6749c-210">One or more [**TextRequested**](https://msdn.microsoft.com/library/windows/apps/dn958175) events will follow, which you handle to update the text that the text services are working with.</span></span>

### <a name="providing-requested-text"></a><span data-ttu-id="6749c-211">Bereitstellen von angefordertem Text</span><span class="sxs-lookup"><span data-stu-id="6749c-211">Providing requested text</span></span>

<span data-ttu-id="6749c-212">Es ist wichtig, dass Textdienste über den richtigen Text verfügen, damit Funktionen wie AutoKorrektur oder Vorhersage bereitgestellt werden können, insbesondere bei Text, der im Bearbeitungssteuerelement bereits durch Laden eines Dokuments vorhanden war, oder bei Text, der vom Bearbeitungssteuerelement eingefügt wird, wie in den vorherigen Abschnitten erläutert.</span><span class="sxs-lookup"><span data-stu-id="6749c-212">It's important for text services to have the correct text to provide features like auto-correction or prediction, especially for text that already existed in the edit control, from loading a document, for example, or text that is inserted by the edit control as explained in previous sections.</span></span> <span data-ttu-id="6749c-213">Wenn ein [**TextRequested**](https://msdn.microsoft.com/library/windows/apps/dn958175)-Ereignis ausgelöst wird, müssen Sie daher stets den Text bereitstellen, der sich zurzeit im Bearbeitungssteuerelement für den angegebenen Bereich befindet.</span><span class="sxs-lookup"><span data-stu-id="6749c-213">Therefore, whenever a [**TextRequested**](https://msdn.microsoft.com/library/windows/apps/dn958175) event is raised, you must provide the text currently in your edit control for the specified range.</span></span>

<span data-ttu-id="6749c-214">Gelegentlich gibt [**Range**](https://msdn.microsoft.com/library/windows/apps/dn958227) in [**CoreTextTextRequest**](https://msdn.microsoft.com/library/windows/apps/dn958221) einen Bereich an, den das Bearbeitungssteuerelement nicht in der Form aufnehmen kann, in der dieser vorliegt.</span><span class="sxs-lookup"><span data-stu-id="6749c-214">There will be times the [**Range**](https://msdn.microsoft.com/library/windows/apps/dn958227) in [**CoreTextTextRequest**](https://msdn.microsoft.com/library/windows/apps/dn958221) specifies a range that your edit control cannot accommodate as-is.</span></span> <span data-ttu-id="6749c-215">Beispielsweise ist **Range** zum Zeitpunkt des [**TextRequested**](https://msdn.microsoft.com/library/windows/apps/dn958175)-Ereignisses größer als das Bearbeitungssteuerelement, oder das Ende von **Range** liegt außerhalb des zulässigen Bereichs.</span><span class="sxs-lookup"><span data-stu-id="6749c-215">For example, the **Range** is larger than the size of the edit control at the time of the [**TextRequested**](https://msdn.microsoft.com/library/windows/apps/dn958175) event, or the end of the **Range** is out of bounds.</span></span> <span data-ttu-id="6749c-216">In diesen Fällen sollten Sie zu einem Bereich zurückkehren, der sinnvoll ist. In der Regel ist dies eine Untergruppe des angeforderten Bereichs.</span><span class="sxs-lookup"><span data-stu-id="6749c-216">In these cases, you should return whatever range makes sense, which is typically a subset of the requested range.</span></span>

## <a name="related-articles"></a><span data-ttu-id="6749c-217">Verwandte Artikel</span><span class="sxs-lookup"><span data-stu-id="6749c-217">Related articles</span></span>

**<span data-ttu-id="6749c-218">Beispiele</span><span class="sxs-lookup"><span data-stu-id="6749c-218">Samples</span></span>**
* <span data-ttu-id="6749c-219">[Beispiel für ein benutzerdefiniertes Bearbeitungssteuerelement](https://go.microsoft.com/fwlink/?linkid=831024) 
 **Archivbeispiele**</span><span class="sxs-lookup"><span data-stu-id="6749c-219">[Custom Edit Control sample](https://go.microsoft.com/fwlink/?linkid=831024) 
**Archive samples**</span></span>
* [<span data-ttu-id="6749c-220">Beispiel für die XAML-Textbearbeitung</span><span class="sxs-lookup"><span data-stu-id="6749c-220">XAML text editing sample</span></span>](http://go.microsoft.com/fwlink/p/?LinkID=251417)


