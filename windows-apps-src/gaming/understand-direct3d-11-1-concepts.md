---
author: mtoepke
title: Wichtige Änderungen beim Wechsel von Direct3D9 zu Direct3D11
description: In diesem Thema werden allgemeine Unterschiede zwischen DirectX9 und DirectX11 erläutert.
ms.assetid: 35a9e388-b25e-2aac-0534-577b15dae364
ms.author: mtoepke
ms.date: 02/08/2017
ms.topic: article
keywords: Windows10, UWP, Spiele, Directx, direct3d 9, 11, direct3d, Änderungen
ms.localizationpriority: medium
ms.openlocfilehash: 969d8f2620adbc289c1f4c89242e0282901357c2
ms.sourcegitcommit: 70ab58b88d248de2332096b20dbd6a4643d137a4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/01/2018
ms.locfileid: "5947891"
---
# <a name="important-changes-from-direct3d-9-to-direct3d-11"></a><span data-ttu-id="a3472-104">Wichtige Änderungen beim Wechsel von Direct3D 9 zu Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="a3472-104">Important changes from Direct3D 9 to Direct3D 11</span></span>



**<span data-ttu-id="a3472-105">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="a3472-105">Summary</span></span>**

-   [<span data-ttu-id="a3472-106">Planen der DirectX-Portierung</span><span class="sxs-lookup"><span data-stu-id="a3472-106">Plan your DirectX port</span></span>](plan-your-directx-port.md)
-   <span data-ttu-id="a3472-107">Wichtige Änderungen beim Wechsel von Direct3D9 zu Direct3D11</span><span class="sxs-lookup"><span data-stu-id="a3472-107">Important changes from Direct3D 9 to Direct3D 11</span></span>
-   [<span data-ttu-id="a3472-108">Featurezuordnung</span><span class="sxs-lookup"><span data-stu-id="a3472-108">Feature mapping</span></span>](feature-mapping.md)


<span data-ttu-id="a3472-109">In diesem Thema werden allgemeine Unterschiede zwischen DirectX9 und DirectX11 erläutert.</span><span class="sxs-lookup"><span data-stu-id="a3472-109">This topic explains the high-level differences between DirectX 9 and DirectX 11.</span></span>

<span data-ttu-id="a3472-110">Bei Direct3D11 handelt es sich im Wesentlichen um die gleiche Art von API wie bei Direct3D9: eine virtualisierte Low-Level-Schnittstelle für Grafikhardware.</span><span class="sxs-lookup"><span data-stu-id="a3472-110">Direct3D 11 is fundamentally the same type of API as Direct3D 9 - a low-level, virtualized interface into graphics hardware.</span></span> <span data-ttu-id="a3472-111">Sie können damit für viele unterschiedliche Hardwareimplementierungen weiterhin Vorgänge zum Zeichnen von Grafiken durchführen.</span><span class="sxs-lookup"><span data-stu-id="a3472-111">It still allows you to perform graphics drawing operations on a variety of hardware implementations.</span></span> <span data-ttu-id="a3472-112">Das Layout der Grafik-API hat sich seit Direct3D9 geändert. Das Konzept des Gerätekontexts wurde erweitert, und es wurde eine API speziell für die Grafikinfrastruktur hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="a3472-112">The layout of the graphics API has changed since Direct3D 9; the concept of a device context has been expanded, and an API has been added specifically for graphics infrastructure.</span></span> <span data-ttu-id="a3472-113">Für auf dem Direct3D-Gerät gespeicherte Ressourcen ist ein neuer Mechanismus für Datenpolymorphie (die so genannte Ressourcenansicht) verfügbar.</span><span class="sxs-lookup"><span data-stu-id="a3472-113">Resources stored on the Direct3D device have a novel mechanism for data polymorphism called a resource view.</span></span>

## <a name="core-api-functions"></a><span data-ttu-id="a3472-114">Wichtige API-Funktionen</span><span class="sxs-lookup"><span data-stu-id="a3472-114">Core API functions</span></span>


<span data-ttu-id="a3472-115">In Direct3D9 mussten Sie eine Schnittstelle für die Direct3D-API erstellen, um sie verwenden zu können.</span><span class="sxs-lookup"><span data-stu-id="a3472-115">In Direct3D 9 you had to create an interface to the Direct3D API before you could start using it.</span></span> <span data-ttu-id="a3472-116">In Direct3D11-Spielen für die universelle Windows-Plattform (UWP) rufen Sie die statische Funktion [**D3D11CreateDevice**](https://msdn.microsoft.com/library/windows/desktop/ff476082) auf, um das Gerät und den Gerätekontext zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a3472-116">In your Direct3D 11 Universal Windows Platform (UWP) game, you call a static function called [**D3D11CreateDevice**](https://msdn.microsoft.com/library/windows/desktop/ff476082) to create the device and the device context.</span></span>

## <a name="devices-and-device-context"></a><span data-ttu-id="a3472-117">Geräte und Gerätekontext</span><span class="sxs-lookup"><span data-stu-id="a3472-117">Devices and device context</span></span>


<span data-ttu-id="a3472-118">Ein Direct3D11-Gerät stellt einen virtualisierten Grafikadapter dar.</span><span class="sxs-lookup"><span data-stu-id="a3472-118">A Direct3D 11 device represents a virtualized graphics adapter.</span></span> <span data-ttu-id="a3472-119">Dieser wird zum Erstellen von Ressourcen im Videospeicher verwendet, z.B. zum Hochladen von Texturen in die GPU, Erstellen von Ansichten für Texturressourcen und Swapchains und Erstellen von Textursamplern.</span><span class="sxs-lookup"><span data-stu-id="a3472-119">It's used to create resources in video memory, for example: uploading textures to the GPU, creating views on texture resources and swap chains, and creating texture samplers.</span></span> <span data-ttu-id="a3472-120">Eine vollständige Liste der Verwendungsmöglichkeiten für eine Direct3D11-Geräteschnittstelle finden Sie unter [**ID3D11Device**](https://msdn.microsoft.com/library/windows/desktop/ff476379) und [**ID3D11Device1**](https://msdn.microsoft.com/library/windows/desktop/hh404575).</span><span class="sxs-lookup"><span data-stu-id="a3472-120">For a complete list of what a Direct3D 11 device interface is used for see [**ID3D11Device**](https://msdn.microsoft.com/library/windows/desktop/ff476379) and [**ID3D11Device1**](https://msdn.microsoft.com/library/windows/desktop/hh404575).</span></span>

<span data-ttu-id="a3472-121">Ein Direct3D11-</span><span class="sxs-lookup"><span data-stu-id="a3472-121">A Direct3D 11.</span></span> <span data-ttu-id="a3472-122">Gerätekontext wird verwendet, um den Pipelinestatus festzulegen und Renderbefehle zu erzeugen.</span><span class="sxs-lookup"><span data-stu-id="a3472-122">device context is used to set pipeline state and generate rendering commands.</span></span> <span data-ttu-id="a3472-123">Von einer Direct3D11-Renderkette wird beispielsweise ein Gerätekontext verwendet, um die Renderkette einzurichten und die Szene zu zeichnen (siehe unten).</span><span class="sxs-lookup"><span data-stu-id="a3472-123">For example, a Direct3D 11 rendering chain uses a device context to set up the rendering chain and draw the scene (see below).</span></span> <span data-ttu-id="a3472-124">Über den Gerätekontext wird auf den Videospeicher zugegriffen (Map), der von den Ressourcen des Direct3D-Geräts verwendet wird. Außerdem werden damit Unterressourcendaten aktualisiert, z.B. Konstantenpufferdaten.</span><span class="sxs-lookup"><span data-stu-id="a3472-124">The device context is used to access (map) video memory used by Direct3D device resources; it's also used to update subresource data, for example constant buffer data.</span></span> <span data-ttu-id="a3472-125">Eine vollständige Liste der Verwendungsmöglichkeiten für einen Direct3D11-Gerätekontext finden Sie unter [**ID3D11DeviceContext**](https://msdn.microsoft.com/library/windows/desktop/ff476385) und [**ID3D11DeviceContext1**](https://msdn.microsoft.com/library/windows/desktop/hh404598).</span><span class="sxs-lookup"><span data-stu-id="a3472-125">For a complete list of what a Direct3D 11 device context is used for see [**ID3D11DeviceContext**](https://msdn.microsoft.com/library/windows/desktop/ff476385) and [**ID3D11DeviceContext1**](https://msdn.microsoft.com/library/windows/desktop/hh404598).</span></span> <span data-ttu-id="a3472-126">Beachten Sie, dass für die meisten Beispiele ein unmittelbarer Kontext für das direkte Rendern auf dem Gerät genutzt wird. Von Direct3D11 werden jedoch auch zurückgestellte Gerätekontexte unterstützt, die hauptsächlich für das Multithreading eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="a3472-126">Note that most of our samples use an immediate context to render directly to the device, but Direct3D 11 also supports deferred device contexts, which are primarily used for multithreading.</span></span>

<span data-ttu-id="a3472-127">In Direct3D11 werden das Handle für das Gerät und das Handle für den Gerätekontext jeweils per Aufruf von [**D3D11CreateDevice**](https://msdn.microsoft.com/library/windows/desktop/ff476082) abgerufen.</span><span class="sxs-lookup"><span data-stu-id="a3472-127">In Direct3D 11, the device handle and device context handle are both obtained by calling [**D3D11CreateDevice**](https://msdn.microsoft.com/library/windows/desktop/ff476082).</span></span> <span data-ttu-id="a3472-128">Mit dieser Methode fordern Sie auch einen bestimmten Satz von Hardwarefeatures an und rufen Informationen zu Direct3D-Featureebenen ab, die vom Grafikadapter unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="a3472-128">This method is also where you request a specific set of hardware features and retrieve information on Direct3D feature levels supported by the graphics adapter.</span></span> <span data-ttu-id="a3472-129">Weitere Informationen zu Geräten, Gerätekontexten und Threadaspekten finden Sie unter [Einführung in ein Gerät in Direct3D11](https://msdn.microsoft.com/library/windows/desktop/ff476880).</span><span class="sxs-lookup"><span data-stu-id="a3472-129">See [Introduction to a Device in Direct3D 11](https://msdn.microsoft.com/library/windows/desktop/ff476880) for more info on devices, device contexts, and threading considerations.</span></span>

## <a name="device-infrastructure-frame-buffers-and-render-target-views"></a><span data-ttu-id="a3472-130">Geräteinfrastruktur, Framepuffer und Renderzielansichten</span><span class="sxs-lookup"><span data-stu-id="a3472-130">Device infrastructure, frame buffers, and render target views</span></span>


<span data-ttu-id="a3472-131">In Direct3D11 werden der Geräteadapter und die Hardwarekonfiguration mithilfe der DirectXGraphicsInfrastructure-API (DXGI) unter Verwendung der COM-Schnittstellen [**IDXGIAdapter**](https://msdn.microsoft.com/library/windows/desktop/bb174523) und [**IDXGIDevice1**](https://msdn.microsoft.com/library/windows/desktop/hh404543) festgelegt.</span><span class="sxs-lookup"><span data-stu-id="a3472-131">In Direct3D 11, the device adapter and hardware configuration are set with the DirectX Graphics Infrastructure (DXGI) API using the [**IDXGIAdapter**](https://msdn.microsoft.com/library/windows/desktop/bb174523) and [**IDXGIDevice1**](https://msdn.microsoft.com/library/windows/desktop/hh404543) COM interfaces.</span></span> <span data-ttu-id="a3472-132">Puffer und andere Fensterressourcen (sichtbar oder außerhalb des Bildschirms) werden unter Verwendung spezieller DXGI-Schnittstellen erstellt und konfiguriert. Von der Implementierung des [**IDXGIFactory2**](https://msdn.microsoft.com/library/windows/desktop/hh404556)-Factorymusters werden DXGI-Ressourcen (etwa der Framepuffer) abgerufen.</span><span class="sxs-lookup"><span data-stu-id="a3472-132">Buffers and other window resources (visible or offscreen) are created and configured by specific DXGI interfaces; the [**IDXGIFactory2**](https://msdn.microsoft.com/library/windows/desktop/hh404556) factory pattern implementation acquires DXGI resources such as the frame buffer.</span></span> <span data-ttu-id="a3472-133">Da DXGI für die Swapchain zuständig ist, wird eine DXGI-Schnittstelle zum Darstellen von Frames auf dem Bildschirm verwendet. Weitere Informationen finden Sie unter [**IDXGISwapChain1**](https://msdn.microsoft.com/library/windows/desktop/hh404631).</span><span class="sxs-lookup"><span data-stu-id="a3472-133">Since DXGI owns the swap chain, a DXGI interface is used to present frames to the screen - see [**IDXGISwapChain1**](https://msdn.microsoft.com/library/windows/desktop/hh404631).</span></span>

<span data-ttu-id="a3472-134">Verwenden Sie [**IDXGIFactory2**](https://msdn.microsoft.com/library/windows/desktop/hh404556) zum Erstellen einer mit Ihrem Spiel kompatiblen Swapchain.</span><span class="sxs-lookup"><span data-stu-id="a3472-134">Use [**IDXGIFactory2**](https://msdn.microsoft.com/library/windows/desktop/hh404556) to create a swap chain compatible with your game.</span></span> <span data-ttu-id="a3472-135">Sie müssen eine Swapchain für ein CoreWindow-Objekt oder für die Komposition (XAML-Interoperabilität) erstellen, anstatt eine Swapchain für ein HWND-Element.</span><span class="sxs-lookup"><span data-stu-id="a3472-135">You need to create a swap chain for a core window, or for composition (XAML interop), instead of creating a swap chain for an HWND.</span></span>

## <a name="device-resources-and-resource-views"></a><span data-ttu-id="a3472-136">Geräteressourcen und Ressourcenansichten</span><span class="sxs-lookup"><span data-stu-id="a3472-136">Device resources and resource views</span></span>


<span data-ttu-id="a3472-137">Von Direct3D11 wird eine zusätzliche Ebene der Polymorphie auf Videospeicherressourcen unterstützt, die als Ansichten bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="a3472-137">Direct3D 11 supports an additional level of polymorphism on video memory resources known as views.</span></span> <span data-ttu-id="a3472-138">Wo vorher ein einzelnes Direct3D9-Objekt für eine Textur vorhanden war, werden nun zwei Objekte genutzt: die Texturressource, in der die Daten enthalten sind, und die Ressourcenansicht, mit der angegeben wird, wie die Ansicht zum Rendern verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a3472-138">Essentially, where you had a single Direct3D 9 object for a texture, you now have two objects: the texture resource, which holds the data, and the resource view, which indicates how the view is used for rendering.</span></span> <span data-ttu-id="a3472-139">Mithilfe einer auf einer Ressource basierenden Ansicht kann diese Ressource für einen bestimmten Zweck verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="a3472-139">A view based on a resource enables that resource to be used for a specific purpose.</span></span> <span data-ttu-id="a3472-140">Eine 2D-Texturressource wird als [**ID3D11Texture2D**](https://msdn.microsoft.com/library/windows/desktop/ff476635)-Element erstellt. Anschließend wird dafür eine Shaderressourcenansicht ([**ID3D11ShaderResourceView**](https://msdn.microsoft.com/library/windows/desktop/ff476628)) erstellt, sodass die Verwendung als Textur in einem Shader möglich ist.</span><span class="sxs-lookup"><span data-stu-id="a3472-140">For example, a 2D texture resource is created as an [**ID3D11Texture2D**](https://msdn.microsoft.com/library/windows/desktop/ff476635), then a shader resource view ([**ID3D11ShaderResourceView**](https://msdn.microsoft.com/library/windows/desktop/ff476628)) is created on it so it can be used as a texture in a shader.</span></span> <span data-ttu-id="a3472-141">Außerdem kann eine Renderzielansicht ([**ID3D11RenderTargetView**](https://msdn.microsoft.com/library/windows/desktop/ff476582)) für die gleiche 2D-Texturressource erstellt werden, sodass diese als Zeichenoberfläche verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="a3472-141">A render target view ([**ID3D11RenderTargetView**](https://msdn.microsoft.com/library/windows/desktop/ff476582)) can also be created on the same 2D texture resource so that it can be used as a drawing surface.</span></span> <span data-ttu-id="a3472-142">In einem anderen Beispiel werden dieselben Pixeldaten in zwei unterschiedlichen Pixelformaten dargestellt, indem zwei separate Ansichten für eine Texturressource genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="a3472-142">In another example, the same pixel data is represented in 2 different pixel formats by using 2 separate views on a single texture resource.</span></span>

<span data-ttu-id="a3472-143">Die zugrunde liegende Ressource muss mit Eigenschaften erstellt werden, die mit dem Typ der Ansichten kompatibel ist, die auf deren Grundlage erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="a3472-143">The underlying resource must be created with properties that are compatible with the type of views that will be created from it.</span></span> <span data-ttu-id="a3472-144">Wenn beispielsweise ein [**ID3D11RenderTargetView**](https://msdn.microsoft.com/library/windows/desktop/ff476582)-Element auf eine Oberfläche angewendet wird, wird diese Oberfläche mit dem Kennzeichen [**D3D11\_BIND\_RENDER\_TARGET**](https://msdn.microsoft.com/library/windows/desktop/ff476085) erstellt.</span><span class="sxs-lookup"><span data-stu-id="a3472-144">For example, if an [**ID3D11RenderTargetView**](https://msdn.microsoft.com/library/windows/desktop/ff476582) is applied to a surface, that surface is created with the [**D3D11\_BIND\_RENDER\_TARGET**](https://msdn.microsoft.com/library/windows/desktop/ff476085) flag.</span></span> <span data-ttu-id="a3472-145">Die Oberfläche muss auch über ein DXGI-Oberflächenformat verfügen, das mit dem Rendering kompatibel ist (siehe [**DXGI\_FORMAT**](https://msdn.microsoft.com/library/windows/desktop/bb173059)).</span><span class="sxs-lookup"><span data-stu-id="a3472-145">The surface also has to have a DXGI surface format compatible with rendering (see [**DXGI\_FORMAT**](https://msdn.microsoft.com/library/windows/desktop/bb173059)).</span></span>

<span data-ttu-id="a3472-146">Die meisten Ressourcen, die Sie zum Rendern verwenden, erben von der [**ID3D11Resource**](https://msdn.microsoft.com/library/windows/desktop/ff476584)-Schnittstelle, die wiederum von [**ID3D11DeviceChild**](https://msdn.microsoft.com/library/windows/desktop/ff476380) erbt.</span><span class="sxs-lookup"><span data-stu-id="a3472-146">Most of the resources you use for rendering inherit from the [**ID3D11Resource**](https://msdn.microsoft.com/library/windows/desktop/ff476584) interface, which inherits from [**ID3D11DeviceChild**](https://msdn.microsoft.com/library/windows/desktop/ff476380).</span></span> <span data-ttu-id="a3472-147">Vertexpuffer, Indexpuffer, Konstantenpuffer und Shader sind Direct3D11-Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="a3472-147">Vertex buffers, index buffers, constant buffers, and shaders are all Direct3D 11 resources.</span></span> <span data-ttu-id="a3472-148">Eingabelayouts und Samplerzustände erben direkt von [**ID3D11DeviceChild**](https://msdn.microsoft.com/library/windows/desktop/ff476380).</span><span class="sxs-lookup"><span data-stu-id="a3472-148">Input layouts and sampler states inherit directly from [**ID3D11DeviceChild**](https://msdn.microsoft.com/library/windows/desktop/ff476380).</span></span>

<span data-ttu-id="a3472-149">Von Ressourcenansichten wird ein DXGI\_FORMAT-Enumerationswert zum Angeben des Pixelformats verwendet.</span><span class="sxs-lookup"><span data-stu-id="a3472-149">Resources views use a DXGI\_FORMAT enum value to indicate the pixel format.</span></span> <span data-ttu-id="a3472-150">Nicht jedes D3DFMT-Element wird als DXGI\_FORMAT unterstützt.</span><span class="sxs-lookup"><span data-stu-id="a3472-150">Not every D3DFMT is supported as a DXGI\_FORMAT.</span></span> <span data-ttu-id="a3472-151">In DXGI ist beispielsweise kein 24bpp-RGB-Format vorhanden, das zu D3DFMT\_R8G8B8 äquivalent ist.</span><span class="sxs-lookup"><span data-stu-id="a3472-151">For example, there is no 24bpp RGB format in DXGI that is equivalent to D3DFMT\_R8G8B8.</span></span> <span data-ttu-id="a3472-152">Außerdem sind keine BGR-Äquivalente zu allen RGB-Formaten vorhanden (DXGI\_FORMAT\_R10G10B10A2\_UNORM ist zwar äquivalent zu D3DFMT\_A2B10G10R10, aber es ist kein direktes Äquivalent zu D3DFMT\_A2R10G10B10 vorhanden).</span><span class="sxs-lookup"><span data-stu-id="a3472-152">There are also not BGR equivalents to every RGB format (DXGI\_FORMAT\_R10G10B10A2\_UNORM is equivalent to D3DFMT\_A2B10G10R10, but there’s no direct equivalent to D3DFMT\_A2R10G10B10).</span></span> <span data-ttu-id="a3472-153">Planen Sie ein, alle Inhalte in diesen Legacyformaten zur Buildzeit in unterstützte Formate zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="a3472-153">You should plan to convert any content in these legacy formats to supported formats at build-time.</span></span> <span data-ttu-id="a3472-154">Eine vollständige Liste mit den DXGI-Formaten finden Sie in der [**DXGI\_FORMAT**](https://msdn.microsoft.com/library/windows/desktop/bb173059)-Enumeration.</span><span class="sxs-lookup"><span data-stu-id="a3472-154">For a complete list of DXGI formats see the [**DXGI\_FORMAT**](https://msdn.microsoft.com/library/windows/desktop/bb173059) enumeration.</span></span>

<span data-ttu-id="a3472-155">Direct3D-Geräteressourcen (und Ressourcenansichten) werden erstellt, bevor die Szene gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="a3472-155">Direct3D device resources (and resource views) are created before the scene is rendered.</span></span> <span data-ttu-id="a3472-156">Gerätekontexte werden, wie unten beschrieben, zum Einrichten der Renderkette verwendet.</span><span class="sxs-lookup"><span data-stu-id="a3472-156">Device contexts are used to set up the rendering chain, as explained below.</span></span>

## <a name="device-context-and-the-rendering-chain"></a><span data-ttu-id="a3472-157">Gerätekontext und die Renderkette</span><span class="sxs-lookup"><span data-stu-id="a3472-157">Device context and the rendering chain</span></span>


<span data-ttu-id="a3472-158">In Direct3D9 und Direct3D10.x war ein einzelnes Direct3D-Geräteobjekt vorhanden, mit dem die Erstellung, der Status und das Zeichnen verwaltet wurde.</span><span class="sxs-lookup"><span data-stu-id="a3472-158">In Direct3D 9 and Direct3D 10.x, there was a single Direct3D device object which managed resource creation, state, and drawing.</span></span> <span data-ttu-id="a3472-159">In Direct3D11 wird die Direct3D-Geräteschnittstelle weiterhin zum Verwalten der Ressourcenerstellung verwendet, aber alle Status- und Zeichenvorgänge werden über einen Direct3D-Gerätekontext abgewickelt.</span><span class="sxs-lookup"><span data-stu-id="a3472-159">In Direct3D 11, the Direct3D device interface still manages resource creation, but all state and drawing operations are handled by using a Direct3D device context.</span></span> <span data-ttu-id="a3472-160">Im Anschluss finden Sie ein Beispiel für die Verwendung des Gerätekontexts ([**ID3D11DeviceContext1**](https://msdn.microsoft.com/library/windows/desktop/hh404598)-Schnittstelle) zum Einrichten der Renderkette:</span><span class="sxs-lookup"><span data-stu-id="a3472-160">Here's an example of how the device context ([**ID3D11DeviceContext1**](https://msdn.microsoft.com/library/windows/desktop/hh404598) interface) is used to set up the rendering chain:</span></span>

-   <span data-ttu-id="a3472-161">Festlegen und Löschen von Renderzielansichten (und der Tiefenschablonen-Ansicht)</span><span class="sxs-lookup"><span data-stu-id="a3472-161">Set and clear render target views (and depth stencil view)</span></span>
-   <span data-ttu-id="a3472-162">Festlegen des Vertexpuffers, Indexpuffers und Eingabelayouts für die Eingabeassemblerphase (IA-Phase)</span><span class="sxs-lookup"><span data-stu-id="a3472-162">Set the vertex buffer, index buffer, and input layout for the input assembler stage (IA stage)</span></span>
-   <span data-ttu-id="a3472-163">Binden von Vertex- und Pixelshadern an die Pipeline</span><span class="sxs-lookup"><span data-stu-id="a3472-163">Bind vertex and pixel shaders to the pipeline</span></span>
-   <span data-ttu-id="a3472-164">Binden von Konstantenpuffern an Shader</span><span class="sxs-lookup"><span data-stu-id="a3472-164">Bind constant buffers to shaders</span></span>
-   <span data-ttu-id="a3472-165">Binden von Texturansichten und Samplern an den Pixelshader</span><span class="sxs-lookup"><span data-stu-id="a3472-165">Bind texture views and samplers to the pixel shader</span></span>
-   <span data-ttu-id="a3472-166">Zeichnen der Szene</span><span class="sxs-lookup"><span data-stu-id="a3472-166">Draw the scene</span></span>

<span data-ttu-id="a3472-167">Wenn eine der [**ID3D11DeviceContext::Draw**](https://msdn.microsoft.com/library/windows/desktop/ff476407)-Methoden aufgerufen wird, wird die Szene in der Renderzielansicht gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="a3472-167">When one of the [**ID3D11DeviceContext::Draw**](https://msdn.microsoft.com/library/windows/desktop/ff476407) methods is called, the scene is drawn on the render target view.</span></span> <span data-ttu-id="a3472-168">Nach Abschluss des Zeichenvorgangs wird der DXGI-Adapter zum Darstellen des abgeschlossenen Frames verwendet, indem [**IDXGISwapChain1::Present1**](https://msdn.microsoft.com/library/windows/desktop/hh446797) aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="a3472-168">When you're done will all your drawing the DXGI adapter is used to present the completed frame by calling [**IDXGISwapChain1::Present1**](https://msdn.microsoft.com/library/windows/desktop/hh446797).</span></span>

## <a name="state-management"></a><span data-ttu-id="a3472-169">Zustandsverwaltung</span><span class="sxs-lookup"><span data-stu-id="a3472-169">State management</span></span>


<span data-ttu-id="a3472-170">In Direct3D9 wurden Zustandseinstellungen mithilfe einer großen Gruppe individueller Umschaltfunktionen verwaltet, die über die Methoden „SetRenderState“, „SetSamplerState“ und „SetTextureStageState“ festgelegt wurden.</span><span class="sxs-lookup"><span data-stu-id="a3472-170">Direct3D 9 managed state settings with a large set of individual toggles set with the SetRenderState, SetSamplerState, and SetTextureStageState methods.</span></span> <span data-ttu-id="a3472-171">Da Direct3D11 nicht über Unterstützung für die ältere Pipeline mit festen Funktionen verfügt, wird SetTextureStageState durch das Schreiben von Pixelshadern (PS) ersetzt.</span><span class="sxs-lookup"><span data-stu-id="a3472-171">Since Direct3D 11 does not support the legacy fixed-function pipeline, the SetTextureStageState is replaced by writing pixel shaders (PS).</span></span> <span data-ttu-id="a3472-172">Es ist kein Äquivalent zu einem Direct3D9-Statusblock vorhanden.</span><span class="sxs-lookup"><span data-stu-id="a3472-172">There is no equivalent to a Direct3D 9 state block.</span></span> <span data-ttu-id="a3472-173">Bei Direct3D11 wird der Zustand stattdessen mit vier Arten von Zustandsobjekten verwaltet, die ein optimiertes Verfahren zum Gruppieren des Renderzustands ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="a3472-173">Direct3D 11 instead manages state through the use of 4 kinds of state objects which provide a more streamlined way to group the rendering state.</span></span>

<span data-ttu-id="a3472-174">Anstatt beispielsweise „SetRenderState“ mit D3DRS\_ZENABLE zu verwenden, erstellen Sie ein DepthStencilState-Objekt mit diesen und anderen dazugehörigen Zustandseinstellungen und verwenden es, um den Zustand beim Rendern zu ändern.</span><span class="sxs-lookup"><span data-stu-id="a3472-174">For example, instead of using SetRenderState with D3DRS\_ZENABLE, you create a DepthStencilState object with this and other related state settings and use it to change state while rendering.</span></span>

<span data-ttu-id="a3472-175">Beachten Sie beim Portieren von Direct3D9-Anwendungen zu Statusobjekten, dass die verschiedenen Statuskombinationen als Objekte mit unveränderlichem Status dargestellt werden.</span><span class="sxs-lookup"><span data-stu-id="a3472-175">When porting Direct3D 9 applications to state objects, be aware that your various state combinations are represented as immutable state objects.</span></span> <span data-ttu-id="a3472-176">Sie sollten einmal erstellt und dann so lange wiederverwendet werden, wie sie gültig sind.</span><span class="sxs-lookup"><span data-stu-id="a3472-176">They should be created once and re-used as long as they are valid.</span></span>

## <a name="direct3d-feature-levels"></a><span data-ttu-id="a3472-177">Direct3D-Featureebenen</span><span class="sxs-lookup"><span data-stu-id="a3472-177">Direct3D feature levels</span></span>


<span data-ttu-id="a3472-178">Direct3D verfügt über einen neuen Mechanismus zum Bestimmen der Hardwareunterstützung, der die Bezeichnung "Featureebenen" trägt.</span><span class="sxs-lookup"><span data-stu-id="a3472-178">Direct3D has a new mechanism for determining hardware support called feature levels.</span></span> <span data-ttu-id="a3472-179">Featureebenen erleichtern die Ermittlung der Funktionen des Grafikadapters, da Sie einen sorgfältig definierten Satz von GPU-Funktionen anfordern können.</span><span class="sxs-lookup"><span data-stu-id="a3472-179">Feature levels simplify the task of figuring out what the graphics adapter can do by allowing you to request a well-defined set of GPU functionality.</span></span> <span data-ttu-id="a3472-180">Von der Featureebene9\_1 werden beispielsweise die von den Direct3D9-Grafikadaptern bereitgestellten Funktionen (einschließlich Shadermodell2.x) implementiert.</span><span class="sxs-lookup"><span data-stu-id="a3472-180">For example, the 9\_1 feature level implements the functionality provided by Direct3D 9 graphics adapters, including shader model 2.x.</span></span> <span data-ttu-id="a3472-181">Da9\_1 die niedrigste Featureebene ist, können Sie davon ausgehen, dass alle Geräte einen Vertex-Shader und einen Pixelshader unterstützen. Dies sind die gleichen Phasen, die vom programmierbaren Shadermodell unter Direct3D9 unterstützt wurden.</span><span class="sxs-lookup"><span data-stu-id="a3472-181">Since 9\_1 is the lowest feature level, you can expect all devices to support a vertex shader and a pixel shader, which were the same stages supported by the Direct3D 9 programmable shader model.</span></span>

<span data-ttu-id="a3472-182">Im Spiel wird [**D3D11CreateDevice**](https://msdn.microsoft.com/library/windows/desktop/ff476082) zum Erstellen des Direct3D-Geräts und -Gerätekontexts verwendet.</span><span class="sxs-lookup"><span data-stu-id="a3472-182">Your game will use [**D3D11CreateDevice**](https://msdn.microsoft.com/library/windows/desktop/ff476082) to create the Direct3D device and device context.</span></span> <span data-ttu-id="a3472-183">Wenn Sie diese Funktion aufrufen, geben Sie eine Liste mit Featureebenen an, die vom Spiel unterstützt werden können.</span><span class="sxs-lookup"><span data-stu-id="a3472-183">When you call this function you provide a list of feature levels that your game can support.</span></span> <span data-ttu-id="a3472-184">Die höchste unterstützte Featureebene der Liste wird zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="a3472-184">It will return the highest supported feature level from that list.</span></span> <span data-ttu-id="a3472-185">Falls in Ihrem Spiel beispielsweise BC4/BC5-Texturen genutzt werden können (Feature von DirectX10-Hardware), müssten Sie mindestens9\_1 und10\_0 in die Liste der unterstützten Featureebenen aufnehmen.</span><span class="sxs-lookup"><span data-stu-id="a3472-185">For example if your game can use BC4/BC5 textures (a feature of DirectX 10 hardware), you would include at least 9\_1 and 10\_0 in the list of supported feature levels.</span></span> <span data-ttu-id="a3472-186">Wenn das Spiel auf DirectX9-Hardware ausgeführt wird und keine BC4/BC5-Texturen verwendet werden können, wird vom [**D3D11CreateDevice**](https://msdn.microsoft.com/library/windows/desktop/ff476082)-Element9\_1 zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="a3472-186">If the game is running on DirectX 9 hardware and BC4/BC5 textures can't be used, then [**D3D11CreateDevice**](https://msdn.microsoft.com/library/windows/desktop/ff476082) will return 9\_1.</span></span> <span data-ttu-id="a3472-187">Im Spiel kann dann auf ein anderes Texturformat (und kleinere Texturen) zurückgegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="a3472-187">Then your game can fall back to a different texture format (and smaller textures).</span></span>

<span data-ttu-id="a3472-188">Wenn Sie sich dafür entscheiden, für das Direct3D9-Spiel eine Erweiterung auf die Unterstützung höherer Direct3D-Featureebenen durchzuführen, ist es besser, zuerst das Portieren des vorhandenen Direct3D9-Grafikcodes abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="a3472-188">If you decide to extend your Direct3D 9 game to support higher Direct3D feature levels then it's better to finish porting your existing Direct3D 9 graphics code first.</span></span> <span data-ttu-id="a3472-189">Nachdem das Spiel unter Direct3D11 funktioniert, können zusätzliche Renderpfade mit erweiterten Grafiken einfacher hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="a3472-189">After you have your game working in Direct3D 11, it's easier to add additional rendering paths with enhanced graphics.</span></span>

<span data-ttu-id="a3472-190">Eine ausführliche Erklärung der Unterstützung von Featureebenen finden Sie unter [Direct3D-Featureebenen](https://msdn.microsoft.com/library/windows/desktop/ff476876).</span><span class="sxs-lookup"><span data-stu-id="a3472-190">See [Direct3D feature levels](https://msdn.microsoft.com/library/windows/desktop/ff476876) for a detailed explanation of feature level support.</span></span> <span data-ttu-id="a3472-191">Eine vollständige Liste mit Direct3D11-Features finden Sie unter [Features vonDirect3D 11](https://msdn.microsoft.com/library/windows/desktop/ff476342) und [Features von Direct3D11.1](https://msdn.microsoft.com/library/windows/desktop/hh404562).</span><span class="sxs-lookup"><span data-stu-id="a3472-191">See [Direct3D 11 Features](https://msdn.microsoft.com/library/windows/desktop/ff476342) and [Direct3D 11.1 Features](https://msdn.microsoft.com/library/windows/desktop/hh404562) for a full list of Direct3D 11 features.</span></span>

## <a name="feature-levels-and-the-programmable-pipeline"></a><span data-ttu-id="a3472-192">Featureebenen und die programmierbare Pipeline</span><span class="sxs-lookup"><span data-stu-id="a3472-192">Feature levels and the programmable pipeline</span></span>


<span data-ttu-id="a3472-193">Seit Direct3D9 hat sich die Hardware weiterentwickelt, und der programmierbaren Grafikpipeline wurden mehrere neue optionale Phasen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="a3472-193">Hardware has continue to evolve since Direct3D 9, and several new optional stages have been added to the programmable graphics pipeline.</span></span> <span data-ttu-id="a3472-194">Die für die Grafikpipeline verfügbaren Optionen variieren je nach Direct3D-Featureebene.</span><span class="sxs-lookup"><span data-stu-id="a3472-194">The set of options you have for the graphics pipeline varies with the Direct3D feature level.</span></span> <span data-ttu-id="a3472-195">Die Featureebene10.0 enthält die Geometrie-Shaderphase mit optionalem Streamout für das Rendern mit mehreren Durchläufen über die GPU.</span><span class="sxs-lookup"><span data-stu-id="a3472-195">Feature level 10.0 includes the geometry shader stage with optional stream out for multipass rendering on the GPU.</span></span> <span data-ttu-id="a3472-196">Die Featureebene11\_0 umfasst den Hüllen-Shader und den Domänen-Shader zur Verwendung mit Hardware-Tesselation.</span><span class="sxs-lookup"><span data-stu-id="a3472-196">Feature level 11\_0 include the hull shader and domain shader for use with hardware tessellation.</span></span> <span data-ttu-id="a3472-197">Die Featureebene11\_0 verfügt auch über vollständige Unterstützung für DirectCompute-Shader, während die Featureebenen10.x nur über Unterstützung für eine eingeschränkte Form von DirectCompute verfügen.</span><span class="sxs-lookup"><span data-stu-id="a3472-197">Feature level 11\_0 also includes full support for DirectCompute shaders, while feature levels 10.x only include support for a limited form of DirectCompute.</span></span>

<span data-ttu-id="a3472-198">Alle Shader sind unter Verwendung von HLSL-Code mit einem Shaderprofil geschrieben, das einer Direct3D-Featureebene entspricht.</span><span class="sxs-lookup"><span data-stu-id="a3472-198">All shaders are written in HLSL using a shader profile that corresponds to a Direct3D feature level.</span></span> <span data-ttu-id="a3472-199">Shaderprofile sind aufwärtskompatibel, sodass ein mit „vs\_4\_0\_level\_9\_1“ oder „ps\_4\_0\_level\_9\_1“ kompilierter HLSL-Shader geräteübergreifend verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="a3472-199">Shader profiles are upwards compatible, so an HLSL shader that compiles using vs\_4\_0\_level\_9\_1 or ps\_4\_0\_level\_9\_1 will work across all devices.</span></span> <span data-ttu-id="a3472-200">Shaderprofile sind nicht abwärtskompatibel, sodass ein mit „vs\_4\_1“ kompilierter Shader nur auf Geräten mit der Featureebene10\_1, 11\_0 oder 11\_1 verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="a3472-200">Shader profiles are not downlevel compatible, so a shader compiled using vs\_4\_1 will only work on feature level 10\_1, 11\_0, or 11\_1 devices.</span></span>

<span data-ttu-id="a3472-201">Unter Direct3D9 wurden Konstanten für Shader mithilfe eines freigegebenen Arrays mit „SetVertexShaderConstant“ und „SetPixelShaderConstant“ verwaltet.</span><span class="sxs-lookup"><span data-stu-id="a3472-201">Direct3D 9 managed constants for shaders using a shared array with SetVertexShaderConstant and SetPixelShaderConstant.</span></span> <span data-ttu-id="a3472-202">Unter Direct3D11 werden Konstantenpuffer verwendet, bei denen es sich um Ressourcen handelt, z.B. ein Vertexpuffer oder ein Indexpuffer.</span><span class="sxs-lookup"><span data-stu-id="a3472-202">Direct3D 11 uses constant buffers, which are resources like a vertex buffer or index buffer.</span></span> <span data-ttu-id="a3472-203">Konstantenpuffer sind für eine effiziente Aktualisierung ausgelegt.</span><span class="sxs-lookup"><span data-stu-id="a3472-203">Constant buffers are designed to be updated efficiently.</span></span> <span data-ttu-id="a3472-204">Anstelle der Anordnung aller Shaderkonstanten in einem einzelnen globalen Array, ordnen Sie die Konstanten in logischen Gruppierungen an und verwalten sie mithilfe eines oder mehrerer Konstantenpuffer.</span><span class="sxs-lookup"><span data-stu-id="a3472-204">Instead of having all the shader contants organized into a single global array you organize your constants into logical groupings and manage them through one or more constant buffers.</span></span> <span data-ttu-id="a3472-205">Wenn Sie Ihr Direct3D9-Spiel zu Direct3D11 portieren, sollten Sie die Organisation der Konstantenpuffer so planen, dass diese entsprechend aktualisiert werden können.</span><span class="sxs-lookup"><span data-stu-id="a3472-205">When you port your Direct3D 9 game to Direct3D 11, plan to organize your constant buffers so that you can update them appropriately.</span></span> <span data-ttu-id="a3472-206">Gruppieren Sie Shaderkonstanten, die nicht für jeden Frame aktualisiert werden, in einem separaten Konstantenpuffer, damit diese Daten nicht ständig zusammen mit den dynamischeren Shaderkonstanten an den Grafikadapter hochgeladen werden müssen.</span><span class="sxs-lookup"><span data-stu-id="a3472-206">For example, group shader constants that aren't updated every frame into a separate constant buffer, so that you don't have to constantly upload that data to the graphics adapter along with your more dynamic shader constants.</span></span>

> <span data-ttu-id="a3472-207">**Hinweis:**  meisten Direct3D 9-Anwendungen werden ausgiebig Shader, aber gelegentlich verwendeter Speicher des älteren mit fester Funktion Verhaltens gemischt.</span><span class="sxs-lookup"><span data-stu-id="a3472-207">**Note** Most Direct3D 9 applications made extensive use of shaders, but occasionally mixed in use of the legacy fixed-function behavior.</span></span> <span data-ttu-id="a3472-208">Beachten Sie, dass von Direct3D11 nur ein programmierbares Shadermodell verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a3472-208">Note that Direct3D 11 only uses a programmable shading model.</span></span> <span data-ttu-id="a3472-209">Die Legacyfeatures von Direct3D9 mit festen Funktionen werden als veraltet angesehen.</span><span class="sxs-lookup"><span data-stu-id="a3472-209">The legacy fixed-function features of Direct3D 9 are deprecated.</span></span>

 

 

 




