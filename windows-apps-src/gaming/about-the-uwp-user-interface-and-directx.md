---
author: mtoepke
title: Das App-Objekt und DirectX
description: Für die Universelle Windows-Plattform (UWP) mit DirectX-Spielen werden nur wenige der UI-Elemente und -objekte der Windows-Benutzeroberfläche genutzt.
ms.assetid: 46f92156-29f8-d65e-2587-7ba1de5b48a6
ms.author: mtoepke
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows10, UWP, DirectX, App-Objekt
ms.localizationpriority: medium
ms.openlocfilehash: fcbe68516e3ad8b2643faf68900e3305f18e8bbf
ms.sourcegitcommit: 72835733ec429a5deb6a11da4112336746e5e9cf
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 10/20/2018
ms.locfileid: "5171702"
---
# <a name="the-app-object-and-directx"></a><span data-ttu-id="512a4-104">Das App-Objekt und DirectX</span><span class="sxs-lookup"><span data-stu-id="512a4-104">The app object and DirectX</span></span>



<span data-ttu-id="512a4-105">Für die Universelle Windows-Plattform (UWP) mit DirectX-Spielen werden nur wenige der UI-Elemente und -objekte der Windows-Benutzeroberfläche genutzt.</span><span class="sxs-lookup"><span data-stu-id="512a4-105">Universal Windows Platform (UWP) with DirectX games don't use many of the Windows UI user interface elements and objects.</span></span> <span data-ttu-id="512a4-106">Da sie auf einer niedrigeren Ebene des Windows-Runtime-Stapels ausgeführt werden, müssen sie stattdessen auf eine grundlegendere Weise mit dem Benutzeroberflächenframework interagieren, und zwar indem sie direkt auf das App-Objekt zugreifen und mit diesem interagieren.</span><span class="sxs-lookup"><span data-stu-id="512a4-106">Rather, because they run at a lower level in the Windows Runtime stack, they must interoperate with the user interface framework in a more fundamental way: by accessing and interoperating with the app object directly.</span></span> <span data-ttu-id="512a4-107">Im Folgenden erfahren Sie, zu welchem Zeitpunkt und auf welche Weise eine solche Interaktion erfolgt und wie Sie dieses Modell als DirectX-Entwickler beim Entwickeln von UWP-Apps effizient nutzen können.</span><span class="sxs-lookup"><span data-stu-id="512a4-107">Learn when and how this interoperation occurs, and how you, as a DirectX developer, can effectively use this model in the development of your UWP app.</span></span>

<span data-ttu-id="512a4-108">Sehen Sie sich die [Direct3D-Grafiken Glossar](../graphics-concepts/index.md) Informationen Grafiken unbekannte Begriffe und Konzepte, die Sie beim Lesen auftreten.</span><span class="sxs-lookup"><span data-stu-id="512a4-108">See the [Direct3D graphics glossary](../graphics-concepts/index.md) for information about unfamiliar graphics terms or concepts you encounter while reading.</span></span>

## <a name="the-important-core-user-interface-namespaces"></a><span data-ttu-id="512a4-109">Die wichtigen Benutzeroberflächen-Hauptnamespaces</span><span class="sxs-lookup"><span data-stu-id="512a4-109">The important core user interface namespaces</span></span>


<span data-ttu-id="512a4-110">Zunächst sind die Windows-Runtime-Namespaces zu erwähnen, die Sie (mit **using**) in Ihre UWP-App einschließen müssen.</span><span class="sxs-lookup"><span data-stu-id="512a4-110">First, let's note the Windows Runtime namespaces that you must include (with **using**) in your UWP app.</span></span> <span data-ttu-id="512a4-111">Darauf gehen wir unten noch ausführlicher ein.</span><span class="sxs-lookup"><span data-stu-id="512a4-111">We get into the details in a bit.</span></span>

-   [**<span data-ttu-id="512a4-112">Windows.ApplicationModel.Core</span><span class="sxs-lookup"><span data-stu-id="512a4-112">Windows.ApplicationModel.Core</span></span>**](https://msdn.microsoft.com/library/windows/apps/br205865)
-   [**<span data-ttu-id="512a4-113">Windows.ApplicationModel.Activation</span><span class="sxs-lookup"><span data-stu-id="512a4-113">Windows.ApplicationModel.Activation</span></span>**](https://msdn.microsoft.com/library/windows/apps/br224766)
-   [**<span data-ttu-id="512a4-114">Windows.UI.Core</span><span class="sxs-lookup"><span data-stu-id="512a4-114">Windows.UI.Core</span></span>**](https://msdn.microsoft.com/library/windows/apps/br208383)
-   [**<span data-ttu-id="512a4-115">Windows.System</span><span class="sxs-lookup"><span data-stu-id="512a4-115">Windows.System</span></span>**](https://msdn.microsoft.com/library/windows/apps/br241814)
-   [**<span data-ttu-id="512a4-116">Windows.Foundation</span><span class="sxs-lookup"><span data-stu-id="512a4-116">Windows.Foundation</span></span>**](https://msdn.microsoft.com/library/windows/apps/br226021)

> <span data-ttu-id="512a4-117">**Hinweis**   Wenn Sie keine UWP-App entwickeln, verwenden Sie die Benutzeroberflächenkomponenten aus den JavaScript- oder XAML-spezifischen Bibliotheken und Namespaces anstelle der Typen in diesen Namespaces.</span><span class="sxs-lookup"><span data-stu-id="512a4-117">**Note**   If you are not developing a UWP app, use the user interface components provided in the JavaScript- or XAML-specific libraries and namespaces instead of the types provided in these namespaces.</span></span>

 

## <a name="the-windows-runtime-app-object"></a><span data-ttu-id="512a4-118">Das Windows-Runtime-App-Objekt</span><span class="sxs-lookup"><span data-stu-id="512a4-118">The Windows Runtime app object</span></span>


<span data-ttu-id="512a4-119">Sie möchten in Ihrer UWP-App ein Fenster und einen Ansichtsanbieter abrufen, von dem Sie wiederum eine Ansicht abrufen und mit dem Sie Ihre Swapchain (Ihre Anzeigepuffer) verbinden können.</span><span class="sxs-lookup"><span data-stu-id="512a4-119">In your UWP app, you want to get a window and a view provider from which you can get a view and to which you can connect your swap chain (your display buffers).</span></span> <span data-ttu-id="512a4-120">Sie können diese Ansicht auch in die fensterspezifischen Ereignisse für die ausgeführte App einbinden.</span><span class="sxs-lookup"><span data-stu-id="512a4-120">You can also hook this view into the window-specific events for your running app.</span></span> <span data-ttu-id="512a4-121">Zum Abrufen des übergeordneten Fensters für das App-Objekt, das durch den [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225)-Typ definiert ist, erstellen Sie einen Typ, der [**IFrameworkViewSource**](https://msdn.microsoft.com/library/windows/apps/hh700482) implementiert, wie im vorherigen Codeausschnitt veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="512a4-121">To get the parent window for the app object, defined by the [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) type, create a type that implements [**IFrameworkViewSource**](https://msdn.microsoft.com/library/windows/apps/hh700482), as we did in the previous code snippet.</span></span>

<span data-ttu-id="512a4-122">Im Folgenden werden die grundlegenden Schritte zum Abrufen eines Fensters mit dem zentralen Benutzeroberflächenframework erläutert:</span><span class="sxs-lookup"><span data-stu-id="512a4-122">Here's the basic set of steps to get a window using the core user interface framework:</span></span>

1.  <span data-ttu-id="512a4-123">Erstellen Sie einen Typ, der [**IFrameworkView**](https://msdn.microsoft.com/library/windows/apps/hh700478) implementiert.</span><span class="sxs-lookup"><span data-stu-id="512a4-123">Create a type that implements [**IFrameworkView**](https://msdn.microsoft.com/library/windows/apps/hh700478).</span></span> <span data-ttu-id="512a4-124">Dies ist Ihre Ansicht.</span><span class="sxs-lookup"><span data-stu-id="512a4-124">This is your view.</span></span>

    <span data-ttu-id="512a4-125">Definieren Sie in diesem Typ Folgendes:</span><span class="sxs-lookup"><span data-stu-id="512a4-125">In this type, define:</span></span>

    -   <span data-ttu-id="512a4-126">Eine [**Initialize**](https://msdn.microsoft.com/library/windows/apps/hh700495)-Methode, die eine Instanz von [**CoreApplicationView**](https://msdn.microsoft.com/library/windows/apps/br225017) als Parameter annimmt.</span><span class="sxs-lookup"><span data-stu-id="512a4-126">An [**Initialize**](https://msdn.microsoft.com/library/windows/apps/hh700495) method that takes an instance of [**CoreApplicationView**](https://msdn.microsoft.com/library/windows/apps/br225017) as a parameter.</span></span> <span data-ttu-id="512a4-127">Sie können eine Instanz dieses Typs abrufen, indem Sie [**CoreApplication.CreateNewView**](https://msdn.microsoft.com/library/windows/apps/dn297278) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="512a4-127">You can get an instance of this type by calling [**CoreApplication.CreateNewView**](https://msdn.microsoft.com/library/windows/apps/dn297278).</span></span> <span data-ttu-id="512a4-128">Das App-Objekt ruft die Methode beim Starten der App auf.</span><span class="sxs-lookup"><span data-stu-id="512a4-128">The app object calls it when the app is launched.</span></span>
    -   <span data-ttu-id="512a4-129">Eine [**SetWindow**](https://msdn.microsoft.com/library/windows/apps/hh700509)-Methode, die eine Instanz von [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) als Parameter annimmt.</span><span class="sxs-lookup"><span data-stu-id="512a4-129">A [**SetWindow**](https://msdn.microsoft.com/library/windows/apps/hh700509) method that takes an instance of [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) as a parameter.</span></span> <span data-ttu-id="512a4-130">Sie können eine Instanz dieses Typs abrufen, indem Sie auf die [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br225019)-Eigenschaft in der neuen [**CoreApplicationView**](https://msdn.microsoft.com/library/windows/apps/br225017)-Instanz zugreifen.</span><span class="sxs-lookup"><span data-stu-id="512a4-130">You can get an instance of this type by accessing the [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br225019) property on your new [**CoreApplicationView**](https://msdn.microsoft.com/library/windows/apps/br225017) instance.</span></span>
    -   <span data-ttu-id="512a4-131">Eine [**Load**](https://msdn.microsoft.com/library/windows/apps/hh700501)-Methode, die eine Zeichenfolge für einen Einstiegspunkt als einzigen Parameter annimmt.</span><span class="sxs-lookup"><span data-stu-id="512a4-131">A [**Load**](https://msdn.microsoft.com/library/windows/apps/hh700501) method that takes a string for an entry point as the sole parameter.</span></span> <span data-ttu-id="512a4-132">Das App-Objekt stellt den Einstiegspunkt bereit, wenn Sie diese Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="512a4-132">The app object provides the entry point string when you call this method.</span></span> <span data-ttu-id="512a4-133">Hier richten Sie Ressourcen ein.</span><span class="sxs-lookup"><span data-stu-id="512a4-133">This is where you set up resources.</span></span> <span data-ttu-id="512a4-134">Hier erstellen Sie Ihre Geräteressourcen.</span><span class="sxs-lookup"><span data-stu-id="512a4-134">You create your device resources here.</span></span> <span data-ttu-id="512a4-135">Das App-Objekt ruft die Methode beim Starten der App auf.</span><span class="sxs-lookup"><span data-stu-id="512a4-135">The app object calls it when the app is launched.</span></span>
    -   <span data-ttu-id="512a4-136">Eine [**Run**](https://msdn.microsoft.com/library/windows/apps/hh700505)-Methode, die das [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225)-Objekt aktiviert und den Fensterereignisverteiler startet.</span><span class="sxs-lookup"><span data-stu-id="512a4-136">A [**Run**](https://msdn.microsoft.com/library/windows/apps/hh700505) method that activates the [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) object and starts the window event dispatcher.</span></span> <span data-ttu-id="512a4-137">Der Aufruf durch das App-Objekt erfolgt, wenn der Prozess der App gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="512a4-137">The app object calls it when the app's process starts.</span></span>
    -   <span data-ttu-id="512a4-138">Eine [**Uninitialize**](https://msdn.microsoft.com/library/windows/apps/hh700523)-Methode, die die im Aufruf von [**Load**](https://msdn.microsoft.com/library/windows/apps/hh700501) eingerichteten Ressourcen bereinigt.</span><span class="sxs-lookup"><span data-stu-id="512a4-138">An [**Uninitialize**](https://msdn.microsoft.com/library/windows/apps/hh700523) method that cleans up the resources set up in the call to [**Load**](https://msdn.microsoft.com/library/windows/apps/hh700501).</span></span> <span data-ttu-id="512a4-139">Das App-Objekt ruft diese Methode beim Schließen der App auf.</span><span class="sxs-lookup"><span data-stu-id="512a4-139">The app object calls this method when the app is closed.</span></span>

2.  <span data-ttu-id="512a4-140">Erstellen Sie einen Typ, der [**IFrameworkViewSource**](https://msdn.microsoft.com/library/windows/apps/hh700482) implementiert.</span><span class="sxs-lookup"><span data-stu-id="512a4-140">Create a type that implements [**IFrameworkViewSource**](https://msdn.microsoft.com/library/windows/apps/hh700482).</span></span> <span data-ttu-id="512a4-141">Dies ist Ihr Ansichtsanbieter.</span><span class="sxs-lookup"><span data-stu-id="512a4-141">This is your view provider.</span></span>

    <span data-ttu-id="512a4-142">Definieren Sie in diesem Typ Folgendes:</span><span class="sxs-lookup"><span data-stu-id="512a4-142">In this type, define:</span></span>

    -   <span data-ttu-id="512a4-143">Eine Methode mit dem Namen [**CreateView**](https://msdn.microsoft.com/library/windows/apps/hh700491), die eine Instanz Ihrer [**IFrameworkView**](https://msdn.microsoft.com/library/windows/apps/hh700478)-Implementierung zurückgibt, die in Schritt 1 erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="512a4-143">A method named [**CreateView**](https://msdn.microsoft.com/library/windows/apps/hh700491) that returns an instance of your [**IFrameworkView**](https://msdn.microsoft.com/library/windows/apps/hh700478) implementation, as created in Step 1.</span></span>

3.  <span data-ttu-id="512a4-144">Übergeben Sie eine Instanz des Ansichtsanbieters an [**CoreApplication.Run**](https://msdn.microsoft.com/library/windows/apps/hh700469) aus **main**.</span><span class="sxs-lookup"><span data-stu-id="512a4-144">Pass an instance of the view provider to [**CoreApplication.Run**](https://msdn.microsoft.com/library/windows/apps/hh700469) from **main**.</span></span>

<span data-ttu-id="512a4-145">Da Sie sich nun mit den Grundlagen vertraut gemacht haben, betrachten Sie nun weitere verfügbare Optionen, mit denen Sie diesen Ansatz ausweiten können.</span><span class="sxs-lookup"><span data-stu-id="512a4-145">With those basics in mind, let's look at more options you have to extend this approach.</span></span>

## <a name="core-user-interface-types"></a><span data-ttu-id="512a4-146">Zentrale Benutzeroberflächentypen</span><span class="sxs-lookup"><span data-stu-id="512a4-146">Core user interface types</span></span>


<span data-ttu-id="512a4-147">Im Folgenden werden weitere zentrale Benutzeroberflächentypen in der Windows-Runtime vorgestellt, die möglicherweise hilfreich sein können:</span><span class="sxs-lookup"><span data-stu-id="512a4-147">Here are other core user interface types in the Windows Runtime that you might find helpful:</span></span>

-   [**<span data-ttu-id="512a4-148">Windows.ApplicationModel.Core.CoreApplicationView</span><span class="sxs-lookup"><span data-stu-id="512a4-148">Windows.ApplicationModel.Core.CoreApplicationView</span></span>**](https://msdn.microsoft.com/library/windows/apps/br225017)
-   [**<span data-ttu-id="512a4-149">Windows.UI.Core.CoreWindow</span><span class="sxs-lookup"><span data-stu-id="512a4-149">Windows.UI.Core.CoreWindow</span></span>**](https://msdn.microsoft.com/library/windows/apps/br208225)
-   [**<span data-ttu-id="512a4-150">Windows.UI.Core.CoreDispatcher</span><span class="sxs-lookup"><span data-stu-id="512a4-150">Windows.UI.Core.CoreDispatcher</span></span>**](https://msdn.microsoft.com/library/windows/apps/br208211)

<span data-ttu-id="512a4-151">Mit diesen Typen können Sie auf die Ansicht der App zugreifen, insbesondere auf die Bits, mit denen die Inhalte des übergeordneten Fensters der App gezeichnet werden, und Sie können die für dieses Fenster ausgelösten Ereignisse behandeln.</span><span class="sxs-lookup"><span data-stu-id="512a4-151">You can use these types to access your app's view, specifically, the bits that draw the contents of the app's parent window, and handle the events fired for that window.</span></span> <span data-ttu-id="512a4-152">Der Prozess des App-Fensters befindet sich in einem *Anwendungs-Single-Threaded-Apartment* (ASTA), das isoliert ist und alle Rückrufe behandelt.</span><span class="sxs-lookup"><span data-stu-id="512a4-152">The app window's process is an *application single-threaded apartment* (ASTA) that is isolated and that handles all callbacks.</span></span>

<span data-ttu-id="512a4-153">Die Ansicht Ihrer App wird durch den Ansichtsanbieter für das App-Fenster generiert und in den meisten Fällen durch ein spezifisches Frameworkpaket oder direkt vom System implementiert, sodass Sie die Implementierung nicht selbst ausführen müssen.</span><span class="sxs-lookup"><span data-stu-id="512a4-153">Your app's view is generated by the view provider for your app window, and in most cases will be implemented by a specific framework package or the system itself, so you don't need to implement it yourself.</span></span> <span data-ttu-id="512a4-154">Für DirectX müssen Sie wie zuvor beschrieben einen kompakten Ansichtsanbieter implementieren.</span><span class="sxs-lookup"><span data-stu-id="512a4-154">For DirectX, you need to implement a thin view provider, as discussed previously.</span></span> <span data-ttu-id="512a4-155">Zwischen den folgenden Komponenten und Verhalten besteht eine spezifische 1:1-Beziehung:</span><span class="sxs-lookup"><span data-stu-id="512a4-155">There is a specific 1-to-1 relationship between the following components and behaviors:</span></span>

-   <span data-ttu-id="512a4-156">Die Ansicht einer App, die durch den [**CoreApplicationView**](https://msdn.microsoft.com/library/windows/apps/br225017)-Typ dargestellt wird und die die Methode(n) zum Upgrade des Fensters definiert.</span><span class="sxs-lookup"><span data-stu-id="512a4-156">An app's view, which is represented by the [**CoreApplicationView**](https://msdn.microsoft.com/library/windows/apps/br225017) type, and which defines the method(s) for updating the window.</span></span>
-   <span data-ttu-id="512a4-157">Ein ASTA, dessen Attribute das Threadingverhalten der App definieren.</span><span class="sxs-lookup"><span data-stu-id="512a4-157">An ASTA, the attribution of which defines the threading behavior of the app.</span></span> <span data-ttu-id="512a4-158">Sie können keine Instanzen von STA-attributierten COM-Typen für ein ASTA erstellen.</span><span class="sxs-lookup"><span data-stu-id="512a4-158">You cannot create instances of COM STA-attributed types on an ASTA.</span></span>
-   <span data-ttu-id="512a4-159">Ein Ansichtsanbieter, den Ihre App vom System erhält oder der von Ihnen implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="512a4-159">A view provider, which your app obtains from the system or which you implement.</span></span>
-   <span data-ttu-id="512a4-160">Ein übergeordnetes Fenster, das durch den [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225)-Typ dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="512a4-160">A parent window, which is represented by the [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) type.</span></span>
-   <span data-ttu-id="512a4-161">Quellentnahme für alle Aktivierungsereignisse.</span><span class="sxs-lookup"><span data-stu-id="512a4-161">Sourcing for all activation events.</span></span> <span data-ttu-id="512a4-162">Sowohl Ansichten als auch Fenster verfügen über separate Aktivierungsereignisse.</span><span class="sxs-lookup"><span data-stu-id="512a4-162">Both views and windows have separate activation events.</span></span>

<span data-ttu-id="512a4-163">Dies lässt sich wie folgt zusammenfassen: Das App-Objekt stellt eine Ansichtsanbieterfactory bereit.</span><span class="sxs-lookup"><span data-stu-id="512a4-163">In summary, the app object provides a view provider factory.</span></span> <span data-ttu-id="512a4-164">Es erstellt einen Ansichtsanbieter und instanziiert ein übergeordnetes Fenster für die App.</span><span class="sxs-lookup"><span data-stu-id="512a4-164">It creates a view provider and instantiates a parent window for the app.</span></span> <span data-ttu-id="512a4-165">Der Ansichtsanbieter definiert die Ansicht der App für das übergeordnete Fenster der App.</span><span class="sxs-lookup"><span data-stu-id="512a4-165">The view provider defines the app's view for the parent window of the app.</span></span> <span data-ttu-id="512a4-166">Im Folgenden wird genauer auf die Ansicht und das übergeordnete Fenster eingegangen.</span><span class="sxs-lookup"><span data-stu-id="512a4-166">Now, let's discuss the specifics of the view and the parent window.</span></span>

## <a name="coreapplicationview-behaviors-and-properties"></a><span data-ttu-id="512a4-167">CoreApplicationView – Verhalten und Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="512a4-167">CoreApplicationView behaviors and properties</span></span>


<span data-ttu-id="512a4-168">[**CoreApplicationView**](https://msdn.microsoft.com/library/windows/apps/br225017) stellt die aktuelle App-Ansicht dar.</span><span class="sxs-lookup"><span data-stu-id="512a4-168">[**CoreApplicationView**](https://msdn.microsoft.com/library/windows/apps/br225017) represents the current app view.</span></span> <span data-ttu-id="512a4-169">Das App-Singleton erstellt die App-Ansicht während der Initialisierung; die Ansicht bleibt jedoch so lange ruhend, bis sie aktiviert wird.</span><span class="sxs-lookup"><span data-stu-id="512a4-169">The app singleton creates the app view during initialization, but the view remains dormant until it is activated.</span></span> <span data-ttu-id="512a4-170">Sie können das [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) abrufen, in dem die Ansicht angezeigt wird, indem Sie auf die zugehörige [**CoreApplicationView.CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br225019)-Eigenschaft zugreifen: Sie können Aktivierungs- und Deaktivierungsereignisse für die Ansicht behandeln, indem Sie Delegaten beim [**CoreApplicationView.Activated**](https://msdn.microsoft.com/library/windows/apps/br225018)-Ereignis registrieren.</span><span class="sxs-lookup"><span data-stu-id="512a4-170">You can get the [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) that displays the view by accessing the [**CoreApplicationView.CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br225019) property on it, and you can handle activation and deactivation events for the view by registering delegates with the [**CoreApplicationView.Activated**](https://msdn.microsoft.com/library/windows/apps/br225018) event.</span></span>

## <a name="corewindow-behaviors-and-properties"></a><span data-ttu-id="512a4-171">CoreWindow – Verhalten und Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="512a4-171">CoreWindow behaviors and properties</span></span>


<span data-ttu-id="512a4-172">Das übergeordnete Fenster, das eine [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225)-Instanz darstellt, wird erstellt und an den Ansichtsanbieter übergeben, wenn das App-Objekt initialisiert wird.</span><span class="sxs-lookup"><span data-stu-id="512a4-172">The parent window, which is a [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) instance, is created and passed to the view provider when the app object initializes.</span></span> <span data-ttu-id="512a4-173">Wenn die App über ein anzuzeigendes Fenster verfügt, wird dieses angezeigt. Andernfalls wird lediglich die Ansicht initialisiert.</span><span class="sxs-lookup"><span data-stu-id="512a4-173">If the app has a window to display, it displays it; otherwise, it simply initializes the view.</span></span>

<span data-ttu-id="512a4-174">[**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) stellt eine Reihe von Ereignissen bereit, die spezifisch für das Eingabeverhalten und das grundlegende Fensterverhalten sind.</span><span class="sxs-lookup"><span data-stu-id="512a4-174">[**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) provides a number of events specific to input and basic window behaviors.</span></span> <span data-ttu-id="512a4-175">Sie können diese Ereignisse behandeln, indem Sie eigene Delegaten für diese registrieren.</span><span class="sxs-lookup"><span data-stu-id="512a4-175">You can handle these events by registering your own delegates with them.</span></span>

<span data-ttu-id="512a4-176">Sie können auch den Fensterereignisverteiler für das Fenster abrufen, indem Sie auf die [**CoreWindow.Dispatcher**](https://msdn.microsoft.com/library/windows/apps/br208264)-Eigenschaft zugreifen, die eine Instanz von [**CoreDispatcher**](https://msdn.microsoft.com/library/windows/apps/br208211) bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="512a4-176">You can also obtain the window event dispatcher for the window by accessing the [**CoreWindow.Dispatcher**](https://msdn.microsoft.com/library/windows/apps/br208264) property, which provides an instance of [**CoreDispatcher**](https://msdn.microsoft.com/library/windows/apps/br208211).</span></span>

## <a name="coredispatcher-behaviors-and-properties"></a><span data-ttu-id="512a4-177">CoreDispatcher – Verhalten und Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="512a4-177">CoreDispatcher behaviors and properties</span></span>


<span data-ttu-id="512a4-178">Sie können das Threadingverhalten der Ereignisverteilung für ein Fenster mit dem [**CoreDispatcher**](https://msdn.microsoft.com/library/windows/apps/br208211)-Typ bestimmen.</span><span class="sxs-lookup"><span data-stu-id="512a4-178">You can determine the threading behavior of event dispatching for a window with the [**CoreDispatcher**](https://msdn.microsoft.com/library/windows/apps/br208211) type.</span></span> <span data-ttu-id="512a4-179">Bei diesem Typ gibt es eine besonders wichtige Methode: die [**CoreDispatcher.ProcessEvents**](https://msdn.microsoft.com/library/windows/apps/br208215)-Methode, die die Fensterereignisverarbeitung startet.</span><span class="sxs-lookup"><span data-stu-id="512a4-179">On this type, there's one particularly important method: the [**CoreDispatcher.ProcessEvents**](https://msdn.microsoft.com/library/windows/apps/br208215) method, which starts window event processing.</span></span> <span data-ttu-id="512a4-180">Wenn Sie diese Methode mit der falschen Option für Ihre App aufrufen, kann dies zu allen möglichen unerwarteten Verhaltensweisen bei der Ereignisverarbeitung führen.</span><span class="sxs-lookup"><span data-stu-id="512a4-180">Calling this method with the wrong option for your app can lead to all sorts of unexpected event processing behaviors.</span></span>

| <span data-ttu-id="512a4-181">CoreProcessEventsOption-Option</span><span class="sxs-lookup"><span data-stu-id="512a4-181">CoreProcessEventsOption option</span></span>                                                           | <span data-ttu-id="512a4-182">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="512a4-182">Description</span></span>                                                                                                                                                                                                                                  |
|------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**<span data-ttu-id="512a4-183">CoreProcessEventsOption.ProcessOneAndAllPending</span><span class="sxs-lookup"><span data-stu-id="512a4-183">CoreProcessEventsOption.ProcessOneAndAllPending</span></span>**](https://msdn.microsoft.com/library/windows/apps/br208217) | <span data-ttu-id="512a4-184">Verteilen Sie alle derzeit in der Warteschlange verfügbaren Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="512a4-184">Dispatch all currently available events in the queue.</span></span> <span data-ttu-id="512a4-185">Wenn keine Ereignisse ausstehen, warten Sie auf das nächste neue Ereignis.</span><span class="sxs-lookup"><span data-stu-id="512a4-185">If no events are pending, wait for the next new event.</span></span>                                                                                                                                 |
| [**<span data-ttu-id="512a4-186">CoreProcessEventsOption.ProcessOneIfPresent</span><span class="sxs-lookup"><span data-stu-id="512a4-186">CoreProcessEventsOption.ProcessOneIfPresent</span></span>**](https://msdn.microsoft.com/library/windows/apps/br208217)     | <span data-ttu-id="512a4-187">Verteilen Sie ein Ereignis, wenn es in der Warteschlange aussteht.</span><span class="sxs-lookup"><span data-stu-id="512a4-187">Dispatch one event if it is pending in the queue.</span></span> <span data-ttu-id="512a4-188">Wenn keine Ereignisse ausstehen, warten Sie nicht, dass ein neues Ereignis ausgelöst wird, sondern kehren Sie stattdessen sofort zurück.</span><span class="sxs-lookup"><span data-stu-id="512a4-188">If no events are pending, don't wait for a new event to be raised but instead return immediately.</span></span>                                                                                          |
| [**<span data-ttu-id="512a4-189">CoreProcessEventsOption.ProcessUntilQuit</span><span class="sxs-lookup"><span data-stu-id="512a4-189">CoreProcessEventsOption.ProcessUntilQuit</span></span>**](https://msdn.microsoft.com/library/windows/apps/br208217)        | <span data-ttu-id="512a4-190">Warten Sie auf neue Ereignisse, und verteilen Sie alle verfügbaren Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="512a4-190">Wait for new events and dispatch all available events.</span></span> <span data-ttu-id="512a4-191">Setzen Sie dieses Verhalten fort, bis das Fenster geschlossen wird oder die Anwendung die [**Close**](https://msdn.microsoft.com/library/windows/apps/br208260)-Methode für die [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225)-Instanz aufruft.</span><span class="sxs-lookup"><span data-stu-id="512a4-191">Continue this behavior until the window is closed or the application calls the [**Close**](https://msdn.microsoft.com/library/windows/apps/br208260) method on the [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) instance.</span></span> |
| [**<span data-ttu-id="512a4-192">CoreProcessEventsOption.ProcessAllIfPresent</span><span class="sxs-lookup"><span data-stu-id="512a4-192">CoreProcessEventsOption.ProcessAllIfPresent</span></span>**](https://msdn.microsoft.com/library/windows/apps/br208217)     | <span data-ttu-id="512a4-193">Verteilen Sie alle derzeit in der Warteschlange verfügbaren Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="512a4-193">Dispatch all currently available events in the queue.</span></span> <span data-ttu-id="512a4-194">Wenn keine Ereignisse ausstehen, kehren Sie sofort zurück.</span><span class="sxs-lookup"><span data-stu-id="512a4-194">If no events are pending, return immediately.</span></span>                                                                                                                                          |

 

<span data-ttu-id="512a4-195">UWP mit DirectX muss die [**CoreProcessEventsOption.ProcessAllIfPresent**](https://msdn.microsoft.com/library/windows/apps/br208217)-Option verwenden, um blockierendes Verhalten zu verhindern, das Grafikaktualisierungen beeinträchtigen könnte.</span><span class="sxs-lookup"><span data-stu-id="512a4-195">UWP using DirectX should use the [**CoreProcessEventsOption.ProcessAllIfPresent**](https://msdn.microsoft.com/library/windows/apps/br208217) option to prevent blocking behaviors that might interrupt graphics updates.</span></span>

## <a name="asta-considerations-for-directx-devs"></a><span data-ttu-id="512a4-196">Überlegungen zu ASTA für DirectX-Entwickler</span><span class="sxs-lookup"><span data-stu-id="512a4-196">ASTA considerations for DirectX devs</span></span>


<span data-ttu-id="512a4-197">Das App-Objekt, das die Laufzeitdarstellung Ihrer UWP- und DirectX-App definiert, verwendet das ASTA-Threadingmodell (Anwendungs-Single-Threaded-Apartment), um die UI-Ansichten der App zu hosten.</span><span class="sxs-lookup"><span data-stu-id="512a4-197">The app object that defines the run-time representation of yourUWP and DirectX app uses a threading model called Application Single-Threaded Apartment (ASTA) to host your app’s UI views.</span></span> <span data-ttu-id="512a4-198">Wenn Sie eine UWP- und DirectX-App entwickeln, sind Sie mit den Eigenschaften eines ASTAs vertraut, da alle Threads, die von Ihrer UWP- und DirectX-App gesendet werden, die [**Windows::System::Threading**](https://msdn.microsoft.com/library/windows/apps/br229642)-APIs oder [**CoreWindow::CoreDispatcher**](https://msdn.microsoft.com/library/windows/apps/br208211) verwenden müssen.</span><span class="sxs-lookup"><span data-stu-id="512a4-198">If you are developing a UWP and DirectX app, you're familiar with the properties of an ASTA, because any thread you dispatch from your UWP and DirectX app must use the [**Windows::System::Threading**](https://msdn.microsoft.com/library/windows/apps/br229642) APIs, or use [**CoreWindow::CoreDispatcher**](https://msdn.microsoft.com/library/windows/apps/br208211).</span></span> <span data-ttu-id="512a4-199">(Sie können das [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225)-Objekt für das ASTA abrufen, indem Sie [**CoreWindow::GetForCurrentThread**](https://msdn.microsoft.com/library/windows/apps/hh701589) in Ihrer App aufrufen.)</span><span class="sxs-lookup"><span data-stu-id="512a4-199">(You can get the [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) object for the ASTA by calling [**CoreWindow::GetForCurrentThread**](https://msdn.microsoft.com/library/windows/apps/hh701589) from your app.)</span></span>

<span data-ttu-id="512a4-200">Vor allem sollten Sie als Entwickler einer UWP DirectX-App darauf achten, dass Ihr App-Thread MTA-Threads senden kann. Legen Sie dazu **Platform::MTAThread** auf **main()** fest.</span><span class="sxs-lookup"><span data-stu-id="512a4-200">The most important thing for you to be aware of, as a developer of a UWP DirectX app, is that you must enable your app thread to dispatch MTA threads by setting **Platform::MTAThread** on **main()**.</span></span>

```cpp
[Platform::MTAThread]
int main(Platform::Array<Platform::String^>^)
{
    auto myDXAppSource = ref new MyDXAppSource(); // your view provider factory 
    CoreApplication::Run(myDXAppSource);
    return 0;
}
```

<span data-ttu-id="512a4-201">Wenn das App-Objekt für Ihre UWP DirectX-App aktiviert wird, erstellt es ein ASTA, das für die UI-Ansicht verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="512a4-201">When the app object for your UWP DirectX app activates, it creates the ASTA that will be used for the UI view.</span></span> <span data-ttu-id="512a4-202">Der neue ASTA-Thread ruft die Factory für Ihren Ansichtsanbieter auf, um den Ansichtsanbieter für Ihr App-Objekt zu erstellen. Der Code für Ihren Ansichtsanbieter wird dann in dem ASTA-Thread ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="512a4-202">The new ASTA thread calls into your view provider factory, to create the view provider for your app object, and as a result, your view provider code will run on that ASTA thread.</span></span>

<span data-ttu-id="512a4-203">Alle Threads, die aus einem ASTA ausgegliedert werden, müssen sich außerdem in einem MTA befinden.</span><span class="sxs-lookup"><span data-stu-id="512a4-203">Also, any thread that you spin off from the ASTA must be in an MTA.</span></span> <span data-ttu-id="512a4-204">Beachten Sie, dass es durch ausgelagerte MTA-Threads weiterhin zu Eintrittsinvarianzen und somit zu Sperren kommen kann.</span><span class="sxs-lookup"><span data-stu-id="512a4-204">Be aware that any MTA threads that you spin off can still create reentrancy issues and result in a deadlock.</span></span>

<span data-ttu-id="512a4-205">Wenn Sie vorhandenen Code zur Ausführung in einem ASTA-Thread portieren, sollten Sie folgende Punkte berücksichtigen:</span><span class="sxs-lookup"><span data-stu-id="512a4-205">If you're porting existing code to run on the ASTA thread, keep these considerations in mind:</span></span>

-   <span data-ttu-id="512a4-206">Das Verhalten von Wartegrundtypen wie [**CoWaitForMultipleObjects**](https://msdn.microsoft.com/library/windows/desktop/hh404144) unterscheidet sich je nachdem, ob es sich um einen ASTA oder einen STA handelt.</span><span class="sxs-lookup"><span data-stu-id="512a4-206">Wait primitives, such as [**CoWaitForMultipleObjects**](https://msdn.microsoft.com/library/windows/desktop/hh404144), behave differently in an ASTA than in an STA.</span></span>
-   <span data-ttu-id="512a4-207">Die gebundene Schleife eines COM-Aufrufs wird in einem ASTA anders ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="512a4-207">The COM call modal loop operates differently in an ASTA.</span></span> <span data-ttu-id="512a4-208">Solange ein ausgehender Aufruf aktiv ist, können Sie keine Aufrufe ohne entsprechenden Bezug mehr empfangen.</span><span class="sxs-lookup"><span data-stu-id="512a4-208">You can no longer receive unrelated calls while an outgoing call is in progress.</span></span> <span data-ttu-id="512a4-209">Beispielsweise führt das folgende Verhalten zu einer ASTA-Sperre (und zum unmittelbaren Absturz der App):</span><span class="sxs-lookup"><span data-stu-id="512a4-209">For example, the following behavior will create a deadlock from an ASTA (and immediately crash the app):</span></span>
    1.  <span data-ttu-id="512a4-210">Das ASTA ruft ein MTA-Objekt auf und übergibt den Schnittstellenzeiger P1.</span><span class="sxs-lookup"><span data-stu-id="512a4-210">The ASTA calls an MTA object and passes an interface pointer P1.</span></span>
    2.  <span data-ttu-id="512a4-211">Dasselbe MTA-Objekt wird später vom ASTA aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="512a4-211">Later, the ASTA calls the same MTA object.</span></span> <span data-ttu-id="512a4-212">Das MTA-Objekt ruft P1 vor der Rückgabe an das ASTA auf.</span><span class="sxs-lookup"><span data-stu-id="512a4-212">The MTA object calls P1 before it returns to the ASTA.</span></span>
    3.  <span data-ttu-id="512a4-213">Der Schnittstellenzeiger P1 kann aufgrund der Blockierung durch einen Aufruf ohne Bezug nicht auf das ASTA zugreifen.</span><span class="sxs-lookup"><span data-stu-id="512a4-213">P1 cannot enter the ASTA as it's blocked making an unrelated call.</span></span> <span data-ttu-id="512a4-214">Der MTA-Thread wird jedoch bei dem Versuch, P1 aufzurufen, blockiert.</span><span class="sxs-lookup"><span data-stu-id="512a4-214">However, the MTA thread is blocked as it tries to make the call to P1.</span></span>

    <span data-ttu-id="512a4-215">Sie können dieses Problem wie folgt beheben:</span><span class="sxs-lookup"><span data-stu-id="512a4-215">You can resolve this by :</span></span>
    -   <span data-ttu-id="512a4-216">Verwenden Sie das **async**-Muster, das in der Parallel Patterns Library (PPLTasks.h) definiert wurde.</span><span class="sxs-lookup"><span data-stu-id="512a4-216">Using the **async** pattern defined in the Parallel Patterns Library (PPLTasks.h)</span></span>
    -   <span data-ttu-id="512a4-217">Rufen Sie [**CoreDispatcher::ProcessEvents**](https://msdn.microsoft.com/library/windows/apps/br208215) im ASTA Ihrer App (dem Hauptthread Ihrer App) so früh wie möglich auf, um zufällige Aufrufe zuzulassen.</span><span class="sxs-lookup"><span data-stu-id="512a4-217">Calling [**CoreDispatcher::ProcessEvents**](https://msdn.microsoft.com/library/windows/apps/br208215) from your app's ASTA (the main thread of your app) as soon as possible to allow arbitrary calls.</span></span>

    <span data-ttu-id="512a4-218">Sie können sich daher nicht auf die unmittelbare Übermittlung von Aufrufen ohne Bezug zum ASTA Ihrer App verlassen.</span><span class="sxs-lookup"><span data-stu-id="512a4-218">That said, you cannot rely on immediate delivery of unrelated calls to your app's ASTA.</span></span> <span data-ttu-id="512a4-219">Weitere Informationen über asynchrone Aufrufe finden Sie unter [Asynchrone Programmierung in C++](https://msdn.microsoft.com/library/windows/apps/mt187334).</span><span class="sxs-lookup"><span data-stu-id="512a4-219">For more info about async calls, read [Asynchronous programming in C++](https://msdn.microsoft.com/library/windows/apps/mt187334).</span></span>

<span data-ttu-id="512a4-220">Im Allgemeinen sollten Sie bei der Entwicklung Ihrer UWP-App den [**CoreDispatcher**](https://msdn.microsoft.com/library/windows/apps/br208211) für [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) und [**CoreDispatcher::ProcessEvents**](https://msdn.microsoft.com/library/windows/apps/br208215) Ihrer App verwenden, um alle UI-Threads zu behandeln, anstatt eigene MTA-Threads zu erstellen und zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="512a4-220">Overall, when designing your UWP app, use the [**CoreDispatcher**](https://msdn.microsoft.com/library/windows/apps/br208211) for your app's [**CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) and [**CoreDispatcher::ProcessEvents**](https://msdn.microsoft.com/library/windows/apps/br208215) to handle all UI threads rather than trying to create and manage your MTA threads yourself.</span></span> <span data-ttu-id="512a4-221">Wenn Sie einen separaten Thread benötigen, der nicht mit dem **CoreDispatcher** behandelt werden kann, verwenden Sie asynchrone Muster, und beachten Sie die bereits erwähnten Ratschläge zur Vermeidung von Problemen mit Einstiegsinvarianzen.</span><span class="sxs-lookup"><span data-stu-id="512a4-221">When you need a separate thread that you cannot handle with the **CoreDispatcher**, use async patterns and follow the guidance mentioned earlier to avoid reentrancy issues.</span></span>

 

 




