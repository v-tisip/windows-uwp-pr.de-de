---
author: drewbatgit
ms.assetid: ''
description: Zeigt, wie Sie die Übertragung von Spielen durch eine UWP-App verwalten.
title: Übertragen von Spielen verwalten
ms.author: drewbat
ms.date: 09/27/2017
ms.topic: article
keywords: Windows 10, Spiel, Übertragung
ms.localizationpriority: medium
ms.openlocfilehash: ae70c29927925abcf948435ed768871ba2427fd9
ms.sourcegitcommit: 3257416aebb5a7b1515e107866806f8bd57845a8
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/16/2018
ms.locfileid: "7145122"
---
# <a name="manage-game-broadcasting"></a><span data-ttu-id="d73ca-104">Übertragen von Spielen verwalten</span><span class="sxs-lookup"><span data-stu-id="d73ca-104">Manage game broadcasting</span></span>
<span data-ttu-id="d73ca-105">In diesem Artikel wird erläutert, wie Sie die Übertragung von Spielen durch eine UWP-App verwalten.</span><span class="sxs-lookup"><span data-stu-id="d73ca-105">This article shows you how to manage game broadcasting for a UWP app.</span></span> <span data-ttu-id="d73ca-106">Benutzer müssen die Übertragung von Spielen mithilfe der Systembenutzeroberfläche initiieren, die in Windows integriert ist. Aber ab Version 1709 von Windows 10 können Apps die Übertragungsoberfläche des Systems starten und Benachrichtigungen empfangen, wenn die Übertragung gestartet oder beendet wird.</span><span class="sxs-lookup"><span data-stu-id="d73ca-106">Users must initiate broadcasting by using the system UI that is built into Windows, but starting with Windows 10, version 1709, apps can launch the system broadcasting UI and can receive notifications when broadcasting starts and stops.</span></span>

## <a name="add-the-windows-desktop-extensions-for-the-uwp-to-your-app"></a><span data-ttu-id="d73ca-107">Hinzufügen der „Windows Desktop Extensions for the UWP” zu Ihrer App</span><span class="sxs-lookup"><span data-stu-id="d73ca-107">Add the Windows Desktop Extensions for the UWP to your app</span></span>
<span data-ttu-id="d73ca-108">Die APIs aus dem Namespace **[Windows.Media.AppBroadcasting](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting)** zur Verwaltung der App-Übertragung sind nicht im Universal API-Vertrag enthalten.</span><span class="sxs-lookup"><span data-stu-id="d73ca-108">The APIs for managing app broadcasting, found in the **[Windows.Media.AppBroadcasting](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting)** namespace, are not included in the Universal API contract.</span></span> <span data-ttu-id="d73ca-109">Für den Zugriff auf die APIs müssen Sie Ihrer App mit den folgenden Schritten einen Verweis auf die „Windows Desktop Extensions for the UWP” hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="d73ca-109">To access the APIs, you must add a reference to the Windows Desktop Extensions for the UWP to your app with the following steps.</span></span>

1. <span data-ttu-id="d73ca-110">Erweitern Sie im **Projektmappen-Explorer** Ihr UWP-Projekt, klicken Sie mit der rechten Maustaste auf **Verweise**, und wählen Sie **Verweis hinzufügen** aus.</span><span class="sxs-lookup"><span data-stu-id="d73ca-110">In Visual Studio, in **Solution Explorer**, expand your UWP project and right-click **References** and then select **Add Reference...**.</span></span> 
2. <span data-ttu-id="d73ca-111">Erweitern Sie den Knoten **Universal Windows**, und wählen Sie **Erweiterungen** aus.</span><span class="sxs-lookup"><span data-stu-id="d73ca-111">Expand the **Universal Windows** node and select **Extensions**.</span></span>
3. <span data-ttu-id="d73ca-112">In der Liste der Erweiterungen aktivieren Sie das Kontrollkästchen neben dem Eintrag **Windows Desktop Extensions for the UWP**, der dem Zielbuild für Ihr Projekt entspricht.</span><span class="sxs-lookup"><span data-stu-id="d73ca-112">In the list of extensions check the checkbox next to the **Windows Desktop Extensions for the UWP** entry that matches the target build for your project.</span></span> <span data-ttu-id="d73ca-113">Die Übertragungsfeatures der App sind ab der Version 1709 verfügbar.</span><span class="sxs-lookup"><span data-stu-id="d73ca-113">For the app broadcast features, the version must be 1709 or greater.</span></span>
4. <span data-ttu-id="d73ca-114">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="d73ca-114">Click **OK**.</span></span>

## <a name="launch-the-system-ui-to-allow-the-user-to-initiate-broadcasting"></a><span data-ttu-id="d73ca-115">Starten Sie die Systembenutzeroberfläche, damit der Benutzer die Übertragung initiieren kann.</span><span class="sxs-lookup"><span data-stu-id="d73ca-115">Launch the system UI to allow the user to initiate broadcasting</span></span>
<span data-ttu-id="d73ca-116">Es gibt verschiedene Gründe dafür, dass Ihre App momentan möglicherweise nicht übertragen kann. Beispielsweise könnte das aktuelle Gerät nicht den Hardwareanforderungen für Übertragungen entsprechen, oder eine andere App überträgt gerade Daten.</span><span class="sxs-lookup"><span data-stu-id="d73ca-116">There are several reasons that your app may not currently be able to broadcast, including if the current device doesn't meet the hardware requirements for broadcasting or if another app is currently broadcasting.</span></span> <span data-ttu-id="d73ca-117">Vor dem Starten der Systembenutzeroberfläche sollten Sie überprüfen, ob Ihre App momentan übertragen kann.</span><span class="sxs-lookup"><span data-stu-id="d73ca-117">Before launching the system UI, you can check to see if your app is currently able to broadcast.</span></span> <span data-ttu-id="d73ca-118">Überprüfen Sie zunächst, ob die Übertragungs-APIs auf dem aktuellen Gerät verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="d73ca-118">First, check to see if the broadcast APIs are available on the current device.</span></span> <span data-ttu-id="d73ca-119">Die APIs sind nur auf Geräten verfügbar, auf denen Version 1709 (oder höher) von Windows10 ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="d73ca-119">The APIs are not available on devices running an OS version earlier than Windows 10, version 1709.</span></span> <span data-ttu-id="d73ca-120">Statt die Version des Betriebssystems zu überprüfen, können Sie die Methode **[ApiInformation.IsApiContractPresent](https://docs.microsoft.com/uwp/api/windows.foundation.metadata.apiinformation.isapicontractpresent)** verwenden, um festzustellen, ob Version 1.0 von *Windows.Media.AppBroadcasting.AppBroadcastingContract* vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="d73ca-120">Rather than check for a specific OS version, use the **[ApiInformation.IsApiContractPresent](https://docs.microsoft.com/uwp/api/windows.foundation.metadata.apiinformation.isapicontractpresent)** method to query for the *Windows.Media.AppBroadcasting.AppBroadcastingContract* version 1.0.</span></span> <span data-ttu-id="d73ca-121">Wenn dieser Vertrag vorhanden ist, sind die Übertragungs-APIs auf dem Gerät verfügbar.</span><span class="sxs-lookup"><span data-stu-id="d73ca-121">If this contract is present, then the broadcasting APIs are available on the device.</span></span>

<span data-ttu-id="d73ca-122">Als Nächstes rufen eine Instanz der Klasse **[AppBroadcastingUI](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingui)** ab, indem Sie die Factorymethode **[GetDefault](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingui.GetDefault)** auf einem PC aufrufen, auf dem nur ein einzelner Benutzer angemeldet ist.</span><span class="sxs-lookup"><span data-stu-id="d73ca-122">Next, get an instance of the **[AppBroadcastingUI](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingui)** class by calling the factory method **[GetDefault](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingui.GetDefault)** on PC, where there is a single user signed in at a time.</span></span> <span data-ttu-id="d73ca-123">Auf XBox, wo mehrere Benutzer angemeldet sein können, rufen Sie stattdessen **[GetForUser](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingui.getforuser)** auf.</span><span class="sxs-lookup"><span data-stu-id="d73ca-123">On XBox, where multiple users can be signed in, call **[GetForUser](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingui.getforuser)** instead.</span></span> <span data-ttu-id="d73ca-124">Rufen Sie dann **[GetStatus](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingui.GetStatus)** auf, um den Übertragungsstatus Ihrer App zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="d73ca-124">Then call **[GetStatus](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingui.GetStatus)** to get the broadcasting status of your app.</span></span>

<span data-ttu-id="d73ca-125">Über die Eigenschaft **[CanStartBroadcast](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingstatus.CanStartBroadcast)** der Klasse **AppBroadcastingStatus** erfahren Sie, ob die App momentan eine Übertragung starten kann.</span><span class="sxs-lookup"><span data-stu-id="d73ca-125">The **[CanStartBroadcast](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingstatus.CanStartBroadcast)** property of the **AppBroadcastingStatus** class tells you whether the app can currently start broadcasting.</span></span> <span data-ttu-id="d73ca-126">Wenn sie das nicht kann, überprüfen Sie die Eigenschaft **[Details](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingstatus.Details)**, um festzustellen, warum keine Übertragung möglich ist.</span><span class="sxs-lookup"><span data-stu-id="d73ca-126">If not, you can check the **[Details](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingstatus.Details)** property to determine the reason broadcasting is not available.</span></span> <span data-ttu-id="d73ca-127">Je nach Ursache sollten Sie dem Benutzer den Status oder Anweisungen zum Aktivieren der Übertragung anzeigen.</span><span class="sxs-lookup"><span data-stu-id="d73ca-127">Depending on the reason, you may want to display the status to the user or show instructions for enabling broadcasting.</span></span>

[!code-cpp[CanStartBroadcast](./code/AppBroadcast/cpp/AppBroadcastExampleApp/App.cpp#SnippetCanStartBroadcast)]

<span data-ttu-id="d73ca-128">Veranlassen Sie, dass die Übertragungsbenutzeroberfläche der App vom System angezeigt wird, indem Sie **[ShowBroadcastUI](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingui.ShowBroadcastUI)** aufrufen.</span><span class="sxs-lookup"><span data-stu-id="d73ca-128">Request that the app broadcast UI be shown by the system by calling **[ShowBroadcastUI](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingui.ShowBroadcastUI)**.</span></span>

> [!NOTE] 
> <span data-ttu-id="d73ca-129">Die Methode **ShowBroadcastUI** ist eine Anforderung, die auch fehlschlagen kann. Der Erfolg ist vom aktuellen Zustand des Systems abhängig.</span><span class="sxs-lookup"><span data-stu-id="d73ca-129">The **ShowBroadcastUI** method represents a request that may not succeed, depending on the current state of the system.</span></span> <span data-ttu-id="d73ca-130">Ihre App sollte nicht davon ausgehen, dass die Übertragung nach dem Aufrufen dieser Methode begonnen hat.</span><span class="sxs-lookup"><span data-stu-id="d73ca-130">Your app should not assume that broadcasting has begun after calling this method.</span></span> <span data-ttu-id="d73ca-131">Verwenden Sie das Ereignis **[IsCurrentAppBroadcastingChanged](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingmonitor.IsCurrentAppBroadcastingChanged)**, um benachrichtigt zu werden, ob die Übertragung startet oder beendet wird.</span><span class="sxs-lookup"><span data-stu-id="d73ca-131">Use the **[IsCurrentAppBroadcastingChanged](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingmonitor.IsCurrentAppBroadcastingChanged)** event to be notified when broadcasting starts or stops.</span></span>

[!code-cpp[LaunchBroadcastUI](./code/AppBroadcast/cpp/AppBroadcastExampleApp/App.cpp#SnippetLaunchBroadcastUI)]

## <a name="receive-notifications-when-broadcasting-starts-and-stops"></a><span data-ttu-id="d73ca-132">Empfangen von Benachrichtigungen beim Starten und Beenden von Übertragungen</span><span class="sxs-lookup"><span data-stu-id="d73ca-132">Receive notifications when broadcasting starts and stops</span></span>
<span data-ttu-id="d73ca-133">Um Benachrichtigungen zu erhalten, wenn der Benutzer eine App-Übertragung über die Systembenutzeroberfläche startet oder beendet, initialisieren Sie eine Instanz der Klasse **[AppBroadcastingMonitor](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingmonitor)**, und registrieren Sie einen Handler für das Ereignis **[IsCurrentAppBroadcastingChanged](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingmonitor.IsCurrentAppBroadcastingChanged)**.</span><span class="sxs-lookup"><span data-stu-id="d73ca-133">Register to receive notifications when the user uses the system UI to start or stop broadcasting your app by initializing an instance of **[AppBroadcastingMonitor](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingmonitor)** class and registering a handler for the  **[IsCurrentAppBroadcastingChanged](https://docs.microsoft.com/uwp/api/windows.media.appbroadcasting.appbroadcastingmonitor.IsCurrentAppBroadcastingChanged)** event.</span></span> <span data-ttu-id="d73ca-134">Wie im vorherigen Abschnitt erläutert, müssen Sie zu einem bestimmten Zeitpunkt die Methode **[ApiInformation.IsApiContractPresent](https://docs.microsoft.com/uwp/api/windows.foundation.metadata.apiinformation.isapicontractpresent)** verwenden, um sicherzustellen, dass die Übertragungs-APIs auf dem Gerät vorhanden sind, bevor Sie versuchen, diese APIs zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="d73ca-134">As discussed in the previous section, be sure to use the **[ApiInformation.IsApiContractPresent](https://docs.microsoft.com/uwp/api/windows.foundation.metadata.apiinformation.isapicontractpresent)** at some point to verify that the broadcasting APIs are present on the device before attempting to use them.</span></span> 

[!code-cpp[AppBroadcastingRegisterChangedHandler](./code/AppBroadcast/cpp/AppBroadcastExampleApp/App.cpp#SnippetAppBroadcastingRegisterChangedHandler)]

<span data-ttu-id="d73ca-135">Im Handler für das Ereignis **IsCurrentAppBroadcastingChanged** können Sie die Benutzeroberfläche Ihrer App dem aktuellen Status der Übertragung entsprechend aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="d73ca-135">In the handler for the **IsCurrentAppBroadcastingChanged** event, you may want to update your app's UI to reflect the current broadcasting state.</span></span>

[!code-cpp[AppBroadcastingChangedHandler](./code/AppBroadcast/cpp/AppBroadcastExampleApp/App.cpp#SnippetAppBroadcastingChangedHandler)]

## <a name="related-topics"></a><span data-ttu-id="d73ca-136">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="d73ca-136">Related topics</span></span>

* [<span data-ttu-id="d73ca-137">Gaming</span><span class="sxs-lookup"><span data-stu-id="d73ca-137">Gaming</span></span>](index.md)

 

 




