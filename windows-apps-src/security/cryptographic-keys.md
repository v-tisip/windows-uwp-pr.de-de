---
title: "Kryptografische Schlüssel"
description: "In diesem Artikel wird erläutert, wie Sie mithilfe standardmäßiger Schlüsselableitungsfunktionen Schlüssel ableiten und wie Sie Inhalte mithilfe symmetrischer und asymmetrischer Schlüssel verschlüsseln können."
ms.assetid: F35BEBDF-28C5-4F91-A94E-F7D862B6ED59
author: awkoren
ms.author: alkoren
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows10, UWP
ms.openlocfilehash: 4026f1fa95261d9b05c8d1e8c7ace12b11503a17
ms.sourcegitcommit: 909d859a0f11981a8d1beac0da35f779786a6889
ms.translationtype: HT
ms.contentlocale: de-DE
---
# <a name="cryptographic-keys"></a><span data-ttu-id="63407-104">Kryptografische Schlüssel</span><span class="sxs-lookup"><span data-stu-id="63407-104">Cryptographic keys</span></span>


<span data-ttu-id="63407-105">\[ Aktualisiert für UWP-Apps unter Windows10.</span><span class="sxs-lookup"><span data-stu-id="63407-105">\[ Updated for UWP apps on Windows 10.</span></span> <span data-ttu-id="63407-106">Artikel zu Windows8.x finden Sie im [Archiv](http://go.microsoft.com/fwlink/p/?linkid=619132) \]</span><span class="sxs-lookup"><span data-stu-id="63407-106">For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \]</span></span>


<span data-ttu-id="63407-107">In diesem Artikel wird erläutert, wie Sie mithilfe standardmäßiger Schlüsselableitungsfunktionen Schlüssel ableiten und wie Sie Inhalte mithilfe symmetrischer und asymmetrischer Schlüssel verschlüsseln können.</span><span class="sxs-lookup"><span data-stu-id="63407-107">This article shows how to use standard key derivation functions to derive keys and how to encrypt content using symmetric and asymmetric keys.</span></span> 

## <a name="symmetric-keys"></a><span data-ttu-id="63407-108">Symmetrische Schlüssel</span><span class="sxs-lookup"><span data-stu-id="63407-108">Symmetric keys</span></span>


<span data-ttu-id="63407-109">Für die symmetrische Verschlüsselung, auch Verschlüsselung mit geheimem Schlüssel genannt, muss der Schlüssel, der für die Verschlüsselung verwendet wird, auch für die Entschlüsselung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="63407-109">Symmetric key encryption, also called secret key encryption, requires that the key used for encryption also be used for decryption.</span></span> <span data-ttu-id="63407-110">Mit einer [**SymmetricKeyAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241537)-Klasse können Sie einen symmetrischen Algorithmus angeben und einen Schlüssel erstellen oder importieren.</span><span class="sxs-lookup"><span data-stu-id="63407-110">You can use a [**SymmetricKeyAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241537) class to specify a symmetric algorithm and create or import a key.</span></span> <span data-ttu-id="63407-111">Sie können statische Methoden für die [**CryptographicEngine**](https://msdn.microsoft.com/library/windows/apps/br241490)-Klasse verwenden, um Daten mit dem Algorithmus und dem Schlüssel zu ver- und entschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="63407-111">You can use static methods on the [**CryptographicEngine**](https://msdn.microsoft.com/library/windows/apps/br241490) class to encrypt and decrypt data by using the algorithm and key.</span></span>

<span data-ttu-id="63407-112">Die Verschlüsselung mit symmetrischem Schlüssel verwendet in der Regel Blockchiffren und Blockchiffremodi.</span><span class="sxs-lookup"><span data-stu-id="63407-112">Symmetric key encryption typically uses block ciphers and block cipher modes.</span></span> <span data-ttu-id="63407-113">Eine Blockchiffre ist eine symmetrische Verschlüsselungsfunktion, die mit Blöcken mit fester Größe arbeitet.</span><span class="sxs-lookup"><span data-stu-id="63407-113">A block cipher is a symmetric encryption function that operates on fixed size blocks.</span></span> <span data-ttu-id="63407-114">Wenn die zu verschlüsselnde Nachricht länger als die Blocklänge ist, muss der Blockchiffremodus verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="63407-114">If the message you want to encrypt is longer than the block length, you must use a block cipher mode.</span></span> <span data-ttu-id="63407-115">Ein Blockchiffremodus ist eine symmetrische Verschlüsselungsfunktion, die mithilfe einer Blockchiffre erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="63407-115">A block cipher mode is a symmetric encryption function built by using a block cipher.</span></span> <span data-ttu-id="63407-116">Er verschlüsselt Klartext als eine Reihe von Blöcken mit fester Größe.</span><span class="sxs-lookup"><span data-stu-id="63407-116">It encrypts plaintext as a series of fixed size blocks.</span></span> <span data-ttu-id="63407-117">Folgende Modi werden für Apps unterstützt:</span><span class="sxs-lookup"><span data-stu-id="63407-117">The following modes are supported for apps:</span></span>

-   <span data-ttu-id="63407-118">Der ECB (Electronic Codebook)-Modus verschlüsselt jeden Block der Nachricht einzeln.</span><span class="sxs-lookup"><span data-stu-id="63407-118">The ECB (electronic codebook) mode encrypts each block of the message separately.</span></span> <span data-ttu-id="63407-119">Er gilt nicht als sicherer Verschlüsselungsmodus.</span><span class="sxs-lookup"><span data-stu-id="63407-119">This is not considered a secure encryption mode.</span></span>
-   <span data-ttu-id="63407-120">Der CBC (Cipher Block Chaining)-Modus verwendet den vorherigen Chiffretextblock, um den aktuellen Block zu verschleiern.</span><span class="sxs-lookup"><span data-stu-id="63407-120">The CBC (cipher block chaining) mode uses the previous ciphertext block to obfuscate the current block.</span></span> <span data-ttu-id="63407-121">Sie müssen festlegen, welcher Wert für den ersten Block verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="63407-121">You must determine what value to use for the first block.</span></span> <span data-ttu-id="63407-122">Der Wert wird Initialisierungsvektor (IV) genannt .</span><span class="sxs-lookup"><span data-stu-id="63407-122">This value is called the initialization vector (IV).</span></span>
-   <span data-ttu-id="63407-123">Der CCM (Counter with CBC-MAC)-Modus kombiniert den CBC-Blockchiffremodus mit einem Nachrichtenauthentifizierungscode (MAC).</span><span class="sxs-lookup"><span data-stu-id="63407-123">The CCM (counter with CBC-MAC) mode combines the CBC block cipher mode with a message authentication code (MAC).</span></span>
-   <span data-ttu-id="63407-124">Der GCM (Galois Counter Mode)-Modus kombiniert den Counter-Modus mit dem Galois-Authentifizierungsmodus.</span><span class="sxs-lookup"><span data-stu-id="63407-124">The GCM (Galois counter mode) mode combines the counter encryption mode with the Galois authentication mode.</span></span>

<span data-ttu-id="63407-125">Für einige Modi wie zum Beispiel CBC ist ein Initialisierungsvektor (IV) für den ersten Chiffretextblock erforderlich.</span><span class="sxs-lookup"><span data-stu-id="63407-125">Some modes such as CBC require that you use an initialization vector (IV) for the first ciphertext block.</span></span> <span data-ttu-id="63407-126">Im Folgenden finden Sie einige häufig verwendete Initialisierungsvektoren.</span><span class="sxs-lookup"><span data-stu-id="63407-126">The following are common initialization vectors.</span></span> <span data-ttu-id="63407-127">Sie können den IV angeben, indem Sie [**CryptographicEngine.Encrypt**](https://msdn.microsoft.com/library/windows/apps/br241494) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="63407-127">You specify the IV when calling [**CryptographicEngine.Encrypt**](https://msdn.microsoft.com/library/windows/apps/br241494).</span></span> <span data-ttu-id="63407-128">In den meisten Fällen ist es wichtig, dass derselbe IV niemals mit demselben Schlüssel erneut verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="63407-128">For most cases it is important that the IV never be reused with the same key.</span></span>

-   <span data-ttu-id="63407-129">Bei einem festen IV kommt derselbe IV für alle zu verschlüsselnden Nachrichten zum Einsatz.</span><span class="sxs-lookup"><span data-stu-id="63407-129">Fixed uses the same IV for all messages to be encrypted.</span></span> <span data-ttu-id="63407-130">Dabei werden Informationen weitergegeben und die Nutzung wird nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="63407-130">This leaks information and its use is not recommended.</span></span>
-   <span data-ttu-id="63407-131">Im Counter-Modus wird der IV bei jedem Block erhöht.</span><span class="sxs-lookup"><span data-stu-id="63407-131">Counter increments the IV for each block.</span></span>
-   <span data-ttu-id="63407-132">Im Zufallsmodus wird ein pseudozufälliger IV erzeugt.</span><span class="sxs-lookup"><span data-stu-id="63407-132">Random creates a pseudorandom IV.</span></span> <span data-ttu-id="63407-133">Sie können [**CryptographicBuffer.GenerateRandom**](https://msdn.microsoft.com/library/windows/apps/br241392) verwenden, um den IV zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="63407-133">You can use [**CryptographicBuffer.GenerateRandom**](https://msdn.microsoft.com/library/windows/apps/br241392) to create the IV.</span></span>
-   <span data-ttu-id="63407-134">„Nonce-generiert“ bedeutet, dass eine eindeutige Zahl für jede zu verschlüsselnde Nachricht verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="63407-134">Nonce-Generated uses a unique number for each message to be encrypted.</span></span> <span data-ttu-id="63407-135">In der Regel ist eine Nonce eine modifizierte Nachricht oder ein Transaktionsbezeichner.</span><span class="sxs-lookup"><span data-stu-id="63407-135">Typically, the nonce is a modified message or transaction identifier.</span></span> <span data-ttu-id="63407-136">Die Nonce muss nicht geheim gehalten werden, sollte jedoch niemals mit demselben Schlüssel wiederverwendet werden.</span><span class="sxs-lookup"><span data-stu-id="63407-136">The nonce does not have to be kept secret, but it should never be reused under the same key.</span></span>

<span data-ttu-id="63407-137">In den meisten Modi muss die Länge des Klartextes ein genaues Vielfaches der Blockgröße sein.</span><span class="sxs-lookup"><span data-stu-id="63407-137">Most modes require that the length of the plaintext be an exact multiple of the block size.</span></span> <span data-ttu-id="63407-138">Hierfür ist es normalerweise erforderlich, den Klartext aufzufüllen, um die geeignete Länge zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="63407-138">This usually requires that you pad the plaintext to obtain the appropriate length.</span></span>

<span data-ttu-id="63407-139">Während Blockchiffren zum Verschlüsseln fester Datenblöcke dienen, sind Stromchiffren symmetrische Verschlüsselungsfunktionen, die Klartextbits mit einem pseudozufälligen Bitstrom (Schlüsselstrom genannt) kombinieren, um den Chiffretext zu generieren.</span><span class="sxs-lookup"><span data-stu-id="63407-139">While block ciphers encrypt fixed size blocks of data, stream ciphers are symmetric encryption functions that combine plaintext bits with a pseudorandom bit stream (called a key stream) to generate the ciphertext.</span></span> <span data-ttu-id="63407-140">Einige Blockchiffremodi wie Output Feedback Mode (OTF) und Counter Mode (CTR) machen aus einer Blockchiffre faktisch eine Stromchiffre.</span><span class="sxs-lookup"><span data-stu-id="63407-140">Some block cipher modes such as output feedback mode (OTF) and counter mode (CTR) effectively turn a block cipher into a stream cipher.</span></span> <span data-ttu-id="63407-141">Echte Datenstromchiffren wie RC4 arbeiten jedoch üblicherweise mit höheren Geschwindigkeiten, als sie von Blockchiffremodi erreicht werden können.</span><span class="sxs-lookup"><span data-stu-id="63407-141">Actual stream ciphers such as RC4, however, typically operate at higher speeds than block cipher modes are capable of achieving.</span></span>

<span data-ttu-id="63407-142">Das folgende Beispiel zeigt die Verwendung eines symmetrischen Schlüssels mithilfe der [**SymmetricKeyAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241537)-Klasse, um Daten zu verschlüsseln und zu entschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="63407-142">The following example shows how to use the [**SymmetricKeyAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241537) class to create a symmetric key and use it to encrypt and decrypt data.</span></span>

## <a name="asymmetric-keys"></a><span data-ttu-id="63407-143">Asymmetrische Schlüssel</span><span class="sxs-lookup"><span data-stu-id="63407-143">Asymmetric keys</span></span>


<span data-ttu-id="63407-144">Bei der Kryptografie für asymmetrische Schlüssel, die auch als Kryptografie für öffentliche Schlüssel bezeichnet wird, werden für Ver- und Entschlüsselung ein öffentlicher und ein privater Schlüssel verwendet.</span><span class="sxs-lookup"><span data-stu-id="63407-144">Asymmetric key cryptography, also called public key cryptography, uses a public key and a private key to perform encryption and decryption.</span></span> <span data-ttu-id="63407-145">Die Schlüssel unterscheiden sich voneinander, stehen jedoch in einer mathematischen Beziehung zueinander.</span><span class="sxs-lookup"><span data-stu-id="63407-145">The keys are different but mathematically related.</span></span> <span data-ttu-id="63407-146">Normalerweise wird der private Schlüssel geheim gehalten. Mit dem privaten Schlüssel werden Daten entschlüsselt, während der öffentliche Schlüssel den betroffenen Parteien mitgeteilt wird, die damit die Daten entschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="63407-146">Typically the private key is kept secret and is used to decrypt data while the public key is distributed to interested parties and is used to encrypt data.</span></span> <span data-ttu-id="63407-147">Die asymmetrische Kryptographie ist auch hilfreich beim Signieren von Daten.</span><span class="sxs-lookup"><span data-stu-id="63407-147">Asymmetric cryptography is also useful for signing data.</span></span>

<span data-ttu-id="63407-148">Da die asymmetrische Kryptografie im Vergleich zur symmetrischen Kryptografie deutlich langsamer ist, werden mit ihr nur selten große Datenmengen direkt verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="63407-148">Because asymmetric cryptography is much slower than symmetric cryptography, it is seldom used to encrypt large amounts of data directly.</span></span> <span data-ttu-id="63407-149">Stattdessen wird sie häufig wie folgt zur Verschlüsselung von Schlüsseln verwendet:</span><span class="sxs-lookup"><span data-stu-id="63407-149">Instead, it is typically used in the following manner to encrypt keys.</span></span>

-   <span data-ttu-id="63407-150">Andrea möchte, dass Sven ihr ausschließlich verschlüsselte Nachrichten sendet.</span><span class="sxs-lookup"><span data-stu-id="63407-150">Alice requires that Bob send her only encrypted messages.</span></span>
-   <span data-ttu-id="63407-151">Andrea erstellt ein Schlüsselpaar aus privatem und öffentlichem Schlüssel, hält ihren privaten Schlüssel geheim und veröffentlicht ihren öffentlichen Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="63407-151">Alice creates a private/public key pair, keeps her private key secret and publishes her public key.</span></span>
-   <span data-ttu-id="63407-152">Sven möchte Andrea eine Nachricht senden.</span><span class="sxs-lookup"><span data-stu-id="63407-152">Bob has a message he wants to send to Alice.</span></span>
-   <span data-ttu-id="63407-153">Er erstellt einen symmetrischen Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="63407-153">Bob creates a symmetric key.</span></span>
-   <span data-ttu-id="63407-154">Mithilfe seines neuen symmetrischen Schlüssels verschlüsselt Sven seine Nachricht an Andrea.</span><span class="sxs-lookup"><span data-stu-id="63407-154">Bob uses his new symmetric key to encrypt his message to Alice.</span></span>
-   <span data-ttu-id="63407-155">Seinen symmetrischen Schlüssel verschlüsselt Sven mit dem öffentlichen Schlüssel von Andrea.</span><span class="sxs-lookup"><span data-stu-id="63407-155">Bob uses Alice’s public key to encrypt his symmetric key.</span></span>
-   <span data-ttu-id="63407-156">Sven sendet die verschlüsselte Nachricht und den verschlüsselten symmetrischen Schlüssel an Andrea (codiert).</span><span class="sxs-lookup"><span data-stu-id="63407-156">Bob sends the encrypted message and the encrypted symmetric key to Alice (enveloped).</span></span>
-   <span data-ttu-id="63407-157">Andrea entschlüsselt Svens symmetrischen Schlüssel mithilfe ihres privaten Schlüssels (aus dem Schlüsselpaar mit privatem und öffentlichem Schlüssel).</span><span class="sxs-lookup"><span data-stu-id="63407-157">Alice uses her private key (from the private/public pair) to decrypt Bob’s symmetric key.</span></span>
-   <span data-ttu-id="63407-158">Andrea entschlüsselt die Nachricht mithilfe von Svens symmetrischem Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="63407-158">Alice uses Bob’s symmetric key to decrypt the message.</span></span>

<span data-ttu-id="63407-159">Mit einem [**AsymmetricKeyAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241478)-Objekt können Sie einen asymmetrischen Algorithmus oder einen Signaturalgorithmus angeben, um ein kurzlebiges Schlüsselpaar zu erstellen bzw. zu importieren oder den öffentlichen Schlüssel eines Schlüsselpaares zu importieren.</span><span class="sxs-lookup"><span data-stu-id="63407-159">You can use an [**AsymmetricKeyAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241478) object to specify an asymmetric algorithm or a signing algorithm, to create or import an ephemeral key pair, or to import the public key portion of a key pair.</span></span>

## <a name="deriving-keys"></a><span data-ttu-id="63407-160">Ableiten von Schlüsseln</span><span class="sxs-lookup"><span data-stu-id="63407-160">Deriving keys</span></span>


<span data-ttu-id="63407-161">Es ist häufig erforderlich, zusätzliche Schlüssel von einem gemeinsamen geheimen Schlüssel abzuleiten.</span><span class="sxs-lookup"><span data-stu-id="63407-161">It is often necessary to derive additional keys from a shared secret.</span></span> <span data-ttu-id="63407-162">Sie können die [**KeyDerivationAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241518)-Klasse und eine der folgenden speziellen Methoden in der Klasse [**KeyDerivationParameters**](https://msdn.microsoft.com/library/windows/apps/br241524) verwenden, um Schlüssel abzuleiten.</span><span class="sxs-lookup"><span data-stu-id="63407-162">You can use the [**KeyDerivationAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241518) class and one of the following specialized methods in the [**KeyDerivationParameters**](https://msdn.microsoft.com/library/windows/apps/br241524) class to derive keys.</span></span>

| <span data-ttu-id="63407-163">Objekt</span><span class="sxs-lookup"><span data-stu-id="63407-163">Object</span></span>                                                                            | <span data-ttu-id="63407-164">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="63407-164">Description</span></span>                                                                                                                                |
|-----------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| [**<span data-ttu-id="63407-165">BuildForPbkdf2</span><span class="sxs-lookup"><span data-stu-id="63407-165">BuildForPbkdf2</span></span>**](https://msdn.microsoft.com/library/windows/apps/br241525)    | <span data-ttu-id="63407-166">Erstellt ein KeyDerivationParameters-Objekt zur Verwendung in der kennwortbasierten Funktion2 zum Ableiten von Schlüsseln (Password-Based Key Derivation Function 2, PBKDF2).</span><span class="sxs-lookup"><span data-stu-id="63407-166">Creates a KeyDerivationParameters object for use in the password-based key derivation function 2 (PBKDF2).</span></span>                                 |
| [**<span data-ttu-id="63407-167">BuildForSP800108</span><span class="sxs-lookup"><span data-stu-id="63407-167">BuildForSP800108</span></span>**](https://msdn.microsoft.com/library/windows/apps/br241526)  | <span data-ttu-id="63407-168">Erstellt ein KeyDerivationParameters-Objekt zur Verwendung in einer Funktion zum Ableiten von Schlüsseln im Zählermodus mit einem Hash-basierten Nachrichtenauthentifizierungscode (Hash-based Message Authentication Code, HMAC).</span><span class="sxs-lookup"><span data-stu-id="63407-168">Creates a KeyDerivationParameters object for use in a counter mode, hash-based message authentication code (HMAC) key derivation function.</span></span> |
| [**<span data-ttu-id="63407-169">BuildForSP80056a</span><span class="sxs-lookup"><span data-stu-id="63407-169">BuildForSP80056a</span></span>**](https://msdn.microsoft.com/library/windows/apps/br241527)  | <span data-ttu-id="63407-170">Erstellt ein KeyDerivationParameters-Objekt zur Verwendung in der Funktion SP800-56A zum Ableiten von Schlüsseln.</span><span class="sxs-lookup"><span data-stu-id="63407-170">Creates a KeyDerivationParameters object for use in the SP800-56A key derivation function.</span></span>                                                 |

 
