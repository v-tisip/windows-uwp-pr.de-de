---
title: Kryptografische Schlüssel
description: In diesem Artikel wird erläutert, wie Sie mithilfe standardmäßiger Schlüsselableitungsfunktionen Schlüssel ableiten und wie Sie Inhalte mithilfe symmetrischer und asymmetrischer Schlüssel verschlüsseln können.
ms.assetid: F35BEBDF-28C5-4F91-A94E-F7D862B6ED59
author: msatranjr
ms.author: misatran
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, Uwp, Sicherheit
ms.localizationpriority: medium
ms.openlocfilehash: d9a47ba36c84176e83a81dd234d05315aa1e2525
ms.sourcegitcommit: 93c0a60cf531c7d9fe7b00e7cf78df86906f9d6e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/21/2018
ms.locfileid: "7573244"
---
# <a name="cryptographic-keys"></a><span data-ttu-id="9a6c0-104">Kryptografische Schlüssel</span><span class="sxs-lookup"><span data-stu-id="9a6c0-104">Cryptographic keys</span></span>




<span data-ttu-id="9a6c0-105">In diesem Artikel wird erläutert, wie Sie mithilfe standardmäßiger Schlüsselableitungsfunktionen Schlüssel ableiten und wie Sie Inhalte mithilfe symmetrischer und asymmetrischer Schlüssel verschlüsseln können.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-105">This article shows how to use standard key derivation functions to derive keys and how to encrypt content using symmetric and asymmetric keys.</span></span> 

## <a name="symmetric-keys"></a><span data-ttu-id="9a6c0-106">Symmetrische Schlüssel</span><span class="sxs-lookup"><span data-stu-id="9a6c0-106">Symmetric keys</span></span>


<span data-ttu-id="9a6c0-107">Für die symmetrische Verschlüsselung, auch Verschlüsselung mit geheimem Schlüssel genannt, muss der Schlüssel, der für die Verschlüsselung verwendet wird, auch für die Entschlüsselung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-107">Symmetric key encryption, also called secret key encryption, requires that the key used for encryption also be used for decryption.</span></span> <span data-ttu-id="9a6c0-108">Mit einer [**SymmetricKeyAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241537)-Klasse können Sie einen symmetrischen Algorithmus angeben und einen Schlüssel erstellen oder importieren.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-108">You can use a [**SymmetricKeyAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241537) class to specify a symmetric algorithm and create or import a key.</span></span> <span data-ttu-id="9a6c0-109">Sie können statische Methoden für die [**CryptographicEngine**](https://msdn.microsoft.com/library/windows/apps/br241490)-Klasse verwenden, um Daten mit dem Algorithmus und dem Schlüssel zu ver- und entschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-109">You can use static methods on the [**CryptographicEngine**](https://msdn.microsoft.com/library/windows/apps/br241490) class to encrypt and decrypt data by using the algorithm and key.</span></span>

<span data-ttu-id="9a6c0-110">Die Verschlüsselung mit symmetrischem Schlüssel verwendet in der Regel Blockchiffren und Blockchiffremodi.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-110">Symmetric key encryption typically uses block ciphers and block cipher modes.</span></span> <span data-ttu-id="9a6c0-111">Eine Blockchiffre ist eine symmetrische Verschlüsselungsfunktion, die mit Blöcken mit fester Größe arbeitet.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-111">A block cipher is a symmetric encryption function that operates on fixed size blocks.</span></span> <span data-ttu-id="9a6c0-112">Wenn die zu verschlüsselnde Nachricht länger als die Blocklänge ist, muss der Blockchiffremodus verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-112">If the message you want to encrypt is longer than the block length, you must use a block cipher mode.</span></span> <span data-ttu-id="9a6c0-113">Ein Blockchiffremodus ist eine symmetrische Verschlüsselungsfunktion, die mithilfe einer Blockchiffre erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-113">A block cipher mode is a symmetric encryption function built by using a block cipher.</span></span> <span data-ttu-id="9a6c0-114">Er verschlüsselt Klartext als eine Reihe von Blöcken mit fester Größe.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-114">It encrypts plaintext as a series of fixed size blocks.</span></span> <span data-ttu-id="9a6c0-115">Folgende Modi werden für Apps unterstützt:</span><span class="sxs-lookup"><span data-stu-id="9a6c0-115">The following modes are supported for apps:</span></span>

-   <span data-ttu-id="9a6c0-116">Der ECB (Electronic Codebook)-Modus verschlüsselt jeden Block der Nachricht einzeln.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-116">The ECB (electronic codebook) mode encrypts each block of the message separately.</span></span> <span data-ttu-id="9a6c0-117">Er gilt nicht als sicherer Verschlüsselungsmodus.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-117">This is not considered a secure encryption mode.</span></span>
-   <span data-ttu-id="9a6c0-118">Der CBC (Cipher Block Chaining)-Modus verwendet den vorherigen Chiffretextblock, um den aktuellen Block zu verschleiern.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-118">The CBC (cipher block chaining) mode uses the previous ciphertext block to obfuscate the current block.</span></span> <span data-ttu-id="9a6c0-119">Sie müssen festlegen, welcher Wert für den ersten Block verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-119">You must determine what value to use for the first block.</span></span> <span data-ttu-id="9a6c0-120">Der Wert wird Initialisierungsvektor (IV) genannt .</span><span class="sxs-lookup"><span data-stu-id="9a6c0-120">This value is called the initialization vector (IV).</span></span>
-   <span data-ttu-id="9a6c0-121">Der CCM (Counter with CBC-MAC)-Modus kombiniert den CBC-Blockchiffremodus mit einem Nachrichtenauthentifizierungscode (MAC).</span><span class="sxs-lookup"><span data-stu-id="9a6c0-121">The CCM (counter with CBC-MAC) mode combines the CBC block cipher mode with a message authentication code (MAC).</span></span>
-   <span data-ttu-id="9a6c0-122">Der GCM (Galois Counter Mode)-Modus kombiniert den Counter-Modus mit dem Galois-Authentifizierungsmodus.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-122">The GCM (Galois counter mode) mode combines the counter encryption mode with the Galois authentication mode.</span></span>

<span data-ttu-id="9a6c0-123">Für einige Modi wie zum Beispiel CBC ist ein Initialisierungsvektor (IV) für den ersten Chiffretextblock erforderlich.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-123">Some modes such as CBC require that you use an initialization vector (IV) for the first ciphertext block.</span></span> <span data-ttu-id="9a6c0-124">Im Folgenden finden Sie einige häufig verwendete Initialisierungsvektoren.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-124">The following are common initialization vectors.</span></span> <span data-ttu-id="9a6c0-125">Sie können den IV angeben, indem Sie [**CryptographicEngine.Encrypt**](https://msdn.microsoft.com/library/windows/apps/br241494) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-125">You specify the IV when calling [**CryptographicEngine.Encrypt**](https://msdn.microsoft.com/library/windows/apps/br241494).</span></span> <span data-ttu-id="9a6c0-126">In den meisten Fällen ist es wichtig, dass derselbe IV niemals mit demselben Schlüssel erneut verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-126">For most cases it is important that the IV never be reused with the same key.</span></span>

-   <span data-ttu-id="9a6c0-127">Bei einem festen IV kommt derselbe IV für alle zu verschlüsselnden Nachrichten zum Einsatz.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-127">Fixed uses the same IV for all messages to be encrypted.</span></span> <span data-ttu-id="9a6c0-128">Dabei werden Informationen weitergegeben und die Nutzung wird nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-128">This leaks information and its use is not recommended.</span></span>
-   <span data-ttu-id="9a6c0-129">Im Counter-Modus wird der IV bei jedem Block erhöht.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-129">Counter increments the IV for each block.</span></span>
-   <span data-ttu-id="9a6c0-130">Im Zufallsmodus wird ein pseudozufälliger IV erzeugt.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-130">Random creates a pseudorandom IV.</span></span> <span data-ttu-id="9a6c0-131">Sie können [**CryptographicBuffer.GenerateRandom**](https://msdn.microsoft.com/library/windows/apps/br241392) verwenden, um den IV zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-131">You can use [**CryptographicBuffer.GenerateRandom**](https://msdn.microsoft.com/library/windows/apps/br241392) to create the IV.</span></span>
-   <span data-ttu-id="9a6c0-132">„Nonce-generiert“ bedeutet, dass eine eindeutige Zahl für jede zu verschlüsselnde Nachricht verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-132">Nonce-Generated uses a unique number for each message to be encrypted.</span></span> <span data-ttu-id="9a6c0-133">In der Regel ist eine Nonce eine modifizierte Nachricht oder ein Transaktionsbezeichner.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-133">Typically, the nonce is a modified message or transaction identifier.</span></span> <span data-ttu-id="9a6c0-134">Die Nonce muss nicht geheim gehalten werden, sollte jedoch niemals mit demselben Schlüssel wiederverwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-134">The nonce does not have to be kept secret, but it should never be reused under the same key.</span></span>

<span data-ttu-id="9a6c0-135">In den meisten Modi muss die Länge des Klartextes ein genaues Vielfaches der Blockgröße sein.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-135">Most modes require that the length of the plaintext be an exact multiple of the block size.</span></span> <span data-ttu-id="9a6c0-136">Hierfür ist es normalerweise erforderlich, den Klartext aufzufüllen, um die geeignete Länge zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-136">This usually requires that you pad the plaintext to obtain the appropriate length.</span></span>

<span data-ttu-id="9a6c0-137">Während Blockchiffren zum Verschlüsseln fester Datenblöcke dienen, sind Stromchiffren symmetrische Verschlüsselungsfunktionen, die Klartextbits mit einem pseudozufälligen Bitstrom (Schlüsselstrom genannt) kombinieren, um den Chiffretext zu generieren.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-137">While block ciphers encrypt fixed size blocks of data, stream ciphers are symmetric encryption functions that combine plaintext bits with a pseudorandom bit stream (called a key stream) to generate the ciphertext.</span></span> <span data-ttu-id="9a6c0-138">Einige Blockchiffremodi wie Output Feedback Mode (OTF) und Counter Mode (CTR) machen aus einer Blockchiffre faktisch eine Stromchiffre.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-138">Some block cipher modes such as output feedback mode (OTF) and counter mode (CTR) effectively turn a block cipher into a stream cipher.</span></span> <span data-ttu-id="9a6c0-139">Echte Datenstromchiffren wie RC4 arbeiten jedoch üblicherweise mit höheren Geschwindigkeiten, als sie von Blockchiffremodi erreicht werden können.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-139">Actual stream ciphers such as RC4, however, typically operate at higher speeds than block cipher modes are capable of achieving.</span></span>

<span data-ttu-id="9a6c0-140">Das folgende Beispiel zeigt die Verwendung eines symmetrischen Schlüssels mithilfe der [**SymmetricKeyAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241537)-Klasse, um Daten zu verschlüsseln und zu entschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-140">The following example shows how to use the [**SymmetricKeyAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241537) class to create a symmetric key and use it to encrypt and decrypt data.</span></span>

## <a name="asymmetric-keys"></a><span data-ttu-id="9a6c0-141">Asymmetrische Schlüssel</span><span class="sxs-lookup"><span data-stu-id="9a6c0-141">Asymmetric keys</span></span>


<span data-ttu-id="9a6c0-142">Bei der Kryptografie für asymmetrische Schlüssel, die auch als Kryptografie für öffentliche Schlüssel bezeichnet wird, werden für Ver- und Entschlüsselung ein öffentlicher und ein privater Schlüssel verwendet.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-142">Asymmetric key cryptography, also called public key cryptography, uses a public key and a private key to perform encryption and decryption.</span></span> <span data-ttu-id="9a6c0-143">Die Schlüssel unterscheiden sich voneinander, stehen jedoch in einer mathematischen Beziehung zueinander.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-143">The keys are different but mathematically related.</span></span> <span data-ttu-id="9a6c0-144">Normalerweise wird der private Schlüssel geheim gehalten. Mit dem privaten Schlüssel werden Daten entschlüsselt, während der öffentliche Schlüssel den betroffenen Parteien mitgeteilt wird, die damit die Daten entschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-144">Typically the private key is kept secret and is used to decrypt data while the public key is distributed to interested parties and is used to encrypt data.</span></span> <span data-ttu-id="9a6c0-145">Die asymmetrische Kryptographie ist auch hilfreich beim Signieren von Daten.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-145">Asymmetric cryptography is also useful for signing data.</span></span>

<span data-ttu-id="9a6c0-146">Da die asymmetrische Kryptografie im Vergleich zur symmetrischen Kryptografie deutlich langsamer ist, werden mit ihr nur selten große Datenmengen direkt verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-146">Because asymmetric cryptography is much slower than symmetric cryptography, it is seldom used to encrypt large amounts of data directly.</span></span> <span data-ttu-id="9a6c0-147">Stattdessen wird sie häufig wie folgt zur Verschlüsselung von Schlüsseln verwendet:</span><span class="sxs-lookup"><span data-stu-id="9a6c0-147">Instead, it is typically used in the following manner to encrypt keys.</span></span>

-   <span data-ttu-id="9a6c0-148">Andrea möchte, dass Sven ihr ausschließlich verschlüsselte Nachrichten sendet.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-148">Alice requires that Bob send her only encrypted messages.</span></span>
-   <span data-ttu-id="9a6c0-149">Andrea erstellt ein Schlüsselpaar aus privatem und öffentlichem Schlüssel, hält ihren privaten Schlüssel geheim und veröffentlicht ihren öffentlichen Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-149">Alice creates a private/public key pair, keeps her private key secret and publishes her public key.</span></span>
-   <span data-ttu-id="9a6c0-150">Sven möchte Andrea eine Nachricht senden.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-150">Bob has a message he wants to send to Alice.</span></span>
-   <span data-ttu-id="9a6c0-151">Er erstellt einen symmetrischen Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-151">Bob creates a symmetric key.</span></span>
-   <span data-ttu-id="9a6c0-152">Mithilfe seines neuen symmetrischen Schlüssels verschlüsselt Sven seine Nachricht an Andrea.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-152">Bob uses his new symmetric key to encrypt his message to Alice.</span></span>
-   <span data-ttu-id="9a6c0-153">Seinen symmetrischen Schlüssel verschlüsselt Sven mit dem öffentlichen Schlüssel von Andrea.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-153">Bob uses Alice’s public key to encrypt his symmetric key.</span></span>
-   <span data-ttu-id="9a6c0-154">Sven sendet die verschlüsselte Nachricht und den verschlüsselten symmetrischen Schlüssel an Andrea (codiert).</span><span class="sxs-lookup"><span data-stu-id="9a6c0-154">Bob sends the encrypted message and the encrypted symmetric key to Alice (enveloped).</span></span>
-   <span data-ttu-id="9a6c0-155">Andrea entschlüsselt Svens symmetrischen Schlüssel mithilfe ihres privaten Schlüssels (aus dem Schlüsselpaar mit privatem und öffentlichem Schlüssel).</span><span class="sxs-lookup"><span data-stu-id="9a6c0-155">Alice uses her private key (from the private/public pair) to decrypt Bob’s symmetric key.</span></span>
-   <span data-ttu-id="9a6c0-156">Andrea entschlüsselt die Nachricht mithilfe von Svens symmetrischem Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-156">Alice uses Bob’s symmetric key to decrypt the message.</span></span>

<span data-ttu-id="9a6c0-157">Mit einem [**AsymmetricKeyAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241478)-Objekt können Sie einen asymmetrischen Algorithmus oder einen Signaturalgorithmus angeben, um ein kurzlebiges Schlüsselpaar zu erstellen bzw. zu importieren oder den öffentlichen Schlüssel eines Schlüsselpaares zu importieren.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-157">You can use an [**AsymmetricKeyAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241478) object to specify an asymmetric algorithm or a signing algorithm, to create or import an ephemeral key pair, or to import the public key portion of a key pair.</span></span>

## <a name="deriving-keys"></a><span data-ttu-id="9a6c0-158">Ableiten von Schlüsseln</span><span class="sxs-lookup"><span data-stu-id="9a6c0-158">Deriving keys</span></span>


<span data-ttu-id="9a6c0-159">Es ist häufig erforderlich, zusätzliche Schlüssel von einem gemeinsamen geheimen Schlüssel abzuleiten.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-159">It is often necessary to derive additional keys from a shared secret.</span></span> <span data-ttu-id="9a6c0-160">Sie können die [**KeyDerivationAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241518)-Klasse und eine der folgenden speziellen Methoden in der Klasse [**KeyDerivationParameters**](https://msdn.microsoft.com/library/windows/apps/br241524) verwenden, um Schlüssel abzuleiten.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-160">You can use the [**KeyDerivationAlgorithmProvider**](https://msdn.microsoft.com/library/windows/apps/br241518) class and one of the following specialized methods in the [**KeyDerivationParameters**](https://msdn.microsoft.com/library/windows/apps/br241524) class to derive keys.</span></span>

| <span data-ttu-id="9a6c0-161">Objekt</span><span class="sxs-lookup"><span data-stu-id="9a6c0-161">Object</span></span>                                                                            | <span data-ttu-id="9a6c0-162">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="9a6c0-162">Description</span></span>                                                                                                                                |
|-----------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| [**<span data-ttu-id="9a6c0-163">BuildForPbkdf2</span><span class="sxs-lookup"><span data-stu-id="9a6c0-163">BuildForPbkdf2</span></span>**](https://msdn.microsoft.com/library/windows/apps/br241525)    | <span data-ttu-id="9a6c0-164">Erstellt ein KeyDerivationParameters-Objekt zur Verwendung in der kennwortbasierten Funktion2 zum Ableiten von Schlüsseln (Password-Based Key Derivation Function 2, PBKDF2).</span><span class="sxs-lookup"><span data-stu-id="9a6c0-164">Creates a KeyDerivationParameters object for use in the password-based key derivation function 2 (PBKDF2).</span></span>                                 |
| [**<span data-ttu-id="9a6c0-165">BuildForSP800108</span><span class="sxs-lookup"><span data-stu-id="9a6c0-165">BuildForSP800108</span></span>**](https://msdn.microsoft.com/library/windows/apps/br241526)  | <span data-ttu-id="9a6c0-166">Erstellt ein KeyDerivationParameters-Objekt zur Verwendung in einer Funktion zum Ableiten von Schlüsseln im Zählermodus mit einem Hash-basierten Nachrichtenauthentifizierungscode (Hash-based Message Authentication Code, HMAC).</span><span class="sxs-lookup"><span data-stu-id="9a6c0-166">Creates a KeyDerivationParameters object for use in a counter mode, hash-based message authentication code (HMAC) key derivation function.</span></span> |
| [**<span data-ttu-id="9a6c0-167">BuildForSP80056a</span><span class="sxs-lookup"><span data-stu-id="9a6c0-167">BuildForSP80056a</span></span>**](https://msdn.microsoft.com/library/windows/apps/br241527)  | <span data-ttu-id="9a6c0-168">Erstellt ein KeyDerivationParameters-Objekt zur Verwendung in der Funktion SP800-56A zum Ableiten von Schlüsseln.</span><span class="sxs-lookup"><span data-stu-id="9a6c0-168">Creates a KeyDerivationParameters object for use in the SP800-56A key derivation function.</span></span>                                                 |

 
