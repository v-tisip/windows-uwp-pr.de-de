---
title: Windows Hello
description: In diesem Artikel wird die neue Windows-Hello-Technologie beschrieben, die im Lieferumfang des Windows10-Betriebssystems enthalten ist. Zudem wird erörtert, wie Entwickler diese Technologie implementieren können, um ihre UWP (Universelle Windows-Plattform)-Apps und Back-End-Dienste zu schützen. Der Artikel hebt die spezifischen Funktionen dieser Technologien hervor, die dabei helfen, aus der Verwendung herkömmlicher Anmeldeinformationen erwachsende Bedrohungen zu mindern. Darüber hinaus bietet er eine Anleitung dazu, wie diese Technologien als Bestandteil Ihrer Windows10-Einführung entworfen und bereitgestellt werden.
ms.assetid: 0B907160-B344-4237-AF82-F9D47BCEE646
author: PatrickFarley
ms.author: pafarley
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, Uwp, Sicherheit
ms.localizationpriority: medium
ms.openlocfilehash: 9b2ee216059163e7232d65eb515645d9e7db56b3
ms.sourcegitcommit: ed0304b8a214c03b8aab74b8ef12c9f82b8e3c5f
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/19/2018
ms.locfileid: "7303002"
---
# <a name="windows-hello"></a><span data-ttu-id="677fd-105">Windows Hello</span><span class="sxs-lookup"><span data-stu-id="677fd-105">Windows Hello</span></span>




<span data-ttu-id="677fd-106">In diesem Artikel wird die neue Windows-Hello-Technologie beschrieben, die im Lieferumfang des Windows10-Betriebssystems enthalten ist. Zudem wird erörtert, wie Entwickler diese Technologie implementieren können, um ihre UWP (Universelle Windows-Plattform)-Apps und Back-End-Dienste zu schützen.</span><span class="sxs-lookup"><span data-stu-id="677fd-106">This article describes the new Windows Hello technology that is shipping as part of the Windows 10 operating system and discusses how developers can implement this technology to protect their Universal Windows Platform (UWP) apps and backend services.</span></span> <span data-ttu-id="677fd-107">Der Artikel hebt die spezifischen Funktionen dieser Technologien hervor, die dabei helfen, aus der Verwendung herkömmlicher Anmeldeinformationen erwachsende Bedrohungen zu mindern. Darüber hinaus bietet er eine Anleitung dazu, wie diese Technologien als Bestandteil Ihrer Windows10-Einführung entworfen und bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-107">It highlights specific capabilities of these technologies that help mitigate threats that arise from using conventional credentials and provides guidance about designing and deploying these technologies as part of a Windows 10 rollout.</span></span>

<span data-ttu-id="677fd-108">Beachten Sie, dass der Schwerpunkt dieses Artikels auf der App-Entwicklung liegt.</span><span class="sxs-lookup"><span data-stu-id="677fd-108">Note that this article focuses on app development.</span></span> <span data-ttu-id="677fd-109">Weitere Informationen zu den Architektur- und Implementierungsdetails von Windows Hello finden Sie unter [Windows-Hello-Anleitung auf TechNet](https://technet.microsoft.com/library/mt589441.aspx).</span><span class="sxs-lookup"><span data-stu-id="677fd-109">For information on the architecture and implementation details of Windows Hello, see the [Windows Hello Guide on TechNet](https://technet.microsoft.com/library/mt589441.aspx).</span></span>

<span data-ttu-id="677fd-110">Ein vollständiges Codebeispiel finden Sie im [Windows-Hello-Codebeispiel auf GitHub](http://go.microsoft.com/fwlink/?LinkID=717812).</span><span class="sxs-lookup"><span data-stu-id="677fd-110">For a complete code sample, see the [Windows Hello code sample on GitHub](http://go.microsoft.com/fwlink/?LinkID=717812).</span></span>

<span data-ttu-id="677fd-111">Ein schrittweises Vorgehen zum Erstellen einer UWP-App mit Windows Hello und dem zugrunde liegenden Authentifizierungsdienst finden Sie in den Artikeln [Windows-Hello-Anmelde-App](microsoft-passport-login.md) und [Windows-Hello-Anmeldedienst](microsoft-passport-login-auth-service.md).</span><span class="sxs-lookup"><span data-stu-id="677fd-111">For a step-by-step walkthrough on creating a UWP app using Windows Hello and the backing authentication service, see the [Windows Hello login app](microsoft-passport-login.md) and [Windows Hello login service](microsoft-passport-login-auth-service.md) articles.</span></span>

## <a name="1-introduction"></a><span data-ttu-id="677fd-112">1 Einführung</span><span class="sxs-lookup"><span data-stu-id="677fd-112">1 Introduction</span></span>


<span data-ttu-id="677fd-113">Eine grundlegende Annahme über die Informationssicherheit besteht darin, dass ein System denjenigen ermitteln kann, der es verwendet.</span><span class="sxs-lookup"><span data-stu-id="677fd-113">A fundamental assumption about information security is that a system can identify who is using it.</span></span> <span data-ttu-id="677fd-114">Durch das Ermitteln eines Benutzers kann das System entscheiden, ob der Benutzer ordnungsgemäß identifiziert wurde (wird auch als Authentifizierung bezeichnet), und anschließend wird bestimmt, welche Aktionen der ordnungsgemäß authentifizierte Benutzer ausführen darf (Autorisierung).</span><span class="sxs-lookup"><span data-stu-id="677fd-114">Identifying a user allows the system to decide whether the user is identified appropriately (a process known as authentication), and then decide what a properly authenticated user should be able to do (authorization).</span></span> <span data-ttu-id="677fd-115">Die große Mehrheit der weltweit bereitgestellten Computersysteme ist davon abhängig, dass Authentifizierungs- und Autorisierungsentscheidungen auf der Grundlage von Benutzeranmeldeinformationen getroffen werden. Demzufolge bilden wiederverwendbare, vom Benutzer erstellte Kennwörter die Sicherheitsbasis für diese Systeme.</span><span class="sxs-lookup"><span data-stu-id="677fd-115">The overwhelming majority of computer systems deployed throughout the world depend on user credentials for making authentication and authorization decisions, which means that these systems depend on reusable, user-created passwords as the basis for their security.</span></span> <span data-ttu-id="677fd-116">Die oftmals zitierte Regel, dass die Authentifizierung etwas beinhalten kann, was man „weiß, hat oder ist“, fasst das Problem gut zusammen: Ein wiederverwendbares Kennwort ist an sich schon ein Authentifizierungsfaktor. Jeder, der das Kennwort kennt, kann sich demnach als der Benutzer ausgeben, dem das Kennwort gehört.</span><span class="sxs-lookup"><span data-stu-id="677fd-116">The oft-cited maxim that authentication can involve "something you know, something you have, or something you are" neatly highlights the issue: a reusable password is an authentication factor all by itself, so anyone who knows the password can impersonate the user who owns it.</span></span>

## <a name="11-problems-with-traditional-credentials"></a><span data-ttu-id="677fd-117">1.1 Probleme mit herkömmlichen Anmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="677fd-117">1.1 Problems with traditional credentials</span></span>


<span data-ttu-id="677fd-118">Seit der Mitte der 1960er Jahre, als Fernando Corbató und sein Team im Massachusetts Institute of Technology die Einführung des Kennworts meisterten, müssen Benutzer und Administratoren mit der Verwendung von Kennwörtern für die Benutzerauthentifizierung und -autorisierung leben.</span><span class="sxs-lookup"><span data-stu-id="677fd-118">Ever since the mid-1960s, when Fernando Corbató and his team at the Massachusetts Institute of Technology championed the introduction of the password, users and administrators have had to deal with the use of passwords for user authentication and authorization.</span></span> <span data-ttu-id="677fd-119">Mit der Zeit hat sich der Leistungsstandard für die Kennwortspeicherung und die Verwendung ein wenig verbessert (beispielsweise durch Kennworthashing und Salt. Es gibt jedoch weiterhin zwei Probleme.</span><span class="sxs-lookup"><span data-stu-id="677fd-119">Over time, the state of the art for password storage and use has advanced somewhat (with secure hashing and salting, for example), but we are still faced with two problems.</span></span> <span data-ttu-id="677fd-120">Kennwörter lassen sich leicht klonen und stehlen.</span><span class="sxs-lookup"><span data-stu-id="677fd-120">Passwords are easy to clone and they are easy to steal.</span></span> <span data-ttu-id="677fd-121">Außerdem werden sie durch Implementierungsfehler möglicherweise unsicher. Zudem müssen die Benutzer das Praktische und die Sicherheit ausgleichen.</span><span class="sxs-lookup"><span data-stu-id="677fd-121">In addition, implementation faults may render them insecure, and users have a hard time balancing convenience and security.</span></span>

## <a name="111-credential-theft"></a><span data-ttu-id="677fd-122">1.1.1. Diebstahl von Anmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="677fd-122">1.1.1 Credential theft</span></span>


<span data-ttu-id="677fd-123">Das größte Risiko in Bezug auf Kennwörtern ist: Ein Angreifer kann sie leicht stehlen.</span><span class="sxs-lookup"><span data-stu-id="677fd-123">The biggest risk of passwords is simple: an attacker can steal them easily.</span></span> <span data-ttu-id="677fd-124">Jeder Ort, an dem ein Kennwort eingegeben, verarbeitet oder gespeichert wird, ist anfällig.</span><span class="sxs-lookup"><span data-stu-id="677fd-124">Every place a password is entered, processed, or stored is vulnerable.</span></span> <span data-ttu-id="677fd-125">So kann ein Angreifer beispielsweise eine Sammlung an Kennwörtern oder Hashwerten von einem Authentifizierungsserver stehlen, indem er Lauschangriffe auf Netzwerkdatenverkehr eines Anwendungsservers ausführt, Schadsoftware in eine Anwendung oder auf einem Gerät einschleust, die Benutzertastaturanschläge auf einem Gerät aufzeichnet oder dem Benutzer zusieht, welche Zeichen er eingibt.</span><span class="sxs-lookup"><span data-stu-id="677fd-125">For example, an attacker can steal a collection of passwords or hashes from an authentication server by eavesdropping on network traffic to an application server, by implanting malware in an application or on a device, by logging user keystrokes on a device, or by watching to see which characters a user types.</span></span> <span data-ttu-id="677fd-126">Diese sind nur die häufigsten Angriffsmethoden.</span><span class="sxs-lookup"><span data-stu-id="677fd-126">These are just the most common attack methods.</span></span>

<span data-ttu-id="677fd-127">Ein weiteres verwandtes Risiko besteht im sogenannten „Credential Replay“ (Wiedergabe von Anmeldeinformationen). Hierbei erfasst ein Angreifer gültige Anmeldeinformationen, indem er einen Lauschangriff auf ein unsicheres Netzwerk ausführt und die Anmeldeinformationen später wiedergibt, um einen gültigen Benutzer zu imitieren.</span><span class="sxs-lookup"><span data-stu-id="677fd-127">Another related risk is that of credential replay, in which an attacker captures a valid credential by eavesdropping on an insecure network, and then replays it later to impersonate a valid user.</span></span> <span data-ttu-id="677fd-128">Die meisten Authentifizierungsprotokolle (einschließlich Kerberos und OAuth) schützen vor Replay-Angriffen, indem ein Zeitstempel im Anmeldeinformationsaustauschprozess eingefügt wird. Dadurch wird jedoch nur das Token geschützt, das vom Authentifizierungssystem ausgestellt wird, nicht aber das Kennwort, das vom Benutzer bereitgestellt wird, um sich ursprünglich anzumelden.</span><span class="sxs-lookup"><span data-stu-id="677fd-128">Most authentication protocols (including Kerberos and OAuth) protect against replay attacks by including a time stamp in the credential exchange process, but that tactic only protects the token that the authentication system issues, not the password that the user provides to get the ticket in the first place.</span></span>

## <a name="112-credential-reuse"></a><span data-ttu-id="677fd-129">1.1.2 Wiederverwendung von Anmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="677fd-129">1.1.2 Credential reuse</span></span>




<span data-ttu-id="677fd-130">Der häufige Ansatz, eine E-Mail-Adresse als den Benutzernamen zu verwenden, verschlimmert das Problem nur noch.</span><span class="sxs-lookup"><span data-stu-id="677fd-130">The common approach of using an email address as the username makes a bad problem worse.</span></span> <span data-ttu-id="677fd-131">Ein Angreifer, der eine Kombination aus Benutzernamen und Kennwort erfolgreich aus einem kompromittierten System wiederhergestellt hat, kann anschließend dieselbe Kombination auf anderen Systemen probieren.</span><span class="sxs-lookup"><span data-stu-id="677fd-131">An attacker who successfully recovers a username–password pair from a compromised system can then try that same pair on other systems.</span></span> <span data-ttu-id="677fd-132">Diese Taktik funktioniert erstaunlicherweise oft. Auf diese Weise können Angreifer ein kompromittiertes System als Sprungbrett zu anderen Systemen verwenden.</span><span class="sxs-lookup"><span data-stu-id="677fd-132">This tactic works surprisingly often to allow attackers to springboard from a compromised system into other systems.</span></span> <span data-ttu-id="677fd-133">Zudem führt das Verwenden von E-Mail-Adressen als Benutzernamen zu weiteren Problemen, die später in dieser Anleitung erörtert werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-133">The use of email addresses as usernames leads to additional problems that we will explore later in this guide.</span></span>

## <a name="12-solving-credential-problems"></a><span data-ttu-id="677fd-134">1.3 Beheben von Anmeldeinformationsproblemen</span><span class="sxs-lookup"><span data-stu-id="677fd-134">1.2 Solving credential problems</span></span>


<span data-ttu-id="677fd-135">Das Lösen von Problemen, die Kennwörter mit sich bringen, ist nicht einfach.</span><span class="sxs-lookup"><span data-stu-id="677fd-135">Solving the problems that passwords pose is tricky.</span></span> <span data-ttu-id="677fd-136">Die Verschärfung von Kennwortrichtlinien allein wird das Problem nicht beheben: Die Benutzer könnten ihre Kennwörter einfach wiederverwenden, teilen oder aufschreiben.</span><span class="sxs-lookup"><span data-stu-id="677fd-136">Tightening password policies alone will not do it; users may just recycle, share, or write down passwords.</span></span> <span data-ttu-id="677fd-137">Auch wenn Benutzerschulungen für die Authentifizierungssicherheit wichtig sind, wird das Problem durch die Schulung allein ebenfalls nicht beseitigt.</span><span class="sxs-lookup"><span data-stu-id="677fd-137">Although user education is critical for authentication security, education alone does not eliminate the problem either.</span></span>

<span data-ttu-id="677fd-138">Windows Hello ersetzt Kennwörter durch eine sichere zweistufige Authentifizierung (2FA). Dabei werden vorhandene Anmeldeinformationen überprüft und gerätespezifische Anmeldeinformationen erstellt, die durch eine Benutzergeste (Biometrie- oder PIN-basiert) geschützt sind.</span><span class="sxs-lookup"><span data-stu-id="677fd-138">Windows Hello replaces passwords with strong two-factor authentication (2FA) by verifying existing credentials and by creating a device-specific credential that a biometric or PIN-based user gesture protects.</span></span> 


## <a name="2-what-is-windows-hello"></a><span data-ttu-id="677fd-139">2 Was ist Windows Hello?</span><span class="sxs-lookup"><span data-stu-id="677fd-139">2 What is Windows Hello?</span></span>


<span data-ttu-id="677fd-140">Windows Hello ist der durch Microsoft für das neue in Windows 10 integrierte biometrische Anmeldesystem festgelegte Name.</span><span class="sxs-lookup"><span data-stu-id="677fd-140">Windows Hello is the name Microsoft has given to the new biometric sign-in system built into Windows 10.</span></span> <span data-ttu-id="677fd-141">Da es direkt im Betriebssystem integriert ist, ermöglicht Windows Hello die Gesichts- oder Fingerabdruckidentifikation zum Entsperren von Benutzergeräten.</span><span class="sxs-lookup"><span data-stu-id="677fd-141">Because it is built directly into the operating system, Windows Hello allows face or fingerprint identification to unlock users’ devices.</span></span> <span data-ttu-id="677fd-142">Die Authentifizierung erfolgt, wenn der Benutzer seine eindeutige biometrische ID übermittelt, um auf die gerätespezifischen Anmeldeinformationen zuzugreifen. Demzufolge kann sich ein Angreifer, der das Gerät gestohlen hat, nicht anmelden, es sei denn, der Angreifer verfügt über die PIN.</span><span class="sxs-lookup"><span data-stu-id="677fd-142">Authentication happens when the user supplies his or her unique biometric identifier to access the device-specific credentials, which means that an attacker who steals the device can’t log on to it unless that attacker has the PIN.</span></span> <span data-ttu-id="677fd-143">Der sichere Windows-Anmeldeinformationsspeicher schützt die biometrischen Daten auf dem Gerät.</span><span class="sxs-lookup"><span data-stu-id="677fd-143">The Windows secure credential store protects biometric data on the device.</span></span> <span data-ttu-id="677fd-144">Durch das Verwenden von Windows Hello zum Entsperren eines Geräts erhält autorisierte Benutzer Zugriff auf seine sämtlichen Windows-Funktionen, -Apps, -Daten, -Websites und -Dienste.</span><span class="sxs-lookup"><span data-stu-id="677fd-144">By using Windows Hello to unlock a device, the authorized user gains access to all of his or her Windows experience, apps, data, websites, and services.</span></span>

<span data-ttu-id="677fd-145">Der Windows Hello-Authentifikator wird auch als Hello bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="677fd-145">The Windows Hello authenticator is known as a Hello.</span></span> <span data-ttu-id="677fd-146">Ein Hello ist für die Kombination aus einem einzelnen Gerät und einem bestimmten Benutzer eindeutig.</span><span class="sxs-lookup"><span data-stu-id="677fd-146">A Hello is unique to the combination of an individual device and a specific user.</span></span> <span data-ttu-id="677fd-147">Es wird nicht auf mehreren Geräten verwendet, nicht für einen Server oder eine aufrufende App freigegeben und kann von einem Gerät nicht einfach extrahiert werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-147">It does not roam across devices, is not shared with a server or calling app, and cannot easily be extracted from a device.</span></span> <span data-ttu-id="677fd-148">Wenn mehrere Benutzer ein Gerät gemeinsam verwenden, muss jeder Benutzer ein eigenes Konto einrichten.</span><span class="sxs-lookup"><span data-stu-id="677fd-148">If multiple users share a device, each user needs to set up his or her own account.</span></span> <span data-ttu-id="677fd-149">Jedes Konto erhält ein eindeutiges Hello für dieses Gerät.</span><span class="sxs-lookup"><span data-stu-id="677fd-149">Every account gets a unique Hello for that device.</span></span> <span data-ttu-id="677fd-150">Sie können sich ein Hello als Token vorstellen, das Sie zum Entsperren (oder Freigeben) von gespeicherten Anmeldeinformationen verwenden können.</span><span class="sxs-lookup"><span data-stu-id="677fd-150">You can think of a Hello as a token you can use to unlock (or release) a stored credential.</span></span> <span data-ttu-id="677fd-151">Mit dem Hello an sich werden Sie nicht für eine App oder einen Dienst authentifiziert, es gibt jedoch die dafür benötigten Anmeldeinformationen frei.</span><span class="sxs-lookup"><span data-stu-id="677fd-151">The Hello itself does not authenticate you to an app or service, but it releases credentials that can.</span></span> <span data-ttu-id="677fd-152">Anders ausgedrückt, handelt es sich beim Hello nicht um Benutzeranmeldeinformationen, sondern um einen zweiten Faktor für die Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="677fd-152">In other words, the Hello is not a user credential but it is a second factor for the authenticating process.</span></span>

## <a name="21-windows-hello-authentication"></a><span data-ttu-id="677fd-153">2.1 Windows Hello-Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="677fd-153">2.1 Windows Hello authentication</span></span>


<span data-ttu-id="677fd-154">Windows Hello bietet Geräten eine zuverlässige Möglichkeit, einzelne Benutzer zu erkennen. Dies betrifft den ersten Teil des Wegs zwischen einem Benutzer und einem angeforderten Dienst- oder Datenelement.</span><span class="sxs-lookup"><span data-stu-id="677fd-154">Windows Hello provides a robust way for a device to recognize an individual user, which addresses the first part of the path between a user and a requested service or data item.</span></span> <span data-ttu-id="677fd-155">Nachdem das Gerät den Benutzer erkannt hat, muss es den Benutzer jedoch erst noch authentifizieren, bevor es entscheidet, ob er auf die angeforderte Ressource zugreifen darf.</span><span class="sxs-lookup"><span data-stu-id="677fd-155">After the device has recognized the user, it still must authenticate the user before determining whether to grant access to a requested resource.</span></span> <span data-ttu-id="677fd-156">Windows Hello bietet sichere 2FA, die vollständig in Windows integriert ist, und ersetzt wiederverwendbare Kennwörter durch eine Kombination aus einem bestimmten Gerät und einer biometrischen Geste oder PIN.</span><span class="sxs-lookup"><span data-stu-id="677fd-156">Windows Hello provides strong 2FA that is fully integrated into Windows and replaces reusable passwords with the combination of a specific device, and a biometric gesture or PIN.</span></span>

<span data-ttu-id="677fd-157">Bei Windows Hello handelt es sich jedoch nicht um einen bloßen Ersatz für herkömmliche 2FA-Systeme.</span><span class="sxs-lookup"><span data-stu-id="677fd-157">Windows Hello is not just a replacement for traditional 2FA systems, though.</span></span> <span data-ttu-id="677fd-158">Konzeptionell gesehen ähnelt es Smartcards. Die Authentifizierung wird mithilfe von kryptografischen Primitiven ausgeführt, anstelle Zeichenfolgen zu vergleichen. Zudem sind die Schlüssel des Benutzers in der vor Manipulationen geschützten Hardware sicher.</span><span class="sxs-lookup"><span data-stu-id="677fd-158">It is conceptually similar to smart cards: authentication is performed by using cryptographic primitives instead of string comparisons, and the user’s key material is secure inside tamper-resistant hardware.</span></span> <span data-ttu-id="677fd-159">Windows Hello erfordert keine zusätzlichen Infrastrukturkomponenten, wie sie für die Smartcardbereitstellung benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-159">Windows Hello does not require the extra infrastructure components required for smart card deployment, either.</span></span> <span data-ttu-id="677fd-160">Insbesondere benötigen Sie keine Public Key-Infrastruktur (PKI) zum Verwalten von Zertifikaten, wenn Sie derzeit keine haben.</span><span class="sxs-lookup"><span data-stu-id="677fd-160">In particular, you do not need a Public Key Infrastructure (PKI) to manage certificates, if you do not currently have one.</span></span> <span data-ttu-id="677fd-161">Windows Hello kombiniert die wichtigsten Vorteile von Smartcards – flexible Bereitstellung für virtuelle Smartcards und stabile Sicherheit für physische Smartcards – jedoch ohne die Nachteile.</span><span class="sxs-lookup"><span data-stu-id="677fd-161">Windows Hello combines the major advantages of smart cards—deployment flexibility for virtual smart cards and robust security for physical smart cards—without any of their drawbacks.</span></span>

## <a name="22-how-windows-hello-works"></a><span data-ttu-id="677fd-162">2.2 Wie funktioniert Windows Hello</span><span class="sxs-lookup"><span data-stu-id="677fd-162">2.2 How Windows Hello works</span></span>


<span data-ttu-id="677fd-163">Wenn Benutzer Windows Hello auf ihrem Computer einrichten, generiert es ein neues Schlüsselpaar bestehend aus öffentlichem und privatem Schlüssel auf dem Gerät.</span><span class="sxs-lookup"><span data-stu-id="677fd-163">When the user sets up Windows Hello on his or her machine, it generates a new public–private key pair on the device.</span></span> <span data-ttu-id="677fd-164">Das [Trusted Platform Module](https://technet.microsoft.com/itpro/windows/keep-secure/trusted-platform-module-overview) (TPM) generiert und schützt diesen privaten Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="677fd-164">The [trusted platform module](https://technet.microsoft.com/itpro/windows/keep-secure/trusted-platform-module-overview) (TPM) generates and protects this private key.</span></span> <span data-ttu-id="677fd-165">Wenn das Gerät nicht über einen TPM-Chip verfügt, wird der private Schlüssel verschlüsselt und durch Software geschützt.</span><span class="sxs-lookup"><span data-stu-id="677fd-165">If the device does not have a TPM chip, the private key is encrypted and protected by software.</span></span> <span data-ttu-id="677fd-166">Zusätzlich generieren TPM-aktivierte Geräte einen Datenblock, der für die Bestätigung verwendet werden kann, dass ein Schlüssel an TPM gebunden ist.</span><span class="sxs-lookup"><span data-stu-id="677fd-166">In addition TPM-enabled devices generate a block of data that can be used to attest that a key is bound to TPM.</span></span> <span data-ttu-id="677fd-167">Die Nachweisinformationen können in Ihrer Lösung verwendet werden, um z. B. zu entscheiden, ob dem Benutzer eine andere Berechtigungsstufe gewährt wird.</span><span class="sxs-lookup"><span data-stu-id="677fd-167">This attestation information can be used in your solution to decide if the user is granted a different authorization level for example.</span></span>

<span data-ttu-id="677fd-168">Zum Aktivieren von Windows Hello auf einem Gerät muss der Benutzer entweder sein AzureActiveDirectory-Konto oder sein Microsoft-Konto in den Windows-Einstellungen verbinden.</span><span class="sxs-lookup"><span data-stu-id="677fd-168">To enable Windows Hello on a device, the user must have either their Azure Active Directory account or Microsoft Account connected in Windows settings.</span></span>

## <a name="221-how-keys-are-protected"></a><span data-ttu-id="677fd-169">2.2.1 Schutz von Schlüsseln</span><span class="sxs-lookup"><span data-stu-id="677fd-169">2.2.1 How keys are protected</span></span>


<span data-ttu-id="677fd-170">Bei jedem Generieren von Schlüsselmaterialien muss dieses gegen Angriffe geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-170">Any time key material is generated, it must be protected against attack.</span></span> <span data-ttu-id="677fd-171">Die zuverlässigste Möglichkeit bietet spezialisierte Hardware.</span><span class="sxs-lookup"><span data-stu-id="677fd-171">The most robust way to do this is through specialized hardware.</span></span> <span data-ttu-id="677fd-172">Lange Zeit wurden Hardwaresicherheitsmodule (Hardware Security Modules, HSMs) verwendet, um Schlüssel für sicherheitskritische Anwendungen zu generieren, zu speichern und zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="677fd-172">There is a long history of using hardware security modules (HSMs) to generate, store, and process keys for security-critical applications.</span></span> <span data-ttu-id="677fd-173">Bei Smartcards handelt es sich um einen besonderen HSM-Typ, ebenso wie Geräte, die mit dem Trusted Computing Group TPM-Standard konform sind.</span><span class="sxs-lookup"><span data-stu-id="677fd-173">Smart cards are a special type of HSM, as are devices that are compliant with the Trusted Computing Group TPM standard.</span></span> <span data-ttu-id="677fd-174">Nach Möglichkeit profitiert die Windows-Hello-Implementierung von der integrierten TPM-Hardware, um Schlüssel zu generieren, zu speichern und zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="677fd-174">Wherever possible, the Windows Hello implementation takes advantage of onboard TPM hardware to generate, store, and process keys.</span></span> <span data-ttu-id="677fd-175">Allerdings benötigen Windows Hello und Windows Hello for Work kein integriertes TPM.</span><span class="sxs-lookup"><span data-stu-id="677fd-175">However, Windows Hello and Windows Hello for Work do not require an onboard TPM.</span></span>

<span data-ttu-id="677fd-176">Microsoft empfiehlt, nach Möglichkeit TPM-Hardware zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="677fd-176">Whenever feasible, Microsoft recommends the use of TPM hardware.</span></span> <span data-ttu-id="677fd-177">Das TPM schützt vor einer Vielzahl von unbekannten und potenziellen Angriffen einschließlich Brute-Force-Angriffen auf die PIN.</span><span class="sxs-lookup"><span data-stu-id="677fd-177">The TPM protects against a variety of known and potential attacks, including PIN brute-force attacks.</span></span> <span data-ttu-id="677fd-178">Das TPM stellt auch nach einer Kontosperre eine zusätzliche Schutzebene bereit.</span><span class="sxs-lookup"><span data-stu-id="677fd-178">The TPM provides an additional layer of protection after an account lockout as well.</span></span> <span data-ttu-id="677fd-179">Wenn das Schlüsselmaterial von TPM gesperrt wurde, muss der Benutzer die PIN zurücksetzen.</span><span class="sxs-lookup"><span data-stu-id="677fd-179">When the TPM has locked the key material, the user must reset the PIN.</span></span> <span data-ttu-id="677fd-180">Beim Zurücksetzen der PIN werden alle mit dem alten Schlüsselmaterial verschlüsselten Schlüssel und Zertifikate entfernt.</span><span class="sxs-lookup"><span data-stu-id="677fd-180">Resetting the PIN means that all keys and certificates encrypted with the old key material will be removed.</span></span>

## <a name="222-authentication"></a><span data-ttu-id="677fd-181">2.2.2 Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="677fd-181">2.2.2 Authentication</span></span>


<span data-ttu-id="677fd-182">Wenn ein Benutzer auf geschütztes Schlüsselmaterial zugreifen möchte, beginnt der Authentifizierungsprozess damit, dass der Benutzer das Gerät durch Eingabe einer PIN oder eine geometrische Geste entsperrt. Dieser Vorgang wird auch als Freigeben des Schlüssels bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="677fd-182">When a user wants to access protected key material, the authentication process begins with the user entering a PIN or biometric gesture to unlock the device, a process sometimes called "releasing the key".</span></span>

<span data-ttu-id="677fd-183">Eine Anwendung kann niemals die Schlüssel einer anderen Anwendung bzw. ein Benutzer niemals die Schlüssel anderer Benutzer verwenden.</span><span class="sxs-lookup"><span data-stu-id="677fd-183">An application can never use the keys from another application, nor can someone ever use the keys from another user.</span></span> <span data-ttu-id="677fd-184">Diese Schlüssel werden zum Signieren von Anforderungen verwendet, die an den Identitätsanbieter oder IDP gesendet werden, um Zugriff auf angegebene Ressourcen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="677fd-184">These keys are used to sign requests that are sent to the identity provider or IDP, seeking access to specified resources.</span></span> <span data-ttu-id="677fd-185">Anwendungen können bestimmte APIs verwenden, um Vorgänge anzufordern, für die Schlüsselmaterial für bestimmte Aktionen erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="677fd-185">Applications can use specific APIs to request operations that require key material for particular actions.</span></span> <span data-ttu-id="677fd-186">Für den Zugriff über diese APIs ist keine explizite Überprüfung anhand einer Benutzergeste erforderlich, und das Schlüsselmaterial wird gegenüber der anfordernden Anwendung nicht offengelegt.</span><span class="sxs-lookup"><span data-stu-id="677fd-186">Access through these APIs does require explicit validation through a user gesture, and the key material is not exposed to the requesting application.</span></span> <span data-ttu-id="677fd-187">Stattdessen fordert die Anwendung eine bestimmte Aktion, wie das Signieren eines Datenelements, und die Windows-Hello-Ebene führt die Aktion aus und gibt die Ergebnisse zurück.</span><span class="sxs-lookup"><span data-stu-id="677fd-187">Rather, the application asks for a specific action like signing a piece of data, and the Windows Hello layer handles the actual work and returns the results.</span></span>

## <a name="23-getting-ready-to-implement-windows-hello"></a><span data-ttu-id="677fd-188">2.3 Vorbereitung der Implementierung von Windows Hello</span><span class="sxs-lookup"><span data-stu-id="677fd-188">2.3 Getting ready to implement Windows Hello</span></span>


<span data-ttu-id="677fd-189">Nachdem wir nun ein grundlegendes Verständnis der Arbeitsweise von Windows Hello besitzen, befassen wir uns damit, wie wir sie in unseren eigenen Anwendungen implementieren.</span><span class="sxs-lookup"><span data-stu-id="677fd-189">Now that we have a basic understanding of how Windows Hello works, let us take a look at how to implement them in our own applications.</span></span>

<span data-ttu-id="677fd-190">Es gibt verschiedene Szenarien, die mithilfe von Windows Hello implementiert werden können.</span><span class="sxs-lookup"><span data-stu-id="677fd-190">There are different scenarios we can implement using Windows Hello.</span></span> <span data-ttu-id="677fd-191">Beispielsweise die Anmeldung bei der App auf einem Gerät.</span><span class="sxs-lookup"><span data-stu-id="677fd-191">For example, just logging on to your app on a device.</span></span> <span data-ttu-id="677fd-192">Das andere häufige Szenario wäre dagegen die Authentifizierung bei einem Dienst.</span><span class="sxs-lookup"><span data-stu-id="677fd-192">The other common scenario would be to authenticate against a service.</span></span> <span data-ttu-id="677fd-193">Anstelle von Benutzernamen und Kennwort verwenden Sie Windows Hello.</span><span class="sxs-lookup"><span data-stu-id="677fd-193">Instead of using a logon name and password, you will be using Windows Hello.</span></span> <span data-ttu-id="677fd-194">In den folgenden Kapiteln besprechen wir die Implementierung einiger verschiedener Szenarien, z.B. die Authentifizierung gegenüber Diensten mit Windows Hello und die Umwandlung eines vorhandenen Benutzername-/Kennwortsystems in ein Windows-Hello-System.</span><span class="sxs-lookup"><span data-stu-id="677fd-194">In the following chapters, we will discuss implementing a couple of different scenarios, including how to authenticate against your services with Windows Hello, and how to convert from an existing username/password system to a Windows Hello system.</span></span>

<span data-ttu-id="677fd-195">Beachten Sie schließlich, dass die Windows-Hello-API die Verwendung des Windows-10-SDKs erfordern, die dem Betriebssystem entspricht, unter dem die App verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="677fd-195">Finally, be aware that the Windows Hello APIs require the use of the Windows 10 SDK that matches the operating system the app will be used on.</span></span> <span data-ttu-id="677fd-196">Mit anderen Worten: Das Windows-SDK10.0.10240 muss für Apps verwendet werden, die unter Windows10 bereitgestellt werden, und 10.0.10586 muss für Apps verwendet werden, die für Windows10, Version1511 bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-196">In other words, the 10.0.10240 Windows SDK must be used for apps that will be deployed to Windows 10 and the 10.0.10586 must be used for apps that will be deployed to Windows 10, version 1511.</span></span>

## <a name="3-implementing-windows-hello"></a><span data-ttu-id="677fd-197">3 Implementieren von Windows Hello</span><span class="sxs-lookup"><span data-stu-id="677fd-197">3 Implementing Windows Hello</span></span>


<span data-ttu-id="677fd-198">In diesem Kapitel beginnen wir mit einem „frischen“ Szenario ohne vorhandenes Authentifizierungssystem und erläutern die Implementierung von Windows Hello.</span><span class="sxs-lookup"><span data-stu-id="677fd-198">In this chapter, we begin with a greenfield scenario with no existing authentication system, and we explain how to implement Windows Hello.</span></span>

<span data-ttu-id="677fd-199">Im nächsten Abschnitt wird die Migration von einem vorhandenem Benutzername-/Kennwort-System behandelt.</span><span class="sxs-lookup"><span data-stu-id="677fd-199">The next section covers how to migrate from an existing username/password system.</span></span> <span data-ttu-id="677fd-200">Auch wenn Sie am nächsten Kapitel mehr interessiert sind, sollten Sie sich dieses ansehen, um ein grundlegendes Verständnis des Prozesses und des erforderlichen Codes zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="677fd-200">However, even if that chapter interests you more, you may want to look through this one to get a basic understanding of the process and the code required.</span></span>

## <a name="31-enrolling-new-users"></a><span data-ttu-id="677fd-201">3.1 Registrieren neuer Benutzer</span><span class="sxs-lookup"><span data-stu-id="677fd-201">3.1 Enrolling new users</span></span>


<span data-ttu-id="677fd-202">Wir beginnen mit einem völlig neuen Dienst, der Windows Hello verwendet, und einem hypothetischen neuen Benutzer, der zur Registrierung auf einem neuen Gerät bereit ist.</span><span class="sxs-lookup"><span data-stu-id="677fd-202">We begin with a brand new service that will use Windows Hello, and a hypothetical new user who is ready to sign up on a new device.</span></span>

<span data-ttu-id="677fd-203">Im ersten Schritt wird sichergestellt, dass der Benutzer Windows Hello verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="677fd-203">The first step is to verify that the user is able to use Windows Hello.</span></span> <span data-ttu-id="677fd-204">Die App überprüft die Benutzereinstellungen und Computerfunktionen, um sicherzustellen, dass Benutzer-ID-Schlüssel erstellt werden können.</span><span class="sxs-lookup"><span data-stu-id="677fd-204">The app verifies user settings and machine capabilities to make sure it can create user ID keys.</span></span> <span data-ttu-id="677fd-205">Wenn die App ermittelt, dass der Benutzer Windows Hello noch nicht aktiviert hat, fordert sie ihn dazu auf, Windows Hello vor der Verwendung der App einzurichten.</span><span class="sxs-lookup"><span data-stu-id="677fd-205">If the app determines the user has not yet enabled Windows Hello, it prompts the user to set this up before using the app.</span></span>

<span data-ttu-id="677fd-206">Zum Aktivieren von Windows Hello muss der Benutzer lediglich eine PIN unter Windows-Einstellungen einrichten, es sei denn, der Benutzer hat diese bereits auf der Willkommensseite (Out of Box Experience, OOBE) eingerichtet.</span><span class="sxs-lookup"><span data-stu-id="677fd-206">To enable Windows Hello, the user just needs to set up a PIN in Windows settings, unless the user set it up during the Out of Box Experience (OOBE).</span></span>

<span data-ttu-id="677fd-207">Die folgenden Codezeilen zeigen eine einfache Methode zum Überprüfen, ob der BenutzerWindows Hello eingerichtet hat.</span><span class="sxs-lookup"><span data-stu-id="677fd-207">The following lines of code show a simple way to check if the user is set up for Windows Hello.</span></span>

```cs
var keyCredentialAvailable = await KeyCredentialManager.IsSupportedAsync();
if (!keyCredentialAvailable)
{
   // User didn't set up PIN yet
   return;
}
```

<span data-ttu-id="677fd-208">Im nächsten Schritt werden die Informationen angefordert, mit denen sich der Benutzer bei Ihrem Dienst registriert.</span><span class="sxs-lookup"><span data-stu-id="677fd-208">The next step is to ask the user for information to sign up with your service.</span></span> <span data-ttu-id="677fd-209">Sie können den Vornamen, Nachnamen, die E-Mail-Adresse und einen eindeutigen Benutzernamen vom Benutzer anfordern.</span><span class="sxs-lookup"><span data-stu-id="677fd-209">You may choose to ask the user for first name, last name, email address, and a unique username.</span></span> <span data-ttu-id="677fd-210">Die E-Mail-Adresse können Sie ggf. als eindeutigen Bezeichner verwenden.</span><span class="sxs-lookup"><span data-stu-id="677fd-210">You could use the email address as the unique identifier; it is up to you.</span></span>

<span data-ttu-id="677fd-211">In diesem Szenario verwenden wir die E-Mail-Adresse als eindeutigen Bezeichner für den Benutzer.</span><span class="sxs-lookup"><span data-stu-id="677fd-211">In this scenario, we use the email address as the unique identifier for the user.</span></span> <span data-ttu-id="677fd-212">Nachdem sich der Benutzer registriert hat, sollten Sie eine Validierungs-E-Mail senden, um sicherzustellen, dass die Adresse gültig ist.</span><span class="sxs-lookup"><span data-stu-id="677fd-212">Once the user signs up, you should consider sending a validation email to ensure the address is valid.</span></span> <span data-ttu-id="677fd-213">Dadurch erhalten Sie einen Mechanismus zum Zurücksetzen des Kontos, falls dies erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="677fd-213">This gives you a mechanism to reset the account if necessary.</span></span>

<span data-ttu-id="677fd-214">Wenn der Benutzer seine PIN eingerichtet hat, erstellt die App das [**KeyCredential**](https://msdn.microsoft.com/library/windows/apps/dn973029) des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="677fd-214">If the user has set up his or her PIN, the app creates the user’s [**KeyCredential**](https://msdn.microsoft.com/library/windows/apps/dn973029).</span></span> <span data-ttu-id="677fd-215">Die App ruft außerdem die optionalen Schlüsselnachweisinformationen ab, um einen kryptografischen Beweis dafür zu erhalten, dass der Schlüssel im TPM generiert wird.</span><span class="sxs-lookup"><span data-stu-id="677fd-215">The app also gets the optional key attestation information to acquire cryptographic proof that the key is generated on the TPM.</span></span> <span data-ttu-id="677fd-216">Der generierte öffentliche Schlüssel und optional der Nachweis werden an den Back-End-Server gesendet, um das verwendete Gerät zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="677fd-216">The generated public key, and optionally the attestation, is sent to the backend server to register the device being used.</span></span> <span data-ttu-id="677fd-217">Jedes Schlüsselpaar, das auf den einzelnen Geräten generiert wird, ist eindeutig.</span><span class="sxs-lookup"><span data-stu-id="677fd-217">Every key pair generated on every device will be unique.</span></span>

<span data-ttu-id="677fd-218">Der Code zum Erstellen von [**KeyCredential**](https://msdn.microsoft.com/library/windows/apps/dn973029) sieht wie folgt aus:</span><span class="sxs-lookup"><span data-stu-id="677fd-218">The code to create the [**KeyCredential**](https://msdn.microsoft.com/library/windows/apps/dn973029) looks like this:</span></span>

```cs
var keyCreationResult = await KeyCredentialManager
    .RequestCreateAsync(AccountId, KeyCredentialCreationOption.ReplaceExisting);
```

<span data-ttu-id="677fd-219">[**RequestCreateAsync**](https://msdn.microsoft.com/library/windows/apps/dn973048) ist der Teil, durch den öffentlicher und privater Schlüssel erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-219">The [**RequestCreateAsync**](https://msdn.microsoft.com/library/windows/apps/dn973048) is the part that creates the public and private key.</span></span> <span data-ttu-id="677fd-220">Wenn das Gerät über den richtigen TPM-Chip verfügt, fordern die APIs den TPM-Chip zum Erstellen des privaten und öffentlichen Schlüssels an und speichern das Ergebnis. Wenn kein TPM-Chip verfügbar ist, erstellt das Betriebssystem das Schlüsselpaar im Code.</span><span class="sxs-lookup"><span data-stu-id="677fd-220">If the device has the right TPM chip, the APIs will request the TPM chip to create the private and public key and store the result; if there is no TPM chip available, the OS will create the key pair in code.</span></span> <span data-ttu-id="677fd-221">Die App hat keine Möglichkeit, direkt auf die erstellten privaten Schlüssel zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="677fd-221">There is no way for the app to access the created private keys directly.</span></span> <span data-ttu-id="677fd-222">Bei der Erstellung von Schlüsselpaaren geht es auch um die resultierenden Nachweisinformationen.</span><span class="sxs-lookup"><span data-stu-id="677fd-222">Part of the creation of the key pairs is also the resulting Attestation information.</span></span> <span data-ttu-id="677fd-223">(Weitere Informationen zu Nachweisen finden Sie im nächsten Abschnitt.)</span><span class="sxs-lookup"><span data-stu-id="677fd-223">(See the next section for more information about attestation.)</span></span>

<span data-ttu-id="677fd-224">Nachdem das Schlüsselpaar und die Nachweisinformationen auf dem Gerät erstellt wurden, müssen der öffentliche Schlüssel, die optionalen Nachweisinformationen und der eindeutige Bezeichner (z.B. die E-Mail-Adresse) an den Back-End-Registrierungsdienst gesendet und im Back-End gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-224">After the key pair and attestation information are created on the device, the public key, the optional attestation information, and the unique identifier (such as the email address) need to be sent to the backend registration service and stored in the backend.</span></span>

<span data-ttu-id="677fd-225">Damit der Benutzer über mehrere Geräte auf die App zugreifen kann, muss der Back-End-Dienst mehrere Schlüssel für denselben Benutzer speichern können.</span><span class="sxs-lookup"><span data-stu-id="677fd-225">To allow the user to access the app on multiple devices, the backend service needs to be able to store multiple keys for the same user.</span></span> <span data-ttu-id="677fd-226">Jeder Schlüssel ist für jedes Gerät eindeutig. Deshalb werden alle Schüssel gespeichert, die demselben Benutzer zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="677fd-226">Because every key is unique for every device, we will store all these keys connected to the same user.</span></span> <span data-ttu-id="677fd-227">Ein Gerätebezeichner dient zur Optimierung der Serverseite bei der Benutzerauthentifizierung.</span><span class="sxs-lookup"><span data-stu-id="677fd-227">A device identifier is used to help optimize the server part when authenticating users.</span></span> <span data-ttu-id="677fd-228">Darauf gehen wir im nächsten Kapitel genauer ein.</span><span class="sxs-lookup"><span data-stu-id="677fd-228">We talk about this in more detail in the next chapter.</span></span>

<span data-ttu-id="677fd-229">Ein Beispieldatenbankschema zum Speichern dieser Informationen im Back-End kann wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="677fd-229">A sample database schema to store this information at the backend might look like this:</span></span>

![Windows Hello-Beispieldatenbankschema](images/passport-db.png)

<span data-ttu-id="677fd-231">Die Registrierungslogik kann wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="677fd-231">The registration logic might look like this:</span></span>

![Windows Hello-Registrierungslogik](images/passport-registration.png)

<span data-ttu-id="677fd-233">Die von Ihnen erfassten Registrierungsinformationen umfassen natürlich viel mehr Identifikationsinformationen, als wir in dieses einfache Szenario einbinden.</span><span class="sxs-lookup"><span data-stu-id="677fd-233">The registration information you collect may of course include a lot more identifying information than we include in this simple scenario.</span></span> <span data-ttu-id="677fd-234">Wenn Ihre App beispielsweise auf einen gesicherten Dienst – z.B. Onlinebanking– zugreift, müssen Sie beim Anmeldevorgang einen Identitätsnachweis und andere Dinge anfordern.</span><span class="sxs-lookup"><span data-stu-id="677fd-234">For example, if your app accesses a secured service such as one for banking, you would need to request proof of identity and other things as part of the sign-up process.</span></span> <span data-ttu-id="677fd-235">Nachdem alle Bedingungen erfüllt wurden, wird der öffentliche Schlüssel dieses Benutzers im Back-End gespeichert und für Überprüfungszwecke verwendet, wenn der Benutzer den Dienst das nächste Mal verwendet.</span><span class="sxs-lookup"><span data-stu-id="677fd-235">Once all the conditions are met, the public key of this user will be stored in the backend and used to validate the next time the user uses the service.</span></span>

```cs
using System;
using System.Runtime;
using System.Threading.Tasks;
using Windows.Storage.Streams;
using Windows.Security.Credentials;

static async void RegisterUser(string AccountId)
{
    var keyCredentialAvailable = await KeyCredentialManager.IsSupportedAsync();
    if (!keyCredentialAvailable)
    {
        // The user didn't set up a PIN yet
        return;
    }

    var keyCreationResult = await KeyCredentialManager.RequestCreateAsync(AccountId, KeyCredentialCreationOption.ReplaceExisting);
    if (keyCreationResult.Status == KeyCredentialStatus.Success)
    {
        var userKey = keyCreationResult.Credential;
        var publicKey = userKey.RetrievePublicKey();
        var keyAttestationResult = await userKey.GetAttestationAsync();
        IBuffer keyAttestation = null;
        IBuffer certificateChain = null;
        bool keyAttestationIncluded = false;
        bool keyAttestationCanBeRetrievedLater = false;

        keyAttestationResult = await userKey.GetAttestationAsync();
        KeyCredentialAttestationStatus keyAttestationRetryType = 0;

        if (keyAttestationResult.Status == KeyCredentialAttestationStatus.Success)
        {
            keyAttestationIncluded = true;
            keyAttestation = keyAttestationResult.AttestationBuffer;
            certificateChain = keyAttestationResult.CertificateChainBuffer;
        }
        else if (keyAttestationResult.Status == KeyCredentialAttestationStatus.TemporaryFailure)
        {
            keyAttestationRetryType = KeyCredentialAttestationStatus.TemporaryFailure;
            keyAttestationCanBeRetrievedLater = true;
        }
        else if (keyAttestationResult.Status == KeyCredentialAttestationStatus.NotSupported)
        {
            keyAttestationRetryType = KeyCredentialAttestationStatus.NotSupported;
            keyAttestationCanBeRetrievedLater = true;
        }
    }
    else if (keyCreationResult.Status == KeyCredentialStatus.UserCanceled ||
        keyCreationResult.Status == KeyCredentialStatus.UserPrefersPassword)
    {
        // Show error message to the user to get confirmation that user
        // does not want to enroll.
    }
}
```

## <a name="311-attestation"></a><span data-ttu-id="677fd-236">3.1.1 Nachweis</span><span class="sxs-lookup"><span data-stu-id="677fd-236">3.1.1 Attestation</span></span>


<span data-ttu-id="677fd-237">Beim Erstellen des Schlüsselpaars besteht auch die Möglichkeit, die vom TPM-Chip generierten Nachweisinformationen anzufordern.</span><span class="sxs-lookup"><span data-stu-id="677fd-237">When creating the key pair, there is also an option to request the attestation information, which is generated by the TPM chip.</span></span> <span data-ttu-id="677fd-238">Diese optionalen Informationen können im Rahmen des Registrierungsvorgangs an den Server gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-238">This optional information can be sent to the server as part of the sign-up process.</span></span> <span data-ttu-id="677fd-239">Der TPM-Schlüsselnachweis ist ein Protokoll, durch das kryptografisch überprüft wird, ob ein Schlüssel TPM-gebunden ist.</span><span class="sxs-lookup"><span data-stu-id="677fd-239">TPM key attestation is a protocol that cryptographically proves that a key is TPM-bound.</span></span> <span data-ttu-id="677fd-240">Mithilfe dieses Nachweistyps kann gewährleistet werden, dass ein bestimmter kryptografischer Vorgang im TPM eines bestimmten Computers ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="677fd-240">This type of attestation can be used to guarantee that a certain cryptographic operation occurred in the TPM of a particular computer.</span></span>

<span data-ttu-id="677fd-241">Wenn der Server den generierten RSA-Schlüssel, die Nachweisanweisung und das AIK-Zertifikat empfängt, überprüft er folgende Voraussetzungen:</span><span class="sxs-lookup"><span data-stu-id="677fd-241">When it receives the generated RSA key, the attestation statement, and the AIK certificate, the server verifies the following conditions:</span></span>

-   <span data-ttu-id="677fd-242">Die AIK-Zertifikatsignatur muss gültig sein.</span><span class="sxs-lookup"><span data-stu-id="677fd-242">The AIK certificate signature is valid.</span></span>
-   <span data-ttu-id="677fd-243">Das AIK-Zertifikat muss mit einer vertrauenswürdigen Stammzertifizierungsstelle verkettet sein.</span><span class="sxs-lookup"><span data-stu-id="677fd-243">The AIK certificate chains up to a trusted root.</span></span>
-   <span data-ttu-id="677fd-244">Das AIK-Zertifikat und dessen Kette müssen für EKU-OID „2.23.133.8.3“ aktiviert sein (der Anzeigename lautet „Attestation Identity Key-Zertifikat“).</span><span class="sxs-lookup"><span data-stu-id="677fd-244">The AIK certificate and its chain is enabled for EKU OID "2.23.133.8.3" (friendly name is "Attestation Identity Key Certificate").</span></span>
-   <span data-ttu-id="677fd-245">Das AIK-Zertifikat muss zeitlich gültig sein.</span><span class="sxs-lookup"><span data-stu-id="677fd-245">The AIK certificate is time valid.</span></span>
-   <span data-ttu-id="677fd-246">Die Zertifikate aller ausstellenden Zertifizierungsstellen in der Kette müssen zeitlich gültig und dürfen nicht widerrufen sein.</span><span class="sxs-lookup"><span data-stu-id="677fd-246">All issuing CA certificates in the chain are time-valid and not revoked.</span></span>
-   <span data-ttu-id="677fd-247">Die Nachweisanweisung muss das richtige Format aufweisen.</span><span class="sxs-lookup"><span data-stu-id="677fd-247">The attestation statement is formed correctly.</span></span>
-   <span data-ttu-id="677fd-248">Die Signatur für den [**KeyAttestation**](https://msdn.microsoft.com/library/windows/apps/dn298288)-BLOB verwendet einen öffentlichen AIK-Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="677fd-248">The signature on [**KeyAttestation**](https://msdn.microsoft.com/library/windows/apps/dn298288) blob uses an AIK public key.</span></span>
-   <span data-ttu-id="677fd-249">Der im [**KeyAttestation**](https://msdn.microsoft.com/library/windows/apps/dn298288)-BLOB enthaltene öffentliche Schlüssel muss mit dem öffentlichen RSA-Schlüssel übereinstimmen, den der Client zusammen mit der Nachweisanweisung gesendet hat.</span><span class="sxs-lookup"><span data-stu-id="677fd-249">The public key included in the [**KeyAttestation**](https://msdn.microsoft.com/library/windows/apps/dn298288) blob matches the public RSA key that client sent alongside the attestation statement.</span></span>

<span data-ttu-id="677fd-250">Ihre App weist dem Benutzer je nach diesen Umständen möglicherweise eine andere Autorisierungsstufe zu.</span><span class="sxs-lookup"><span data-stu-id="677fd-250">Your app might assign the user a different authorization level, depending on these conditions.</span></span> <span data-ttu-id="677fd-251">Wenn beispielsweise eine dieser Voraussetzungen nicht erfüllt ist, registriert die App den Benutzer möglicherweise nicht bzw. schränkt dessen Befugnisse ein.</span><span class="sxs-lookup"><span data-stu-id="677fd-251">For instance, if one of these checks fail, it might not enroll the user or it might limit what the user can do.</span></span>

## <a name="32-logging-on-with-windows-hello"></a><span data-ttu-id="677fd-252">3.2 Anmeldung mit Windows Hello</span><span class="sxs-lookup"><span data-stu-id="677fd-252">3.2 Logging on with Windows Hello</span></span>


<span data-ttu-id="677fd-253">Nachdem sich der Benutzer in Ihrem System registriert ist, kann er die App nutzen.</span><span class="sxs-lookup"><span data-stu-id="677fd-253">Once the user is enrolled in your system, he or she can use the app.</span></span> <span data-ttu-id="677fd-254">Je nach Szenario können Sie die Authentifizierung des Benutzers anfordern, bevor er mit der App-Nutzung beginnen darf, oder die Authentifizierung danach mithilfe der Back-End-Dienste anfordern.</span><span class="sxs-lookup"><span data-stu-id="677fd-254">Depending on the scenario, you can ask users to authenticate before they can start using the app or just ask them to authenticate once they start using your backend services.</span></span>

## <a name="33-force-the-user-to-sign-in-again"></a><span data-ttu-id="677fd-255">3.3 Erzwingen der erneuten Benutzeranmeldung</span><span class="sxs-lookup"><span data-stu-id="677fd-255">3.3 Force the user to sign in again</span></span>


<span data-ttu-id="677fd-256">In einigen Szenarien sollte der Benutzer nachweisen, dass es sich um die derzeit angemeldete Person handelt, bevor er auf die App zugreift bzw. in manchen Fällen bevor er eine bestimmte Aktion innerhalb der App ausführt.</span><span class="sxs-lookup"><span data-stu-id="677fd-256">For some scenarios, you may want the user to prove he or she is the person who is currently signed in, before accessing the app or sometimes before performing a certain action inside of your app.</span></span> <span data-ttu-id="677fd-257">Bevor beispielsweise eine Banking-App den Befehl zum Überweisen von Geld an den Server sendet, sollten Sie sicherstellen, dass es sich um den richtigen Benutzer handelt, anstatt einer Person, die ein angemeldetes Gerät gefunden hat und versucht, eine Transaktion ausführen.</span><span class="sxs-lookup"><span data-stu-id="677fd-257">For example, before a banking app sends the transfer money command to the server, you want to make sure it is the user, rather than someone who found a logged-in device, attempting to perform a transaction.</span></span> <span data-ttu-id="677fd-258">Sie können eine erneute Benutzeranmeldung in der App erzwingen, indem Sie die [**UserConsentVerifier**](https://msdn.microsoft.com/library/windows/apps/dn279134)-Klasse verwenden.</span><span class="sxs-lookup"><span data-stu-id="677fd-258">You can force the user to sign in again in your app by using the [**UserConsentVerifier**](https://msdn.microsoft.com/library/windows/apps/dn279134) class.</span></span> <span data-ttu-id="677fd-259">Durch die folgende Codezeile wird die erneute Eingabe von Anmeldeinformationen erzwungen.</span><span class="sxs-lookup"><span data-stu-id="677fd-259">The following line of code will force the user to enter their credentials.</span></span>

<span data-ttu-id="677fd-260">Durch die folgende Codezeile wird die erneute Eingabe von Anmeldeinformationen erzwungen.</span><span class="sxs-lookup"><span data-stu-id="677fd-260">The following line of code will force the user to enter their credentials.</span></span>

```cs
UserConsentVerificationResult consentResult = await UserConsentVerifier.RequestVerificationAsync("userMessage");
if (consentResult.Equals(UserConsentVerificationResult.Verified))
{
   // continue
}
```

<span data-ttu-id="677fd-261">Natürlich können Sie auch den Abfrage-/Rückmeldungsmechanismus verwenden, bei dem der Server den Benutzer zur Eingabe seines PIN-Codes von biometrischen Anmeldeinformationen auffordert.</span><span class="sxs-lookup"><span data-stu-id="677fd-261">Of course, you can also use the challenge response mechanism from the server, which requires a user to enter his or her PIN code or biometric credentials.</span></span> <span data-ttu-id="677fd-262">Dies hängt von dem Szenario ab, das Sie als Entwickler implementieren müssen.</span><span class="sxs-lookup"><span data-stu-id="677fd-262">It depends on the scenario you as a developer need to implement.</span></span> <span data-ttu-id="677fd-263">Dieser Mechanismus wird im folgenden Abschnitt beschrieben.</span><span class="sxs-lookup"><span data-stu-id="677fd-263">This mechanism is described in the following section.</span></span>

## <a name="34-authentication-at-the-backend"></a><span data-ttu-id="677fd-264">3.4 Authentifizierung im Back-End</span><span class="sxs-lookup"><span data-stu-id="677fd-264">3.4 Authentication at the backend</span></span>


<span data-ttu-id="677fd-265">Wenn eine App versucht, auf einen geschützten Back-End-Dienst zuzugreifen, sendet dieser eine Abfrage an die App.</span><span class="sxs-lookup"><span data-stu-id="677fd-265">When the app attempts to access a protected backend service, the service sends a challenge to the app.</span></span> <span data-ttu-id="677fd-266">Die App verwendet den privaten Schlüssel des Benutzers, um die Abfrage zu signieren, und sendet sie an den Server zurück.</span><span class="sxs-lookup"><span data-stu-id="677fd-266">The app uses the private key from the user to sign the challenge and sends it back to the server.</span></span> <span data-ttu-id="677fd-267">Da der Server den öffentlichen Schlüssel für diesen Benutzer gespeichert hat, stellt er anhand standardmäßiger Krypto-APIs sicher, dass die Nachricht tatsächlich mit dem richtigen privaten Schlüssel signiert wurde.</span><span class="sxs-lookup"><span data-stu-id="677fd-267">Since the server has stored the public key for that user, it uses standard crypto APIs to make sure the message was indeed signed with the correct private key.</span></span> <span data-ttu-id="677fd-268">Auf dem Client erfolgt die Signierung mithilfe der Windows-Hello-API; der Entwickler selbst erhält niemals Zugriff auf den privaten Schlüssel eines Benutzers.</span><span class="sxs-lookup"><span data-stu-id="677fd-268">On the client, the signing is done by the Windows Hello APIs; the developer will never have access to any user’s private key.</span></span>

<span data-ttu-id="677fd-269">Neben der Schlüsselüberprüfung kann der Dienst auch den Schlüsselnachweis überprüfen, um festzustellen, ob Beschränkungen hinsichtlich der Speicherung der Schlüssel auf dem Gerät bestehen.</span><span class="sxs-lookup"><span data-stu-id="677fd-269">In addition to checking the keys, the service can also check the key attestation and discern if there are any limitations invoked on how the keys are stored on the device.</span></span> <span data-ttu-id="677fd-270">Wenn das Gerät beispielsweise TPM zum Schützen der Schlüssel verwendet, ist die Sicherheit höher als bei Geräten, auf denen Schlüssel ohne TPM gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-270">For example, when the device uses TPM to protect the keys, it is more secure than devices storing the keys without TPM.</span></span> <span data-ttu-id="677fd-271">Die Back-End-Logik könnte z. B. festlegen, dass der Benutzer Geld nur bis zu einer bestimmten Höhe überweisen darf, wenn kein TPM zur Risikominderung eingesetzt wird.</span><span class="sxs-lookup"><span data-stu-id="677fd-271">The backend logic could decide, for example, that the user is only allowed to transfer a certain amount of money when no TPM is used to reduce the risks.</span></span>

<span data-ttu-id="677fd-272">Ein Nachweis ist nur für Geräte mit einem TPM-Chip der Version2.0 oder höher verfügbar.</span><span class="sxs-lookup"><span data-stu-id="677fd-272">Attestation is only available for devices with a TPM chip that’s version 2.0 or higher.</span></span> <span data-ttu-id="677fd-273">Daher müssen Sie berücksichtigen, dass diese Informationen nicht immer auf jedem Gerät zur Verfügung stehen.</span><span class="sxs-lookup"><span data-stu-id="677fd-273">Therefore, you need to take into account that this information might not be available on every device.</span></span>

<span data-ttu-id="677fd-274">Der Clientworkflow sieht ggf. wie das folgende Diagramm aus:</span><span class="sxs-lookup"><span data-stu-id="677fd-274">The client workflow might look like the following chart:</span></span>

![Windows Hello-Clientworkflow](images/passport-client-workflow.png)

<span data-ttu-id="677fd-276">Wenn die App den Dienst im Back-End aufruft, sendet der Server eine Abfrage.</span><span class="sxs-lookup"><span data-stu-id="677fd-276">When the app calls the service on the backend, the server sends a challenge.</span></span> <span data-ttu-id="677fd-277">Die Abfrage ist mit dem folgenden Code signiert:</span><span class="sxs-lookup"><span data-stu-id="677fd-277">The challenge is signed with the following code:</span></span>

```cs
var openKeyResult = await KeyCredentialManager.OpenAsync(AccountId);

if (openKeyResult.Status == KeyCredentialStatus.Success)
{
    var userKey = openKeyResult.Credential;
    var publicKey = userKey.RetrievePublicKey();
    var signResult = await userKey.RequestSignAsync(message);
    
    if (signResult.Status == KeyCredentialStatus.Success)
    {
        return signResult.Result;
    }
    else if (signResult.Status == KeyCredentialStatus.UserPrefersPassword)
    {
        
    }
}
```

<span data-ttu-id="677fd-278">Durch die erste Zeile [**KeyCredentialManager.OpenAsync**](https://msdn.microsoft.com/library/windows/apps/dn973046) wird das Betriebssystem aufgefordert, den Schlüsselhandle zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="677fd-278">The first line, [**KeyCredentialManager.OpenAsync**](https://msdn.microsoft.com/library/windows/apps/dn973046), will ask the OS to open the key handle.</span></span> <span data-ttu-id="677fd-279">Wenn dieser Schritt erfolgreich ist, können Sie die Abfragenachricht mit der [**KeyCredential.RequestSignAsync**](https://msdn.microsoft.com/library/windows/apps/dn973058)-Methode signieren. Dadurch wird das Betriebssystem aufgefordert, die PIN oder biometrische Daten des Benutzers über Windows Hello anzufordern.</span><span class="sxs-lookup"><span data-stu-id="677fd-279">If that is done successfully, you can sign the challenge message with the [**KeyCredential.RequestSignAsync**](https://msdn.microsoft.com/library/windows/apps/dn973058) method will trigger the OS to request the user’s PIN or biometrics through Windows Hello.</span></span> <span data-ttu-id="677fd-280">Der Entwickler hat zu keiner Zeit Zugriff auf den privaten Schlüssel des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="677fd-280">At no time will the developer have access to the private key of the user.</span></span> <span data-ttu-id="677fd-281">Dieser wird durch die APIs gesichert.</span><span class="sxs-lookup"><span data-stu-id="677fd-281">This is all kept secure through the APIs.</span></span>

<span data-ttu-id="677fd-282">Die APIs fordern das Betriebssystem auf, die Abfrage mit dem privaten Schlüssel zu signieren.</span><span class="sxs-lookup"><span data-stu-id="677fd-282">The APIs request the OS to sign the challenge with the private key.</span></span> <span data-ttu-id="677fd-283">Das System fordert dann vom Benutzer einen PIN-Code oder konfigurierte biometrische Anmeldeinformationen an.</span><span class="sxs-lookup"><span data-stu-id="677fd-283">The system then asks the user for a PIN code or a configured biometric logon.</span></span> <span data-ttu-id="677fd-284">Wenn die richtigen Informationen eingegeben werden, kann das System den TPM-Chip zum Ausführen der kryptografischen Funktionen und zum Signieren der Abfrage auffordern.</span><span class="sxs-lookup"><span data-stu-id="677fd-284">When the correct information is entered, the system can ask the TPM chip to perform the cryptographic functions and sign the challenge.</span></span> <span data-ttu-id="677fd-285">(Falls kein TPM verfügbar ist, verwenden Sie die Fallback-Softwarelösung.)</span><span class="sxs-lookup"><span data-stu-id="677fd-285">(Or use the fallback software solution, if no TPM is available).</span></span> <span data-ttu-id="677fd-286">Der Client muss die signierte Abfrage zurück an den Server senden.</span><span class="sxs-lookup"><span data-stu-id="677fd-286">The client must send the signed challenge back to the server.</span></span>

<span data-ttu-id="677fd-287">In diesem Sequenzdiagramm ist ein grundlegender Abfrage/Rückmeldungsablauf dargestellt:</span><span class="sxs-lookup"><span data-stu-id="677fd-287">A basic challenge–response flow is shown in this sequence diagram:</span></span>

![Windows Hello-Abfrage/Rückmeldung](images/passport-challenge-response.png)

<span data-ttu-id="677fd-289">Als nächstes muss der Server die Signatur überprüfen.</span><span class="sxs-lookup"><span data-stu-id="677fd-289">Next, the server must validate the signature.</span></span> <span data-ttu-id="677fd-290">Wenn Sie den öffentlichen Schlüssel anfordern und ihn zur späteren Überprüfung an den Server senden, verwenden Sie ein ASN.1-codiertes publicKeyInfo-BLOB. Anhand des [Windows-Hello-Codebeispiels auf GitHub](http://go.microsoft.com/fwlink/?LinkID=717812) erkennen Sie, dass Hilfsklassen die Crypt32-Funktionen umschließen, um das ASN.1-codierte BLOB in ein gängigeres CNG-BLOB zu übersetzen.</span><span class="sxs-lookup"><span data-stu-id="677fd-290">When you request the public key and send it to the server to use for future validation, it is in an ASN.1-encoded publicKeyInfo blob.If you look at the [Windows Hello code sample on GitHub](http://go.microsoft.com/fwlink/?LinkID=717812), you will see there are helper classes to wrap Crypt32 functions to translate the ASN.1-encoded blob to a CNG blob, which is more commonly used.</span></span> <span data-ttu-id="677fd-291">Das BLOB enthält den Algorithmus des öffentlichen Schlüssels, also RSA, und den öffentlichen RSA-Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="677fd-291">The blob contains the public key algorithm, which is RSA, and the RSA public key.</span></span>

<span data-ttu-id="677fd-292">Sobald das CNG-BLOB verfügbar ist, müssen Sie die signierte Abfrage mit dem öffentlichen Schlüssel des Benutzers abgleichen.</span><span class="sxs-lookup"><span data-stu-id="677fd-292">Once you have the CNG blob, you need to validate the signed challenge against the public key of the user.</span></span> <span data-ttu-id="677fd-293">Da jeder seine eigene System- oder Back-End-Technologie verwendet, gibt es keine allgemeine Vorgehensweise zur Implementierung dieser Logik.</span><span class="sxs-lookup"><span data-stu-id="677fd-293">Since everyone uses his or her own system or backend technology, there is no generic way to implement this logic.</span></span> <span data-ttu-id="677fd-294">Wir verwenden SHA256 als Hashalgorithmus und Pkcs1 für SignaturePadding, um sicherzustellen, dass Sie diese Funktionen zur Überprüfung der signierten Antwort vom Client verwenden.</span><span class="sxs-lookup"><span data-stu-id="677fd-294">We are using SHA256 as the hash algorithm and Pkcs1 for SignaturePadding, so make sure that’s what you use when you validate the signed response from the client.</span></span> <span data-ttu-id="677fd-295">An dieser Stelle verweisen wir erneut auf das Beispiel, in dem die Vorgehensweise mit .NET 4.6 auf dem Server beschrieben wird. In der Regel werden jedoch etwa folgende Schritte ausgeführt:</span><span class="sxs-lookup"><span data-stu-id="677fd-295">Again, refer to the sample for a way to do it on your server in .NET 4.6, but in general it will look something like this:</span></span>

```cs
using (RSACng pubKey = new RSACng(publicKey))
{
   retval = pubKey.VerifyData(originalChallenge, responseSignature,  HashAlgorithmName.SHA256, RSASignaturePadding.Pkcs1); 
}
```

<span data-ttu-id="677fd-296">Wir lesen den gespeicherten öffentlichen Schlüssel, bei dem es sich um einen RSA-Schlüssel handelt.</span><span class="sxs-lookup"><span data-stu-id="677fd-296">We read the stored public key, which is an RSA key.</span></span> <span data-ttu-id="677fd-297">Wir gleichen die Nachricht mit der signierten Abfrage mit dem öffentlichen Schlüssel ab. Nach erfolgreicher Überprüfung wird der Benutzer autorisiert.</span><span class="sxs-lookup"><span data-stu-id="677fd-297">We validate the signed challenge message with the public key and if this checks out, we authorize the user.</span></span> <span data-ttu-id="677fd-298">Sobald der Benutzer authentifiziert wurde, kann die App die Back-End-Dienste wie gewohnt aufrufen.</span><span class="sxs-lookup"><span data-stu-id="677fd-298">If the user is authenticated, the app can call the backend services as normal.</span></span>

<span data-ttu-id="677fd-299">Der vollständige Code sieht etwa wie folgt aus:</span><span class="sxs-lookup"><span data-stu-id="677fd-299">The complete code might look something like the following:</span></span>

```cs
using System;
using System.Runtime;
using System.Threading.Tasks;
using Windows.Storage.Streams;
using Windows.Security.Cryptography;
using Windows.Security.Cryptography.Core;
using Windows.Security.Credentials;

static async Task<IBuffer> GetAuthenticationMessageAsync(IBuffer message, String AccountId)
{
    var openKeyResult = await KeyCredentialManager.OpenAsync(AccountId);

    if (openKeyResult.Status == KeyCredentialStatus.Success)
    {
        var userKey = openKeyResult.Credential;
        var publicKey = userKey.RetrievePublicKey();
        var signResult = await userKey.RequestSignAsync(message);
        if (signResult.Status == KeyCredentialStatus.Success)
        {
            return signResult.Result;
        }
        else if (signResult.Status == KeyCredentialStatus.UserCanceled)
        {
            // Launch app-specific flow to handle the scenario 
            return null;
        }
    }
    else if (openKeyResult.Status == KeyCredentialStatus.NotFound)
    {
        // PIN reset has occurred somewhere else and key is lost.
        // Repeat key registration
        return null;
    }
    else
    {
        // Show custom UI because unknown error has happened.
        return null;
    }
}
```

<span data-ttu-id="677fd-300">Die Implementierung des richtigen Abfrage-/Rückmeldungsmechanismus wird in diesem Dokument nicht erörtert. Dennoch erfordert dieses Thema Aufmerksamkeit, um erfolgreich einen sicheren Mechanismus zu erstellen, der Replay- oder Man-in-the-Middle-Angriffe wirksam abwehrt.</span><span class="sxs-lookup"><span data-stu-id="677fd-300">Implementing the correct challenge–response mechanism is outside the scope of this document, but this topic is something that requires attention in order to successfully create a secure mechanism to prevent things like replay attacks or man-in-the-middle attacks.</span></span>

## <a name="35-enrolling-another-device"></a><span data-ttu-id="677fd-301">3.5 Registrieren eines anderen Geräts</span><span class="sxs-lookup"><span data-stu-id="677fd-301">3.5 Enrolling another device</span></span>


<span data-ttu-id="677fd-302">Heutzutage ist es üblich, dass Benutzer über mehrere Geräte verfügen, auf denen die gleichen Apps installiert sind.</span><span class="sxs-lookup"><span data-stu-id="677fd-302">Nowadays, it is common for users to have multiple devices with the same apps installed.</span></span> <span data-ttu-id="677fd-303">Wie funktioniert dies bei der Verwendung von Windows Hello mit mehreren Geräten?</span><span class="sxs-lookup"><span data-stu-id="677fd-303">How does this work when using Windows Hello with multiple devices?</span></span>

<span data-ttu-id="677fd-304">Bei Verwendung von Windows Hello erstellt jedes Gerät eine eindeutige Kombination bestehend aus einem privaten und einem öffentlichen Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="677fd-304">When using Windows Hello every device will create a unique private and public key set.</span></span> <span data-ttu-id="677fd-305">Wenn ein Benutzer in der Lage sein soll, mehrere Geräte zu verwenden, müssen im Back-End folglich mehrere öffentliche Schlüssel dieses Benutzers gespeichert werden können.</span><span class="sxs-lookup"><span data-stu-id="677fd-305">This means that if you want a user to be able to use multiple devices, your backend must be able to store multiple public keys from this user.</span></span> <span data-ttu-id="677fd-306">Im Datenbankdiagramm in Abschnitt 2.1 finden Sie ein Beispiel für die Tabellenstruktur.</span><span class="sxs-lookup"><span data-stu-id="677fd-306">Refer to the database diagram in section 2.1 for an example of the table structure.</span></span>

<span data-ttu-id="677fd-307">Die Registrierung eines weiteren Geräts funktioniert fast genauso wie die erstmalige Registrierung eines Benutzers.</span><span class="sxs-lookup"><span data-stu-id="677fd-307">Registering another device is almost the same as registering a user for the first time.</span></span> <span data-ttu-id="677fd-308">Sie müssen weiterhin sicherstellen, dass es sich bei dem Benutzer, der sich für dieses neue Gerät registriert, tatsächlich um den Benutzer handelt, der er zu sein vorgibt.</span><span class="sxs-lookup"><span data-stu-id="677fd-308">You still need to be sure the user registering for this new device is really the user he or she claims to be.</span></span> <span data-ttu-id="677fd-309">Sie können dazu einen beliebigen aktuellen Mechanismus für die zweistufige Authentifizierung verwenden.</span><span class="sxs-lookup"><span data-stu-id="677fd-309">You can do so with any two-factor authentication mechanism that is used today.</span></span> <span data-ttu-id="677fd-310">Es gibt mehrere Möglichkeiten zur sicheren Umsetzung dieses Schritts.</span><span class="sxs-lookup"><span data-stu-id="677fd-310">There are several ways to accomplish this in a secure way.</span></span> <span data-ttu-id="677fd-311">Die Vorgehensweise hängt vom jeweiligen Szenario ab.</span><span class="sxs-lookup"><span data-stu-id="677fd-311">It all depends on your scenario.</span></span>

<span data-ttu-id="677fd-312">Wenn Sie z.B. immer noch Anmeldenamen und Kennwort verwenden, können Sie den Benutzer darüber authentifizieren und ihn zur Verwendung einer seiner Überprüfungsmethoden wie SMS oder E-Mail auffordern.</span><span class="sxs-lookup"><span data-stu-id="677fd-312">For example, if you still use login name and password you can use that to authenticate the user and ask them to use one of their verification methods like SMS or email.</span></span> <span data-ttu-id="677fd-313">Wenn Sie keinen Benutzernamen und kein Kennwort besitzen, können Sie auch eines der bereits registrierten Geräte verwenden, um eine Benachrichtigung an die App auf dem Gerät zu senden.</span><span class="sxs-lookup"><span data-stu-id="677fd-313">If you don’t have a login name and password, you can also use one of the already registered devices and send a notification to the app on that device.</span></span> <span data-ttu-id="677fd-314">Ein Beispiel dafür ist die MSA-Authentifikator-App.</span><span class="sxs-lookup"><span data-stu-id="677fd-314">The MSA authenticator app is an example of this.</span></span> <span data-ttu-id="677fd-315">Kurz gesagt: Sie sollten einen gängigen 2FA-Mechanismus verwenden, um zusätzliche Geräte für den Benutzer zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="677fd-315">In short, you should use a common 2FA mechanism to register extra devices for the user.</span></span>

<span data-ttu-id="677fd-316">Der Code zum Registrieren des neuen Geräts entspricht daher genau dem Code, der für die erstmalige Registrierung des Benutzers (innerhalb der App) verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="677fd-316">The code to register the new device is exactly the same as registering the user for the first time (from within the app).</span></span>

```cs
var keyCreationResult = await KeyCredentialManager.RequestCreateAsync(
    AccountId, KeyCredentialCreationOption.ReplaceExisting);
```

<span data-ttu-id="677fd-317">Damit der Benutzer einfacher erkennen kann, welche Geräte registriert sind, können Sie den Gerätenamen oder einen anderen Bezeichner mit der Registrierung senden.</span><span class="sxs-lookup"><span data-stu-id="677fd-317">To make it easier for the user to recognize which devices are registered, you can choose to send the device name or another identifier as part of the registration.</span></span> <span data-ttu-id="677fd-318">Dies ist z. B. auch hilfreich, wenn Sie einen Dienst für das Back-End implementieren möchten, durch den die Benutzer die Registrierung bei Geräteverlust aufheben können.</span><span class="sxs-lookup"><span data-stu-id="677fd-318">This is also useful, for example, if you want to implement a service on your backend where users can unregister devices when a device is lost.</span></span>

## <a name="36-using-multiple-accounts-in-your-app"></a><span data-ttu-id="677fd-319">3.6 Verwenden mehrerer Konten in der App</span><span class="sxs-lookup"><span data-stu-id="677fd-319">3.6 Using multiple accounts in your app</span></span>


<span data-ttu-id="677fd-320">Neben der Unterstützung von mehreren Geräten für ein Konto ist es auch gängig, mehrere Konten in einer App zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="677fd-320">In addition to supporting multiple devices for a single account, it is also common to support multiple accounts in a single app.</span></span> <span data-ttu-id="677fd-321">Ein Beispiel dafür ist die Anmeldung an mehreren Twitter-Konten innerhalb Ihrer App.</span><span class="sxs-lookup"><span data-stu-id="677fd-321">For example, maybe you are connecting to multiple Twitter accounts from within your app.</span></span> <span data-ttu-id="677fd-322">Mit Windows Hello können Sie mehrere Schlüsselpaare erstellen und mehrere Konten in Ihrer App unterstützen.</span><span class="sxs-lookup"><span data-stu-id="677fd-322">With Windows Hello, you can create multiple key pairs and support multiple accounts inside your app.</span></span>

<span data-ttu-id="677fd-323">Eine Möglichkeit besteht darin, den im vorherigen Kapitel beschriebenen Benutzernamen oder eindeutigen Bezeichner in einem isolierten Speicher zu speichern.</span><span class="sxs-lookup"><span data-stu-id="677fd-323">One way of doing this is keeping the username or unique identifier described in the previous chapter in isolated storage.</span></span> <span data-ttu-id="677fd-324">Daher wird jedes Mal, wenn Sie ein neues Konto erstellen, die Konto-ID im isolierten Speicher abgelegt.</span><span class="sxs-lookup"><span data-stu-id="677fd-324">Therefore, every time you create a new account, you store the account ID in isolated storage.</span></span>

<span data-ttu-id="677fd-325">Auf der App-Benutzeroberfläche bieten Sie dem Benutzer an, eines der zuvor erstellten Konten auszuwählen oder sich mit einem neuen Konto zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="677fd-325">In the app UI, you allow the user to either choose one of the previously created accounts or sign up with a new one.</span></span> <span data-ttu-id="677fd-326">Die Erstellung eines neuen Kontos ist identisch mit den oben beschriebenen Schritten.</span><span class="sxs-lookup"><span data-stu-id="677fd-326">The flow of creating a new account is the same as described before.</span></span> <span data-ttu-id="677fd-327">Für die Auswahl eines Kontos müssen die gespeicherten Konten auf dem Bildschirm aufgelistet werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-327">Choosing an account is a matter of listing the stored accounts on the screen.</span></span> <span data-ttu-id="677fd-328">Nachdem der Benutzer ein Konto ausgewählt hat, wird er über die Konto-ID bei der App angemeldet:</span><span class="sxs-lookup"><span data-stu-id="677fd-328">Once the user selects an account, use the account ID to log on the user in your app:</span></span>

```cs
var openKeyResult = await KeyCredentialManager.OpenAsync(AccountId);
```

<span data-ttu-id="677fd-329">Die übrigen Schritte wurden oben bereits beschrieben.</span><span class="sxs-lookup"><span data-stu-id="677fd-329">The rest of the flow is the same as described earlier.</span></span> <span data-ttu-id="677fd-330">Es sei noch einmal betont, dass alle diese Konten durch dieselbe PIN oder biometrische Geste geschützt werden, da sie in diesem Szenario auf einem Gerät mit demselben Windows-Konto verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-330">To be clear, all these accounts are protected by the same PIN or biometric gesture since in this scenario they are being used on a single device with the same Windows Account.</span></span>

## <a name="4-migrating-an-existing-system-to-windows-hello"></a><span data-ttu-id="677fd-331">4 Migrieren eines vorhandenen Systems zu Windows Hello</span><span class="sxs-lookup"><span data-stu-id="677fd-331">4 Migrating an Existing System to Windows Hello</span></span>


<span data-ttu-id="677fd-332">In diesem kurzen Abschnitt gehen wir davon aus, dass eine UWP (Universelle Windows-Plattform)-App vorhanden ist und das Back-End-System eine Datenbank verwendet, in der der Benutzername und der Kennworthash gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="677fd-332">In this short section, we will address an existing Universal Windows Platform app and backend system that uses a database that stores the username and hashed password.</span></span> <span data-ttu-id="677fd-333">Diese Apps erfassen beim Start der App die Anmeldeinformationen des Benutzers und verwenden diese, wenn das Back-End-System die Authentifizierungsaufforderung zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="677fd-333">These apps collect credentials from the user when the app starts and use them when the backend system returns the authentication challenge.</span></span>

<span data-ttu-id="677fd-334">In diesem Abschnitt wird beschrieben, welche Elemente geändert oder ersetzt werden müssen, damit Windows Hello funktioniert.</span><span class="sxs-lookup"><span data-stu-id="677fd-334">Here, we will describe what pieces need to be changed or replaced to make Windows Hello work.</span></span>

<span data-ttu-id="677fd-335">Die meisten der Verfahren haben wir bereits in den vorhergehenden Kapiteln behandelt.</span><span class="sxs-lookup"><span data-stu-id="677fd-335">We have already described most of the techniques in the earlier chapters.</span></span> <span data-ttu-id="677fd-336">Das Hinzufügen von Windows Hello zu Ihrem vorhandenen System beinhaltet das Hinzufügen einiger verschiedener Workflows im Registrierungs- und Authentifizierungsteil Ihres Codes.</span><span class="sxs-lookup"><span data-stu-id="677fd-336">Adding Windows Hello to your existing system involves adding a couple of different flows in the registration and authentication part of your code.</span></span>

<span data-ttu-id="677fd-337">Ein Ansatz hierfür ist, den Benutzer entscheiden zu lassen, wann das Upgrade durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="677fd-337">One approach is to let the user choose when to upgrade.</span></span> <span data-ttu-id="677fd-338">Wenn Sie nach der Anmeldung des Benutzers an der App erkennen, dass Windows Hello von der App und dem Betriebssystem unterstützt wird, können Sie den Benutzer fragen, ob er seine Anmeldeinformationen auf dieses moderne und sicherheitsoptimierte System umstellen möchte.</span><span class="sxs-lookup"><span data-stu-id="677fd-338">After the user logs on to the app and you detect that the app and OS are capable of supporting Windows Hello, you can ask the user if he or she wants to upgrade credentials to use this modern and more secure system.</span></span> <span data-ttu-id="677fd-339">Anhand des folgenden Codes können Sie überprüfen, ob der Benutzer Windows Hello verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="677fd-339">You can use the following code to check whether the user is capable of using Windows Hello.</span></span>

```cs
var keyCredentialAvailable = await KeyCredentialManager.IsSupportedAsync();
```

<span data-ttu-id="677fd-340">Die Benutzeroberfläche sieht ungefähr wie folgt aus:</span><span class="sxs-lookup"><span data-stu-id="677fd-340">The UI might look something like this:</span></span>

![Windows-Hello-Benutzeroberfläche](images/passport-ui.png)

<span data-ttu-id="677fd-342">Wenn sich der Benutzer entschließt, auf Windows Hello umzusteigen, müssen Sie die vorstehend beschriebene [**KeyCredential**](https://msdn.microsoft.com/library/windows/apps/dn973029) erstellen.</span><span class="sxs-lookup"><span data-stu-id="677fd-342">If the user elects to start using Windows Hello, you create the [**KeyCredential**](https://msdn.microsoft.com/library/windows/apps/dn973029) described before.</span></span> <span data-ttu-id="677fd-343">Der Registrierungsserver im Back-End fügt der Datenbank den öffentlichen Schlüssel und die optionale Nachweisanweisung hinzu.</span><span class="sxs-lookup"><span data-stu-id="677fd-343">The backend registration server adds the public key and optional attestation statement to the database.</span></span> <span data-ttu-id="677fd-344">Da der Benutzer bereits anhand von Benutzernamen und Kennwort authentifiziert wurde, kann der Server die neuen Anmeldeinformationen mit den aktuellen Benutzerinformationen in der Datenbank verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="677fd-344">Because the user is already authenticated with username and password, the server can link the new credentials to the current user information in the database.</span></span> <span data-ttu-id="677fd-345">Das Datenbankmodell kann dem oben beschriebenen Beispiel entsprechen.</span><span class="sxs-lookup"><span data-stu-id="677fd-345">The database model could be the same as the example described earlier.</span></span>

<span data-ttu-id="677fd-346">Wenn die App die [**KeyCredential**](https://msdn.microsoft.com/library/windows/apps/dn973029) des Benutzers erstellen konnte, speichert sie die Benutzer-ID im isolierten Speicher, damit der Benutzer dieses Konto aus der Liste auswählen kann, wenn er die App das nächste Mal startet.</span><span class="sxs-lookup"><span data-stu-id="677fd-346">If the app was able to create the users [**KeyCredential**](https://msdn.microsoft.com/library/windows/apps/dn973029), it stores the user ID in isolated storage so the user can pick this account from the list once the app is started again.</span></span> <span data-ttu-id="677fd-347">Ab diesem Punkt folgt die Steuerung exakt den Beispielen in früheren Kapiteln.</span><span class="sxs-lookup"><span data-stu-id="677fd-347">From this point on, the flow exactly follows the examples described in earlier chapters.</span></span>

<span data-ttu-id="677fd-348">Der letzte Schritt bei der Migration zu einem vollständigen Windows-Hello-Szenario besteht darin, den Anmeldenamen und die Kennwortoption in der App zu deaktivieren und die gespeicherten Kennworthashwerte aus der Datenbank zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="677fd-348">The final step in migrating to a full Windows Hello scenario is disabling the logon name and password option in the app and removing the stored hashed passwords from your database.</span></span>

## <a name="5-summary"></a><span data-ttu-id="677fd-349">5 Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="677fd-349">5 Summary</span></span>


<span data-ttu-id="677fd-350">Mit Windows 10 wird eine höhere Sicherheitsebene eingeführt, die außerdem einfach umzusetzen ist.</span><span class="sxs-lookup"><span data-stu-id="677fd-350">Windows 10 introduces a higher level of security that is also simple to put into practice.</span></span> <span data-ttu-id="677fd-351">Windows Hello bietet ein neues biometrisches Anmeldesystem, das den Benutzer erkennt und alle Versuche, die Identifizierung zu umgehen, aktiv verhindert.</span><span class="sxs-lookup"><span data-stu-id="677fd-351">Windows Hello provides a new biometric sign-in system that recognizes the user and actively defeats efforts to circumvent proper identification.</span></span> <span data-ttu-id="677fd-352">Es kann dann mehrere Ebenen für Schlüssel und Zertifikate bieten, die nie eingeblendet oder außerhalb des TPMs verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="677fd-352">It can then deliver multiple layers of keys and certificates that can never be revealed or used outside the trusted platform module.</span></span> <span data-ttu-id="677fd-353">Eine weitere Sicherheitsebene wird außerdem durch die optionale Verwendung von Attestation Identity Keys (AIK) und Zertifikaten bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="677fd-353">In addition, a further layer of security is available through the optional use of attestation identity keys and certificates.</span></span>

<span data-ttu-id="677fd-354">Dieser Leitfaden enthält Informationen zum Entwurf und zur Bereitstellung dieser Technologien. Damit können Sie als Entwickler Ihre Windows 10-Rollouts im Handumdrehen mit sicherer Authentifizierung ausstatten, die den Schutz von Apps und Back-End-Diensten gewährleistet.</span><span class="sxs-lookup"><span data-stu-id="677fd-354">As a developer, you can use this guidance on design and deployment of these technologies to easily add secure authentication to your Windows 10 rollouts to protect apps and backend services.</span></span> <span data-ttu-id="677fd-355">Der erforderliche Code ist überschaubar und leicht verständlich.</span><span class="sxs-lookup"><span data-stu-id="677fd-355">The code required is minimal and easy to understand.</span></span> <span data-ttu-id="677fd-356">Die eigentliche Arbeit überlassen Sie einfach Windows10.</span><span class="sxs-lookup"><span data-stu-id="677fd-356">Windows 10 does the heavy lifting.</span></span>

<span data-ttu-id="677fd-357">Flexible Implementierungsoptionen ermöglichen Windows Hello, das vorhandene Authentifizierungssystem zu ersetzen oder es einzubinden.</span><span class="sxs-lookup"><span data-stu-id="677fd-357">Flexible implementation options allow Windows Hello to replace or work alongside your existing authentication system.</span></span> <span data-ttu-id="677fd-358">Der Bereitstellung erfolgt schnell und kosteneffizient.</span><span class="sxs-lookup"><span data-stu-id="677fd-358">The deployment experience is painless and economical.</span></span> <span data-ttu-id="677fd-359">Zur Bereitstellung von Windows 10-Sicherheit ist keine zusätzliche Infrastruktur erforderlich.</span><span class="sxs-lookup"><span data-stu-id="677fd-359">No additional infrastructure is needed to deploy Windows 10 security.</span></span> <span data-ttu-id="677fd-360">Durch die Integration von Microsoft Hello in das Betriebssystem ist Windows 10 die sicherste Antwort auf Authentifizierungsprobleme, mit denen Entwickler heute konfrontiert sind.</span><span class="sxs-lookup"><span data-stu-id="677fd-360">With Microsoft Hello built in to the operating system, Windows 10 offers the most secure solution to the authentication problems facing the modern developer.</span></span>

<span data-ttu-id="677fd-361">Mission erfüllt!</span><span class="sxs-lookup"><span data-stu-id="677fd-361">Mission accomplished!</span></span> <span data-ttu-id="677fd-362">Sie haben das Internet gerade sicherer gemacht!</span><span class="sxs-lookup"><span data-stu-id="677fd-362">You just made the Internet a safer place!</span></span>

## <a name="6-resources"></a><span data-ttu-id="677fd-363">6 Ressourcen</span><span class="sxs-lookup"><span data-stu-id="677fd-363">6 Resources</span></span>


### <a name="61-articles-and-sample-code"></a><span data-ttu-id="677fd-364">6.1 Artikel und Beispielcode</span><span class="sxs-lookup"><span data-stu-id="677fd-364">6.1 Articles and sample code</span></span>

-   [<span data-ttu-id="677fd-365">Übersicht über WindowsHello</span><span class="sxs-lookup"><span data-stu-id="677fd-365">Windows Hello overview</span></span>](http://windows.microsoft.com/windows-10/getstarted-what-is-hello)
-   [<span data-ttu-id="677fd-366">Implementierungsdetails für Windows Hello</span><span class="sxs-lookup"><span data-stu-id="677fd-366">Implementation details for Windows Hello</span></span>](https://msdn.microsoft.com/library/mt589441)
-   [<span data-ttu-id="677fd-367">Windows Hello-Codebeispiel auf GitHub</span><span class="sxs-lookup"><span data-stu-id="677fd-367">Windows Hello code sample on GitHub</span></span>](http://go.microsoft.com/fwlink/?LinkID=717812)

### <a name="62-terminology"></a><span data-ttu-id="677fd-368">6.2 Terminologie</span><span class="sxs-lookup"><span data-stu-id="677fd-368">6.2 Terminology</span></span>

|                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|---------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="677fd-369">AIK</span><span class="sxs-lookup"><span data-stu-id="677fd-369">AIK</span></span>                 | <span data-ttu-id="677fd-370">Ein Attestation Identity Key (AIK) liefert einen solchen kryptografischen Nachweis (TPM-Schlüsselnachweis), indem die Eigenschaften des nicht migrierbaren Schlüssel signiert und Eigenschaften und Signatur der vertrauenden Seite zur Überprüfung überlassen werden.</span><span class="sxs-lookup"><span data-stu-id="677fd-370">An attestation identity key is used to provide such a cryptographic proof (TPM key attestation) by signing the properties of the non-migratable key and providing the properties and signature to the relying party for verification.</span></span> <span data-ttu-id="677fd-371">Die resultierende Signatur wird als „Nachweisanweisung“ bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="677fd-371">The resulting signature is called an “attestation statement.”</span></span> <span data-ttu-id="677fd-372">Da die Signatur mithilfe des privaten AIK-Schlüssels erstellt wird – der nur in dem TPM verwendet werden kann, von dem er erstellt wurde – kann die vertrauende Seite sicher davon ausgehen, dass der nachgewiesene Schlüssel nicht migrierbar ist und außerhalb dieses TPMs nicht verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="677fd-372">Since the signature is created using the AIK private key—which can only be used in the TPM that created it—the relying party can trust that the attested key is truly non-migratable and cannot be used outside that TPM.</span></span> |
| <span data-ttu-id="677fd-373">AIK-Zertifikat</span><span class="sxs-lookup"><span data-stu-id="677fd-373">AIK Certificate</span></span>     | <span data-ttu-id="677fd-374">Ein AIK-Zertifikat wird verwendet, um das Vorhandensein eines AIKs in einem TPM nachzuweisen.</span><span class="sxs-lookup"><span data-stu-id="677fd-374">An AIK certificate is used to attest to the presence of an AIK within a TPM.</span></span> <span data-ttu-id="677fd-375">Außerdem wird damit nachgewiesen, dass die anderen vom AIK zertifizierten Schlüssel ebenfalls von diesem TPM stammen.</span><span class="sxs-lookup"><span data-stu-id="677fd-375">It is also used to attest that other keys certified by the AIK originated from that particular TPM.</span></span>                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="677fd-376">IDP</span><span class="sxs-lookup"><span data-stu-id="677fd-376">IDP</span></span>                 | <span data-ttu-id="677fd-377">Ein IDP (Identity Provider) ist ein Identitätsanbieter.</span><span class="sxs-lookup"><span data-stu-id="677fd-377">An IDP is an identity provider.</span></span> <span data-ttu-id="677fd-378">Ein Beispiel ist der von Microsoft für Microsoft-Konten erstellte IDP.</span><span class="sxs-lookup"><span data-stu-id="677fd-378">An example is the IDP build by Microsoft for Microsoft Accounts.</span></span> <span data-ttu-id="677fd-379">Jedes Mal, wenn eine Anwendung sich mit einem Microsoft-Konto (MSA) authentifizieren muss, kann sie den MSA-IDP aufrufen.</span><span class="sxs-lookup"><span data-stu-id="677fd-379">Every time an application needs to authenticate with an MSA, it can call the MSA IDP.</span></span>                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="677fd-380">PKI</span><span class="sxs-lookup"><span data-stu-id="677fd-380">PKI</span></span>                 | <span data-ttu-id="677fd-381">Public Key-Infrastruktur (PKI) bezeichnet üblicherweise eine von einer Organisation gehostete Umgebung, bei der die Organisation selbst für die Erstellung und den Widerruf von Schlüsseln usw. verantwortlich ist.</span><span class="sxs-lookup"><span data-stu-id="677fd-381">Public key infrastructure is commonly used to point to an environment hosted by an organization itself and being responsible for creating keys, revoking keys, etc.</span></span>                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="677fd-382">TPM</span><span class="sxs-lookup"><span data-stu-id="677fd-382">TPM</span></span>                 | <span data-ttu-id="677fd-383">Mit dem TPM (Trusted Platform Module) können kryptografische Schlüsselpaare bestehend aus einem öffentlichen und privaten Schlüssel so erstellt werden, dass der private Schlüssel außerhalb des TPMs niemals aufgedeckt oder verwendet werden kann (nicht migrierbarer Schlüssel).</span><span class="sxs-lookup"><span data-stu-id="677fd-383">The trusted platform module can be used to create cryptographic public/private key pairs in such a way that the private key can never be revealed or used outside the TPM (that is, the key is non-migratable).</span></span>                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="677fd-384">TPM-Schlüsselnachweis</span><span class="sxs-lookup"><span data-stu-id="677fd-384">TPM Key Attestation</span></span> | <span data-ttu-id="677fd-385">Ein Protokoll, durch das kryptografisch geprüft wird, ob ein Schlüssel TPM-gebunden ist.</span><span class="sxs-lookup"><span data-stu-id="677fd-385">A protocol that cryptographically proves that a key is TPM-bound.</span></span> <span data-ttu-id="677fd-386">Mithilfe dieses Nachweistyps kann gewährleistet werden, dass ein bestimmter kryptografischer Vorgang im TPM eines bestimmten Computers ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="677fd-386">This type of attestation can be used to guarantee that a certain cryptographic operation occurred in the TPM of a particular computer</span></span>                                                                                                                                                                                                                                                                                                                       |

 

## <a name="related-topics"></a><span data-ttu-id="677fd-387">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="677fd-387">Related topics</span></span>

* [<span data-ttu-id="677fd-388">Windows Hello-Anmelde-App</span><span class="sxs-lookup"><span data-stu-id="677fd-388">Windows Hello login app</span></span>](microsoft-passport-login.md)
* [<span data-ttu-id="677fd-389">Windows Hello-Anmeldedienst</span><span class="sxs-lookup"><span data-stu-id="677fd-389">Windows Hello login service</span></span>](microsoft-passport-login-auth-service.md)