---
author: drewbatgit
ms.assetid: 09BA9250-A476-4803-910E-52F0A51704B1
description: In diesem Artikel erfahren Sie, wie Sie die IMediaEncodingProperties-Schnittstelle verwenden, um die Auflösung und Bildfrequenz des Kameravorschau-Datenstroms und aufgenommener Fotos und Videos festzulegen.
title: Festlegen von Format, Auflösung und Bildfrequenz für „MediaCapture“
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, UWP
ms.openlocfilehash: cf46cefc6491178444a13917a3ce2b0ffb73c19a
ms.sourcegitcommit: 909d859a0f11981a8d1beac0da35f779786a6889
ms.translationtype: MT
ms.contentlocale: de-DE
ms.locfileid: "233680"
---
# <a name="set-format-resolution-and-frame-rate-for-mediacapture"></a><span data-ttu-id="91da9-104">Festlegen von Format, Auflösung und Bildfrequenz für „MediaCapture“</span><span class="sxs-lookup"><span data-stu-id="91da9-104">Set format, resolution, and frame rate for MediaCapture</span></span>

<span data-ttu-id="91da9-105">\[ Aktualisiert für UWP-Apps unter Windows10.</span><span class="sxs-lookup"><span data-stu-id="91da9-105">\[ Updated for UWP apps on Windows 10.</span></span> <span data-ttu-id="91da9-106">Artikel zu Windows8.x finden Sie im [Archiv](http://go.microsoft.com/fwlink/p/?linkid=619132). \]</span><span class="sxs-lookup"><span data-stu-id="91da9-106">For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \]</span></span>


<span data-ttu-id="91da9-107">In diesem Artikel erfahren Sie, wie Sie die [**IMediaEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh701011)-Schnittstelle verwenden, um die Auflösung und Framerate des Kameravorschau-Datenstroms sowie von aufgenommenen Fotos und Videos festzulegen.</span><span class="sxs-lookup"><span data-stu-id="91da9-107">This article shows you how to use the [**IMediaEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh701011) interface to set the resolution and frame rate of the camera preview stream and captured photos and video.</span></span> <span data-ttu-id="91da9-108">In ihm wird auch gezeigt, wie Sie sicherstellen, dass das Seitenverhältnis des Vorschaudatenstroms mit dem Seitenverhältnis der aufgenommenen Medien übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="91da9-108">It also shows how to ensure that the aspect ratio of the preview stream matches that of the captured media.</span></span>

<span data-ttu-id="91da9-109">Kameraprofile bieten eine erweiterte Möglichkeit zum Ermitteln und Festlegen der Datenstromeigenschaften der Kamera, sie werden jedoch nicht für alle Geräte unterstützt.</span><span class="sxs-lookup"><span data-stu-id="91da9-109">Camera profiles offer a more advanced way of discovering and setting the stream properties of the camera, but they are not supported for all devices.</span></span> <span data-ttu-id="91da9-110">Weitere Informationen finden Sie unter [Kameraprofile](camera-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="91da9-110">For more information, see [Camera profiles](camera-profiles.md).</span></span>

<span data-ttu-id="91da9-111">Der Code in diesem Artikel wurde aus dem [CameraResolution-Beispiel](http://go.microsoft.com/fwlink/p/?LinkId=624252&clcid=0x409) übernommen und angepasst.</span><span class="sxs-lookup"><span data-stu-id="91da9-111">The code in this article was adapted from the [CameraResolution sample](http://go.microsoft.com/fwlink/p/?LinkId=624252&clcid=0x409).</span></span> <span data-ttu-id="91da9-112">Sie können das Beispiel herunterladen, um den verwendeten Code im Kontext anzuzeigen oder das Beispiel als Ausgangspunkt für Ihre eigene App zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="91da9-112">You can download the sample to see the code used in context or to use the sample as a starting point for your own app.</span></span>

> [!NOTE] 
> <span data-ttu-id="91da9-113">Dieser Artikel baut auf Konzepten und Codebeispielen auf, die unter [Allgemeine Foto-, Video- und Audioaufnahme mit „MediaCapture“](basic-photo-video-and-audio-capture-with-MediaCapture.md) erläutert werden. Dort werden die Schritte für die Implementierung einer grundlegenden Foto- und Videoaufnahme beschrieben.</span><span class="sxs-lookup"><span data-stu-id="91da9-113">This article builds on concepts and code discussed in [Basic photo, video, and audio capture with MediaCapture](basic-photo-video-and-audio-capture-with-MediaCapture.md), which describes the steps for implementing basic photo and video capture.</span></span> <span data-ttu-id="91da9-114">Es wird empfohlen, dass Sie sich mit dem grundlegenden Muster für die Medienerfassung in diesem Artikel vertraut machen, bevor Sie in fortgeschrittene Aufnahmeszenarien einsteigen.</span><span class="sxs-lookup"><span data-stu-id="91da9-114">It is recommended that you familiarize yourself with the basic media capture pattern in that article before moving on to more advanced capture scenarios.</span></span> <span data-ttu-id="91da9-115">Bei dem Code in diesem Artikel wird davon ausgegangen, dass Ihre App bereits eine Instanz von MediaCapture aufweist, die ordnungsgemäß initialisiert wurde.</span><span class="sxs-lookup"><span data-stu-id="91da9-115">The code in this article assumes that your app already has an instance of MediaCapture that has been properly initialized.</span></span>

## <a name="a-media-encoding-properties-helper-class"></a><span data-ttu-id="91da9-116">Eine Hilfsklasse mit Mediencodierungseigenschaften</span><span class="sxs-lookup"><span data-stu-id="91da9-116">A media encoding properties helper class</span></span>

<span data-ttu-id="91da9-117">Durch das Erstellen einer einfachen Hilfsklasse zum Umschließen der Funktionalität der [**IMediaEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh701011)-Schnittstelle ist es einfacher, eine Reihe von Codierungseigenschaften auszuwählen, die bestimmte Kriterien erfüllen.</span><span class="sxs-lookup"><span data-stu-id="91da9-117">Creating a simple helper class to wrap the functionality of the [**IMediaEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh701011) interface makes it easier to select a set of encoding properties that meet particular criteria.</span></span> <span data-ttu-id="91da9-118">Aufgrund des folgenden Verhaltens des Codierungseigenschaftenfeatures ist diese Hilfsklasse besonders hilfreich:</span><span class="sxs-lookup"><span data-stu-id="91da9-118">This helper class is particularly useful due to the following behavior of the encoding properties feature:</span></span>

**<span data-ttu-id="91da9-119">Warnung</span><span class="sxs-lookup"><span data-stu-id="91da9-119">Warning</span></span>**  
<span data-ttu-id="91da9-120">Die [**VideoDeviceController.GetAvailableMediaStreamProperties**](https://msdn.microsoft.com/library/windows/apps/br211994)-Methode akzeptiert einen Member der [**MediaStreamType**](https://msdn.microsoft.com/library/windows/apps/br226640)-Enumeration, z. B. **VideoRecord** oder **Photo**, und gibt eine Liste von [**ImageEncodingProperties-Objekten**](https://msdn.microsoft.com/library/windows/apps/hh700993) oder [**VideoEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh701217)-Objekten zurück, die die Datenstrom-Codierungseinstellungen, z. B. die Auflösung des aufgenommenen Fotos oder Videos, angeben.</span><span class="sxs-lookup"><span data-stu-id="91da9-120">The [**VideoDeviceController.GetAvailableMediaStreamProperties**](https://msdn.microsoft.com/library/windows/apps/br211994) method takes a member of the [**MediaStreamType**](https://msdn.microsoft.com/library/windows/apps/br226640) enumeration, such as **VideoRecord** or **Photo**, and returns a list of either [**ImageEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh700993) or [**VideoEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh701217) objects that convey the stream encoding settings, such as the resolution of the captured photo or video.</span></span> <span data-ttu-id="91da9-121">Die Ergebnisse des Aufrufs von **GetAvailableMediaStreamProperties** können **ImageEncodingProperties** oder **VideoEncodingProperties** enthalten, unabhängig vom angegebenen **MediaStreamType**-Wert.</span><span class="sxs-lookup"><span data-stu-id="91da9-121">The results of calling **GetAvailableMediaStreamProperties** may include **ImageEncodingProperties** or **VideoEncodingProperties** regardless of what **MediaStreamType** value is specified.</span></span> <span data-ttu-id="91da9-122">Aus diesem Grund sollten Sie vor dem Zugriff auf die Eigenschaftswerte immer den Typ jedes zurückgegebenen Werts überprüfen und ihn in den entsprechenden Typ umwandeln.</span><span class="sxs-lookup"><span data-stu-id="91da9-122">For this reason, you should always check the type of each returned value and cast it to the appropriate type before attempting to access any of the property values.</span></span>

<span data-ttu-id="91da9-123">Die nachfolgend definierte Hilfsklasse behandelt die Typüberprüfung und -umwandlung für [**ImageEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh700993) oder [**VideoEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh701217), damit der App-Code nicht zwischen den beiden Typen unterscheiden muss.</span><span class="sxs-lookup"><span data-stu-id="91da9-123">The helper class defined below handles the type checking and casting for [**ImageEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh700993) or [**VideoEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh701217) so that your app code doesn't need to distinguish between the two types.</span></span> <span data-ttu-id="91da9-124">Darüber hinaus macht die Hilfsklasse Eigenschaften für das Seitenverhältnis der Eigenschaften, die Framerate (nur für Videocodierungseigenschaften) und einen Anzeigenamen verfügbar, der das Anzeigen der Codierungseigenschaften auf der App-UI erleichtert.</span><span class="sxs-lookup"><span data-stu-id="91da9-124">In addition to this, the helper class exposes properties for the aspect ratio of the properties, the frame rate (for video encoding properties only), and a friendly name that makes it easier to display the encoding properties in the app's UI.</span></span>

<span data-ttu-id="91da9-125">Sie müssen den [**Windows.Media.MediaProperties**](https://msdn.microsoft.com/library/windows/apps/hh701296)-Namespace in die Quelldatei für die Hilfsklasse einschließen.</span><span class="sxs-lookup"><span data-stu-id="91da9-125">You must include the [**Windows.Media.MediaProperties**](https://msdn.microsoft.com/library/windows/apps/hh701296) namespace in the source file for the helper class.</span></span>

[!code-cs[<span data-ttu-id="91da9-126">MediaEncodingPropertiesUsing</span><span class="sxs-lookup"><span data-stu-id="91da9-126">MediaEncodingPropertiesUsing</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetMediaEncodingPropertiesUsing)]

[!code-cs[<span data-ttu-id="91da9-127">StreamPropertiesHelper</span><span class="sxs-lookup"><span data-stu-id="91da9-127">StreamPropertiesHelper</span></span>](./code/BasicMediaCaptureWin10/cs/StreamPropertiesHelper.cs#SnippetStreamPropertiesHelper)]

## <a name="determine-if-the-preview-and-capture-streams-are-independent"></a><span data-ttu-id="91da9-128">Bestimmen, ob der Vorschau- und Aufnahmedatenstrom voneinander unabhängig sind</span><span class="sxs-lookup"><span data-stu-id="91da9-128">Determine if the preview and capture streams are independent</span></span>

<span data-ttu-id="91da9-129">Auf einigen Geräten wird für den Vorschau- und Aufnahmedatenstrom der gleiche Hardwarekontakt verwendet.</span><span class="sxs-lookup"><span data-stu-id="91da9-129">On some devices, the same hardware pin is used for both preview and capture streams.</span></span> <span data-ttu-id="91da9-130">Bei diesen Geräten werden durch Festlegen der Codierungseigenschaften eines Datenstroms auch die Codierungseigenschaften des anderen Datenstroms festgelegt.</span><span class="sxs-lookup"><span data-stu-id="91da9-130">On these devices, setting the encoding properties of one will also set the other.</span></span> <span data-ttu-id="91da9-131">Für Geräte, die unterschiedliche Hardwarekontakte für die Aufnahme und Vorschau verwenden, können die Eigenschaften für jeden Datenstrom unabhängig voneinander festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="91da9-131">On devices that use different hardware pins for capture and preview, the properties can be set for each stream independently.</span></span> <span data-ttu-id="91da9-132">Mit dem folgenden Code können Sie bestimmen, ob der Vorschau- und Aufnahmedatenstrom unabhängig voneinander sind.</span><span class="sxs-lookup"><span data-stu-id="91da9-132">Use the following code to determine if the preview and capture streams are independent.</span></span> <span data-ttu-id="91da9-133">Sie sollten die Benutzeroberfläche anpassen, um abhängig vom Ergebnis dieses Tests das eigenständige Festlegen der Datenströme zu aktivieren oder zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="91da9-133">You should adjust your UI to enable or disable the setting of the streams independently based on the result of this test.</span></span>

[!code-cs[<span data-ttu-id="91da9-134">CheckIfStreamsAreIdentical</span><span class="sxs-lookup"><span data-stu-id="91da9-134">CheckIfStreamsAreIdentical</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetCheckIfStreamsAreIdentical)]

## <a name="get-a-list-of-available-stream-properties"></a><span data-ttu-id="91da9-135">Abrufen einer Liste der verfügbaren Datenstromeigenschaften</span><span class="sxs-lookup"><span data-stu-id="91da9-135">Get a list of available stream properties</span></span>

<span data-ttu-id="91da9-136">Rufen Sie eine Liste der verfügbaren Datenstromeigenschaften für ein Aufnahmegerät ab. Hierzu rufen Sie den [**VideoDeviceController**](https://msdn.microsoft.com/library/windows/apps/br226825) für das [MediaCapture](capture-photos-and-video-with-mediacapture.md)-Objekt der App ab, rufen [**GetAvailableMediaStreamProperties**](https://msdn.microsoft.com/library/windows/apps/br211994) auf und übergeben einen der [**MediaStreamType**](https://msdn.microsoft.com/library/windows/apps/br226640)-Werte, d. h. **VideoPreview**, **VideoRecord** oder **Photo**</span><span class="sxs-lookup"><span data-stu-id="91da9-136">Get a list of the available stream properties for a capture device by getting the [**VideoDeviceController**](https://msdn.microsoft.com/library/windows/apps/br226825) for your app's [MediaCapture](capture-photos-and-video-with-mediacapture.md) object and then calling [**GetAvailableMediaStreamProperties**](https://msdn.microsoft.com/library/windows/apps/br211994) and passing in one of the [**MediaStreamType**](https://msdn.microsoft.com/library/windows/apps/br226640) values, **VideoPreview**, **VideoRecord**, or **Photo**.</span></span> <span data-ttu-id="91da9-137">In diesem Beispiel wird für jeden der von **GetAvailableMediaStreamProperties** zurückgegebenen [**IMediaEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh701011)-Werte unter Verwendung von Linq-Syntax eine Liste von **StreamPropertiesHelper**-Objekten erstellt, die zuvor in diesem Artikel definiert wurden.</span><span class="sxs-lookup"><span data-stu-id="91da9-137">In this example, Linq syntax is used to create a list of **StreamPropertiesHelper** objects, defined previously in this article, for each of the [**IMediaEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh701011) values returned from **GetAvailableMediaStreamProperties**.</span></span> <span data-ttu-id="91da9-138">In diesem Beispiel werden Linq-Erweiterungsmethoden verwendet, um die zurückgegebenen Eigenschaften zunächst nach Auflösung und dann nach Bildfrequenz zu sortieren.</span><span class="sxs-lookup"><span data-stu-id="91da9-138">This example first uses Linq extension methods to order the returned properties based first on resolution and then on frame rate.</span></span>

<span data-ttu-id="91da9-139">Wenn für die App bestimmte Anforderungen an die Auflösung oder Bildfrequenz gelten, können Sie programmgesteuert eine Reihe von Mediencodierungseigenschaften auswählen.</span><span class="sxs-lookup"><span data-stu-id="91da9-139">If your app has specific resolution or frame rate requirements, you can select a set of media encoding properties programmatically.</span></span> <span data-ttu-id="91da9-140">Eine Kamera-App macht stattdessen die Liste der verfügbaren Eigenschaften auf der Benutzeroberfläche verfügbar und ermöglicht es dem Benutzer, die gewünschten Einstellungen auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="91da9-140">A typical camera app will instead expose the list of available properties in the UI and allow the user to select their desired settings.</span></span> <span data-ttu-id="91da9-141">Für jedes Listenelement von **StreamPropertiesHelper**-Objekten in der Liste wird ein **ComboBoxItem** erstellt.</span><span class="sxs-lookup"><span data-stu-id="91da9-141">A **ComboBoxItem** is created for each item in the list of **StreamPropertiesHelper** objects in the list.</span></span> <span data-ttu-id="91da9-142">Der Inhalt wird auf den von der Hilfsklasse zurückgegebenen Anzeigenamen festgelegt, und das Tag wird auf die Hilfsklasse selbst festgelegt, sodass es später zum Abrufen der zugeordneten Codierungseigenschaften verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="91da9-142">The content is set to the friendly name returned by the helper class and the tag is set to the helper class itself so it can be used later to retrieve the associated encoding properties.</span></span> <span data-ttu-id="91da9-143">Anschließend werden dem an die Methode übergebenen **ComboBox**-Element die einzelnen **ComboBoxItem**-Elemente hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="91da9-143">Each **ComboBoxItem** is then added to the **ComboBox** passed into the method.</span></span>

[!code-cs[<span data-ttu-id="91da9-144">PopulateStreamPropertiesUI</span><span class="sxs-lookup"><span data-stu-id="91da9-144">PopulateStreamPropertiesUI</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetPopulateStreamPropertiesUI)]

## <a name="set-the-desired-stream-properties"></a><span data-ttu-id="91da9-145">Festlegen der gewünschten Datenstromeigenschaften</span><span class="sxs-lookup"><span data-stu-id="91da9-145">Set the desired stream properties</span></span>

<span data-ttu-id="91da9-146">Weisen Sie den Videogerätecontroller an, die gewünschten Codierungseigenschaften zu verwenden, indem Sie [**SetMediaStreamPropertiesAsync**](https://msdn.microsoft.com/library/windows/apps/hh700895) aufrufen und den **MediaStreamType**-Wert übergeben, der angibt, ob Foto-, Video- oder Vorschaueigenschaften festgelegt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="91da9-146">Tell the video device controller to use your desired encoding properties by calling [**SetMediaStreamPropertiesAsync**](https://msdn.microsoft.com/library/windows/apps/hh700895), passing in the **MediaStreamType** value indicating whether the photo, video, or preview properties should be set.</span></span> <span data-ttu-id="91da9-147">In diesem Beispiel werden die angeforderten Codierungseigenschaften festgelegt, wenn der Benutzer ein Element in einem der **ComboBox**-Objekte auswählt, die mithilfe der **PopulateStreamPropertiesUI**-Hilfsmethode aufgefüllt wurden.</span><span class="sxs-lookup"><span data-stu-id="91da9-147">This example sets the requested encoding properties when the user selects an item in one of the **ComboBox** objects populated with the **PopulateStreamPropertiesUI** helper method.</span></span>

[!code-cs[<span data-ttu-id="91da9-148">PreviewSettingsChanged</span><span class="sxs-lookup"><span data-stu-id="91da9-148">PreviewSettingsChanged</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetPreviewSettingsChanged)]

[!code-cs[<span data-ttu-id="91da9-149">PhotoSettingsChanged</span><span class="sxs-lookup"><span data-stu-id="91da9-149">PhotoSettingsChanged</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetPhotoSettingsChanged)]

[!code-cs[<span data-ttu-id="91da9-150">VideoSettingsChanged</span><span class="sxs-lookup"><span data-stu-id="91da9-150">VideoSettingsChanged</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetVideoSettingsChanged)]

## <a name="match-the-aspect-ratio-of-the-preview-and-capture-streams"></a><span data-ttu-id="91da9-151">Abgleichen des Seitenverhältnisses von Vorschau- und Aufnahmedatenstrom</span><span class="sxs-lookup"><span data-stu-id="91da9-151">Match the aspect ratio of the preview and capture streams</span></span>

<span data-ttu-id="91da9-152">Eine typische Kamera-App stellt zwar UI-Elemente bereit, mit denen der Benutzer die Auflösung für Video- oder Fotoaufnahmen festlegen kann, die Auflösung der Vorschau wird jedoch üblicherweise programmgesteuert festgelegt.</span><span class="sxs-lookup"><span data-stu-id="91da9-152">A typical camera app will provide UI for the user to select the video or photo capture resolution but will programmatically set the preview resolution.</span></span> <span data-ttu-id="91da9-153">Für die Wahl der optimalen Auflösung für den Vorschaudatenstrom Ihrer App gibt es unterschiedliche Strategien:</span><span class="sxs-lookup"><span data-stu-id="91da9-153">There are a few different strategies for selecting the best preview stream resolution for your app:</span></span>

-   <span data-ttu-id="91da9-154">Wählen Sie die höchste verfügbare Vorschauauflösung aus, und überlassen Sie jegliche erforderliche Vorschauskalierung dem Benutzeroberflächenframework.</span><span class="sxs-lookup"><span data-stu-id="91da9-154">Select the highest available preview resolution, letting the UI framework perform any necessary scaling of the preview.</span></span>

-   <span data-ttu-id="91da9-155">Wählen Sie die Vorschauauflösung aus, die der Aufnahmeauflösung am nächsten kommt, um eine möglichst geringe Diskrepanz zwischen Vorschau und tatsächlicher Medienaufnahme zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="91da9-155">Select the preview resolution closest to the capture resolution so that the preview displays the closest representation to the final captured media.</span></span>

-   <span data-ttu-id="91da9-156">Wählen Sie die Vorschauauflösung aus, die möglichst genau der Größe des [**CaptureElement**](https://msdn.microsoft.com/library/windows/apps/br209278)-Elements entspricht, damit nicht mehr Pixel als nötig die Pipeline für den Vorschaudatenstrom durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="91da9-156">Select the preview resolution closest to the size of the [**CaptureElement**](https://msdn.microsoft.com/library/windows/apps/br209278) so that no more pixels than necessary are going through the preview stream pipeline.</span></span>

**<span data-ttu-id="91da9-157">Wichtig</span><span class="sxs-lookup"><span data-stu-id="91da9-157">Important</span></span>**  
<span data-ttu-id="91da9-158">Bei einigen Geräten kann für den Vorschau- und Aufnahmedatenstrom der Kamera ein unterschiedliches Seitenverhältnis festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="91da9-158">It is possible, on some devices, to set a different aspect ratio for the camera's preview stream and capture stream.</span></span> <span data-ttu-id="91da9-159">Durch diese Abweichung verursachtes Zuschneiden von Frames kann dazu führen, dass in den aufgenommenen Medien Inhalt vorhanden ist, der in der Vorschau nicht sichtbar war, sodass eine negative Benutzererfahrung die Folge ist.</span><span class="sxs-lookup"><span data-stu-id="91da9-159">Frame cropping caused by this mismatch can result in content being present in the captured media that was not visible in the preview which can result in a negative user experience.</span></span> <span data-ttu-id="91da9-160">Es wird dringend empfohlen, für den Vorschau- und Aufnahmedatenstrom das gleiche Seitenverhältnis innerhalb eines kleinen Toleranzfensters zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="91da9-160">It is strongly recommended that you use the same aspect ratio, within a small tolerance window, for the preview and capture streams.</span></span> <span data-ttu-id="91da9-161">Solange das Seitenverhältnis nahezu übereinstimmt, können für Aufnahme und Vorschau vollkommen unterschiedliche Auflösungen aktiviert sein.</span><span class="sxs-lookup"><span data-stu-id="91da9-161">It is fine to have entirely different resolutions enabled for capture and preview as long as the aspect ratio match closely.</span></span>


<span data-ttu-id="91da9-162">Um sicherzustellen, dass das Seitenverhältnis des Foto- oder Videoaufnahme-Datenstroms mit dem Seitenverhältnis des Vorschaudatenstroms übereinstimmt, wird in diesem Beispiel [**VideoDeviceController.GetMediaStreamProperties**](https://msdn.microsoft.com/library/windows/apps/br211995) aufgerufen und der **VideoPreview**-Enumerationswert übergeben, um die aktuellen Datenstromeigenschaften des Vorschaudatenstroms anzufordern.</span><span class="sxs-lookup"><span data-stu-id="91da9-162">To ensure that the photo or video capture streams match the aspect ratio of the preview stream, this example calls [**VideoDeviceController.GetMediaStreamProperties**](https://msdn.microsoft.com/library/windows/apps/br211995) and passes in the **VideoPreview** enum value to request the current stream properties for the preview stream.</span></span> <span data-ttu-id="91da9-163">Anschließend wird ein kleines Toleranzfenster für das Seitenverhältnis definiert, damit Seitenverhältnisse eingeschlossen werden können, die nicht genau mit dem Seitenverhältnis des Vorschaudatenstroms übereinstimmen, solange die Abweichung nicht groß ist.</span><span class="sxs-lookup"><span data-stu-id="91da9-163">Next a small aspect ratio tolerance window is defined so that we can include aspect ratios that are not exactly the same as the preview stream, as long as they are close.</span></span> <span data-ttu-id="91da9-164">Dann werden mithilfe einer Linq-Erweiterungsmethode nur die **StreamPropertiesHelper**-Objekte ausgewählt, in denen das Seitenverhältnis im definierten Toleranzbereich des Vorschaudatenstroms liegt.</span><span class="sxs-lookup"><span data-stu-id="91da9-164">Next, a Linq extension method is used to select just the **StreamPropertiesHelper** objects where the aspect ratio is within the defined tolerance range of the preview stream.</span></span>

[!code-cs[<span data-ttu-id="91da9-165">MatchPreviewAspectRatio</span><span class="sxs-lookup"><span data-stu-id="91da9-165">MatchPreviewAspectRatio</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetMatchPreviewAspectRatio)]

 

 




