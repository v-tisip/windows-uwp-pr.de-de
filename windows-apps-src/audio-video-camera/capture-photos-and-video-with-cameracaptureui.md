---
author: drewbatgit
ms.assetid: CC0D6E9B-128D-488B-912F-318F5EE2B8D3
description: Dieser Artikel beschreibt, wie Sie die „CameraCaptureUI“-Klasse zum Aufnehmen von Fotos oder Videos mit der in Windows integrierten Kamera-UI verwenden.
title: Aufnehmen von Fotos und Videos mit der in Windows integrierten Kamera-UI
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 3ba33a1e79a2447c5dac546ce0f1caeaf16929a3
ms.sourcegitcommit: e6daa7ff878f2f0c7015aca9787e7f2730abcfbf
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 10/03/2018
ms.locfileid: "4313366"
---
# <a name="capture-photos-and-video-with-windows-built-in-camera-ui"></a><span data-ttu-id="73149-104">Aufnehmen von Fotos und Videos mit der in Windows integrierten Kamera-UI</span><span class="sxs-lookup"><span data-stu-id="73149-104">Capture photos and video with Windows built-in camera UI</span></span>



<span data-ttu-id="73149-105">Dieser Artikel beschreibt, wie Sie die „CameraCaptureUI“-Klasse zum Aufnehmen von Fotos oder Videos mit der in Windows integrierten Kamera-UI verwenden.</span><span class="sxs-lookup"><span data-stu-id="73149-105">This article describes how to use the CameraCaptureUI class to capture photos or videos using the camera UI built into Windows.</span></span> <span data-ttu-id="73149-106">Dieses Feature ist benutzerfreundlich und ermöglicht, dass die App ein vom Benutzer aufgenommenes Fotos oder Video mit nur wenigen Codezeilen abruft.</span><span class="sxs-lookup"><span data-stu-id="73149-106">This feature is easy to use and allows your app to get a user-captured photo or video with just a few lines of code.</span></span>

<span data-ttu-id="73149-107">Wenn Sie eine eigene Kamera-UI bereitstellen möchten oder Ihr Szenario eine zuverlässigere Steuerung des Aufnahmevorgangs auf unterster Ebene erfordert, sollten Sie das [**MediaCapture**](https://msdn.microsoft.com/library/windows/apps/br241124)-Objekt verwenden und Ihre eigene Aufzeichnungsoberfläche implementieren.</span><span class="sxs-lookup"><span data-stu-id="73149-107">If you want to provide your own camera UI or if your scenario requires more robust, low-level control of the capture operation, you should use the [**MediaCapture**](https://msdn.microsoft.com/library/windows/apps/br241124) object and implement your own capture experience.</span></span> <span data-ttu-id="73149-108">Weitere Informationen finden Sie unter [Allgemeine Foto-, Video- und Audioaufnahme mit „MediaCapture“](basic-photo-video-and-audio-capture-with-MediaCapture.md).</span><span class="sxs-lookup"><span data-stu-id="73149-108">For more information, see [Basic photo, video, and audio capture with MediaCapture](basic-photo-video-and-audio-capture-with-MediaCapture.md).</span></span>

> [!NOTE]
> <span data-ttu-id="73149-109">Sie sollten die **Webcam-** oder **Mikrofonfunktion** Funktionen nicht in der app-Manifestdatei angeben, wenn Ihre app nur "cameracaptureui" verwendet.</span><span class="sxs-lookup"><span data-stu-id="73149-109">You should not specify the **webcam** or **microphone** capabilities in your app manifest file if your app only uses CameraCaptureUI.</span></span> <span data-ttu-id="73149-110">Andernfalls wird Ihre App in den Datenschutzeinstellungen für die Kamera angezeigt. Aber auch wenn der Benutzer den Kamerazugriff auf Ihre App verweigert, wird dadurch nicht verhindert, dass „CameraCaptureUI“ Medien aufzeichnet.</span><span class="sxs-lookup"><span data-stu-id="73149-110">If you do so, your app will be displayed in the device's camera privacy settings, but even if the user denies camera access to your app, it will not prevent the CameraCaptureUI from capturing media.</span></span> <span data-ttu-id="73149-111">Das liegt daran, dass es sich bei der integrierten Kamera-App von Windows um eine vertrauenswürdige Erstanbieter-App handelt, die erfordert, dass der Benutzer die Foto-, Audio- und Videoaufnahme durch einen Tastendruck initiiert.</span><span class="sxs-lookup"><span data-stu-id="73149-111">This is because the Windows built-in camera app is a trusted first-party app that requires the user to initiate photo, audio, and video capture with a button press.</span></span> <span data-ttu-id="73149-112">Ihre app möglicherweise Windows Application Certification Kit besteht bei Zertifizierung an den Store übermittelt werden, wenn Sie die Funktionen Webcam- oder Mikrofonfunktion angeben, wenn "cameracaptureui" als einzige Foto Aufnahme Mechanismus verwenden.</span><span class="sxs-lookup"><span data-stu-id="73149-112">Your app may fail Windows Application Certification Kit certification when submitted to the Store if you specify the webcam or microphone capabilities when using CameraCaptureUI as your only photo capture mechanism.</span></span>
> <span data-ttu-id="73149-113">Sie müssen die Webcam- oder Mikrofonfunktion in Ihrem App-Manifest angeben, wenn Sie „MediaCapture“ für die programmgesteuerte Audio-, Foto- oder Videoaufnahme verwenden.</span><span class="sxs-lookup"><span data-stu-id="73149-113">You must specify the webcam or microphone capabilities in your app manifest file if you are using MediaCapture to capture audio, photos, or video programmatically.</span></span>

## <a name="capture-a-photo-with-cameracaptureui"></a><span data-ttu-id="73149-114">Aufnehmen eines Fotos mit „CameraCaptureUI“</span><span class="sxs-lookup"><span data-stu-id="73149-114">Capture a photo with CameraCaptureUI</span></span>

<span data-ttu-id="73149-115">Um die Kameraaufnahme-UI zu verwenden, schließen Sie den [**Windows.Media.Capture**](https://msdn.microsoft.com/library/windows/apps/br226738)-Namespace in Ihr Projekt ein.</span><span class="sxs-lookup"><span data-stu-id="73149-115">To use the camera capture UI, include the [**Windows.Media.Capture**](https://msdn.microsoft.com/library/windows/apps/br226738) namespace in your project.</span></span> <span data-ttu-id="73149-116">Um Dateivorgänge mit der zurückgegebenen Bilddatei auszuführen, schließen Sie [**Windows.Storage**](https://msdn.microsoft.com/library/windows/apps/br227346) ein.</span><span class="sxs-lookup"><span data-stu-id="73149-116">To do file operations with the returned image file, include [**Windows.Storage**](https://msdn.microsoft.com/library/windows/apps/br227346).</span></span>

[!code-cs[UsingCaptureUI](./code/CameraCaptureUIWin10/cs/MainPage.xaml.cs#SnippetUsingCaptureUI)]

<span data-ttu-id="73149-117">Um ein Foto aufzunehmen, erstellen Sie ein neues [**CameraCaptureUI**](https://msdn.microsoft.com/library/windows/apps/br241030)-Objekt.</span><span class="sxs-lookup"><span data-stu-id="73149-117">To capture a photo, create a new [**CameraCaptureUI**](https://msdn.microsoft.com/library/windows/apps/br241030) object.</span></span> <span data-ttu-id="73149-118">Durch Verwendung der [**PhotoSettings**](https://msdn.microsoft.com/library/windows/apps/br241058)-Eigenschaft des Objekts können Sie Eigenschaften für das zurückgegebene Foto angeben, z. B. das Bildformat des Fotos.</span><span class="sxs-lookup"><span data-stu-id="73149-118">Using the object's [**PhotoSettings**](https://msdn.microsoft.com/library/windows/apps/br241058) property you can specify properties for the returned photo such as the image format of the photo.</span></span> <span data-ttu-id="73149-119">Standardmäßig kann der Benutzer über die Kameraaufnahme-UI das Foto zuschneiden, bevor es zurückgegeben wird. Dies kann aber mit der [**AllowCropping**](https://msdn.microsoft.com/library/windows/apps/br241042)-Eigenschaft deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="73149-119">By default, the camera capture UI allows the user to crop the photo before it is returned, although this can be disabled with the [**AllowCropping**](https://msdn.microsoft.com/library/windows/apps/br241042) property.</span></span> <span data-ttu-id="73149-120">In diesem Beispiel wird [**CroppedSizeInPixels**](https://msdn.microsoft.com/library/windows/apps/br241044) festgelegt, um anzufordern, dass das zurückgegebene Bild 200x200 Pixel hat.</span><span class="sxs-lookup"><span data-stu-id="73149-120">This example sets the [**CroppedSizeInPixels**](https://msdn.microsoft.com/library/windows/apps/br241044) to request that the returned image be 200 x 200 in pixels.</span></span>

> [!NOTE]
> <span data-ttu-id="73149-121">Das Zuschneiden von Bildern in **CameraCaptureUI** wird für Geräte in der Mobilgerätefamilie nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="73149-121">Imaging cropping in the **CameraCaptureUI** is not supported for devices in the Mobile device family.</span></span> <span data-ttu-id="73149-122">Der Wert der [**AllowCropping**](https://msdn.microsoft.com/library/windows/apps/br241042)-Eigenschaft wird ignoriert, wenn Ihre App auf diesen Geräten ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="73149-122">The value of the [**AllowCropping**](https://msdn.microsoft.com/library/windows/apps/br241042) property is ignored when your app is running on these devices.</span></span>

<span data-ttu-id="73149-123">Rufen Sie [**CaptureFileAsync**](https://msdn.microsoft.com/library/windows/apps/br241057) auf, und geben Sie [**CameraCaptureUIMode.Photo**](https://msdn.microsoft.com/library/windows/apps/br241040) an, um festzulegen, dass ein Foto aufgenommen werden soll.</span><span class="sxs-lookup"><span data-stu-id="73149-123">Call [**CaptureFileAsync**](https://msdn.microsoft.com/library/windows/apps/br241057) and specify [**CameraCaptureUIMode.Photo**](https://msdn.microsoft.com/library/windows/apps/br241040) to specify that a photo should be captured.</span></span> <span data-ttu-id="73149-124">Die Methode gibt eine [**StorageFile**](https://msdn.microsoft.com/library/windows/apps/br227171)-Instanz mit dem Bild zurück, wenn die Aufnahme erfolgreich ist.</span><span class="sxs-lookup"><span data-stu-id="73149-124">The method returns a [**StorageFile**](https://msdn.microsoft.com/library/windows/apps/br227171) instance containing the image if the capture is successful.</span></span> <span data-ttu-id="73149-125">Wenn der Benutzer die Aufnahme abbricht, ist das zurückgegebene Objekt „null“.</span><span class="sxs-lookup"><span data-stu-id="73149-125">If the user cancels the capture, the returned object is null.</span></span>

[!code-cs[CapturePhoto](./code/CameraCaptureUIWin10/cs/MainPage.xaml.cs#SnippetCapturePhoto)]

<span data-ttu-id="73149-126">Die **StorageFile** mit dem aufgenommenen Foto erhält einen dynamisch generierten Namen und wird im lokalen Ordner der App gespeichert.</span><span class="sxs-lookup"><span data-stu-id="73149-126">The **StorageFile** containing the captured photo is given a dynamically generated name and saved in your app's local folder.</span></span> <span data-ttu-id="73149-127">Es kann ratsam sein, die Datei in einen anderen Ordner zu verschieben, um die aufgenommenen Fotos besser zu organisieren.</span><span class="sxs-lookup"><span data-stu-id="73149-127">To better organize your captured photos, you may want to move the file to a different folder.</span></span>

[!code-cs[CopyAndDeletePhoto](./code/CameraCaptureUIWin10/cs/MainPage.xaml.cs#SnippetCopyAndDeletePhoto)]

<span data-ttu-id="73149-128">Zur Verwendung des Fotos in der App kann die Erstellung eines [**SoftwareBitmap**](https://msdn.microsoft.com/library/windows/apps/dn887358)-Objekts hilfreich sein, das mit unterschiedlichen Funktionen für universelle Windows-Apps genutzt werden kann.</span><span class="sxs-lookup"><span data-stu-id="73149-128">To use your photo in your app, you may want to create a [**SoftwareBitmap**](https://msdn.microsoft.com/library/windows/apps/dn887358) object that can be used with several different Universal Windows app features.</span></span>

<span data-ttu-id="73149-129">Sie sollten zunächst den [**Windows.Graphics.Imaging**](https://msdn.microsoft.com/library/windows/apps/br226400)-Namespace in Ihr Projekt einschließen.</span><span class="sxs-lookup"><span data-stu-id="73149-129">First you should include the [**Windows.Graphics.Imaging**](https://msdn.microsoft.com/library/windows/apps/br226400) namespace in your project.</span></span>

[!code-cs[UsingSoftwareBitmap](./code/CameraCaptureUIWin10/cs/MainPage.xaml.cs#SnippetUsingSoftwareBitmap)]

<span data-ttu-id="73149-130">Rufen Sie [**OpenAsync**](https://msdn.microsoft.com/library/windows/apps/br227116) auf, um einen Stream aus der Bilddatei abzurufen.</span><span class="sxs-lookup"><span data-stu-id="73149-130">Call [**OpenAsync**](https://msdn.microsoft.com/library/windows/apps/br227116) to get a stream from the image file.</span></span> <span data-ttu-id="73149-131">Rufen Sie [**BitmapDecoder.CreateAsync**](https://msdn.microsoft.com/library/windows/apps/br226182) auf, um einen Bitmap-Decoder für den Stream abzurufen.</span><span class="sxs-lookup"><span data-stu-id="73149-131">Call [**BitmapDecoder.CreateAsync**](https://msdn.microsoft.com/library/windows/apps/br226182) to get a bitmap decoder for the stream.</span></span> <span data-ttu-id="73149-132">Rufen Sie dann [**GetSoftwareBitmap**](https://msdn.microsoft.com/library/windows/apps/dn887332) auf, um eine **SoftwareBitmap**-Darstellung des Bilds abzurufen.</span><span class="sxs-lookup"><span data-stu-id="73149-132">Then call [**GetSoftwareBitmap**](https://msdn.microsoft.com/library/windows/apps/dn887332) to get a **SoftwareBitmap** representation of the image.</span></span>

[!code-cs[SoftwareBitmap](./code/CameraCaptureUIWin10/cs/MainPage.xaml.cs#SnippetSoftwareBitmap)]

<span data-ttu-id="73149-133">Um das Bild in der Benutzeroberfläche anzuzeigen, deklarieren Sie ein [**Image**](https://msdn.microsoft.com/library/windows/apps/br242752)-Steuerelement auf der XAML-Seite.</span><span class="sxs-lookup"><span data-stu-id="73149-133">To display the image in your UI, declare an [**Image**](https://msdn.microsoft.com/library/windows/apps/br242752) control in your XAML page.</span></span>

[!code-xml[ImageControl](./code/CameraCaptureUIWin10/cs/MainPage.xaml#SnippetImageControl)]

<span data-ttu-id="73149-134">Um die Software-Bitmap in der XAML-Seite zu verwenden, schließen Sie den [**Windows.UI.Xaml.Media.Imaging**](https://msdn.microsoft.com/library/windows/apps/br243258)-Namespace in Ihr Projekt ein.</span><span class="sxs-lookup"><span data-stu-id="73149-134">To use the software bitmap in your XAML page, include the using [**Windows.UI.Xaml.Media.Imaging**](https://msdn.microsoft.com/library/windows/apps/br243258) namespace in your project.</span></span>

[!code-cs[UsingSoftwareBitmapSource](./code/CameraCaptureUIWin10/cs/MainPage.xaml.cs#SnippetUsingSoftwareBitmapSource)]

<span data-ttu-id="73149-135">Das **Image**-Steuerelement erfordert, dass die Bildquelle das BGRA8-Format mit vormultipliziertem oder gar keinem Alphaformat aufweist. Rufen Sie daher die statische Methode [**SoftwareBitmap.Convert**](https://msdn.microsoft.com/library/windows/apps/dn887362) auf, um eine neue Software-Bitmap mit dem gewünschten Format zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="73149-135">The **Image** control requires that the image source be in BGRA8 format with premultiplied alpha or no alpha, so call the static method [**SoftwareBitmap.Convert**](https://msdn.microsoft.com/library/windows/apps/dn887362) to create a new software bitmap with the desired format.</span></span> <span data-ttu-id="73149-136">Erstellen Sie als Nächstes ein neues [**SoftwareBitmapSource**](https://msdn.microsoft.com/library/windows/apps/dn997854)-Objekt, und rufen Sie [**SetBitmapAsync**](https://msdn.microsoft.com/library/windows/apps/dn997856) auf, um die Software-Bitmap der Quelle zuzuweisen.</span><span class="sxs-lookup"><span data-stu-id="73149-136">Next, create a new [**SoftwareBitmapSource**](https://msdn.microsoft.com/library/windows/apps/dn997854) object and call [**SetBitmapAsync**](https://msdn.microsoft.com/library/windows/apps/dn997856) to assign the software bitmap to the source.</span></span> <span data-ttu-id="73149-137">Legen Sie abschließend die [**Source**](https://msdn.microsoft.com/library/windows/apps/br242760)-Eigenschaft des **Image**-Steuerelements fest, um das aufgenommene Foto in der Benutzeroberfläche anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="73149-137">Finally, set the **Image** control's [**Source**](https://msdn.microsoft.com/library/windows/apps/br242760) property to display the captured photo in the UI.</span></span>

[!code-cs[SetImageSource](./code/CameraCaptureUIWin10/cs/MainPage.xaml.cs#SnippetSetImageSource)]

## <a name="capture-a-video-with-cameracaptureui"></a><span data-ttu-id="73149-138">Aufnehmen eines Videos mit CameraCaptureUI</span><span class="sxs-lookup"><span data-stu-id="73149-138">Capture a video with CameraCaptureUI</span></span>

<span data-ttu-id="73149-139">Um ein Video aufzunehmen, erstellen Sie ein neues [**CameraCaptureUI**](https://msdn.microsoft.com/library/windows/apps/br241030)-Objekt.</span><span class="sxs-lookup"><span data-stu-id="73149-139">To capture a video, create a new [**CameraCaptureUI**](https://msdn.microsoft.com/library/windows/apps/br241030) object.</span></span> <span data-ttu-id="73149-140">Durch Verwendung der [**VideoSettings**](https://msdn.microsoft.com/library/windows/apps/br241059)-Eigenschaft des Objekts können Sie Eigenschaften für das zurückgegebene Video angeben, z. B. das Format des Videos.</span><span class="sxs-lookup"><span data-stu-id="73149-140">Using the object's [**VideoSettings**](https://msdn.microsoft.com/library/windows/apps/br241059) property you can specify properties for the returned video such as the format of the video.</span></span>

<span data-ttu-id="73149-141">Rufen Sie [**CaptureFileAsync**](https://msdn.microsoft.com/library/windows/apps/br241057) auf, und geben Sie [**Video**](https://msdn.microsoft.com/library/windows/apps/br241059) an, um festzulegen, dass ein Video aufgenommen werden soll.</span><span class="sxs-lookup"><span data-stu-id="73149-141">Call [**CaptureFileAsync**](https://msdn.microsoft.com/library/windows/apps/br241057) and specify [**Video**](https://msdn.microsoft.com/library/windows/apps/br241059) to specify that a video should be capture.</span></span> <span data-ttu-id="73149-142">Die Methode gibt eine [**StorageFile**](https://msdn.microsoft.com/library/windows/apps/br227171)-Instanz mit dem Video zurück, wenn die Aufnahme erfolgreich ist.</span><span class="sxs-lookup"><span data-stu-id="73149-142">The method returns a [**StorageFile**](https://msdn.microsoft.com/library/windows/apps/br227171) instance containing the video if the capture is successful.</span></span> <span data-ttu-id="73149-143">Wenn der Benutzer die Aufnahme abbricht, ist das zurückgegebene Objekt „null“.</span><span class="sxs-lookup"><span data-stu-id="73149-143">If the user cancels the capture, the returned object is null.</span></span>

[!code-cs[CaptureVideo](./code/CameraCaptureUIWin10/cs/MainPage.xaml.cs#SnippetCaptureVideo)]

<span data-ttu-id="73149-144">Wofür Sie die aufgenommene Videodatei verwenden, ist von dem Szenario für Ihre App abhängig.</span><span class="sxs-lookup"><span data-stu-id="73149-144">What you do with the captured video file depends on the scenario for your app.</span></span> <span data-ttu-id="73149-145">Im weiteren Verlauf dieses Artikels wird gezeigt, wie Sie schnell eine Medienkomposition aus einem oder mehreren aufgenommenen Videos erstellen und diese in der Benutzeroberfläche anzeigen.</span><span class="sxs-lookup"><span data-stu-id="73149-145">The rest of this article shows you how to quickly create a media composition from one or more captured videos and show it in your UI.</span></span>

<span data-ttu-id="73149-146">Fügen Sie zunächst der XAML-Seite ein [**MediaPlayerElement**](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.MediaPlayerElement)-Steuerelement hinzu, in dem die Videokomposition angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="73149-146">First, add a [**MediaPlayerElement**](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.MediaPlayerElement) control in which the video composition will be displayed to your XAML page.</span></span>

[!code-xml[MediaElement](./code/CameraCaptureUIWin10/cs/MainPage.xaml#SnippetMediaElement)]


<span data-ttu-id="73149-147">Erstellen Sie mit der von der Kameraaufnahme-UI zurückgegebenen Videodatei eine neue [**MediaSource**](https://docs.microsoft.com/uwp/api/windows.media.core.mediasource), indem Sie **[CreateFromStorageFile](https://docs.microsoft.com/uwp/api/windows.media.core.mediasource.createfromstoragefile)** aufrufen.</span><span class="sxs-lookup"><span data-stu-id="73149-147">With the video file returned from the camera capture UI, create a new [**MediaSource**](https://docs.microsoft.com/uwp/api/windows.media.core.mediasource) by calling **[CreateFromStorageFile](https://docs.microsoft.com/uwp/api/windows.media.core.mediasource.createfromstoragefile)**.</span></span> <span data-ttu-id="73149-148">Rufen Sie zur Wiedergabe des Videos die **[Play](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer.Play)**-Methode aus dem Standard-**[MediaPlayer](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer)** auf, der dem **MediaPlayerElement** zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="73149-148">Call the **[Play](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer.Play)** method of the default **[MediaPlayer](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer)** associated with the **MediaPlayerElement** to play the video.</span></span>

[!code-cs[PlayVideo](./code/CameraCaptureUIWin10/cs/MainPage.xaml.cs#SnippetPlayVideo)]
 

## <a name="related-topics"></a><span data-ttu-id="73149-149">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="73149-149">Related topics</span></span>

* [<span data-ttu-id="73149-150">Kamera</span><span class="sxs-lookup"><span data-stu-id="73149-150">Camera</span></span>](camera.md)
* [<span data-ttu-id="73149-151">Allgemeine Foto-, Video- und Audioaufnahme mit „MediaCapture“</span><span class="sxs-lookup"><span data-stu-id="73149-151">Basic photo, video, and audio capture with MediaCapture</span></span>](basic-photo-video-and-audio-capture-with-MediaCapture.md)
* [**<span data-ttu-id="73149-152">CameraCaptureUI</span><span class="sxs-lookup"><span data-stu-id="73149-152">CameraCaptureUI</span></span>**](https://msdn.microsoft.com/library/windows/apps/br241030) 
 

 




