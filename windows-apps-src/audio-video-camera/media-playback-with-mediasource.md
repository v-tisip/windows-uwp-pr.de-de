---
author: drewbatgit
ms.assetid: C5623861-6280-4352-8F22-80EB009D662C
description: In diesem Artikel wird erläutert, wie Sie die MediaSource-Klasse verwenden, die allgemein zum Verweisen auf Medien aus verschiedenen Quellen (etwa lokale Dateien oder Remotedateien) sowie zum Wiedergeben dieser Medien verwendet wird und ein gemeinsames Modell für den Mediendatenzugriff verfügbar macht – unabhängig vom zugrunde liegenden Medienformat.
title: Medienelemente, Wiedergabelisten und Titel
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 73b6a19e2385f1a9b8afa4672df50d17ac16ec97
ms.sourcegitcommit: 38f06f1714334273d865935d9afb80efffe97a17
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/09/2018
ms.locfileid: "6190679"
---
# <a name="media-items-playlists-and-tracks"></a><span data-ttu-id="e032a-104">Medienelemente, Wiedergabelisten und Titel</span><span class="sxs-lookup"><span data-stu-id="e032a-104">Media items, playlists, and tracks</span></span>


 <span data-ttu-id="e032a-105">In diesem Artikel wird erläutert, wie Sie die [**MediaSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaSource)-Klasse verwenden, die allgemein zum Verweisen auf Medien aus verschiedenen Quellen (etwa lokale Dateien oder Remotedateien) sowie zum Wiedergeben dieser Medien verwendet wird und ein gemeinsames Modell für den Mediendatenzugriff verfügbar macht – unabhängig vom zugrunde liegenden Medienformat.</span><span class="sxs-lookup"><span data-stu-id="e032a-105">This article shows you how to use the [**MediaSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaSource) class, which provides a common way to reference and play back media from different sources such as local or remote files and exposes a common model for accessing media data, regardless of the underlying media format.</span></span> <span data-ttu-id="e032a-106">Die [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/dn930939)-Klasse erweitert den Funktionsumfang von **MediaSource** und ermöglicht die Verwaltung und Auswahl mehrerer Audio-, Video- und Metadatentitel in einem Medienelement.</span><span class="sxs-lookup"><span data-stu-id="e032a-106">The [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/dn930939) class extends the functionality of **MediaSource**, allowing you to manage and select from multiple audio, video, and metadata tracks contained in a media item.</span></span> <span data-ttu-id="e032a-107">[**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/dn930955) ermöglicht die Erstellung von Wiedergabelisten auf der Grundlage von Medienelementen.</span><span class="sxs-lookup"><span data-stu-id="e032a-107">[**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/dn930955) allows you to create playback lists from one or more media playback items.</span></span>


## <a name="create-and-play-a-mediasource"></a><span data-ttu-id="e032a-108">Erstellen und Wiedergeben eines MediaSource-Elements</span><span class="sxs-lookup"><span data-stu-id="e032a-108">Create and play a MediaSource</span></span>

<span data-ttu-id="e032a-109">Erstellen Sie eine neue Instanz von **MediaSource**, indem Sie eine der von der Klasse verfügbar gemachten Factory-Methoden aufrufen:</span><span class="sxs-lookup"><span data-stu-id="e032a-109">Create a new instance of **MediaSource** by calling one of the factory methods exposed by the class:</span></span>

-   [**<span data-ttu-id="e032a-110">CreateFromAdaptiveMediaSource</span><span class="sxs-lookup"><span data-stu-id="e032a-110">CreateFromAdaptiveMediaSource</span></span>**](https://msdn.microsoft.com/library/windows/apps/dn930906)
-   [**<span data-ttu-id="e032a-111">CreateFromIMediaSource</span><span class="sxs-lookup"><span data-stu-id="e032a-111">CreateFromIMediaSource</span></span>**](https://msdn.microsoft.com/library/windows/apps/dn965527)
-   [**<span data-ttu-id="e032a-112">CreateFromMediaStreamSource</span><span class="sxs-lookup"><span data-stu-id="e032a-112">CreateFromMediaStreamSource</span></span>**](https://msdn.microsoft.com/library/windows/apps/dn930907)
-   [**<span data-ttu-id="e032a-113">CreateFromMseStreamSource</span><span class="sxs-lookup"><span data-stu-id="e032a-113">CreateFromMseStreamSource</span></span>**](https://msdn.microsoft.com/library/windows/apps/dn930908)
-   [**<span data-ttu-id="e032a-114">CreateFromStorageFile</span><span class="sxs-lookup"><span data-stu-id="e032a-114">CreateFromStorageFile</span></span>**](https://msdn.microsoft.com/library/windows/apps/dn930909)
-   [**<span data-ttu-id="e032a-115">CreateFromStream</span><span class="sxs-lookup"><span data-stu-id="e032a-115">CreateFromStream</span></span>**](https://msdn.microsoft.com/library/windows/apps/dn930910)
-   [**<span data-ttu-id="e032a-116">CreateFromStreamReference</span><span class="sxs-lookup"><span data-stu-id="e032a-116">CreateFromStreamReference</span></span>**](https://msdn.microsoft.com/library/windows/apps/dn930911)
-   [**<span data-ttu-id="e032a-117">CreateFromUri</span><span class="sxs-lookup"><span data-stu-id="e032a-117">CreateFromUri</span></span>**](https://msdn.microsoft.com/library/windows/apps/dn930912)
-   [**<span data-ttu-id="e032a-118">CreateFromDownloadOperation</span><span class="sxs-lookup"><span data-stu-id="e032a-118">CreateFromDownloadOperation</span></span>**](https://docs.microsoft.com/uwp/api/windows.media.core.mediasource.createfromdownloadoperation)

<span data-ttu-id="e032a-119">Nach dem Erstellen einer **MediaSource** können Sie diese mit einer [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/dn652535) durch Festlegen der [**Source**](https://msdn.microsoft.com/library/windows/apps/dn987010)-Eigenschaft abspielen.</span><span class="sxs-lookup"><span data-stu-id="e032a-119">After creating a **MediaSource** you can play it with a [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/dn652535) by setting the [**Source**](https://msdn.microsoft.com/library/windows/apps/dn987010) property.</span></span> <span data-ttu-id="e032a-120">Ab Windows10, Version 1607, können Sie einen **MediaPlayer** einem [**MediaPlayerElement**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement) durch Aufrufen von [**SetMediaPlayer**](https://msdn.microsoft.com/library/windows/apps/mt708764) zuweisen, um die Media Player-Inhalte in einer XAML-Seite zu rendern.</span><span class="sxs-lookup"><span data-stu-id="e032a-120">Starting with Windows 10, version 1607, you can assign a **MediaPlayer** to a [**MediaPlayerElement**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement) by calling [**SetMediaPlayer**](https://msdn.microsoft.com/library/windows/apps/mt708764) in order to render the media player content in a XAML page.</span></span> <span data-ttu-id="e032a-121">Dies ist die bevorzugte Methode gegenüber der Verwendung von **MediaElement**.</span><span class="sxs-lookup"><span data-stu-id="e032a-121">This is the preferred method over using **MediaElement**.</span></span> <span data-ttu-id="e032a-122">Weitere Informationen zur Verwendung des **MediaPlayer** finden Sie unter [**Wiedergeben von Audio- und Videoinhalten mit MediaPlayer**](play-audio-and-video-with-mediaplayer.md).</span><span class="sxs-lookup"><span data-stu-id="e032a-122">For more information on using **MediaPlayer**, see [**Play audio and video with MediaPlayer**](play-audio-and-video-with-mediaplayer.md).</span></span>

<span data-ttu-id="e032a-123">Das folgende Beispiel zeigt die Wiedergabe einer vom Benutzer ausgewählten Mediendatei in einem **MediaPlayer** mit **MediaSource**.</span><span class="sxs-lookup"><span data-stu-id="e032a-123">The following example shows how to play back a user-selected media file in a **MediaPlayer** using **MediaSource**.</span></span>

<span data-ttu-id="e032a-124">Für dieses Szenario müssen die Namespaces [**Windows.Media.Core**](https://msdn.microsoft.com/library/windows/apps/dn278962) und [**Windows.Media.Playback**](https://msdn.microsoft.com/library/windows/apps/dn640562) eingeschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="e032a-124">You will need to include the [**Windows.Media.Core**](https://msdn.microsoft.com/library/windows/apps/dn278962) and [**Windows.Media.Playback**](https://msdn.microsoft.com/library/windows/apps/dn640562) namespaces in order to complete this scenario.</span></span>

[!code-cs[Using](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetUsing)]

<span data-ttu-id="e032a-125">Deklarieren Sie eine Membervariable vom Typ **MediaSource**.</span><span class="sxs-lookup"><span data-stu-id="e032a-125">Declare a variable of type **MediaSource**.</span></span> <span data-ttu-id="e032a-126">Für die Beispiele in diesem Artikel wird die Medienquelle als Klassenmember deklariert, um den Zugriff über mehrere Orte zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="e032a-126">For the examples in this article, the media source is declared as a class member so that it can be accessed from multiple locations.</span></span>

[!code-cs[DeclareMediaSource](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetDeclareMediaSource)]

<span data-ttu-id="e032a-127">Deklarieren Sie eine Variable zum Speichern des **MediaPlayer** Objekts. Wenn die Medieninhalte in XAML gerendert werden sollen, fügen Sie der Seite ein **MediaPlayerElement**-Steuerelements hinzu.</span><span class="sxs-lookup"><span data-stu-id="e032a-127">Declare a variable to store the **MediaPlayer** object and, if you want to render the media content in XAML, add a **MediaPlayerElement** control to your page.</span></span>

[!code-cs[DeclareMediaPlayer](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetDeclareMediaPlayer)]

[!code-xml[MediaPlayerElement](./code/MediaSource_RS1/cs/MainPage.xaml#SnippetMediaPlayerElement)]

<span data-ttu-id="e032a-128">Verwenden Sie ein [**FileOpenPicker**](https://msdn.microsoft.com/library/windows/apps/br207847)-Element, um dem Benutzer das Auswählen einer wiederzugebenden Mediendatei zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="e032a-128">To allow the user to pick a media file to play, use a [**FileOpenPicker**](https://msdn.microsoft.com/library/windows/apps/br207847).</span></span> <span data-ttu-id="e032a-129">Initialisieren Sie mit dem von der [**PickSingleFileAsync**](https://msdn.microsoft.com/library/windows/apps/jj635275)-Auswahlmethode zurückgegebenen [**StorageFile**](https://msdn.microsoft.com/library/windows/apps/br227171)-Objekt durch Aufrufen von [**MediaSource.CreateFromStorageFile**](https://msdn.microsoft.com/library/windows/apps/dn930909) ein neues Medienobjekt.</span><span class="sxs-lookup"><span data-stu-id="e032a-129">With the [**StorageFile**](https://msdn.microsoft.com/library/windows/apps/br227171) object returned from the picker's [**PickSingleFileAsync**](https://msdn.microsoft.com/library/windows/apps/jj635275) method, initialize a new MediaObject by calling [**MediaSource.CreateFromStorageFile**](https://msdn.microsoft.com/library/windows/apps/dn930909).</span></span> <span data-ttu-id="e032a-130">Legen Sie abschließend durch Aufrufen der [**SetPlaybackSource**](https://msdn.microsoft.com/library/windows/apps/dn899085)-Methode die Medienquelle als Wiedergabequelle für das **MediaElement**-Element fest.</span><span class="sxs-lookup"><span data-stu-id="e032a-130">Finally, set the media source as the playback source for the **MediaElement** by calling the [**SetPlaybackSource**](https://msdn.microsoft.com/library/windows/apps/dn899085) method.</span></span>

[!code-cs[PlayMediaSource](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetPlayMediaSource)]

<span data-ttu-id="e032a-131">Standardmäßig beginnt **MediaPlayer** nicht automatisch mit der Wiedergabe, wenn die Medienquelle festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="e032a-131">By default, the **MediaPlayer** does not begin playing automatically when the media source is set.</span></span> <span data-ttu-id="e032a-132">Sie können die Wiedergabe manuell durch Aufrufen von [**Play**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Play) wiedergeben.</span><span class="sxs-lookup"><span data-stu-id="e032a-132">You can manually begin playback by calling [**Play**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Play).</span></span>

[!code-cs[Play](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetPlay)]

<span data-ttu-id="e032a-133">Sie können auch die [**AutoPlay**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.AutoPlay)-Eigenschaft des **MediaPlayer** auf „ true“ festlegen, um dem Player mitzuteilen, dass er mit der Wiedergabe beginnen soll, sobald die Medienquelle festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="e032a-133">You can also set the [**AutoPlay**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.AutoPlay) property of the **MediaPlayer** to true to tell the player to begin playing as soon as the media source is set.</span></span>

[!code-cs[AutoPlay](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetAutoPlay)]

### <a name="create-a-mediasource-from-a-downloadoperation"></a><span data-ttu-id="e032a-134">Erstellen einer MediaSource aus einer DownloadOperation</span><span class="sxs-lookup"><span data-stu-id="e032a-134">Create a MediaSource from a DownloadOperation</span></span>
<span data-ttu-id="e032a-135">Ab Windows, Version 1803, können Sie ein **MediaSource**-Objekt von einer **DownloadOperation** erstellen.</span><span class="sxs-lookup"><span data-stu-id="e032a-135">Starting with Windows, version 1803, you can create a **MediaSource** object from a **DownloadOperation**.</span></span>

[!code-cs[CreateMediaSourceFromDownload](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetCreateMediaSourceFromDownload)]

<span data-ttu-id="e032a-136">Beachten Sie, dass Sie zwar eine **MediaSource** von einem Download erstellen können ohne ihn zu starten oder seine **IsRandomAccessRequired**-Eigenschaft auf "true" festzulegen, allerdings müssen beide Schritte vor dem Hinzufügen der \*\*MediaSource \*\* zum **MediaPlayer** oder **MediaPlayerElement** für die Wiedergabe ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e032a-136">Note that while you can create a **MediaSource** from a download without starting it or setting its **IsRandomAccessRequired** property to true, you must do both of these things before attempting to attach the **MediaSource** to a **MediaPlayer** or **MediaPlayerElement** for playback.</span></span>

[!code-cs[StartDownload](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetStartDownload)]


## <a name="handle-multiple-audio-video-and-metadata-tracks-with-mediaplaybackitem"></a><span data-ttu-id="e032a-137">Behandeln mehrerer Audio-, Video- und Metadatentitel mit „MediaPlaybackItem“</span><span class="sxs-lookup"><span data-stu-id="e032a-137">Handle multiple audio, video, and metadata tracks with MediaPlaybackItem</span></span>

<span data-ttu-id="e032a-138">Die Wiedergabe mithilfe eines [**MediaSource**](https://msdn.microsoft.com/library/windows/apps/dn930905)-Elements ist praktisch, da es allgemein die Wiedergabe von Medien aus unterschiedlichen Quellen ermöglicht. Bei Erstellung eines [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/dn930939) aus der **MediaSource** stehen dagegen stärker erweiterte Verhaltensweisen zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="e032a-138">Using a [**MediaSource**](https://msdn.microsoft.com/library/windows/apps/dn930905) for playback is convenient because it provides a common way to playback media from different kinds of sources, but more advanced behavior can be accessed by creating a [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/dn930939) from the **MediaSource**.</span></span> <span data-ttu-id="e032a-139">Unter anderem können Sie damit auf mehrere Audio-, Video- und Datentitel eines Medienelements zugreifen und die Titel verwalten.</span><span class="sxs-lookup"><span data-stu-id="e032a-139">This includes the ability to access and manage multiple audio, video, and data tracks for a media item.</span></span>

<span data-ttu-id="e032a-140">Deklarieren Sie eine Variable zum Speichern Ihres **MediaPlaybackItem**-Elements.</span><span class="sxs-lookup"><span data-stu-id="e032a-140">Declare a variable to store your **MediaPlaybackItem**.</span></span>

[!code-cs[DeclareMediaPlaybackItem](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetDeclareMediaPlaybackItem)]

<span data-ttu-id="e032a-141">Erstellen Sie ein **MediaPlaybackItem**-Element, indem Sie den Konstruktor aufrufen und ein initialisiertes **MediaSource**-Objekt übergeben.</span><span class="sxs-lookup"><span data-stu-id="e032a-141">Create a **MediaPlaybackItem** by calling the constructor and passing in an initialized **MediaSource** object.</span></span>

<span data-ttu-id="e032a-142">Wenn Ihre App mehrere Audio-, Video- oder Datentitel in einem Medienwiedergabeelement unterstützt, registrieren Sie Ereignishandler für das Ereignis [**AudioTracksChanged**](https://msdn.microsoft.com/library/windows/apps/dn930948), [**VideoTracksChanged**](https://msdn.microsoft.com/library/windows/apps/dn930954) oder [**TimedMetadataTracksChanged**](https://msdn.microsoft.com/library/windows/apps/dn930952).</span><span class="sxs-lookup"><span data-stu-id="e032a-142">If your app supports multiple audio, video, or data tracks in a media playback item, register event handlers for the [**AudioTracksChanged**](https://msdn.microsoft.com/library/windows/apps/dn930948), [**VideoTracksChanged**](https://msdn.microsoft.com/library/windows/apps/dn930954), or [**TimedMetadataTracksChanged**](https://msdn.microsoft.com/library/windows/apps/dn930952) events.</span></span>

<span data-ttu-id="e032a-143">Legen Sie abschließend die Wiedergabequelle des **MediaElement**- oder **MediaPlayer**-Elements auf Ihr **MediaPlaybackItem**-Element fest.</span><span class="sxs-lookup"><span data-stu-id="e032a-143">Finally, set the playback source of the **MediaElement** or **MediaPlayer** to your **MediaPlaybackItem**.</span></span>

[!code-cs[PlayMediaPlaybackItem](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetPlayMediaPlaybackItem)]

> [!NOTE] 
> <span data-ttu-id="e032a-144">Ein **MediaSource**-Element kann immer nur einem einzelnen **MediaPlaybackItem**-Element zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="e032a-144">A **MediaSource** can only be associated with a single **MediaPlaybackItem**.</span></span> <span data-ttu-id="e032a-145">Wenn Sie nach der Erstellung eines quellenbasierten **MediaPlaybackItem** -Elements versuchen, auf der Grundlage der gleichen Quelle ein weiteres Wiedergabeelement zu erstellen, tritt ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="e032a-145">After creating a **MediaPlaybackItem** from a source, attempting to create another playback item from the same source will result in an error.</span></span> <span data-ttu-id="e032a-146">Außerdem gilt: Nach der Erstellung eines auf einer Medienquelle basierenden **MediaPlaybackItem**-Elements können Sie das **MediaSource**-Objekt nicht direkt als Quelle für ein **MediaPlayer**-Element festlegen, sondern müssen stattdessen das **MediaPlaybackItem**-Element verwenden.</span><span class="sxs-lookup"><span data-stu-id="e032a-146">Also, after creating a **MediaPlaybackItem** from a media source, you can't set the **MediaSource** object directly as the source for a **MediaPlayer** but should instead use the **MediaPlaybackItem**.</span></span>

<span data-ttu-id="e032a-147">Das [**VideoTracksChanged**](https://msdn.microsoft.com/library/windows/apps/dn930954)-Ereignis wird ausgelöst, wenn ein **MediaPlaybackItem**-Element mit mehreren Videotiteln als Wiedergabequelle zugewiesen wurde, und kann erneut ausgelöst werden, wenn sich die Liste mit den Videotiteln für das Element ändert.</span><span class="sxs-lookup"><span data-stu-id="e032a-147">The [**VideoTracksChanged**](https://msdn.microsoft.com/library/windows/apps/dn930954) event is raised after a **MediaPlaybackItem** containing multiple video tracks is assigned as a playback source, and can be raised again if the list of video tracks changes for the item changes.</span></span> <span data-ttu-id="e032a-148">Der Handler für dieses Ereignis ermöglicht die Aktualisierung der Benutzeroberfläche, damit der Benutzer zwischen den verfügbaren Titeln wechseln kann.</span><span class="sxs-lookup"><span data-stu-id="e032a-148">The handler for this event gives you the opportunity to update your UI to allow the user to switch between available tracks.</span></span> <span data-ttu-id="e032a-149">In diesem Beispiel wird zum Anzeigen der verfügbaren Videotitel ein [**ComboBox**](https://msdn.microsoft.com/library/windows/apps/br209348)-Element verwendet.</span><span class="sxs-lookup"><span data-stu-id="e032a-149">This example uses a [**ComboBox**](https://msdn.microsoft.com/library/windows/apps/br209348) to display the available video tracks.</span></span>

[!code-xml[VideoComboBox](./code/MediaSource_RS1/cs/MainPage.xaml#SnippetVideoComboBox)]

<span data-ttu-id="e032a-150">Durchlaufen Sie im **VideoTracksChanged**-Handler alle Titel, die in der [**VideoTracks**](https://msdn.microsoft.com/library/windows/apps/dn930953)-Liste des Wiedergabeelements enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="e032a-150">In the **VideoTracksChanged** handler, loop through all of the tracks in the playback item's [**VideoTracks**](https://msdn.microsoft.com/library/windows/apps/dn930953) list.</span></span> <span data-ttu-id="e032a-151">Für die einzelnen Titel wird jeweils ein neues [**ComboBoxItem**](https://msdn.microsoft.com/library/windows/apps/br209349)-Element erstellt.</span><span class="sxs-lookup"><span data-stu-id="e032a-151">For each track, a new [**ComboBoxItem**](https://msdn.microsoft.com/library/windows/apps/br209349) is created.</span></span> <span data-ttu-id="e032a-152">Falls der Titel noch nicht beschriftet ist, wird auf der Grundlage des Titelindex eine Beschriftung generiert.</span><span class="sxs-lookup"><span data-stu-id="e032a-152">If the track does not already have a label, a label is generated from the track index.</span></span> <span data-ttu-id="e032a-153">Die [**Tag**](https://msdn.microsoft.com/library/windows/apps/br208745)-Eigenschaft des Kombinationsfeldelements wird zur späteren Identifizierung auf den Titelindex festgelegt.</span><span class="sxs-lookup"><span data-stu-id="e032a-153">The [**Tag**](https://msdn.microsoft.com/library/windows/apps/br208745) property of the combo box item is set to the track index so that it can be identified later.</span></span> <span data-ttu-id="e032a-154">Danach wird das Element dem Kombinationsfeld hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="e032a-154">Finally, the item is added to the combo box.</span></span> <span data-ttu-id="e032a-155">Beachten Sie, dass diese Vorgänge innerhalb eines [**CoreDispatcher.RunAsync**](https://msdn.microsoft.com/library/windows/apps/hh750317)-Aufrufs ausgeführt werden, da alle UI-Änderungen im UI-Thread erfolgen müssen und dieses Ereignis in einem anderen Thread ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="e032a-155">Note that these operations are performed within a [**CoreDispatcher.RunAsync**](https://msdn.microsoft.com/library/windows/apps/hh750317) call because all UI changes must be made on the UI thread and this event is raised on a different thread.</span></span>

[!code-cs[VideoTracksChanged](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetVideoTracksChanged)]

<span data-ttu-id="e032a-156">Im [**SelectionChanged**](https://msdn.microsoft.com/library/windows/apps/br209776)-Handler für das Kombinationsfeld wird der Titelindex aus der **Tag**-Eigenschaft des ausgewählten Elements abgerufen.</span><span class="sxs-lookup"><span data-stu-id="e032a-156">In the [**SelectionChanged**](https://msdn.microsoft.com/library/windows/apps/br209776) handler for the combo box, the track index is retrieved from the selected item's **Tag** property.</span></span> <span data-ttu-id="e032a-157">Das Festlegen der [**SelectedIndex**](https://msdn.microsoft.com/library/windows/apps/dn956634)-Eigenschaft der [**VideoTracks**](https://msdn.microsoft.com/library/windows/apps/dn930953)-Liste des Medienwiedergabeelements bewirkt, dass das **MediaElement**- oder **MediaPlayer**-Element beim aktiven Videotitel zum angegebenen Index wechselt.</span><span class="sxs-lookup"><span data-stu-id="e032a-157">Setting the [**SelectedIndex**](https://msdn.microsoft.com/library/windows/apps/dn956634) property of the media playback item's [**VideoTracks**](https://msdn.microsoft.com/library/windows/apps/dn930953) list causes the **MediaElement** or **MediaPlayer** to switch the active video track to the specified index.</span></span>

[!code-cs[VideoTracksSelectionChanged](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetVideoTracksSelectionChanged)]

<span data-ttu-id="e032a-158">Die Verwaltung von Medienelementen mit mehreren Audiotiteln funktioniert genau wie bei den Videotiteln.</span><span class="sxs-lookup"><span data-stu-id="e032a-158">Managing media items with multiple audio tracks works exactly the same as with video tracks.</span></span> <span data-ttu-id="e032a-159">Behandeln Sie das [**AudioTracksChanged**](https://msdn.microsoft.com/library/windows/apps/dn930948)-Ereignis, um Ihre Benutzeroberfläche mit den Audiotiteln aus der [**AudioTracks**](https://msdn.microsoft.com/library/windows/apps/dn930947)-Liste des Wiedergabeelements zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="e032a-159">Handle the [**AudioTracksChanged**](https://msdn.microsoft.com/library/windows/apps/dn930948) to update your UI with the audio tracks found in the playback item's [**AudioTracks**](https://msdn.microsoft.com/library/windows/apps/dn930947) list.</span></span> <span data-ttu-id="e032a-160">Wenn der Benutzer einen Audiotitel auswählt, legen Sie die [**SelectedIndex**](https://msdn.microsoft.com/library/windows/apps/dn930937)-Eigenschaft der **AudioTracks**-Liste fest, damit das **MediaElement**- oder **MediaPlayer**-Element beim aktiven Audiotitel zum angegebenen Index wechselt.</span><span class="sxs-lookup"><span data-stu-id="e032a-160">When the user selects an audio track, set the [**SelectedIndex**](https://msdn.microsoft.com/library/windows/apps/dn930937) property of the **AudioTracks** list to cause the **MediaElement** or **MediaPlayer** to switch the active audio track to the specified index.</span></span>

[!code-xml[AudioComboBox](./code/MediaSource_RS1/cs/MainPage.xaml#SnippetAudioComboBox)]

[!code-cs[AudioTracksChanged](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetAudioTracksChanged)]

[!code-cs[AudioTracksSelectionChanged](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetAudioTracksSelectionChanged)]

<span data-ttu-id="e032a-161">Neben Audio und Video kann ein **MediaPlaybackItem**-Objekt auch [**TimedMetadataTrack**](https://msdn.microsoft.com/library/windows/apps/dn956580)-Objekte enthalten.</span><span class="sxs-lookup"><span data-stu-id="e032a-161">In addition to audio and video, a **MediaPlaybackItem** object may contain zero or more [**TimedMetadataTrack**](https://msdn.microsoft.com/library/windows/apps/dn956580) objects.</span></span> <span data-ttu-id="e032a-162">Ein zeitgesteuerter Metadatentitel kann Untertitel, Beschriftungstext oder benutzerdefinierte proprietäre Daten Ihrer App enthalten.</span><span class="sxs-lookup"><span data-stu-id="e032a-162">A timed metadata track can contain subtitle or caption text, or it may contain custom data that is proprietary to your app.</span></span> <span data-ttu-id="e032a-163">Ein zeitgesteuerter Metadatentitel enthält eine Liste mit Markern. Diese werden durch Objekte dargestellt, die von [**IMediaCue**](https://msdn.microsoft.com/library/windows/apps/dn930899) erben (etwa [**DataCue**](https://msdn.microsoft.com/library/windows/apps/dn930892) oder [**TimedTextCue**](https://msdn.microsoft.com/library/windows/apps/dn956655)).</span><span class="sxs-lookup"><span data-stu-id="e032a-163">A timed metadata track contains a list of cues represented by objects that inherit from [**IMediaCue**](https://msdn.microsoft.com/library/windows/apps/dn930899), such as a [**DataCue**](https://msdn.microsoft.com/library/windows/apps/dn930892) or a [**TimedTextCue**](https://msdn.microsoft.com/library/windows/apps/dn956655).</span></span> <span data-ttu-id="e032a-164">Jeder Marker hat eine Anfangszeit und eine Dauer. Diese bestimmen den Aktivierungszeitpunkt und die Aktivierungsdauer des jeweiligen Markers.</span><span class="sxs-lookup"><span data-stu-id="e032a-164">Each cue has a start time and a duration that determines when the cue is activated and for how long.</span></span>

<span data-ttu-id="e032a-165">Die zeitgesteuerten Metadatentitel für ein Medienelement können ähnlich wie Audio- und Videotitel durch Behandeln des [**TimedMetadataTracksChanged**](https://msdn.microsoft.com/library/windows/apps/dn930952)-Ereignisses eines **MediaPlaybackItem**-Elements ermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="e032a-165">Similar to audio tracks and video tracks, the timed metadata tracks for a media item can be discovered by handling the [**TimedMetadataTracksChanged**](https://msdn.microsoft.com/library/windows/apps/dn930952) event of a **MediaPlaybackItem**.</span></span> <span data-ttu-id="e032a-166">Bei zeitgesteuerten Metadatentiteln möchte der Benutzer aber unter Umständen mehrere Metadatentitel gleichzeitig aktivieren.</span><span class="sxs-lookup"><span data-stu-id="e032a-166">With timed metadata tracks, however, the user may want to enable more than one metadata track at a time.</span></span> <span data-ttu-id="e032a-167">Außerdem empfiehlt sich je nach App-Szenario unter Umständen eine automatische Aktivierung oder Deaktivierung von Metadatentiteln.</span><span class="sxs-lookup"><span data-stu-id="e032a-167">Also, depending on your app scenario, you may want to enable or disable metadata tracks automatically, without user intervention.</span></span> <span data-ttu-id="e032a-168">Zur besseren Veranschaulichung enthält dieses Beispiel ein [**ToggleButton**](https://msdn.microsoft.com/library/windows/apps/br209795) für die einzelnen Metadatentitel in einem Medienelement, damit der Benutzer den jeweiligen Titel aktivieren und deaktivieren kann. Die **Tag**-Eigenschaft der einzelnen Schaltflächen wird auf den Index des zugehörigen Titels festgelegt, sodass sie identifiziert werden kann, wenn die Schaltfläche umgeschaltet wird.</span><span class="sxs-lookup"><span data-stu-id="e032a-168">For illustration purposes, this example adds a [**ToggleButton**](https://msdn.microsoft.com/library/windows/apps/br209795) for each metadata track in a media item to allow the user to enable and disable the track. The **Tag** property of each button is set to the index of the associated metadata track so that it can be identified when the button is toggled.</span></span>

[!code-xml[MetaStackPanel](./code/MediaSource_RS1/cs/MainPage.xaml#SnippetMetaStackPanel)]

[!code-cs[TimedMetadataTrackschanged](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetTimedMetadataTrackschanged)]

<span data-ttu-id="e032a-169">Da gleichzeitig mehrere Metadatentitel aktiv sein können, legen Sie nicht einfach den aktiven Index für die Metadatentitelliste fest.</span><span class="sxs-lookup"><span data-stu-id="e032a-169">Because more than one metadata track can be active at a time, you don't simply set the active index for the metadata track list.</span></span> <span data-ttu-id="e032a-170">Rufen Sie stattdessen die [**SetPresentationMode**](https://msdn.microsoft.com/library/windows/apps/dn986977)-Methode des **MediaPlaybackItem**-Objekts auf. Übergeben Sie dabei den Index des umzuschaltenden Titels, und geben Sie dann einen Wert aus der [**TimedMetadataTrackPresentationMode**](https://msdn.microsoft.com/library/windows/apps/dn987016)-Enumeration an.</span><span class="sxs-lookup"><span data-stu-id="e032a-170">Instead, call the **MediaPlaybackItem** object's [**SetPresentationMode**](https://msdn.microsoft.com/library/windows/apps/dn986977) method, passing in the index of the track you want to toggle, and then providing a value from the [**TimedMetadataTrackPresentationMode**](https://msdn.microsoft.com/library/windows/apps/dn987016) enumeration.</span></span> <span data-ttu-id="e032a-171">Der gewählte Darstellungsmodus hängt von der Implementierung Ihrer App ab.</span><span class="sxs-lookup"><span data-stu-id="e032a-171">The presentation mode you choose depends on the implementation of your app.</span></span> <span data-ttu-id="e032a-172">In diesem Beispiel wird der Metadatentitel bei der Aktivierung auf **PlatformPresented** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="e032a-172">In this example, the metadata track is set to **PlatformPresented** when enabled.</span></span> <span data-ttu-id="e032a-173">Bei textbasierten Titeln bedeutet dies, dass das System automatisch die Textmarker des Titels anzeigt. Wenn die Umschaltfläche deaktiviert ist, wird der Darstellungsmodus auf **deaktiviert** festgelegt, sodass kein Text angezeigt wird und keine Marker-Ereignisse ausgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="e032a-173">For text-based tracks, this means that the system will automatically display the text cues in the track. When the toggle button is toggled off, the presentation mode is set to **Disabled**, which means that no text is displayed and no cue events are raised.</span></span> <span data-ttu-id="e032a-174">Marker-Ereignisse werden weiter unten in diesem Artikel behandelt.</span><span class="sxs-lookup"><span data-stu-id="e032a-174">Cue events are discussed later in this article.</span></span>

[!code-cs[ToggleChecked](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetToggleChecked)]

[!code-cs[ToggleUnchecked](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetToggleUnchecked)]

<span data-ttu-id="e032a-175">Während der Verarbeitung der Metadatentitel können Sie auf den Satz von Markern im Titel zugreifen, indem Sie auf die [**Cues**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.TimedMetadataTrack.Cues) oder [**ActiveCues**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.TimedMetadataTrack.ActiveCues)-Eigenschaften zugreifen.</span><span class="sxs-lookup"><span data-stu-id="e032a-175">As you are processing the metadata tracks, you can access the set of cues within the track by accessing the [**Cues**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.TimedMetadataTrack.Cues) or [**ActiveCues**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.TimedMetadataTrack.ActiveCues) properties.</span></span> <span data-ttu-id="e032a-176">Sie können dies tun, um die Benutzeroberfläche zu aktualisieren, damit die Markerspeicherorte für ein Medienelement angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="e032a-176">You can do this to update your UI to show the cue locations for a media item.</span></span>

## <a name="handle-unsupported-codecs-and-unknown-errors-when-opening-media-items"></a><span data-ttu-id="e032a-177">Behandeln von nicht unterstützten Codecs und unbekannten Fehler beim Öffnen von Medienelementen</span><span class="sxs-lookup"><span data-stu-id="e032a-177">Handle unsupported codecs and unknown errors when opening media items</span></span>
<span data-ttu-id="e032a-178">Ab Windows10, Version1607, können Sie überprüfen, ob der Codec zur Wiedergabe eines Medienelements auf dem Gerät unterstützt oder teilweise unterstützt wird, auf dem Ihre App ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="e032a-178">Starting with Windows 10, version 1607, you can check whether the codec required to playback a media item is supported or partially supported on the device on which your app is running.</span></span> <span data-ttu-id="e032a-179">Überprüfen Sie zunächst im Ereignishandler für **MediaPlaybackItem**-Ereignisse mit geänderten Spuren, wie [**AudioTracksChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.AudioTracksChanged), ob sich bei der Änderung des Titels um das Einfügen eines neuen Titels handelt. Wenn dies der Fall ist, können Sie einen Verweis auf den Titel abrufen, der eingefügt wird, indem Sie den Index verwenden, der in den **IVectorChangedEventArgs.Index**-Parameter mit der entsprechenden Titelsammlung des **MediaPlaybackItem**-Parameter übergeben wurde, z.B. die [**AudioTracks**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.AudioTracks)-Auflistung.</span><span class="sxs-lookup"><span data-stu-id="e032a-179">In the event handler for the **MediaPlaybackItem** tracks-changed events, such as [**AudioTracksChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.AudioTracksChanged), first check to see if the track change is an insertion of a new track. If so, you can get a reference to the track being inserted by using the index passed in the **IVectorChangedEventArgs.Index** parameter with the appropriate track collection of the **MediaPlaybackItem** parameter, such as the [**AudioTracks**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.AudioTracks) collection.</span></span>

<span data-ttu-id="e032a-180">Wenn Sie einen Verweis auf den Titel eingefügt haben, überprüfen Sie den [**DecoderStatus**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.AudioTrackSupportInfo.DecoderStatus) der [**SupportInfo**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.AudioTrack.SupportInfo)-Eigenschaft des Titels.</span><span class="sxs-lookup"><span data-stu-id="e032a-180">Once you have a reference to the inserted track, check the [**DecoderStatus**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.AudioTrackSupportInfo.DecoderStatus) of the track's [**SupportInfo**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.AudioTrack.SupportInfo) property.</span></span> <span data-ttu-id="e032a-181">Wenn der Wert [**FullySupported**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaDecoderStatus) ist, dann ist der für die Wiedergabe des Titels erforderliche Codec auf dem Gerät vorhanden.</span><span class="sxs-lookup"><span data-stu-id="e032a-181">If the value is [**FullySupported**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaDecoderStatus), then the appropriate codec needed to play back the track is present on the device.</span></span> <span data-ttu-id="e032a-182">Wenn der Wert [**Degraded**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaDecoderStatus) ist, kann der Titel vom System wiedergegeben werden, die Wiedergabe wird jedoch zu einem gewissen Grad verschlechtert.</span><span class="sxs-lookup"><span data-stu-id="e032a-182">If the value is [**Degraded**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaDecoderStatus), then the track can be played by the system, but the playback will be degraded in some way.</span></span> <span data-ttu-id="e032a-183">Beispielsweise kann ein 5.1-Audiotitel auch als 2-Kanal-Stereo wiedergegeben werden.</span><span class="sxs-lookup"><span data-stu-id="e032a-183">For example, a 5.1 audio track may be played back as 2-channel stereo instead.</span></span> <span data-ttu-id="e032a-184">Wenn dies der Fall ist, sollten Sie die UI aktualisieren, um den Benutzer über die Beeinträchtigung zu informieren.</span><span class="sxs-lookup"><span data-stu-id="e032a-184">If this is the case, you may want to update your UI to alert the user of the degradation.</span></span> <span data-ttu-id="e032a-185">Wenn der Wert [**UnsupportedSubtype**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaDecoderStatus) oder [**UnsupportedEncoderProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaDecoderStatus) ist, kann der Titel überhaupt nicht mit den aktuell auf dem Gerät vorhandenen Codecs wiedergegeben werden.</span><span class="sxs-lookup"><span data-stu-id="e032a-185">If the value is [**UnsupportedSubtype**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaDecoderStatus) or [**UnsupportedEncoderProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaDecoderStatus), then the track can't be played back at all with the current codecs on the device.</span></span> <span data-ttu-id="e032a-186">Sie sollten den Benutzer warnen und die Wiedergabe des Elements überspringen oder UI-Elemente implementieren, um dem Benutzer den Download des richtigen Codec zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="e032a-186">You may wish to alert the user and skip playback of the item or implement UI to allow the user to download the correct codec.</span></span> <span data-ttu-id="e032a-187">Die [**GetEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.AudioTrack.GetEncodingProperties)-Methode des Titels kann verwendet werden, um den erforderlichen Codec für die Wiedergabe zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="e032a-187">The track's [**GetEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.AudioTrack.GetEncodingProperties) method can be used to determine the required codec for playback.</span></span>

<span data-ttu-id="e032a-188">Sie können schließlich eine Registrierung für das [**OpenFailed**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.AudioTrack.OpenFailed)-Ereignis des Titels ausführen, das ausgelöst wird, wenn der Titel auf dem Gerät unterstützt wird, jedoch aufgrund eines unbekannten Fehlers in der Pipeline nicht geöffnet werden konnte.</span><span class="sxs-lookup"><span data-stu-id="e032a-188">Finally, you can register for the track's [**OpenFailed**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.AudioTrack.OpenFailed) event, which will be raised if the track is supported on the device but failed to open due to an unknown error in the pipeline.</span></span>

[!code-cs[AudioTracksChanged_CodecCheck](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetAudioTracksChanged_CodecCheck)]

<span data-ttu-id="e032a-189">Im [**OpenFailed**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.AudioTrack.OpenFailed)-Ereignishandler können Sie überprüfen, ob der **MediaSource**-Status unbekannt ist. Wenn dies der Fall ist, können Sie programmgesteuert einen anderen Titel auswählen oder dem Benutzer die Auswahl eines anderen Titels bzw. die Aufgabe der Wiedergabe ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="e032a-189">In the [**OpenFailed**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.AudioTrack.OpenFailed) event handler, you can check to see if the **MediaSource** status is unknown, and if so, you can programatically select a different track to play, allow the user to choose a different track, or abandon playback.</span></span>

[!code-cs[OpenFailed](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetOpenFailed)]

## <a name="set-display-properties-used-by-the-system-media-transport-controls"></a><span data-ttu-id="e032a-190">Festlegen der Anzeigeeigenschaften, die für den Medientransportsteuerelemente des Systems verwendet werden</span><span class="sxs-lookup"><span data-stu-id="e032a-190">Set display properties used by the System Media Transport Controls</span></span>
<span data-ttu-id="e032a-191">Ab Windows10, Version1607, werden Medien, die in einem [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer) wiedergegeben werden, standardmäßig automatisch in System Media Transport Controls (SMTC) integriert.</span><span class="sxs-lookup"><span data-stu-id="e032a-191">Starting with Windows 10, version 1607, media played in a [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer) is automatically integrated into the System Media Transport Controls (SMTC) by default.</span></span> <span data-ttu-id="e032a-192">Sie können die Metadaten angeben, die SMTC anzeigt, indem Sie die Anzeigeeigenschaften für ein **MediaPlaybackItem** aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="e032a-192">You can specify the metadata that will be displayed by the SMTC by updating the display properties for a **MediaPlaybackItem**.</span></span> <span data-ttu-id="e032a-193">Rufen Sie ein Objekt ab, das die Anzeigeeigenschaften für ein Element darstellt, indem Sie [**GetDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.GetDisplayProperties) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="e032a-193">Get an object representing the display properties for an item by calling [**GetDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.GetDisplayProperties).</span></span> <span data-ttu-id="e032a-194">Legen Sie fest, ob das Wiedergabeelement Musik oder Video ist, indem Sie die [**Type**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties.Type)-Eigenschaft festlegen.</span><span class="sxs-lookup"><span data-stu-id="e032a-194">Set whether the playback item is music or video by setting the [**Type**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties.Type) property.</span></span> <span data-ttu-id="e032a-195">Legen Sie anschließend die Eigenschaften von [**VideoProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties.VideoProperties) oder [**MusicProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties.MusicProperties) des Objekts fest.</span><span class="sxs-lookup"><span data-stu-id="e032a-195">Then, set the properties of the object's [**VideoProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties.VideoProperties) or [**MusicProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties.MusicProperties).</span></span> <span data-ttu-id="e032a-196">Rufen Sie [**ApplyDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/mt489923) auf, um die Eigenschaften des Elements auf die von Ihnen angegebenen Werte zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="e032a-196">Call [**ApplyDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/mt489923) to update the item's properties to the values you provided.</span></span> <span data-ttu-id="e032a-197">In der Regel ruft eine App die Anzeigewerte dynamisch aus einem Webdienst ab. Das folgende Beispiel zeigt diesen Vorgang jedoch anhand hartcodierter Werte.</span><span class="sxs-lookup"><span data-stu-id="e032a-197">Typically, an app will retrieve the display values dynamically from a web service, but the following example illustrates this process with hardcoded values.</span></span>

[!code-cs[SetVideoProperties](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetSetVideoProperties)]

[!code-cs[SetMusicProperties](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetSetMusicProperties)]

## <a name="add-external-timed-text-with-timedtextsource"></a><span data-ttu-id="e032a-198">Hinzufügen von externem zeitgesteuerten Text mit „TimedTextSource“</span><span class="sxs-lookup"><span data-stu-id="e032a-198">Add external timed text with TimedTextSource</span></span>

<span data-ttu-id="e032a-199">Gelegentlich liegen unter Umständen externe Dateien mit zeitgesteuertem Text für ein Medienelement vor – beispielsweise Dateien mit Untertiteln für verschiedene Gebietsschemas.</span><span class="sxs-lookup"><span data-stu-id="e032a-199">For some scenarios, you may have external files that contains timed text associated with a media item, such as separate files that contain subtitles for different locales.</span></span> <span data-ttu-id="e032a-200">Mit der [**TimedTextSource**](https://msdn.microsoft.com/library/windows/apps/dn956679)-Klasse können Sie externe zeitgesteuerte Textdateien aus einem Datenstrom oder URI laden.</span><span class="sxs-lookup"><span data-stu-id="e032a-200">Use the [**TimedTextSource**](https://msdn.microsoft.com/library/windows/apps/dn956679) class to load in external timed text files from a stream or URI.</span></span>

<span data-ttu-id="e032a-201">In diesem Beispiel wird eine **Dictionary**-Sammlung zum Speichern einer Quellenliste mit zeitgesteuertem Text für das Medienelement verwendet. Dabei fungieren der Quell-URI und das **TimedTextSource**-Objekt als Schlüssel-Wert-Paar zum Identifizieren der aufgelösten Titel.</span><span class="sxs-lookup"><span data-stu-id="e032a-201">This example uses a **Dictionary** collection to store a list of the timed text sources for the media item using the source URI and the **TimedTextSource** object as the key/value pair in order to identify the tracks after they have been resolved.</span></span>

[!code-cs[TimedTextSourceMap](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetTimedTextSourceMap)]

<span data-ttu-id="e032a-202">Rufen Sie [**CreateFromUri**](https://msdn.microsoft.com/library/windows/apps/dn708190) auf, um für jede externe Datei mit zeitgesteuertem Text ein neues **TimedTextSource**-Element zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e032a-202">Create a new **TimedTextSource** for each external timed text file by calling [**CreateFromUri**](https://msdn.microsoft.com/library/windows/apps/dn708190).</span></span> <span data-ttu-id="e032a-203">Fügen Sie dem **Dictionary**-Element einen Eintrag für die Quelle mit zeitgesteuertem Text hinzu.</span><span class="sxs-lookup"><span data-stu-id="e032a-203">Add an entry to the **Dictionary** for the timed text source.</span></span> <span data-ttu-id="e032a-204">Fügen Sie einen Handler für das [**TimedTextSource.Resolved**](https://msdn.microsoft.com/library/windows/apps/dn965540)-Ereignis hinzu, um einen möglichen Fehler beim Laden des Elements zu behandeln oder nach dem erfolgreichen Laden des Elements weitere Eigenschaften festzulegen.</span><span class="sxs-lookup"><span data-stu-id="e032a-204">Add a handler for the [**TimedTextSource.Resolved**](https://msdn.microsoft.com/library/windows/apps/dn965540) event to handle if the item failed to load or to set additional properties after the item was loaded successfully.</span></span>

<span data-ttu-id="e032a-205">Registrieren Sie alle Ihre **TimedTextSource**-Objekte beim **MediaSource**-Element, indem Sie sie der [**ExternalTimedTextSources**](https://msdn.microsoft.com/library/windows/apps/dn930916)-Sammlung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="e032a-205">Register all of your **TimedTextSource** objects with the **MediaSource** by adding them to the [**ExternalTimedTextSources**](https://msdn.microsoft.com/library/windows/apps/dn930916) collection.</span></span> <span data-ttu-id="e032a-206">Beachten Sie, dass externe Quellen mit zeitgesteuertem Text nicht dem auf der Grundlage der Quelle erstellten **MediaSource**-Element, sondern direkt dem **MediaPlaybackItem**-Element hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="e032a-206">Note that external timed text sources are added to directly the **MediaSource** and not the **MediaPlaybackItem** created from the source.</span></span> <span data-ttu-id="e032a-207">Registrieren und behandeln Sie das **TimedMetadataTracksChanged**-Ereignis wie zuvor in diesem Artikel beschrieben, um Ihre UI mit den externen Texttiteln zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="e032a-207">To update your UI to reflect the external text tracks, register and handle the **TimedMetadataTracksChanged** event as described previously in this article.</span></span>

[!code-cs[TimedTextSource](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetTimedTextSource)]

<span data-ttu-id="e032a-208">Ermitteln Sie im Handler für das [**TimedTextSource.Resolved**](https://msdn.microsoft.com/library/windows/apps/dn965540)-Ereignis anhand der **Error**-Eigenschaft des an den Handler übergebenen [**TimedTextSourceResolveResultEventArgs**](https://msdn.microsoft.com/library/windows/apps/dn965537)-Elements, ob beim Laden der zeitgesteuerten Textdaten ein Fehler aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="e032a-208">In the handler for the [**TimedTextSource.Resolved**](https://msdn.microsoft.com/library/windows/apps/dn965540) event, check the **Error** property of the [**TimedTextSourceResolveResultEventArgs**](https://msdn.microsoft.com/library/windows/apps/dn965537) passed into the handler to determine if an error occurred while trying to load the timed text data.</span></span> <span data-ttu-id="e032a-209">Wenn das Element erfolgreich aufgelöst wurde, können diese Handler verwenden, um zusätzliche Eigenschaften des aufgelösten Titels zu aktualisieren. In diesem Beispiel wird eine Bezeichnung für die einzelnen Titel basierend auf dem zuvor in gespeicherten URI des **Wörterbuchs** hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="e032a-209">If the item was resolved successfully, you can use this handler to update additional properties of the resolved track. This example adds a label for each track based on the URI previously stored in the **Dictionary**.</span></span>

[!code-cs[TimedTextSourceResolved](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetTimedTextSourceResolved)]

## <a name="add-additional-metadata-tracks"></a><span data-ttu-id="e032a-210">Hinzufügen zusätzlicher Metadatentitel</span><span class="sxs-lookup"><span data-stu-id="e032a-210">Add additional metadata tracks</span></span>

<span data-ttu-id="e032a-211">Sie können im Code dynamisch benutzerdefinierte Metadatentitel erstellen und sie einer Medienquelle zuordnen.</span><span class="sxs-lookup"><span data-stu-id="e032a-211">You can dynamically create custom metadata tracks in code and associate them with a media source.</span></span> <span data-ttu-id="e032a-212">Die erstellten Titel können Untertitel, Beschriftungstext oder proprietäre App-Daten enthalten.</span><span class="sxs-lookup"><span data-stu-id="e032a-212">The tracks you create can contain subtitle or caption text, or they can contain your proprietary app data.</span></span>

<span data-ttu-id="e032a-213">Erstellen Sie ein neues [**TimedMetadataTrack**](https://msdn.microsoft.com/library/windows/apps/dn956580)-Element. Rufen Sie hierzu den Konstruktor auf, und geben Sie eine ID, die Sprachen-ID und einen Wert aus der [**TimedMetadataKind**](https://msdn.microsoft.com/library/windows/apps/dn956578)-Enumeration an.</span><span class="sxs-lookup"><span data-stu-id="e032a-213">Create a new [**TimedMetadataTrack**](https://msdn.microsoft.com/library/windows/apps/dn956580) by calling the constructor and specifying an ID, the language identifier, and a value from the [**TimedMetadataKind**](https://msdn.microsoft.com/library/windows/apps/dn956578) enumeration.</span></span> <span data-ttu-id="e032a-214">Registrieren Sie Handler für die Ereignisse [**CueEntered**](https://msdn.microsoft.com/library/windows/apps/dn956583) und [**CueExited**](https://msdn.microsoft.com/library/windows/apps/dn956584).</span><span class="sxs-lookup"><span data-stu-id="e032a-214">Register handlers for the [**CueEntered**](https://msdn.microsoft.com/library/windows/apps/dn956583) and [**CueExited**](https://msdn.microsoft.com/library/windows/apps/dn956584) events.</span></span> <span data-ttu-id="e032a-215">Diese Ereignisse werden ausgelöst, wenn die Startzeit für einen Marker erreicht wurde und wenn die Dauer für einen Marker abgelaufen ist.</span><span class="sxs-lookup"><span data-stu-id="e032a-215">These events are raised when the start time for a cue has been reached and when the duration for a cue has expired, respectively.</span></span>

<span data-ttu-id="e032a-216">Erstellen Sie ein neues Marker-Objekt für den Typ des erstellten Metadatentitels, und legen Sie die ID, Startzeit und Dauer für den Titel fest. Dieses Beispiel erstellt eine Datenspur, daher werden eine Reihe von [**DataCue**](https://msdn.microsoft.com/library/windows/apps/dn930892)-Objekten erstellt und ein Puffer mit App-spezifischen Daten für die einzelnen Marker bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="e032a-216">Create a new cue object, appropriate for the type of metadata track you created, and set the ID, start time, and duration for the track. This example creates a data track, so a set of [**DataCue**](https://msdn.microsoft.com/library/windows/apps/dn930892) objects are generated and a buffer containing app-specific data is provided for each cue.</span></span> <span data-ttu-id="e032a-217">Fügen Sie den neuen Titel der [**ExternalTimedMetadataTracks**](https://msdn.microsoft.com/library/windows/apps/dn930915)-Sammlung des **MediaSource**-Objekts hinzu, um ihn zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="e032a-217">To register the new track, add it to the [**ExternalTimedMetadataTracks**](https://msdn.microsoft.com/library/windows/apps/dn930915) collection of the **MediaSource** object.</span></span>

<span data-ttu-id="e032a-218">Ab Windows10 Version 1703 wird die **DataCue.Properties**-Eigenschaft als [**PropertySet**](https://docs.microsoft.com/uwp/api/windows.foundation.collections.propertyset) angezeigt, mit der Sie benutzerdefinierte Eigenschaften in Schlüssel-/Datenpaaren speichern können, die in **CueEntered**- und **CueExited**-Ereignissen abgerufen werden können.</span><span class="sxs-lookup"><span data-stu-id="e032a-218">Starting with Windows 10, version 1703, the **DataCue.Properties** property exposes a [**PropertySet**](https://docs.microsoft.com/uwp/api/windows.foundation.collections.propertyset) that you can use to store custom properties in key/data pairs that can be retrieved in the **CueEntered** and **CueExited** events.</span></span>  

[!code-cs[AddDataTrack](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetAddDataTrack)]

<span data-ttu-id="e032a-219">Das **CueEntered**-Ereignis wird ausgelöst, wenn die Startzeit eines Markers erreicht wurde und der zugehörige Titel den Präsentationsmodus **ApplicationPresented**, **Hidden** oder **PlatformPresented** hat.</span><span class="sxs-lookup"><span data-stu-id="e032a-219">The **CueEntered** event is raised when a cue's start time has been reached as long as the associated track has a presentation mode of **ApplicationPresented**, **Hidden**, or **PlatformPresented.**</span></span> <span data-ttu-id="e032a-220">Marker-Ereignisse werden nicht für Metadatentitel ausgelöst, wenn der Präsentationsmodus für den Titel **Disabled** ist.</span><span class="sxs-lookup"><span data-stu-id="e032a-220">Cue events are not raised for metadata tracks while the presentation mode for the track is **Disabled**.</span></span> <span data-ttu-id="e032a-221">Dieses Beispiel gibt einfach die benutzerdefinierten, dem Marker zugeordneten Daten im Debugfenster aus.</span><span class="sxs-lookup"><span data-stu-id="e032a-221">This example simply outputs the custom data associated with the cue to the debug window.</span></span>

[!code-cs[DataCueEntered](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetDataCueEntered)]

<span data-ttu-id="e032a-222">Dieses Beispiel fügt einen benutzerdefinierten Texttitel hinzu. Hierzu wird beim Erstellen des Titels **TimedMetadataKind.Caption** angegeben. Außerdem werden dem Titel mithilfe von [**TimedTextCue**](https://msdn.microsoft.com/library/windows/apps/dn956655)-Objekten Marker hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="e032a-222">This example adds a custom text track by specifying **TimedMetadataKind.Caption** when creating the track and using [**TimedTextCue**](https://msdn.microsoft.com/library/windows/apps/dn956655) objects to add cues to the track.</span></span>

[!code-cs[AddTextTrack](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetAddTextTrack)]

[!code-cs[TextCueEntered](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetTextCueEntered)]

## <a name="play-a-list-of-media-items-with-mediaplaybacklist"></a><span data-ttu-id="e032a-223">Wiedergeben einer Liste mit Medienelementen mit „MediaPlaybackList“</span><span class="sxs-lookup"><span data-stu-id="e032a-223">Play a list of media items with MediaPlaybackList</span></span>

<span data-ttu-id="e032a-224">Mithilfe des [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/dn930955)-Elements können Sie eine Wiedergabeliste mit Medienelementen (dargestellt durch **MediaPlaybackItem**-Objekte) erstellen.</span><span class="sxs-lookup"><span data-stu-id="e032a-224">The [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/dn930955) allows you to create a playlist of media items, which are represented by **MediaPlaybackItem** objects.</span></span>

<span data-ttu-id="e032a-225">**Hinweis:** Elemente in einer [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/dn930955) mit lückenloser Wiedergabe gerendert werden.</span><span class="sxs-lookup"><span data-stu-id="e032a-225">**Note**Items in a [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/dn930955) are rendered using gapless playback.</span></span> <span data-ttu-id="e032a-226">Das System verwendet die in MP3- oder AAC-codierten Dateien bereitgestellten Metadaten, um die für die lückenlose Wiedergabe erforderliche Verzögerungs- oder Auffüllkorrektur (Delay/Padding) zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="e032a-226">The system will use provided metadata in MP3 or AAC encoded files to determine the delay or padding compensation needed for gapless playback.</span></span> <span data-ttu-id="e032a-227">Werden diese Metadaten von den MP3- oder AAC-codierten Dateien nicht bereitgestellt, ermittelt das System Verzögerungen und Auffüllungen heuristisch.</span><span class="sxs-lookup"><span data-stu-id="e032a-227">If the MP3 or AAC encoded files don't provide this metadata, then the system determines the delay or padding heuristically.</span></span> <span data-ttu-id="e032a-228">Bei verlustfreien Formaten wie PCM, FLAC oder ALAC ergreift das System keine Maßnahme, da diese Encoder keine Verzögerungen oder Auffüllungen verursachen.</span><span class="sxs-lookup"><span data-stu-id="e032a-228">For lossless formats, such as PCM, FLAC, or ALAC, the system takes no action because these encoders don't introduce delay or padding.</span></span>

<span data-ttu-id="e032a-229">Deklarieren Sie zunächst eine Variable zum Speichern Ihres **MediaPlaybackList**-Elements.</span><span class="sxs-lookup"><span data-stu-id="e032a-229">To get started, declare a variable to store your **MediaPlaybackList**.</span></span>

[!code-cs[DeclareMediaPlaybackList](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetDeclareMediaPlaybackList)]

<span data-ttu-id="e032a-230">Erstellen Sie mithilfe des weiter oben beschriebenen Verfahrens für jedes Medienelement, das Sie Ihrer Liste hinzufügen möchten, ein **MediaPlaybackItem**-Element.</span><span class="sxs-lookup"><span data-stu-id="e032a-230">Create a **MediaPlaybackItem** for each media item you want to add to your list using the same procedure described previously in this article.</span></span> <span data-ttu-id="e032a-231">Initialisieren Sie Ihr **MediaPlaybackList**-Objekt, und fügen Sie die Medienwiedergabeelemente hinzu.</span><span class="sxs-lookup"><span data-stu-id="e032a-231">Initialize your **MediaPlaybackList** object and add the media playback items to it.</span></span> <span data-ttu-id="e032a-232">Registrieren Sie einen Handler für das [**CurrentItemChanged**](https://msdn.microsoft.com/library/windows/apps/dn930957)-Ereignis.</span><span class="sxs-lookup"><span data-stu-id="e032a-232">Register a handler for the [**CurrentItemChanged**](https://msdn.microsoft.com/library/windows/apps/dn930957) event.</span></span> <span data-ttu-id="e032a-233">Durch dieses Ereignis wird das aktuell wiedergegebenen Medienelement auf Ihrer UI angezeigt.</span><span class="sxs-lookup"><span data-stu-id="e032a-233">This event allows you to update your UI to reflect the currently playing media item.</span></span> <span data-ttu-id="e032a-234">Sie können auch die Ereignisse [ItemOpened](https://docs.microsoft.com/uwp/api/Windows.Media.Playback.MediaPlaybackList.ItemOpened) und [ItemFailed](https://docs.microsoft.com/uwp/api/Windows.Media.Playback.MediaPlaybackList.ItemFailed) registrieren, die jeweils ausgelöst werden, wenn Elemente in der Liste erfolgreich geöffnet wurden bzw. nicht geöffnet werden können.</span><span class="sxs-lookup"><span data-stu-id="e032a-234">You can also register for the [ItemOpened](https://docs.microsoft.com/uwp/api/Windows.Media.Playback.MediaPlaybackList.ItemOpened) event, which is raised when an item in the list is successfully opened, and the [ItemFailed](https://docs.microsoft.com/uwp/api/Windows.Media.Playback.MediaPlaybackList.ItemFailed) event, which is raised when an item in the list can't be opened.</span></span>

<span data-ttu-id="e032a-235">Ab Windows10 Version 1703 können Sie angeben, welche maximale Anzahl von **MediaPlaybackItem**-Objekten in der **MediaPlaybackList** das System geöffnet lassen soll, nachdem sie durch Festlegen der [MaxPlayedItemsToKeepOpen](https://docs.microsoft.com/uwp/api/Windows.Media.Playback.MediaPlaybackList.MaxPlayedItemsToKeepOpen)-Eigenschaft wiedergegeben wurden.</span><span class="sxs-lookup"><span data-stu-id="e032a-235">Starting with Windows 10, version 1703, you can specify the maximum number of **MediaPlaybackItem** objects in the **MediaPlaybackList** that the system will keep open after they have been played by setting the [MaxPlayedItemsToKeepOpen](https://docs.microsoft.com/uwp/api/Windows.Media.Playback.MediaPlaybackList.MaxPlayedItemsToKeepOpen) property.</span></span> <span data-ttu-id="e032a-236">Wird ein **MediaPlaybackItem** geöffnet gelassen, kann die Wiedergabe sofort starten, wenn der Benutzer zu dem Element wechselt, da es nicht erneut geladen werden muss.</span><span class="sxs-lookup"><span data-stu-id="e032a-236">When a **MediaPlaybackItem** is kept open, playback of the item can start instantaneously when the user switches to that item because the item doesn't need to be reloaded.</span></span> <span data-ttu-id="e032a-237">Da sich der Speicherverbrauch Ihrer App erhöht, wenn Elemente geöffnet bleiben, sollten Sie beim Festlegen dieses Werts das Verhältnis zwischen Reaktionsfähigkeit und Speicherverbrauch berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="e032a-237">But keeping items open also increases the memory consumption of your app, so you should consider the balance between responsiveness and memory usage when setting this value.</span></span> 

<span data-ttu-id="e032a-238">Um die Wiedergabe Ihrer Liste zu aktivieren, legen Sie als Wiedergabequelle Ihres **MediaPlayer** Ihre **MediaPlaybackList** fest.</span><span class="sxs-lookup"><span data-stu-id="e032a-238">To enable playback of your list, set the playback source of the **MediaPlayer** to your **MediaPlaybackList**.</span></span>

[!code-cs[PlayMediaPlaybackList](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetPlayMediaPlaybackList)]

<span data-ttu-id="e032a-239">Aktualisieren Sie im **CurrentItemChanged**-Ereignishandler Ihre UI mit dem derzeit wiedergegebenen Element. Dieses kann mithilfe der [**NewItem**](https://msdn.microsoft.com/library/windows/apps/dn930930)-Eigenschaft des an das Ereignis übergebenen [**CurrentMediaPlaybackItemChangedEventArgs**](https://msdn.microsoft.com/library/windows/apps/dn930929)-Objekts abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="e032a-239">In the **CurrentItemChanged** event handler, update your UI to reflect the currently playing item, which can be retrieved using the [**NewItem**](https://msdn.microsoft.com/library/windows/apps/dn930930) property of the [**CurrentMediaPlaybackItemChangedEventArgs**](https://msdn.microsoft.com/library/windows/apps/dn930929) object passed into the event.</span></span> <span data-ttu-id="e032a-240">Zur Erinnerung: Wenn Sie die UI auf der Grundlage dieses Ereignisses aktualisieren, müssen Sie dies innerhalb eines Aufrufs von [**CoreDispatcher.RunAsync**](https://msdn.microsoft.com/library/windows/apps/hh750317) tun, damit die Aktualisierungen im UI-Thread vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="e032a-240">Remember that if you update the UI from this event, you should do so within a call to [**CoreDispatcher.RunAsync**](https://msdn.microsoft.com/library/windows/apps/hh750317) so that the updates are made on the UI thread.</span></span>

<span data-ttu-id="e032a-241">Ab Windows10 Version 1703 können Sie durch den Wert der [CurrentMediaPlaybackItemChangedEventArgs.Reason](https://docs.microsoft.com/uwp/api/windows.media.playback.currentmediaplaybackitemchangedeventargs.Reason)-Eigenschaft den Grund für die Änderung des Elements feststellen, z.B. weil die App programmgesteuert gewechselt, das zuvor wiedergegebene Element beendet oder einen Fehler festgestellt hat.</span><span class="sxs-lookup"><span data-stu-id="e032a-241">Starting with Windows 10, version 1703, you can check the [CurrentMediaPlaybackItemChangedEventArgs.Reason](https://docs.microsoft.com/uwp/api/windows.media.playback.currentmediaplaybackitemchangedeventargs.Reason) property to get a value that indicates the reason that the item changed, such as the app switching items programatically, the previously playing item reaching its end, or an error occurring.</span></span>

[!code-cs[MediaPlaybackListItemChanged](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetMediaPlaybackListItemChanged)]


<span data-ttu-id="e032a-242">Rufen Sie [**MovePrevious**](https://msdn.microsoft.com/library/windows/apps/mt146455) oder [**MoveNext**](https://msdn.microsoft.com/library/windows/apps/mt146454) auf, um bei der MediaPlayer-Wiedergabe zum vorherigen oder nächsten Element Ihres **MediaPlaybackList**-Elements zu wechseln.</span><span class="sxs-lookup"><span data-stu-id="e032a-242">Call [**MovePrevious**](https://msdn.microsoft.com/library/windows/apps/mt146455) or [**MoveNext**](https://msdn.microsoft.com/library/windows/apps/mt146454) to cause the media player to play the previous or next item in your **MediaPlaybackList**.</span></span>

[!code-cs[PrevButton](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetPrevButton)]

[!code-cs[NextButton](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetNextButton)]

<span data-ttu-id="e032a-243">Geben Sie durch Festlegen der [**ShuffleEnabled**](https://msdn.microsoft.com/library/windows/apps/mt146457)-Eigenschaft an, ob der Media Player die Elemente in Ihrer Liste in zufälliger Reihenfolge wiedergeben soll.</span><span class="sxs-lookup"><span data-stu-id="e032a-243">Set the [**ShuffleEnabled**](https://msdn.microsoft.com/library/windows/apps/mt146457) property to specify whether the media player should play the items in your list in random order.</span></span>

[!code-cs[ShuffleButton](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetShuffleButton)]

<span data-ttu-id="e032a-244">Geben Sie durch Festlegen der [**AutoRepeatEnabled**](https://msdn.microsoft.com/library/windows/apps/mt146452)-Eigenschaft an, ob der Media Player die Wiedergabe Ihrer Liste automatisch wiederholen soll.</span><span class="sxs-lookup"><span data-stu-id="e032a-244">Set the [**AutoRepeatEnabled**](https://msdn.microsoft.com/library/windows/apps/mt146452) property to specify whether the media player should loop playback of your list.</span></span>

[!code-cs[RepeatButton](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetRepeatButton)]


### <a name="handle-the-failure-of-media-items-in-a-playback-list"></a><span data-ttu-id="e032a-245">Behandeln des Ausfalls von Medienelementen in einer Wiedergabeliste</span><span class="sxs-lookup"><span data-stu-id="e032a-245">Handle the failure of media items in a playback list</span></span>
<span data-ttu-id="e032a-246">Das [**ItemFailed**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList.ItemFailed)-Ereignis wird ausgelöst, wenn ein Element in der Liste nicht geöffnet wird.</span><span class="sxs-lookup"><span data-stu-id="e032a-246">The [**ItemFailed**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList.ItemFailed) event is raised when an item in the list fails to open.</span></span> <span data-ttu-id="e032a-247">Die [**ErrorCode**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItemError.ErrorCode)-Eigenschaft des [**MediaPlaybackItemError**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItemError)-Objekts, das an den Ereignishandler übergeben wird, listet die genaue Ursache des Fehlers auf, wenn möglich, einschließlich Netzwerkfehlern, Decodierungsfehlern oder Verschlüsselungsfehlern.</span><span class="sxs-lookup"><span data-stu-id="e032a-247">The [**ErrorCode**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItemError.ErrorCode) property of the [**MediaPlaybackItemError**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItemError) object passed into the handler enumerates the specific cause of the failure when possible, including network errors, decoding errors, or encryption errors.</span></span>

[!code-cs[ItemFailed](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetItemFailed)]

### <a name="disable-playback-of-items-in-a-playback-list"></a><span data-ttu-id="e032a-248">Deaktivieren der Wiedergabe von Elementen in Wiedergabelisten</span><span class="sxs-lookup"><span data-stu-id="e032a-248">Disable playback of items in a playback list</span></span>
<span data-ttu-id="e032a-249">Ab Windows10 Version 1703 können Sie die Wiedergabe eines oder mehrerer Elemente in einer **MediaPlaybackItemList** deaktivieren, indem Sie die [IsDisabledInPlaybackList](https://docs.microsoft.com/uwp/api/Windows.Media.Playback.MediaPlaybackItem.IsDisabledInPlaybackList)-Eigenschaft eines [MediaPlaybackItem](https://docs.microsoft.com/uwp/api/Windows.Media.Playback.MediaPlaybackItem) auf „false“ festlegen.</span><span class="sxs-lookup"><span data-stu-id="e032a-249">Starting with Windows 10, version 1703, you can disable playback of one or more items in a **MediaPlaybackItemList** by setting the [IsDisabledInPlaybackList](https://docs.microsoft.com/uwp/api/Windows.Media.Playback.MediaPlaybackItem.IsDisabledInPlaybackList) property of a [MediaPlaybackItem](https://docs.microsoft.com/uwp/api/Windows.Media.Playback.MediaPlaybackItem) to false.</span></span> 

<span data-ttu-id="e032a-250">Eine typische Anwendung dieses Features ist in Apps, die Internet-Musikstreams wiedergeben.</span><span class="sxs-lookup"><span data-stu-id="e032a-250">A typical scenario for this feature is for apps that play music streamed from the internet.</span></span> <span data-ttu-id="e032a-251">Die App kann Änderungen im Netzwerkverbindungsstatus des Geräts überwachen, um die Wiedergabe unvollständig heruntergeladener Elemente zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="e032a-251">The app can listen for changes in the network connection status of the device and disable playback of items that are not fully downloaded.</span></span> <span data-ttu-id="e032a-252">Im folgenden Beispiel wird ein Handler für das [NetworkInformation.NetworkStatusChanged](https://docs.microsoft.com/uwp/api/Windows.Networking.Connectivity.NetworkInformation.NetworkStatusChanged)-Ereignis registriert.</span><span class="sxs-lookup"><span data-stu-id="e032a-252">In the following example, a handler is registered for the [NetworkInformation.NetworkStatusChanged](https://docs.microsoft.com/uwp/api/Windows.Networking.Connectivity.NetworkInformation.NetworkStatusChanged) event.</span></span>

[!code-cs[RegisterNetworkStatusChanged](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetRegisterNetworkStatusChanged)]

<span data-ttu-id="e032a-253">Überprüfen Sie im **NetworkStatusChanged**-Handler, ob [GetInternetConnectionProfile](https://docs.microsoft.com/uwp/api/Windows.Networking.Connectivity.NetworkInformation.GetInternetConnectionProfile) den Wert Null zurückgibt, wenn das Netzwerk nicht verbunden ist.</span><span class="sxs-lookup"><span data-stu-id="e032a-253">In the handler for **NetworkStatusChanged**, check to see if [GetInternetConnectionProfile](https://docs.microsoft.com/uwp/api/Windows.Networking.Connectivity.NetworkInformation.GetInternetConnectionProfile) returns null, which indicates that the network is not connected.</span></span> <span data-ttu-id="e032a-254">Falls ja, wiederholen Sie die Wiedergabe aller Elemente in der Liste; wenn der Wert [TotalDownloadProgress](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybackitem.TotalDownloadProgress) eines Elements kleiner als 1 ist, das Element also nicht vollständig heruntergeladen wurde, deaktivieren Sie es.</span><span class="sxs-lookup"><span data-stu-id="e032a-254">If this is the case, loop through all of the items in the playback list, and if the [TotalDownloadProgress](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybackitem.TotalDownloadProgress) for the item is less than 1, meaning that the item has not fully downloaded, disable the item.</span></span> <span data-ttu-id="e032a-255">Wenn die Netzwerkverbindung aktiviert ist, wiederholen Sie die Wiedergabe der Liste und aktivieren Sie jedes Element.</span><span class="sxs-lookup"><span data-stu-id="e032a-255">If the network connection is enabled, loop through all of the items in the playback list and enable each item.</span></span>

[!code-cs[NetworkStatusChanged](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetNetworkStatusChanged)]

### <a name="defer-binding-of-media-content-for-items-in-a-playback-list-by-using-mediabinder"></a><span data-ttu-id="e032a-256">Verzögern der Bindung von Medieninhalten in einer Wiedergabeliste mit MediaBinder</span><span class="sxs-lookup"><span data-stu-id="e032a-256">Defer binding of media content for items in a playback list by using MediaBinder</span></span>
<span data-ttu-id="e032a-257">In den vorherigen Beispielen wurde aus einer Datei, URL oder Datenstrom zuerst eine **MediaSource** erstellt, dann ein **MediaPlaybackItem** erstellt und einer **MediaPlaybackList** hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="e032a-257">In the previous examples, a **MediaSource** is created from a file, URL, or stream, after which a **MediaPlaybackItem** is created and added to a **MediaPlaybackList**.</span></span> <span data-ttu-id="e032a-258">In manchen Fällen, z.B. wenn Benutzer für angezeigte Inhalte bezahlen müssen, können Sie ggf. das Abrufen des Inhalts einer **MediaSource** verzögern, bis das Element in der Liste für die Wiedergabe bereit ist.</span><span class="sxs-lookup"><span data-stu-id="e032a-258">For some scenarios, such as if the user is being charged for viewing content, you may want to defer the retrieval of the content of a **MediaSource** until the item in the playback list is ready to actually be played.</span></span> <span data-ttu-id="e032a-259">Um dieses Szenario zu implementieren, erstellen Sie eine Instanz der [**MediaBinder**](https://docs.microsoft.com/uwp/api/Windows.Media.Core.MediaBinder)-Klasse.</span><span class="sxs-lookup"><span data-stu-id="e032a-259">To implement this scenario, create an instance of the [**MediaBinder**](https://docs.microsoft.com/uwp/api/Windows.Media.Core.MediaBinder) class.</span></span> <span data-ttu-id="e032a-260">Legen Sie die [**Token**](https://docs.microsoft.com/uwp/api/Windows.Media.Core.MediaBinder.Token)-Eigenschaft auf eine von der App definierte Zeichenfolge fest, die den Inhalt identifiziert, dessen Abruf Sie verzögern möchten, und registrieren Sie einen Handler für das [**Binding**](https://docs.microsoft.com/uwp/api/Windows.Media.Core.MediaBinder.Binding)-Ereignis.</span><span class="sxs-lookup"><span data-stu-id="e032a-260">Set the [**Token**](https://docs.microsoft.com/uwp/api/Windows.Media.Core.MediaBinder.Token) property to an app-defined string that identifies the content for which you want to defer retrieval and then register a handler for the [**Binding**](https://docs.microsoft.com/uwp/api/Windows.Media.Core.MediaBinder.Binding) event.</span></span> <span data-ttu-id="e032a-261">Anschließend erstellen Sie eine **MediaSource** aus dem **Binder** durch den Aufruf [**MediaSource.CreateFromMediaBinder**](https://docs.microsoft.com/uwp/api/windows.media.core.mediasource.createfrommediabinder).</span><span class="sxs-lookup"><span data-stu-id="e032a-261">Next, create a **MediaSource** from the **Binder** by calling [**MediaSource.CreateFromMediaBinder**](https://docs.microsoft.com/uwp/api/windows.media.core.mediasource.createfrommediabinder).</span></span> <span data-ttu-id="e032a-262">Nun erstellen Sie ein **MediaPlaybackItem** aus der **MediaSource**, das Sie der Wiedergabeliste hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="e032a-262">Then, create a **MediaPlaybackItem** from the **MediaSource** and add it to the playback list as usual.</span></span>

[!code-cs[InitMediaBinder](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetInitMediaBinder)]

<span data-ttu-id="e032a-263">Wenn das System bestimmt, dass der von **MediaBinder** zugeordnete Inhalt abgerufen werden soll, wird das **Binding**-Ereignis ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="e032a-263">When the system determines that the content associated with the **MediaBinder** needs to be retrieved, it will raise the **Binding** event.</span></span> <span data-ttu-id="e032a-264">Im Handler für dieses Ereignis können Sie die **MediaBinder**-Instanz von [**MediaBindingEventArgs**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs) abrufen, die dem Ereignis übergeben wurde.</span><span class="sxs-lookup"><span data-stu-id="e032a-264">In the handler for this event, you can retrieve the **MediaBinder** instance from the [**MediaBindingEventArgs**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs) passed into the event.</span></span> <span data-ttu-id="e032a-265">Rufen Sie die für die **Token**-Eigenschaft angegebene Zeichenfolge ab, um festzustellen, welche Inhalte abgerufen werden sollen.</span><span class="sxs-lookup"><span data-stu-id="e032a-265">Retrieve the string you specified for the **Token** property and use it to determine what content should be retrieved.</span></span> <span data-ttu-id="e032a-266">Mit **MediaBindingEventArgs** können verschiedene Darstellungen für gebundene Inhalte festgelegt werden, z. B. [**SetStorageFile**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs.setstoragefile), [**SetStream**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs.setstream), [**SetStreamReference**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs.setstreamreference) und [**SetUri**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs.seturi).</span><span class="sxs-lookup"><span data-stu-id="e032a-266">The **MediaBindingEventArgs** provides methods for setting the bound content in several different representations, including [**SetStorageFile**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs.setstoragefile), [**SetStream**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs.setstream), [**SetStreamReference**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs.setstreamreference), and [**SetUri**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs.seturi).</span></span> 

[!code-cs[BinderBinding](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetBinderBinding)]

<span data-ttu-id="e032a-267">Denken Sie daran, für asynchrone Vorgänge im **Binding**-Ereignishandler die Methode [**MediaBindingEventArgs.GetDeferral**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs.GetDeferral) aufzurufen, z.B. für Webanforderungen, damit das System vor der Fortsetzung den Abschluss des Vorgangs abwartet.</span><span class="sxs-lookup"><span data-stu-id="e032a-267">Note that if you are performing asynchronous operations, such as web requests, in the **Binding** event handler, you should call the [**MediaBindingEventArgs.GetDeferral**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs.GetDeferral) method to instruct the system to wait for your operation to complete before continuing.</span></span> <span data-ttu-id="e032a-268">Wenn der Vorgang abgeschlossen ist, rufen Sie [**Deferral.Complete**](https://docs.microsoft.com/uwp/api/windows.foundation.deferral.Complete), um das System fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="e032a-268">Call [**Deferral.Complete**](https://docs.microsoft.com/uwp/api/windows.foundation.deferral.Complete) after your operation is complete to instruct the system to continue.</span></span>

<span data-ttu-id="e032a-269">Ab Windows10 Version 1703 können Sie eine [**AdaptiveMediaSource**](https://docs.microsoft.com/uwp/api/windows.media.streaming.adaptive.adaptivemediasource) als gebundenen Inhalt bereitstellen, indem Sie [**SetAdaptiveMediaSource**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs.setadaptivemediasource) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="e032a-269">Starting with Windows 10, version 1703, you can supply an [**AdaptiveMediaSource**](https://docs.microsoft.com/uwp/api/windows.media.streaming.adaptive.adaptivemediasource) as bound content by calling [**SetAdaptiveMediaSource**](https://docs.microsoft.com/uwp/api/windows.media.core.mediabindingeventargs.setadaptivemediasource).</span></span> <span data-ttu-id="e032a-270">Weitere Informationen über adaptives Streaming für Ihre App finden Sie unter [Adaptives Streaming](adaptive-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="e032a-270">For more information on using adaptive streaming in your app, see [Adaptive streaming](adaptive-streaming.md).</span></span>



## <a name="related-topics"></a><span data-ttu-id="e032a-271">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="e032a-271">Related topics</span></span>
* [<span data-ttu-id="e032a-272">Medienwiedergabe</span><span class="sxs-lookup"><span data-stu-id="e032a-272">Media playback</span></span>](media-playback.md)
* [<span data-ttu-id="e032a-273">Wiedergeben von Audio- und Videoinhalten mit „MediaPlayer“</span><span class="sxs-lookup"><span data-stu-id="e032a-273">Play audio and video with MediaPlayer</span></span>](play-audio-and-video-with-mediaplayer.md)
* [<span data-ttu-id="e032a-274">Integrieren in die Steuerelemente für den Systemmedientransport</span><span class="sxs-lookup"><span data-stu-id="e032a-274">Integrate with the Sytem Media Transport Controls</span></span>](integrate-with-systemmediatransportcontrols.md)
* [<span data-ttu-id="e032a-275">Wiedergeben von Medien im Hintergrund</span><span class="sxs-lookup"><span data-stu-id="e032a-275">Play media in the background</span></span>](background-audio.md)

