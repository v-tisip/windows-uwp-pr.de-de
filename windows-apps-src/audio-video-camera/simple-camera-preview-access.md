---
author: drewbatgit
ms.assetid: 9BA3F85A-970F-411C-ACB1-B65768B8548A
description: Dieser Artikel beschreibt, wie Sie in einer UWP (Universelle Windows-Plattform)-App innerhalb einer XAML-Seite schnell den Datenstrom der Kameravorschau anzeigen.
title: Anzeigen der Kameravorschau
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: b258569b707f50051eaa266e2cae5b9971894cf3
ms.sourcegitcommit: cd00bb829306871e5103db481cf224ea7fb613f0
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/01/2018
ms.locfileid: "5885269"
---
# <a name="display-the-camera-preview"></a><span data-ttu-id="639e9-104">Anzeigen der Kameravorschau</span><span class="sxs-lookup"><span data-stu-id="639e9-104">Display the camera preview</span></span>


<span data-ttu-id="639e9-105">Dieser Artikel beschreibt, wie Sie in einer UWP (Universelle Windows-Plattform)-App innerhalb einer XAML-Seite schnell den Datenstrom der Kameravorschau anzeigen.</span><span class="sxs-lookup"><span data-stu-id="639e9-105">This article describes how to quickly display the camera preview stream within a XAML page in a Universal Windows Platform (UWP) app.</span></span> <span data-ttu-id="639e9-106">Zum Erstellen einer App, die Fotos und Videos mit der Kamera erfasst, müssen Sie Aufgaben wie das Behandeln der Geräte- und Kameraausrichtung oder das Festlegen von Codierungsoptionen für die erfasste Datei durchführen.</span><span class="sxs-lookup"><span data-stu-id="639e9-106">Creating an app that captures photos and videos using the camera requires you to perform tasks like handling device and camera orientation or setting encoding options for the captured file.</span></span> <span data-ttu-id="639e9-107">Für einige App-Szenarien möchten Sie vielleicht einfach nur den Vorschaudatenstrom von der Kamera anzeigen, ohne sich Gedanken über diese anderen Überlegungen machen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="639e9-107">For some app scenarios, you may want to just simply show the preview stream from the camera without worrying about these other considerations.</span></span> <span data-ttu-id="639e9-108">Dieser Artikel zeigt, wie dies mit einem Minimum an Code möglich ist.</span><span class="sxs-lookup"><span data-stu-id="639e9-108">This article shows you how to do that with a minimum of code.</span></span> <span data-ttu-id="639e9-109">Hinweis: Sie sollten den Vorschaudatenstrom immer ordnungsgemäß beenden, wenn Sie damit fertig sind; führen Sie dazu die folgenden Schritte aus.</span><span class="sxs-lookup"><span data-stu-id="639e9-109">Note that you should always shut down the preview stream properly when you are done with it by following the steps below.</span></span>

<span data-ttu-id="639e9-110">Informationen zum Schreiben einer Kamera-App, die Fotos oder Videos aufnimmt, finden Sie unter [Allgemeine Foto-, Video- und Audioaufnahme mit „MediaCapture“](basic-photo-video-and-audio-capture-with-MediaCapture.md).</span><span class="sxs-lookup"><span data-stu-id="639e9-110">For information on writing a camera app that captures photos or videos, see [Basic photo, video, and audio capture with MediaCapture](basic-photo-video-and-audio-capture-with-MediaCapture.md).</span></span>

## <a name="add-capability-declarations-to-the-app-manifest"></a><span data-ttu-id="639e9-111">Hinzufügen von Funktionsdeklarationen zum App-Manifest</span><span class="sxs-lookup"><span data-stu-id="639e9-111">Add capability declarations to the app manifest</span></span>

<span data-ttu-id="639e9-112">Damit Ihre App auf die Kamera eines Geräts zugreifen kann, müssen Sie deklarieren, dass die App *webcam*- und *microphone*-Gerätefunktionen verwendet.</span><span class="sxs-lookup"><span data-stu-id="639e9-112">In order for your app to access a device's camera, you must declare that your app uses the *webcam* and *microphone* device capabilities.</span></span> 

**<span data-ttu-id="639e9-113">Hinzufügen von Funktionen zum App-Manifest</span><span class="sxs-lookup"><span data-stu-id="639e9-113">Add capabilities to the app manifest</span></span>**

1.  <span data-ttu-id="639e9-114">Öffnen Sie in MicrosoftVisual Studio im **Projektmappen-Explorer** den Designer für das Anwendungsmanifest, indem Sie auf das Element **package.appxmanifest** doppelklicken.</span><span class="sxs-lookup"><span data-stu-id="639e9-114">In Microsoft Visual Studio, in **Solution Explorer**, open the designer for the application manifest by double-clicking the **package.appxmanifest** item.</span></span>
2.  <span data-ttu-id="639e9-115">Wählen Sie die Registerkarte **Funktionen** aus.</span><span class="sxs-lookup"><span data-stu-id="639e9-115">Select the **Capabilities** tab.</span></span>
3.  <span data-ttu-id="639e9-116">Aktivieren Sie die Kontrollkästchen für **Webcam** und **Mikrofon**.</span><span class="sxs-lookup"><span data-stu-id="639e9-116">Check the box for **Webcam** and the box for **Microphone**.</span></span>

## <a name="add-a-captureelement-to-your-page"></a><span data-ttu-id="639e9-117">Hinzufügen eines CaptureElement zu einer Seite</span><span class="sxs-lookup"><span data-stu-id="639e9-117">Add a CaptureElement to your page</span></span>

<span data-ttu-id="639e9-118">Mithilfe eines [**CaptureElement**](https://msdn.microsoft.com/library/windows/apps/br209278) können Sie den Vorschaudatenstrom innerhalb der XAML-Seite anzeigen.</span><span class="sxs-lookup"><span data-stu-id="639e9-118">Use a [**CaptureElement**](https://msdn.microsoft.com/library/windows/apps/br209278) to display the preview stream within your XAML page.</span></span>

[!code-xml[CaptureElement](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml#SnippetCaptureElement)]



## <a name="use-mediacapture-to-start-the-preview-stream"></a><span data-ttu-id="639e9-119">Verwenden von MediaCapture zum Starten des Vorschaudatenstroms</span><span class="sxs-lookup"><span data-stu-id="639e9-119">Use MediaCapture to start the preview stream</span></span>

<span data-ttu-id="639e9-120">Das [**MediaCapture**](https://msdn.microsoft.com/library/windows/apps/br241124)-Objekt ist die Schnittstelle Ihrer App mit der Kamera des Geräts.</span><span class="sxs-lookup"><span data-stu-id="639e9-120">The [**MediaCapture**](https://msdn.microsoft.com/library/windows/apps/br241124) object is your app's interface to the device's camera.</span></span> <span data-ttu-id="639e9-121">Diese Klasse ist ein Mitglied des Windows.Media.Capture-Namespace.</span><span class="sxs-lookup"><span data-stu-id="639e9-121">This class is a member of the Windows.Media.Capture namespace.</span></span> <span data-ttu-id="639e9-122">Im Beispiel in diesem Artikel werden neben den in der Standard-Projektvorlage enthaltenen APIs auch APIs aus den Namespaces [**Windows.ApplicationModel**](https://msdn.microsoft.com/library/windows/apps/br224691) und [System.Threading.Tasks](https://msdn.microsoft.com/library/windows/apps/xaml/system.threading.tasks.aspx) verwendet.</span><span class="sxs-lookup"><span data-stu-id="639e9-122">The example in this article also uses APIs from the [**Windows.ApplicationModel**](https://msdn.microsoft.com/library/windows/apps/br224691) and [System.Threading.Tasks](https://msdn.microsoft.com/library/windows/apps/xaml/system.threading.tasks.aspx) namespaces, in addition to those included by the default project template.</span></span>

<span data-ttu-id="639e9-123">Fügen Sie using-Direktiven hinzu, um die folgenden Namespaces in die CS-Datei Ihrer Seite einzubeziehen.</span><span class="sxs-lookup"><span data-stu-id="639e9-123">Add using directives to include the following namespaces in your page's .cs file.</span></span>

[!code-cs[SimpleCameraPreviewUsing](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetSimpleCameraPreviewUsing)]

<span data-ttu-id="639e9-124">Deklarieren Sie eine Klassenmembervariable für das **MediaCapture**-Objekt. Fügen Sie einen booleschen Member hinzu, um nachzuverfolgen, ob die Vorschau der Kamera gerade aktiv ist.</span><span class="sxs-lookup"><span data-stu-id="639e9-124">Declare a class member variable for the **MediaCapture** object and a boolean to track whether the camera is currently previewing.</span></span> 

[!code-cs[DeclareMediaCapture](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetDeclareMediaCapture)]

<span data-ttu-id="639e9-125">Deklarieren Sie eine Variable vom Typ [**DisplayRequest**](https://msdn.microsoft.com/library/windows/apps/Windows.System.Display.DisplayRequest), um sicherzustellen, dass die Anzeige während der Ausführung der Vorschau nicht deaktiviert wird.</span><span class="sxs-lookup"><span data-stu-id="639e9-125">Declare a variable of type [**DisplayRequest**](https://msdn.microsoft.com/library/windows/apps/Windows.System.Display.DisplayRequest) that will be used to make sure the display does not turn off while the preview is running.</span></span>

[!code-cs[DeclareDisplayRequest](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetDeclareDisplayRequest)]

<span data-ttu-id="639e9-126">Erstellen Sie eine Hilfsmethode zum Starten der Kameravorschau, die in diesem Beispiel **StartPreviewAsync** genannt wird.</span><span class="sxs-lookup"><span data-stu-id="639e9-126">Create a helper method to start up the camera preview, called **StartPreviewAsync** in this example.</span></span> <span data-ttu-id="639e9-127">Je nach App-Szenario können Sie dies vom **OnNavigatedTo**-Ereignishandler aufrufen, der aufgerufen wird, wenn die Seite geladen wird, oder warten und starten Sie die Vorschau als Reaktion auf UI-Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="639e9-127">Depending on your app's scenario, you may want to call this from the **OnNavigatedTo** event handler that is called when the page is loaded or wait and launch the preview in response to UI events.</span></span>

<span data-ttu-id="639e9-128">Erstellen Sie eine neue Instanz der **MediaCapture**-Klasse, und rufen Sie [**InitializeAsync**](https://msdn.microsoft.com/library/windows/apps/br226598) auf, um das Aufnahmegerät zu initialisieren.</span><span class="sxs-lookup"><span data-stu-id="639e9-128">Create a new instance of the **MediaCapture** class and call [**InitializeAsync**](https://msdn.microsoft.com/library/windows/apps/br226598) to initialize the capture device.</span></span> <span data-ttu-id="639e9-129">Diese Methode schlägt u.U. fehl, beispielsweise auf Geräten ohne Kamera, daher sollte der Aufruf aus einem **try**-Block erfolgen.</span><span class="sxs-lookup"><span data-stu-id="639e9-129">This method may fail, on devices that don't have a camera for example, so you should call it from within a **try** block.</span></span> <span data-ttu-id="639e9-130">Beim Versuch, die Kamera zu initialisieren, wird eine **UnauthorizedAccessException** ausgelöst, wenn der Benutzer in den Datenschutzeinstellungen des Geräts den Kamerazugriff deaktiviert hat.</span><span class="sxs-lookup"><span data-stu-id="639e9-130">An **UnauthorizedAccessException** will be thrown when you attempt to initialize the camera if the user has disabled camera access in the device's privacy settings.</span></span> <span data-ttu-id="639e9-131">Diese Ausnahme tritt auch während der Entwicklung auf, wenn Sie Ihrem App-Manifest nicht die richtigen Funktionen hinzugefügt haben.</span><span class="sxs-lookup"><span data-stu-id="639e9-131">You will also see this exception during development if you have neglected to add the proper capabilities to your app manifest.</span></span>

<span data-ttu-id="639e9-132">**Wichtig:** Bei einigen Gerätefamilien wird dem Benutzer eine Aufforderung zur Zustimmung des Benutzers angezeigt, bevor Ihrer App der Zugriff auf die Kamera des Geräts gewährt wird.</span><span class="sxs-lookup"><span data-stu-id="639e9-132">**Important** On some device families, a user consent prompt is displayed to the user before your app is granted access to the device's camera.</span></span> <span data-ttu-id="639e9-133">Aus diesem Grund müssen Sie nur [**MediaCapture.InitializeAsync**](https://msdn.microsoft.com/library/windows/apps/br226598) aus dem Hauptthread der Benutzeroberfläche aufrufen.</span><span class="sxs-lookup"><span data-stu-id="639e9-133">For this reason, you must only call [**MediaCapture.InitializeAsync**](https://msdn.microsoft.com/library/windows/apps/br226598) from the main UI thread.</span></span> <span data-ttu-id="639e9-134">Der Versuch, die Kamera von einem anderen Thread aus zu initialisieren, kann zum einem Initialisierungsfehler führen.</span><span class="sxs-lookup"><span data-stu-id="639e9-134">Attempting to initialize the camera from another thread may result in initialization failure.</span></span>

<span data-ttu-id="639e9-135">Verbinden Sie das **MediaCapture**-Objekt mit der **CaptureElement**-Klasse, indem Sie die [**Source**](https://msdn.microsoft.com/library/windows/apps/br209280)-Eigenschaft festlegen.</span><span class="sxs-lookup"><span data-stu-id="639e9-135">Connect the **MediaCapture** to the **CaptureElement** by setting the [**Source**](https://msdn.microsoft.com/library/windows/apps/br209280) property.</span></span> <span data-ttu-id="639e9-136">Starten Sie die Vorschau durch Aufrufen von [**StartPreviewAsync**](https://msdn.microsoft.com/library/windows/apps/br226613).</span><span class="sxs-lookup"><span data-stu-id="639e9-136">Start the preview by calling [**StartPreviewAsync**](https://msdn.microsoft.com/library/windows/apps/br226613).</span></span> <span data-ttu-id="639e9-137">Diese Methode löst eine **FileLoadException** aus, wenn eine andere App exklusive Kontrolle über das Aufnahmegerät hat.</span><span class="sxs-lookup"><span data-stu-id="639e9-137">This method will throw a **FileLoadException** if another app has exclusive control of the capture device.</span></span> <span data-ttu-id="639e9-138">Der nächste Abschnitterläutert, wie Zustandsänderungen bei exklusiver Kontrolle überwacht werden.</span><span class="sxs-lookup"><span data-stu-id="639e9-138">See the next section for information listening for changes in exclusive control.</span></span>

<span data-ttu-id="639e9-139">Rufen Sie [**RequestActive**](https://msdn.microsoft.com/library/windows/apps/Windows.System.Display.DisplayRequest.RequestActive) auf, um sicherzustellen, dass das Gerät während der Ausführung der Vorschau nicht in den Standbymodus wechselt.</span><span class="sxs-lookup"><span data-stu-id="639e9-139">Call [**RequestActive**](https://msdn.microsoft.com/library/windows/apps/Windows.System.Display.DisplayRequest.RequestActive) to make sure the device doesn't go to sleep while the preview is running.</span></span> <span data-ttu-id="639e9-140">Legen Sie abschließend die [**DisplayInformation.AutoRotationPreferences**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Display.DisplayInformation.AutoRotationPreferences)-Eigenschaft auf [**Landscape**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Display.DisplayOrientations) fest, um zu verhindern, dass die sich Benutzeroberfläche und das **CaptureElement** drehen, wenn der Benutzer die Ausrichtung des Geräts ändert.</span><span class="sxs-lookup"><span data-stu-id="639e9-140">Finally, set the [**DisplayInformation.AutoRotationPreferences**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Display.DisplayInformation.AutoRotationPreferences) property to [**Landscape**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Display.DisplayOrientations) to prevent the UI and the **CaptureElement** from rotating when the user changes the device orientation.</span></span> <span data-ttu-id="639e9-141">Weitere Informationen zum Behandeln von Änderungen an der Geräteausrichtung finden Sie unter [**Handhaben der Geräte- und Bildschirmausrichtung mit „MediaCapture“**](handle-device-orientation-with-mediacapture.md).</span><span class="sxs-lookup"><span data-stu-id="639e9-141">For more information on handling device orientation changes, see [**Handle device orientation with MediaCapture**](handle-device-orientation-with-mediacapture.md).</span></span>  

[!code-cs[StartPreviewAsync](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetStartPreviewAsync)]

## <a name="handle-changes-in-exclusive-control"></a><span data-ttu-id="639e9-142">Behandeln von Änderungen bei exklusiver Kontrolle</span><span class="sxs-lookup"><span data-stu-id="639e9-142">Handle changes in exclusive control</span></span>
<span data-ttu-id="639e9-143">Wie im vorherigen Abschnitterwähnt, löst der Aufruf **StartPreviewAsync** eine **FileLoadException** aus, wenn eine andere App exklusive Kontrolle über das Aufnahmegerät hat.</span><span class="sxs-lookup"><span data-stu-id="639e9-143">As stated in the previous section, **StartPreviewAsync** will throw a **FileLoadException** if another app has exclusive control of the capture device.</span></span> <span data-ttu-id="639e9-144">Ab Windows10 Version 1703 können Sie einen Handler für das [MediaCapture.CaptureDeviceExclusiveControlStatusChanged](https://docs.microsoft.com/uwp/api/Windows.Media.Capture.MediaCapture.CaptureDeviceExclusiveControlStatusChanged)-Ereignis registrieren, das bei jeder Statusänderung der exklusiven Kontrolle des Geräts ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="639e9-144">Starting with Windows 10, version 1703, you can register a handler for the [MediaCapture.CaptureDeviceExclusiveControlStatusChanged](https://docs.microsoft.com/uwp/api/Windows.Media.Capture.MediaCapture.CaptureDeviceExclusiveControlStatusChanged) event, which is raised whenever the exclusive control status of the device changes.</span></span> <span data-ttu-id="639e9-145">Um den aktuellen Status anzuzeigen, rufen Sie im Handler dieses Ereignisses die Eigenschaft [MediaCaptureDeviceExclusiveControlStatusChangedEventArgs.Status](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapturedeviceexclusivecontrolstatuschangedeventargs.Status) ab.</span><span class="sxs-lookup"><span data-stu-id="639e9-145">In the handler for this event, check the [MediaCaptureDeviceExclusiveControlStatusChangedEventArgs.Status](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapturedeviceexclusivecontrolstatuschangedeventargs.Status) property to see what the current status is.</span></span> <span data-ttu-id="639e9-146">Wenn der neue Status **SharedReadOnlyAvailable** lautet, können Sie die Vorschau derzeit nicht starten und sollten Ihren Benutzer auf der UI informieren.</span><span class="sxs-lookup"><span data-stu-id="639e9-146">If the new status is **SharedReadOnlyAvailable**, then you know you can't currently start the preview and you may want to update your UI to alert the user.</span></span> <span data-ttu-id="639e9-147">Wenn der neue Status **ExclusiveControlAvailable** lautet, versuchen Sie die Kameravorschau erneut zu starten.</span><span class="sxs-lookup"><span data-stu-id="639e9-147">If the new status is **ExclusiveControlAvailable**, then you can try starting the camera preview again.</span></span>

[!code-cs[ExclusiveControlStatusChanged](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetExclusiveControlStatusChanged)]

## <a name="shut-down-the-preview-stream"></a><span data-ttu-id="639e9-148">Beenden des Vorschaustreams</span><span class="sxs-lookup"><span data-stu-id="639e9-148">Shut down the preview stream</span></span>

<span data-ttu-id="639e9-149">Wenn Sie den Vorschaudatenstrom nicht mehr benötigen, sollten Sie ihn stets beenden und die dazugehörigen Ressourcen ordnungsgemäß löschen, um sicherzustellen, dass die Kamera für andere Apps auf dem Gerät verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="639e9-149">When you are done using the preview stream, you should always shut down the stream and properly dispose of the associated resources to ensure that the camera is available to other apps on the device.</span></span> <span data-ttu-id="639e9-150">Folgende Schritte sind zum Beenden des Vorschaudatenstroms erforderlich:</span><span class="sxs-lookup"><span data-stu-id="639e9-150">The required steps for shutting down the preview stream are:</span></span>

-   <span data-ttu-id="639e9-151">Wenn die Vorschau der Kamera gerade aktiv ist, rufen Sie [**StopPreviewAsync**](https://msdn.microsoft.com/library/windows/apps/br226622) auf, um den Vorschaudatenstrom zu beenden.</span><span class="sxs-lookup"><span data-stu-id="639e9-151">If the camera is currently previewing, call [**StopPreviewAsync**](https://msdn.microsoft.com/library/windows/apps/br226622) to stop the preview stream.</span></span> <span data-ttu-id="639e9-152">Wenn Sie **StopPreviewAsync** aufrufen, während die Vorschau nicht ausgeführt, wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="639e9-152">An exception will be thrown if you call **StopPreviewAsync** while the preview is not running.</span></span>
-   <span data-ttu-id="639e9-153">Legen Sie die [**Source**](https://msdn.microsoft.com/library/windows/apps/br209280)-Eigenschaft von **CaptureElement** auf NULL fest.</span><span class="sxs-lookup"><span data-stu-id="639e9-153">Set the [**Source**](https://msdn.microsoft.com/library/windows/apps/br209280) property of the **CaptureElement** to null.</span></span> <span data-ttu-id="639e9-154">Verwenden Sie [**CoreDispatcher.RunAsync**](https://msdn.microsoft.com/library/windows/apps/windows.ui.core.coredispatcher.runasync.aspx), um sicherzustellen, dass dieser Aufruf im UI-Thread ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="639e9-154">Use [**CoreDispatcher.RunAsync**](https://msdn.microsoft.com/library/windows/apps/windows.ui.core.coredispatcher.runasync.aspx) to make sure this call is executed on the UI thread.</span></span>
-   <span data-ttu-id="639e9-155">Rufen Sie die [**Dispose**](https://msdn.microsoft.com/library/windows/apps/dn278858)-Methode des **MediaCapture**-Objekts auf, um es freizugeben.</span><span class="sxs-lookup"><span data-stu-id="639e9-155">Call the **MediaCapture** object's [**Dispose**](https://msdn.microsoft.com/library/windows/apps/dn278858) method to release the object.</span></span> <span data-ttu-id="639e9-156">Stellen Sie erneut mit [**CoreDispatcher.RunAsync**](https://msdn.microsoft.com/library/windows/apps/windows.ui.core.coredispatcher.runasync.aspx) sicher, dass dieser Aufruf im UI-Thread ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="639e9-156">Again, use [**CoreDispatcher.RunAsync**](https://msdn.microsoft.com/library/windows/apps/windows.ui.core.coredispatcher.runasync.aspx) to make sure this call is executed on the UI thread.</span></span>
-   <span data-ttu-id="639e9-157">Legen Sie die **MediaCapture**-Membervariable auf NULL fest.</span><span class="sxs-lookup"><span data-stu-id="639e9-157">Set the **MediaCapture** member variable to null.</span></span>
-   <span data-ttu-id="639e9-158">Rufen Sie [**RequestRelease**](https://msdn.microsoft.com/library/windows/apps/Windows.System.Display.DisplayRequest.RequestRelease) auf, wenn der Bildschirm bei Inaktivität ausgeschaltet werden soll.</span><span class="sxs-lookup"><span data-stu-id="639e9-158">Call [**RequestRelease**](https://msdn.microsoft.com/library/windows/apps/Windows.System.Display.DisplayRequest.RequestRelease) to allow the screen to turn off when inactive.</span></span>

[!code-cs[CleanupCameraAsync](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetCleanupCameraAsync)]

<span data-ttu-id="639e9-159">Sie sollten den Vorschaudatenstrom durch Außerkraftsetzen der [**OnNavigatedFrom**](https://msdn.microsoft.com/library/windows/apps/br227507)-Methode beenden, wenn der Benutzer Ihre Seite verlässt.</span><span class="sxs-lookup"><span data-stu-id="639e9-159">You should shut down the preview stream when the user navigates away from your page by overriding the [**OnNavigatedFrom**](https://msdn.microsoft.com/library/windows/apps/br227507) method.</span></span>

[!code-cs[OnNavigatedFrom](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetOnNavigatedFrom)]

<span data-ttu-id="639e9-160">Sie sollten den Vorschaudatenstrom auch ordnungsgemäß beenden, wenn die App angehalten wird.</span><span class="sxs-lookup"><span data-stu-id="639e9-160">You should also shut down the preview stream properly when your app is suspending.</span></span> <span data-ttu-id="639e9-161">Registrieren Sie dazu im Konstruktor der Seite einen Handler für das [**Application.Suspending**](https://msdn.microsoft.com/library/windows/apps/br205860)-Ereignis.</span><span class="sxs-lookup"><span data-stu-id="639e9-161">To do this, register a handler for the [**Application.Suspending**](https://msdn.microsoft.com/library/windows/apps/br205860) event in your page's constructor.</span></span>

[!code-cs[RegisterSuspending](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetRegisterSuspending)]

<span data-ttu-id="639e9-162">Stellen Sie im **Suspending**-Ereignishandler zunächst sicher, dass die Seite im [**Frame**](https://msdn.microsoft.com/library/windows/apps/br242682) der Anwendung angezeigt wird, indem Sie den Seitentyp mit der [**CurrentSourcePageType**](https://msdn.microsoft.com/library/windows/apps/hh702390)-Eigenschaft vergleichen.</span><span class="sxs-lookup"><span data-stu-id="639e9-162">In the **Suspending** event handler, first check to make sure that the page is being displayed the application's [**Frame**](https://msdn.microsoft.com/library/windows/apps/br242682) by comparing the page type to the [**CurrentSourcePageType**](https://msdn.microsoft.com/library/windows/apps/hh702390) property.</span></span> <span data-ttu-id="639e9-163">Wird die Seite derzeit nicht angezeigt, sollten das **OnNavigatedFrom**-Ereignis bereits ausgelöst und der Vorschaudatenstrom geschlossen worden sein.</span><span class="sxs-lookup"><span data-stu-id="639e9-163">If the page is not currently being displayed, then the **OnNavigatedFrom** event should already have been raised and the preview stream shut down.</span></span> <span data-ttu-id="639e9-164">Wird die Seite angezeigt, rufen Sie ein [**SuspendingDeferral**](https://msdn.microsoft.com/library/windows/apps/br224684)-Objekt aus den an den Handler übergebenen Ereignisargumenten ab, um sicherzustellen, dass das System Ihre App nicht anhält, bis der Vorschaudatenstrom beendet wurde.</span><span class="sxs-lookup"><span data-stu-id="639e9-164">If the page is currently being displayed, get a [**SuspendingDeferral**](https://msdn.microsoft.com/library/windows/apps/br224684) object from the event args passed into the handler to make sure the system does not suspend your app until the preview stream has been shut down.</span></span> <span data-ttu-id="639e9-165">Rufen Sie nach dem Beenden des Datenstroms die [**Complete**](https://msdn.microsoft.com/library/windows/apps/br224685)-Methode der Verzögerung auf, damit das System die App weiterhin anhalten kann.</span><span class="sxs-lookup"><span data-stu-id="639e9-165">After shutting down the stream, call the deferral's [**Complete**](https://msdn.microsoft.com/library/windows/apps/br224685) method to let the system continue suspending your app.</span></span>

[!code-cs[SuspendingHandler](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetSuspendingHandler)]


## <a name="related-topics"></a><span data-ttu-id="639e9-166">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="639e9-166">Related topics</span></span>

* [<span data-ttu-id="639e9-167">Kamera</span><span class="sxs-lookup"><span data-stu-id="639e9-167">Camera</span></span>](camera.md)
* [<span data-ttu-id="639e9-168">Allgemeine Foto-, Video- und Audioaufnahme mit „MediaCapture“</span><span class="sxs-lookup"><span data-stu-id="639e9-168">Basic photo, video, and audio capture with MediaCapture</span></span>](basic-photo-video-and-audio-capture-with-MediaCapture.md)
* [<span data-ttu-id="639e9-169">Abrufen eines Vorschauframes</span><span class="sxs-lookup"><span data-stu-id="639e9-169">Get a preview frame</span></span>](get-a-preview-frame.md)
