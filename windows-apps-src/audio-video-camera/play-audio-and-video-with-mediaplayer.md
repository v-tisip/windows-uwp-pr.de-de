---
author: drewbatgit
ms.assetid: 58af5e9d-37a1-4f42-909c-db7cb02a0d12
description: In diesem Artikel erfahren Sie, wie Sie in Ihrer universellen Windows-App mithilfe von „MediaPlayer“ Medien wiedergeben.
title: Wiedergeben von Audio- und Videoinhalten mit „MediaPlayer“
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
keywords: Windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 6b83be1dee4e23fa6974e39fbfb0f9ce26529274
ms.sourcegitcommit: e38b334edb82bf2b1474ba686990f4299b8f59c7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/15/2018
ms.locfileid: "6841354"
---
# <a name="play-audio-and-video-with-mediaplayer"></a><span data-ttu-id="5de02-104">Wiedergeben von Audio- und Videoinhalten mit „MediaPlayer“</span><span class="sxs-lookup"><span data-stu-id="5de02-104">Play audio and video with MediaPlayer</span></span>

<span data-ttu-id="5de02-105">In diesem Artikel erfahren Sie, wie Sie in Ihrer universellen Windows-App mithilfe der [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer)-Klasse Medien wiedergeben.</span><span class="sxs-lookup"><span data-stu-id="5de02-105">This article shows you how to play media in your Universal Windows app using the  [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer) class.</span></span> <span data-ttu-id="5de02-106">In Windows10, Version1607, wurden wesentliche Verbesserungen an den APIs zur Medienwiedergabe vorgenommen, unter anderem ein vereinfachtes Einzelprozessdesign für die Audiowiedergabe im Hintergrund, automatische Integration in die Steuerelemente für den Systemmedientransport (System Media Transport Controls, SMTC), die Möglichkeit zum Synchronisieren mehrerer Media Player, die Option einer Windows.UI.Composition-Oberfläche und eine anwenderfreundliche Schnittstelle zum Erstellen und Planen von Medienunterbrechungen in Ihren Inhalten.</span><span class="sxs-lookup"><span data-stu-id="5de02-106">With Windows 10, version 1607, significant improvements were made to the media playback APIs, including a simplified single-process design for background audio, automatic integration with the System Media Transport Controls (SMTC), the ability to synchronize multiple media players, the ability to a Windows.UI.Composition surface, and an easy interface for creating and scheduling media breaks in your content.</span></span> <span data-ttu-id="5de02-107">Um diese Verbesserungen optimal zu nutzen, sollten Sie für die Medienwiedergabe anstelle von **MediaElement** die **MediaPlayer**-Klasse verwenden.</span><span class="sxs-lookup"><span data-stu-id="5de02-107">To take advantage of these improvements, the recommended best practice for playing media is to use the **MediaPlayer** class instead of **MediaElement** for media playback.</span></span> <span data-ttu-id="5de02-108">Das einfache XAML-Steuerelement [**MediaPlayerElement**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement) wurde eingeführt, damit Sie Medieninhalte auf einer XAML-Seite rendern können.</span><span class="sxs-lookup"><span data-stu-id="5de02-108">The lightweight XAML control, [**MediaPlayerElement**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement), has been introduced to allow you render media content in a XAML page.</span></span> <span data-ttu-id="5de02-109">Viele der von **MediaElement** bereitgestellten Wiedergabesteuerelemente und Status-APIs sind jetzt über das neue [**MediaPlaybackSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession)-Objekt verfügbar.</span><span class="sxs-lookup"><span data-stu-id="5de02-109">Many of the playback control and status APIs provided by **MediaElement** are now available through the new [**MediaPlaybackSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession) object.</span></span> <span data-ttu-id="5de02-110">**MediaElement** gewährleistet weiterhin die Abwärtskompatibilität. Dieser Klasse werden jedoch keine weiteren Features hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="5de02-110">**MediaElement** continues to function to support backwards compatibility, but no additional features will be added to this class.</span></span>

<span data-ttu-id="5de02-111">Dieser Artikel erläutert die Features von **MediaPlayer**, die von einer typischen App zur Medienwiedergabe verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="5de02-111">This article will walk you through the **MediaPlayer** features that a typical media playback app will use.</span></span> <span data-ttu-id="5de02-112">Beachten Sie, dass **MediaPlayer** die [**MediaSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaSource)-Klasse als Container für alle Medienelemente verwendet.</span><span class="sxs-lookup"><span data-stu-id="5de02-112">Note that **MediaPlayer** uses the [**MediaSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaSource) class as a container for all media items.</span></span> <span data-ttu-id="5de02-113">Diese Klasse ermöglicht Ihnen das Laden und Wiedergeben von Medien aus verschiedenen Quellen – z.B. aus lokalen Dateien, Speicherdatenströmen und Netzwerkquellen – über die gleiche Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="5de02-113">This class allows you to load and play media from many different sources, including local files, memory streams, and network sources, all using the same interface.</span></span> <span data-ttu-id="5de02-114">Verschiedene Klassen auf höherer Ebene arbeiten ebenfalls mit **MediaSource**, z.B. [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem) und [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList). Sie stellen erweiterte Features bereit wie Wiedergabelisten und die Möglichkeit, Medienquellen mit mehreren Audio-, Video- und Metadatentiteln zu verwalten,</span><span class="sxs-lookup"><span data-stu-id="5de02-114">There are also higher-level classes that work with **MediaSource**, such as [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem) and [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList), that provide more advanced features like playlists and the ability to manage media sources with multiple audio, video, and metadata tracks.</span></span> <span data-ttu-id="5de02-115">Weitere Informationen zu **MediaSource** und verwandten APIs finden Sie unter [Medienelemente, Wiedergabelisten und Titel](media-playback-with-mediasource.md).</span><span class="sxs-lookup"><span data-stu-id="5de02-115">For more information on **MediaSource** and related APIs, see [Media items, playlists, and tracks](media-playback-with-mediasource.md).</span></span>

> [!NOTE] 
> <span data-ttu-id="5de02-116">Windows10 N- und Windows10 KN-Editionen enthalten nicht die für die Verwendung von **MediaPlayer** für die Wiedergabe erforderlichen Medienfunktionen.</span><span class="sxs-lookup"><span data-stu-id="5de02-116">Windows 10 N and Windows 10 KN editions do not include the media features required to use **MediaPlayer** for playback.</span></span> <span data-ttu-id="5de02-117">Diese Features können manuell installiert werden.</span><span class="sxs-lookup"><span data-stu-id="5de02-117">These features can be installed manually.</span></span> <span data-ttu-id="5de02-118">Weitere Informationen finden Sie unter [Media Feature Pack für Windows10 N- und Windows10 KN-Editionen](https://support.microsoft.com/en-us/help/3010081/media-feature-pack-for-windows-10-n-and-windows-10-kn-editions).</span><span class="sxs-lookup"><span data-stu-id="5de02-118">For more information, see [Media feature pack for Windows 10 N and Windows 10 KN editions](https://support.microsoft.com/en-us/help/3010081/media-feature-pack-for-windows-10-n-and-windows-10-kn-editions).</span></span>

## <a name="play-a-media-file-with-mediaplayer"></a><span data-ttu-id="5de02-119">Wiedergeben einer Mediendatei mit MediaPlayer</span><span class="sxs-lookup"><span data-stu-id="5de02-119">Play a media file with MediaPlayer</span></span>  
<span data-ttu-id="5de02-120">Die grundlegende Medienwiedergabe mit **MediaPlayer** ist sehr einfach zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="5de02-120">Basic media playback with **MediaPlayer** is very simple to implement.</span></span> <span data-ttu-id="5de02-121">Erstellen Sie zunächst eine neue Instanz der **MediaPlayer**-Klasse.</span><span class="sxs-lookup"><span data-stu-id="5de02-121">First, create a new instance of the **MediaPlayer** class.</span></span> <span data-ttu-id="5de02-122">In Ihrer App können mehrere **MediaPlayer**-Instanzen gleichzeitig aktiv sein.</span><span class="sxs-lookup"><span data-stu-id="5de02-122">Your app can have multiple **MediaPlayer** instances active at once.</span></span> <span data-ttu-id="5de02-123">Legen Sie dann für die [**Source**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Source)-Eigenschaft des Players ein Objekt fest, welches die [**IMediaPlaybackSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.IMediaPlaybackSource) implementiert, z.B. eine [**MediaSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaSource), ein [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem) oder eine [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList).</span><span class="sxs-lookup"><span data-stu-id="5de02-123">Next, set the [**Source**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Source) property of the player to an object that implements the [**IMediaPlaybackSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.IMediaPlaybackSource), such as a [**MediaSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaSource), a [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem), or a [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList).</span></span> <span data-ttu-id="5de02-124">In diesem Beispiel wird ein **MediaSource**-Objekt aus einer Datei im lokalen Speicher der App erstellt. Anschließend wird aus der Quelle ein **MediaPlaybackItem**-Objekt erstellt und der **Source**-Eigenschaft des Players zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="5de02-124">In this example, a **MediaSource** is created from a file in the app's local storage, and then a **MediaPlaybackItem** is created from the source and then assigned to the player's **Source** property.</span></span>

<span data-ttu-id="5de02-125">Anders als **MediaElement** startet **MediaPlayer** nicht standardmäßig automatisch mit der Wiedergabe.</span><span class="sxs-lookup"><span data-stu-id="5de02-125">Unlike **MediaElement**, **MediaPlayer** does not automatically begin playback by default.</span></span> <span data-ttu-id="5de02-126">Sie können die Wiedergabe starten, indem Sie [**Play**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Play) aufrufen, für die [**AutoPlay**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.AutoPlay) -Eigenschaft „true“ festlegen oder warten, bis der Benutzer die Wiedergabe mit den integrierten Media-Steuerelementen startet.</span><span class="sxs-lookup"><span data-stu-id="5de02-126">You can start playback by calling [**Play**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Play), by setting the [**AutoPlay**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.AutoPlay) property to true, or waiting for the user to initiate playback with the built-in media controls.</span></span>

[!code-cs[SimpleFilePlayback](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSimpleFilePlayback)]

<span data-ttu-id="5de02-127">Wenn Ihre App die Verwendung eines **MediaPlayers** beendet hat, sollten Sie die Methode[**Close**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Close) aufrufen (**Dispose**-Methode in C#), um die vom Player verwendeten Ressourcen zu bereinigen.</span><span class="sxs-lookup"><span data-stu-id="5de02-127">When your app is done using a **MediaPlayer**, you should call the [**Close**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Close) method (projected to **Dispose** in C#) to clean up the resources used by the player.</span></span>

[!code-cs[CloseMediaPlayer](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetCloseMediaPlayer)]

## <a name="use-mediaplayerelement-to-render-video-in-xaml"></a><span data-ttu-id="5de02-128">Rendern von Videos in XAML mit MediaPlayerElement</span><span class="sxs-lookup"><span data-stu-id="5de02-128">Use MediaPlayerElement to render video in XAML</span></span>
<span data-ttu-id="5de02-129">Sie können Medien in einem **MediaPlayer** wiedergeben, ohne sie in XAML anzuzeigen. Viele Medienwiedergabe-Apps versuchen jedoch, die Medien auf einer XAML-Seite zu rendern.</span><span class="sxs-lookup"><span data-stu-id="5de02-129">You can play media in a **MediaPlayer** without displaying it in XAML, but many media playback apps will want to render the media in a XAML page.</span></span> <span data-ttu-id="5de02-130">Verwenden Sie hierfür das einfache [**MediaPlayerElement**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement)-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="5de02-130">To do this, use the lightweight [**MediaPlayerElement**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement) control.</span></span> <span data-ttu-id="5de02-131">Wie mit **MediaElement** können Sie mit **MediaPlayerElement** festlegen, ob die integrierten Transport-Steuerelemente angezeigt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="5de02-131">Like **MediaElement**, **MediaPlayerElement** allows you to specify whether the built-in transport controls should be shown.</span></span>

[!code-xml[MediaPlayerElementXAML](./code/MediaPlayer_RS1/cs/MainPage.xaml#SnippetMediaPlayerElementXAML)]

<span data-ttu-id="5de02-132">Sie können die **MediaPlayer** -Instanz festlegen, an die das Element gebunden ist, indem Sie [**SetMediaPlayer**](https://msdn.microsoft.com/library/windows/apps/mt708764) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="5de02-132">You can set the **MediaPlayer** instance that the element is bound to by calling [**SetMediaPlayer**](https://msdn.microsoft.com/library/windows/apps/mt708764).</span></span>

[!code-cs[SetMediaPlayer](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSetMediaPlayer)]

<span data-ttu-id="5de02-133">Sie können für das **MediaPlayerElement** auch die Wiedergabequelle festlegen. Das Element erstellt dann automatisch eine neue **MediaPlayer**-Instanz, auf die Sie mithilfe der [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement.MediaPlayer)-Eigenschaft zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="5de02-133">You can also set the playback source on the **MediaPlayerElement** and the element will automatically create a new **MediaPlayer** instance that you can access using the [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement.MediaPlayer) property.</span></span>

[!code-cs[GetPlayerFromElement](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetGetPlayerFromElement)]

> [!NOTE] 
> <span data-ttu-id="5de02-134">Wenn Sie [**MediaPlaybackCommandManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager) für [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer) deaktivieren, indem Sie [**IsEnabled**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager.IsEnabled) auf „false“ festlegen, wird die von **MediaPlayerElement** bereitgestellte Verknüpfung zwischen **MediaPlayer** und [**TransportControls**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement.TransportControls) getrennt, sodass die integrierten Transportsteuerelemente nicht mehr automatisch die Wiedergabe des Players steuern.</span><span class="sxs-lookup"><span data-stu-id="5de02-134">If you disable the [**MediaPlaybackCommandManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager) of the [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer) by setting [**IsEnabled**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager.IsEnabled) to false, it will break the link between the **MediaPlayer** the [**TransportControls**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement.TransportControls) provided by the **MediaPlayerElement**, so the built-in transport controls will no longer automatically control the playback of the player.</span></span> <span data-ttu-id="5de02-135">Stattdessen müssen Sie Ihre eigenen Steuerelemente zum Steuern des **MediaPlayers** implementieren.</span><span class="sxs-lookup"><span data-stu-id="5de02-135">Instead, you must implement your own controls to control the **MediaPlayer**.</span></span>

## <a name="common-mediaplayer-tasks"></a><span data-ttu-id="5de02-136">Allgemeine MediaPlayer-Aufgaben</span><span class="sxs-lookup"><span data-stu-id="5de02-136">Common MediaPlayer tasks</span></span>
<span data-ttu-id="5de02-137">In diesem Abschnitt erfahren Sie, wie Sie verschiedene Features des **MediaPlayers** verwenden.</span><span class="sxs-lookup"><span data-stu-id="5de02-137">This section shows you how to use some of the features of the **MediaPlayer**.</span></span>

### <a name="set-the-audio-category"></a><span data-ttu-id="5de02-138">Festlegen der AudioCategory-Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="5de02-138">Set the audio category</span></span>
<span data-ttu-id="5de02-139">Legen Sie für die [**Audiocategory** ](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.AudioCategory)-Eigenschaft eines **MediaPlayers** einen der Werte der [**MediaPlayerAudioCategory**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayerAudioCategory)-Enumeration fest, um dem System mitzuteilen, welche Art von Medien Sie wiedergeben.</span><span class="sxs-lookup"><span data-stu-id="5de02-139">Set the [**AudioCategory**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.AudioCategory) property of a **MediaPlayer** to one of the values of the [**MediaPlayerAudioCategory**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayerAudioCategory) enumeration to let the system know what kind of media you are playing.</span></span> <span data-ttu-id="5de02-140">Spiele sollten als Kategorie ihrer Musikdatenströme **GameMedia** angeben, sodass die Musik des Spiels automatisch auf stumm geschaltet wird, wenn eine andere Anwendung im Hintergrund Musik wiedergibt.</span><span class="sxs-lookup"><span data-stu-id="5de02-140">Games should categorize their music streams as **GameMedia** so that game music mutes automatically if another application plays music in the background.</span></span> <span data-ttu-id="5de02-141">Musik- oder Video-Apps sollten als Kategorien für ihre Datenströme **Media** oder **Movie** angeben, sodass ihnen gegenüber **GameMedia**-Datenströmen Priorität eingeräumt wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-141">Music or video applications should categorize their streams as **Media** or **Movie** so they will take priority over **GameMedia** streams.</span></span>

[!code-cs[SetAudioCategory](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSetAudioCategory)]

### <a name="output-to-a-specific-audio-endpoint"></a><span data-ttu-id="5de02-142">Ausgabe an einen bestimmten Audio-Endpunkt</span><span class="sxs-lookup"><span data-stu-id="5de02-142">Output to a specific audio endpoint</span></span>
<span data-ttu-id="5de02-143">Die Audioausgabe eines **MediaPlayers** wird standardmäßig zum Standard-Audio-Endpunkt des Systems geleitet. Sie können jedoch auch einen bestimmten Audio-Endpunkt als Ausgabe für den **MediaPlayer** festlegen.</span><span class="sxs-lookup"><span data-stu-id="5de02-143">By default, the audio output from a **MediaPlayer** is routed to the default audio endpoint for the system, but you can specify a specific audio endpoint that the **MediaPlayer** should use for output.</span></span> <span data-ttu-id="5de02-144">Im folgenden Beispiel gibt [**MediaDevice.GetAudioRenderSelector**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Devices.MediaDevice.GetAudioRenderSelector) eine Zeichenfolge zur eindeutigen Identifizierung der Audiorendering-Kategorie von Geräten zurück.</span><span class="sxs-lookup"><span data-stu-id="5de02-144">In the example below, [**MediaDevice.GetAudioRenderSelector**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Devices.MediaDevice.GetAudioRenderSelector) returns a string that uniquely idenfies the audio render category of devices.</span></span> <span data-ttu-id="5de02-145">Als Nächstes wird die [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/Windows.Devices.Enumeration.DeviceInformation)-Methode [**FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Devices.Enumeration.DeviceInformation.FindAllAsync) aufgerufen, um eine Liste aller verfügbaren Geräte des ausgewählten Typs zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="5de02-145">Next, the [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/Windows.Devices.Enumeration.DeviceInformation) method [**FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Devices.Enumeration.DeviceInformation.FindAllAsync) is called to get a list of all available devices of the selected type.</span></span> <span data-ttu-id="5de02-146">Sie können programmgesteuert festlegen, welches Gerät Sie verwenden möchten, oder die zurückgegebenen Geräte zu einer [**ComboBox**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.ComboBox) hinzufügen, damit der Benutzer ein Gerät auswählen kann.</span><span class="sxs-lookup"><span data-stu-id="5de02-146">You may programmatically determine which device you want to use or add the returned devices to a [**ComboBox**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.ComboBox) to allow the user to select a device.</span></span>

[!code-cs[SetAudioEndpointEnumerate](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSetAudioEndpointEnumerate)]

<span data-ttu-id="5de02-147">Im [**SelectionChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.Primitives.Selector.SelectionChanged)-Ereignis für das Geräte-Kombinationsfeld wird die [**AudioDevice**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.AudioDevice)-Eigenschaft des **MediaPlayers** auf das ausgewählte Gerät festgelegt, die in der [**Tag**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.FrameworkElement.Tag)-Eigenschaft des **ComboBoxItem** gespeichert wurde.</span><span class="sxs-lookup"><span data-stu-id="5de02-147">In the [**SelectionChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.Primitives.Selector.SelectionChanged) event for the devices combo box, the [**AudioDevice**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.AudioDevice) property of the **MediaPlayer** is set to the selected device, which was stored in the [**Tag**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.FrameworkElement.Tag) property of the **ComboBoxItem**.</span></span>

[!code-cs[SetAudioEndpontSelectionChanged](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSetAudioEndpontSelectionChanged)]

### <a name="playback-session"></a><span data-ttu-id="5de02-148">Wiedergabesitzung</span><span class="sxs-lookup"><span data-stu-id="5de02-148">Playback session</span></span>
<span data-ttu-id="5de02-149">Wie zuvor in diesem Artikel beschrieben, wurden viele der von der **MediaElement**-Klasse verfügbar gemachten Funktionen in die [**MediaPlaybackSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession)-Klasse verschoben.</span><span class="sxs-lookup"><span data-stu-id="5de02-149">As described previously in this article, many of the functions that are exposed by the **MediaElement** class have been moved to the [**MediaPlaybackSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession) class.</span></span> <span data-ttu-id="5de02-150">Dazu gehören Informationen über den Wiedergabestatus des Players, z.B. die aktuelle Wiedergabeposition, ob der Player Medien wiedergibt bzw. angehalten wurde sowie die aktuelle Wiedergabegeschwindigkeit.</span><span class="sxs-lookup"><span data-stu-id="5de02-150">This includes information about the playback state of the player, such as the current playback position, whether the player is paused or playing, and the current playback speed.</span></span> <span data-ttu-id="5de02-151">**MediaPlaybackSession** stellt außerdem einige Ereignisse bereit, um Sie bei Statusänderungen zu benachrichtigen. Dazu gehören der aktuelle Puffer- und Download-Status der wiedergegebenen Inhalte sowie die natürliche Größe und das Seitenverhältnis des aktuell wiedergegebenen Videoinhalts.</span><span class="sxs-lookup"><span data-stu-id="5de02-151">**MediaPlaybackSession** also provides several events to notify you when the state changes, including the current buffering and download status of content being played and the natural size and aspect ratio of the currently playing video content.</span></span>

<span data-ttu-id="5de02-152">Das folgende Beispiel zeigt, wie Sie einen Klickhandler für Schaltflächen implementieren können, der bei der Medienwiedergabe 10 Sekunden überspringt.</span><span class="sxs-lookup"><span data-stu-id="5de02-152">The following example shows you how to implement a button click handler that skips 10 seconds forward in the content.</span></span> <span data-ttu-id="5de02-153">Zuerst wird das **MediaPlaybackSession**-Objekt für den Player mit der [**PlaybackSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.PlaybackSession)-Eigenschaft abgerufen.</span><span class="sxs-lookup"><span data-stu-id="5de02-153">First, the **MediaPlaybackSession** object for the player is retrieved with the [**PlaybackSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.PlaybackSession) property.</span></span> <span data-ttu-id="5de02-154">Als Nächstes wird die [**Position**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.Position)-Eigenschaft auf die aktuelle Wiedergabeposition plus 10 Sekunden festgelegt.</span><span class="sxs-lookup"><span data-stu-id="5de02-154">Next the [**Position**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.Position) property is set to the current playback position plus 10 seconds.</span></span>

[!code-cs[SkipForwardClick](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSkipForwardClick)]

<span data-ttu-id="5de02-155">Das nächste Beispiel zeigt, wie durch Einstellen der [**PlaybackRate**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.PlaybackRate)-Eigenschaft der Sitzung mithilfe einer Schaltfläche zwischen der normalen Wiedergabegeschwindigkeit und zweifacher Geschwindigkeit gewechselt werden kann.</span><span class="sxs-lookup"><span data-stu-id="5de02-155">The next example illustrates using a toggle button to toggle between normal playback speed and 2X speed by setting the [**PlaybackRate**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.PlaybackRate) property of the session.</span></span>

[!code-cs[SpeedChecked](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSpeedChecked)]

<span data-ttu-id="5de02-156">Ab Windows10, Version 1803, können Sie die Drehung, mit der ein Video in **MediaPlayer** angezeigt wird, in 90-Grad-Schritten festlegen.</span><span class="sxs-lookup"><span data-stu-id="5de02-156">Starting with Windows 10, version 1803, you can set the rotation with which video is presented in the **MediaPlayer** in increments of 90 degrees.</span></span>

[!code-cs[SetRotation](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSetRotation)]

### <a name="detect-expected-and-unexpected-buffering"></a><span data-ttu-id="5de02-157">Erkennen der erwarteten und unerwarteten Pufferung</span><span class="sxs-lookup"><span data-stu-id="5de02-157">Detect expected and unexpected buffering</span></span>
<span data-ttu-id="5de02-158">Das im vorherigen Abschnitt beschriebene **MediaPlaybackSession**-Objekt verfügt über zwei Ereignisse, um zu erkennen, wann die aktuell wiedergegebene Mediendatei das Puffern beginnt und endet, **[BufferingStarted](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksession.BufferingStarted)** und **[BufferingEnded](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksession.BufferingEnded)**.</span><span class="sxs-lookup"><span data-stu-id="5de02-158">The **MediaPlaybackSession** object described in the previous section provides two events for detecting when the currently playing media file begins and ends buffering, **[BufferingStarted](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksession.BufferingStarted)** and **[BufferingEnded](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksession.BufferingEnded)**.</span></span> <span data-ttu-id="5de02-159">Dadurch können Sie die Benutzeroberfläche aktualisieren, um dem Benutzer anzuzeigen, das eine Pufferung durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-159">This allows you to update your UI to show the user that buffering is occurring.</span></span> <span data-ttu-id="5de02-160">Die anfängliche Pufferung wird erwartet, wenn eine Mediendatei zuerst geöffnet wird oder wenn der Benutzer auf ein neues Element in einer Wiedergabeliste wechselt.</span><span class="sxs-lookup"><span data-stu-id="5de02-160">Initial buffering is expected when a media file is first opened or when the user switches to a new item in a playlist.</span></span> <span data-ttu-id="5de02-161">Eine unerwartete Pufferung kann auftreten, wenn die Geschwindigkeit im Netzwerk beeinträchtigt wird oder wenn beim System für die Inhalte technische Probleme auftreten.</span><span class="sxs-lookup"><span data-stu-id="5de02-161">Unexpected buffering can occur when the network speed degrades or if the content management system providing the content experiences technical issues.</span></span> <span data-ttu-id="5de02-162">Ab RS3 können Sie das **BufferingStarted**-Ereignis verwenden, um zu bestimmen, ob das Puffer-Ereignis erwartet oder nicht erwartet wird und die Wiedergabe unterbrochen wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-162">Starting with RS3, you can use the **BufferingStarted** event to determine if the buffering event is expected or if it is unexpected and interrupting playback.</span></span> <span data-ttu-id="5de02-163">Sie können diese Informationen als Telemetriedaten für Ihrem Dienstanbieter-App oder ein Medium verwenden.</span><span class="sxs-lookup"><span data-stu-id="5de02-163">You can use this information as telemetry data for your app or media delivery service.</span></span> 

<span data-ttu-id="5de02-164">Registrieren Sie Handler für die **BufferingStarted** und **BufferingEnded**-Ereignisse, um Pufferungszustandsbenachrichtigungen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="5de02-164">Register handlers for the **BufferingStarted** and **BufferingEnded** events to receive buffering state notifications.</span></span>

[!code-cs[RegisterBufferingHandlers](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetRegisterBufferingHandlers)]

<span data-ttu-id="5de02-165">Im **BufferingStarted**-Ereignishandler, übergebenen Sie die Ereignisargumente an das **[MediaPlaybackSessionBufferingStartedEventArgs](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksessionbufferingstartedeventargs)**-Objekt, und überprüfen Sie die **[IsPlaybackInterruption](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksessionbufferingstartedeventargs.IsPlaybackInterruption)**-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="5de02-165">In the **BufferingStarted** event handler, cast the event args passed into the event to a **[MediaPlaybackSessionBufferingStartedEventArgs](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksessionbufferingstartedeventargs)** object and check the **[IsPlaybackInterruption](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksessionbufferingstartedeventargs.IsPlaybackInterruption)** property.</span></span> <span data-ttu-id="5de02-166">Wenn dieser Wert WAHR ist, ist die Pufferung, die das Ereignis ausgelöst hat, unerwartet und unterbricht die Wiedergabe.</span><span class="sxs-lookup"><span data-stu-id="5de02-166">If this value is true, the buffering that triggered the event is unexpected and interrupting playback.</span></span> <span data-ttu-id="5de02-167">Andernfalls ist es das erwartete erste Puffern.</span><span class="sxs-lookup"><span data-stu-id="5de02-167">Otherwise, it is expected initial buffering.</span></span> 

[!code-cs[BufferingHandlers](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetBufferingHandlers)]


### <a name="pinch-and-zoom-video"></a><span data-ttu-id="5de02-168">Zwei-Finger-Zoomen von Video</span><span class="sxs-lookup"><span data-stu-id="5de02-168">Pinch and zoom video</span></span>
<span data-ttu-id="5de02-169">**MediaPlayer** ermöglicht Ihnen, im Videoinhalt das zu rendernde Quellrechteck festzulegen und so in das Video hineinzuzoomen.</span><span class="sxs-lookup"><span data-stu-id="5de02-169">**MediaPlayer** allows you to specify the source rectangle within video content that should be rendered, effectively allowing you to zoom into video.</span></span> <span data-ttu-id="5de02-170">Das angegebene Rechteck bezieht sich auf ein normalisiertes Rechteck (0,0,1,1) wobei 0,0 der oberen linken Ecke des Frames entspricht und 1,1 die volle Breite und Höhe des Frames angibt.</span><span class="sxs-lookup"><span data-stu-id="5de02-170">The rectangle you specify is relative to a normalized rectangle (0,0,1,1) where 0,0 is the upper left hand of the frame and 1,1 specifies the full width and height of the frame.</span></span> <span data-ttu-id="5de02-171">Um beispielsweise das Zoomrechteck so festzulegen, dass der obere rechte Quadrant des Videos gerendert wird, müssten Sie das Rechteck wie folgt angeben: (.5,0,.5,.5).</span><span class="sxs-lookup"><span data-stu-id="5de02-171">So, for example, to set the zoom rectangle so that the top-right quadrant of the video is rendered, you would specify the rectangle (.5,0,.5,.5).</span></span>  <span data-ttu-id="5de02-172">Es ist wichtig, die Werte zu überprüfen, um sicherzustellen, dass Ihr Quellrechteck sich innerhalb des normalisierten Rechtecks (0,0,1,1) befindet.</span><span class="sxs-lookup"><span data-stu-id="5de02-172">It is important that you check your values to make sure that your source rectangle is within the (0,0,1,1) normalized rectangle.</span></span> <span data-ttu-id="5de02-173">Durch den Versuch, einen Wert außerhalb dieses Bereichs festzulegen, wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="5de02-173">Attempting to set a value outside of this range will cause an exception to be thrown.</span></span>

<span data-ttu-id="5de02-174">Um den Zwei-Finger-Zoom mithilfe von Multitouchbewegungen zu implementieren, müssen Sie zunächst angeben, welche Gesten unterstützt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="5de02-174">To implement pinch and zoom using multi-touch gestures, you must first specify which gestures you want to support.</span></span> <span data-ttu-id="5de02-175">In diesem Beispiel wurden Gesten zum Skalieren und Übersetzen angefordert.</span><span class="sxs-lookup"><span data-stu-id="5de02-175">In this example, scale and translate gestures are requested.</span></span> <span data-ttu-id="5de02-176">Das [**ManipulationDelta**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.ManipulationDelta)-Ereignis wird ausgelöst, wenn eine der abonnierten Gesten auftritt.</span><span class="sxs-lookup"><span data-stu-id="5de02-176">The [**ManipulationDelta**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.ManipulationDelta) event is raised when one of the subscribed gestures occurs.</span></span> <span data-ttu-id="5de02-177">Das [**DoubleTapped**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.DoubleTapped)-Ereignis wird verwendet, um den Zoom auf den vollständigen Frame zurückzusetzen.</span><span class="sxs-lookup"><span data-stu-id="5de02-177">The [**DoubleTapped**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.DoubleTapped) event will be used to reset the zoom to the full frame.</span></span> 

[!code-cs[RegisterPinchZoomEvents](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetRegisterPinchZoomEvents)]

<span data-ttu-id="5de02-178">Deklarieren Sie als Nächstes ein **Rect**-Objekt, welches das aktuelle Zoom-Quellrechteck speichert.</span><span class="sxs-lookup"><span data-stu-id="5de02-178">Next, declare a **Rect** object that will store the current zoom source rectangle.</span></span>

[!code-cs[DeclareSourceRect](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetDeclareSourceRect)]

<span data-ttu-id="5de02-179">Der **ManipulationDelta**-Handler passt die Skalierung oder die Übersetzung des Zoom-Rechtecks an.</span><span class="sxs-lookup"><span data-stu-id="5de02-179">The **ManipulationDelta** handler adjusts either the scale or the translation of the zoom rectangle.</span></span> <span data-ttu-id="5de02-180">Ist der Deltawert für die Skalierung nicht 1, bedeutet dies, dass der Benutzer eine Zwei-Finger-Zoom-Geste ausgeführt hat.</span><span class="sxs-lookup"><span data-stu-id="5de02-180">If the delta scale value is not 1, it means that the user performed a pinch gesture.</span></span> <span data-ttu-id="5de02-181">Wenn der Wert größer als 1 ist, muss das Quellrechteck verkleinert werden, um den Inhalt zu vergrößern.</span><span class="sxs-lookup"><span data-stu-id="5de02-181">If the value is greater than 1, the source rectangle should be made smaller to zoom into the content.</span></span> <span data-ttu-id="5de02-182">Wenn der Wert kleiner als 1 ist, sollte das Quellrechteck zum Verkleinern größer gemacht werden. Vor dem Festlegen der neuen Skalierungswerte, wird das resultierende Rechteck überprüft, um sicherzustellen, dass es vollständig innerhalb der Grenzen der (0,0,1,1) liegt.</span><span class="sxs-lookup"><span data-stu-id="5de02-182">If the value is less than 1, then the source rectangle should be made bigger to zoom out. Before setting the new scale values, the resulting rectangle is checked to make sure it lies entirely within the (0,0,1,1) limits.</span></span>

<span data-ttu-id="5de02-183">Wenn der Skalierungswert 1 ist, wird die Übersetzungsgeste behandelt.</span><span class="sxs-lookup"><span data-stu-id="5de02-183">If the scale value is 1, then the translation gesture is handled.</span></span> <span data-ttu-id="5de02-184">Das Rechteck wird wie folgt übersetzt: Anzahl der Pixel in der Geste geteilt durch die Breite und Höhe des Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="5de02-184">The rectangle is simply translated by the number of pixels in gesture divided by the width and height of the control.</span></span> <span data-ttu-id="5de02-185">Wieder wird das resultierende Rechteck überprüft, um sicherzustellen, dass es innerhalb der Grenzen von (0,0,1,1) liegt.</span><span class="sxs-lookup"><span data-stu-id="5de02-185">Again, the resulting rectangle is checked to make sure it lies within the (0,0,1,1) bounds.</span></span>

<span data-ttu-id="5de02-186">Schließlich wird die [**NormalizedSourceRect**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.NormalizedSourceRect)-Eigenschaft der **MediaPlaybackSession** auf das neu angepasste Rechteck festgelegt. Dabei wird der Bereich innerhalb des Video-Frames angegeben, der gerendert werden soll.</span><span class="sxs-lookup"><span data-stu-id="5de02-186">Finally, the [**NormalizedSourceRect**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.NormalizedSourceRect) of the **MediaPlaybackSession** is set to the newly adjusted rectangle, specifying the area within the video frame that should be rendered.</span></span>

[!code-cs[ManipulationDelta](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetManipulationDelta)]

<span data-ttu-id="5de02-187">Im [**DoubleTapped**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.DoubleTapped)-Ereignishandler wird das Quellrechteck wieder auf (0,0,1,1) festgelegt, damit der gesamte Videoframe gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-187">In the [**DoubleTapped**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.DoubleTapped) event handler, the source rectangle is set back to (0,0,1,1) to cause the entire video frame to be rendered.</span></span>

[!code-cs[DoubleTapped](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetDoubleTapped)]

### <a name="handling-policy-based-playback-degradation"></a><span data-ttu-id="5de02-188">Behandeln von richtlinienbasierten Wiedergabe-Beeinträchtigungen</span><span class="sxs-lookup"><span data-stu-id="5de02-188">Handling policy-based playback degradation</span></span>

<span data-ttu-id="5de02-189">In einigen Fällen kann das System die Wiedergabe von einem Medienelement beeinträchtigen, wie die Reduzierung der Auflösung (Einschränkung), basierend auf einer Richtlinie statt einem Leistungsproblem.</span><span class="sxs-lookup"><span data-stu-id="5de02-189">In some circumstances the system may degrade the playback of a media item, such as reducing the resolution (constriction), based on a policy rather than a performance issue.</span></span> <span data-ttu-id="5de02-190">Ein Video kann z.B. durch das System beeinträchtigt werden, wenn das Video einen nicht signierten Treiber verwendet.</span><span class="sxs-lookup"><span data-stu-id="5de02-190">For example, video may be degraded by the system if it is being played using an unsigned video driver.</span></span> <span data-ttu-id="5de02-191">Rufen Sie [**MediaPlaybackSession.GetOutputDegradationPolicyState**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksession.getoutputdegradationpolicystate#Windows_Media_Playback_MediaPlaybackSession_GetOutputDegradationPolicyState) auf, um zu bestimmen, ob und warum diese richtlinienbasierte Beeinschränkung erfolgt und warnen Sie den Benutzer oder notieren Sie den Grund für Telemetriezwecke.</span><span class="sxs-lookup"><span data-stu-id="5de02-191">You can call [**MediaPlaybackSession.GetOutputDegradationPolicyState**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksession.getoutputdegradationpolicystate#Windows_Media_Playback_MediaPlaybackSession_GetOutputDegradationPolicyState) to determine if and why this policy-based degredation is occurring and alert the user or record the reason for telemetry purposes.</span></span>

<span data-ttu-id="5de02-192">Das folgende Beispiel zeigt eine Implementierung eines Handlers für das **MediaPlayer.MediaOpened**-Ereignis, das ausgelöst wird, wenn der Spieler ein neues Medienobjekt öffnet.</span><span class="sxs-lookup"><span data-stu-id="5de02-192">The following example shows an implementation of a handler for the **MediaPlayer.MediaOpened** event that is raised when the player opens a new media item.</span></span> <span data-ttu-id="5de02-193">**GetOutputDegradationPolicyState** wird aufgerufen, wenn **MediaPlayer** an den Handler übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-193">**GetOutputDegradationPolicyState** is called on the **MediaPlayer** passed into the handler.</span></span> <span data-ttu-id="5de02-194">Der Wert von [**VideoConstrictionReason**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksessionoutputdegradationpolicystate.videoconstrictionreason#Windows_Media_Playback_MediaPlaybackSessionOutputDegradationPolicyState_VideoConstrictionReason) gibt die Ursache der Richtlinie an, warum das Video eingeschränkt ist.</span><span class="sxs-lookup"><span data-stu-id="5de02-194">The value of [**VideoConstrictionReason**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksessionoutputdegradationpolicystate.videoconstrictionreason#Windows_Media_Playback_MediaPlaybackSessionOutputDegradationPolicyState_VideoConstrictionReason) indicates the policy reason that the video is constricted.</span></span> <span data-ttu-id="5de02-195">Wenn der Wert nicht **Keine** ist, protokolliert dieses Beispiel den Grund der Beeinträchtigung zu Telemetriezwecken.</span><span class="sxs-lookup"><span data-stu-id="5de02-195">If the value isn't **None**, this example logs the degradation reason for telemetry purposes.</span></span> <span data-ttu-id="5de02-196">Dieses Beispiel zeigt, wie die Bitrate der **AdaptiveMediaSource**, die gerade wiedergegeben wird, auf die niedrigste Bandbreite zum Speichern der Datennutzung festgelegt wird, da das Video eingeschränkt ist und nicht mit hoher Auflösung angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-196">This example also shows setting the bitrate of the **AdaptiveMediaSource** currently being played to the lowest bandwidth to save data usage, since the video is constricted and won't be displayed at high resolution anyway.</span></span> <span data-ttu-id="5de02-197">Weitere Informationen über **AdaptiveMediaSource**, finden Sie unter [Adaptives Streaming](adaptive-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="5de02-197">For more information on using **AdaptiveMediaSource**, see [Adaptive streaming](adaptive-streaming.md).</span></span>

[!code-cs[PolicyDegradation](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetPolicyDegradation)]
        
## <a name="use-mediaplayersurface-to-render-video-to-a-windowsuicomposition-surface"></a><span data-ttu-id="5de02-198">Rendern von Videos auf einer Windows.UI.Composition-Oberfläche mit MediaPlayerSurface</span><span class="sxs-lookup"><span data-stu-id="5de02-198">Use MediaPlayerSurface to render video to a Windows.UI.Composition surface</span></span>
<span data-ttu-id="5de02-199">Ab Windows10, Version1607, können Sie mit **MediaPlayer** Videos auf einer [**ICompositionSurface**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition.ICompositionSurface) rendern. Dadurch kann der Player mit den APIs im [**Windows.UI.Composition**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition)-Namespace verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="5de02-199">Starting with Windows 10, version 1607, you can use **MediaPlayer** to render video to an to render video to an [**ICompositionSurface**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition.ICompositionSurface), which allows the player to interoperate with the APIs in the [**Windows.UI.Composition**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition) namespace.</span></span> <span data-ttu-id="5de02-200">Das Kompositions-Framework ermöglicht Ihnen, auf der visuellen Ebene zwischen XAML und den DirectX-Grafik-APIs auf niedriger Ebene Grafiken zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="5de02-200">The composition framework allows you to work with graphics in the visual layer between XAML and the low-level DirectX graphics APIs.</span></span> <span data-ttu-id="5de02-201">Dies ermöglicht Szenarien wie das Rendering von Videos in alle XAML-Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="5de02-201">This enables scenarios like rendering video into any XAML control.</span></span> <span data-ttu-id="5de02-202">Weitere Informationen zur Verwendung der Composition-APIs finden Sie unter [visuelle Ebene](https://msdn.microsoft.com/windows/uwp/composition/visual-layer).</span><span class="sxs-lookup"><span data-stu-id="5de02-202">For more information on using the composition APIs, see [Visual Layer](https://msdn.microsoft.com/windows/uwp/composition/visual-layer).</span></span>

<span data-ttu-id="5de02-203">Das folgende Beispiel veranschaulicht das Rendern von Inhalten des Videoplayers auf ein [**Canvas**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.Canvas)-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="5de02-203">The following example illustrates how to render video player content onto a [**Canvas**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.Canvas) control.</span></span> <span data-ttu-id="5de02-204">Die mediaplayerspezifischen Aufrufe in diesem Beispiel sind [**SetSurfaceSize**](https://msdn.microsoft.com/library/windows/apps/mt489968) und [**GetSurface**](https://msdn.microsoft.com/library/windows/apps/mt489963).</span><span class="sxs-lookup"><span data-stu-id="5de02-204">The media player-specific calls in this example are [**SetSurfaceSize**](https://msdn.microsoft.com/library/windows/apps/mt489968) and [**GetSurface**](https://msdn.microsoft.com/library/windows/apps/mt489963).</span></span> <span data-ttu-id="5de02-205">**SetSurfaceSize** teilt dem System die Größe des Puffers mit, der für das Rendern von Inhalten zugeordnet werden muss.</span><span class="sxs-lookup"><span data-stu-id="5de02-205">**SetSurfaceSize** tells the system the size of the buffer that should be allocated for rendering content.</span></span> <span data-ttu-id="5de02-206">**GetSurface** verwendet einen [**Compositor**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition.Compositor) als Argument und ruft eine Instanz der [**MediaPlayerSurface**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayerSurface)-Klasse ab.</span><span class="sxs-lookup"><span data-stu-id="5de02-206">**GetSurface** takes a [**Compositor**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition.Compositor) as an arguemnt and retreives an instance of the [**MediaPlayerSurface**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayerSurface) class.</span></span> <span data-ttu-id="5de02-207">Diese Klasse ermöglicht den Zugriff auf den **MediaPlayer** und den **Compositor**, mit denen die Oberfläche erstellt wird. Die Klasse macht außerdem die Oberfläche selbst über die [**CompositionSurface**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayerSurface.CompositionSurface)-Eigenschaft verfügbar.</span><span class="sxs-lookup"><span data-stu-id="5de02-207">This class provides access to the **MediaPlayer** and **Compositor** used to create the surface and exposes the surface itself through the [**CompositionSurface**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayerSurface.CompositionSurface) property.</span></span>

<span data-ttu-id="5de02-208">Der restliche Code in diesem Beispiel erstellt ein [**SpriteVisual**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition.SpriteVisual)-Element, in den das Video gerendert wird, und legt als Größe die Größe des Canvas-Elements fest, das das Visual anzeigt.</span><span class="sxs-lookup"><span data-stu-id="5de02-208">The rest of the code in this example creates a [**SpriteVisual**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition.SpriteVisual) to which the video is rendered and sets the size to the size of the canvas element that will display the visual.</span></span> <span data-ttu-id="5de02-209">Als Nächstes wird ein [**CompositionBrush**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition.CompositionBrush) aus der [**MediaPlayerSurface**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayerSurface) erstellt und der [**Brush**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition.SpriteVisual.Brush)-Eigenschaft des Visuals zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="5de02-209">Next a [**CompositionBrush**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition.CompositionBrush) is created from the [**MediaPlayerSurface**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayerSurface) and assigned to the [**Brush**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition.SpriteVisual.Brush) property of the visual.</span></span> <span data-ttu-id="5de02-210">Dann wird ein [**ContainerVisual**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition.ContainerVisual) erstellt, und das **SpriteVisual** wird auf der oberen Ebene der visuellen Struktur eingefügt.</span><span class="sxs-lookup"><span data-stu-id="5de02-210">Next a [**ContainerVisual**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Composition.ContainerVisual) is created and the **SpriteVisual** is inserted at the top of its visual tree.</span></span> <span data-ttu-id="5de02-211">Schließlich wird [**SetElementChildVisual**](https://msdn.microsoft.com/library/windows/apps/mt608981) aufgerufen, um das Container-Visual dem **Canvas** zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="5de02-211">Finally, [**SetElementChildVisual**](https://msdn.microsoft.com/library/windows/apps/mt608981) is called to assign the container visual to the **Canvas**.</span></span>

[!code-cs[Compositor](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetCompositor)]
        
## <a name="use-mediatimelinecontroller-to-synchronize-content-across-multiple-players"></a><span data-ttu-id="5de02-212">Synchronisieren von Inhalten zwischen mehreren Playern mit MediaTimelineController</span><span class="sxs-lookup"><span data-stu-id="5de02-212">Use MediaTimelineController to synchronize content across multiple players.</span></span>
<span data-ttu-id="5de02-213">Wie in diesem Artikel bereits erläutert, können in Ihrer App mehrere **MediaPlayer**-Objekte gleichzeitig aktiv sein.</span><span class="sxs-lookup"><span data-stu-id="5de02-213">As discussed previously in this article, your app can have several **MediaPlayer** objects active at a time.</span></span> <span data-ttu-id="5de02-214">Standardmäßig funktioniert jeder von Ihnen erstellte **MediaPlayer** unabhängig.</span><span class="sxs-lookup"><span data-stu-id="5de02-214">By default, each **MediaPlayer** you create operates independently.</span></span> <span data-ttu-id="5de02-215">In einigen Szenarien, z.B. beim Synchronisieren einer Kommentarspur mit einem Video, müssen möglicherweise der Status des Players, die Wiedergabeposition und die Wiedergabegeschwindigkeit von mehreren Playern synchronisiert werden.</span><span class="sxs-lookup"><span data-stu-id="5de02-215">For some scenarios, such as synchronizing a commentary track to a video, you may want to synchronize the player state, playback position, and playback speed of multiple players.</span></span> <span data-ttu-id="5de02-216">Ab Windows10, Version1607, können Sie dieses Verhalten mithilfe der [**MediaTimelineController**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaTimelineController)-Klasse implementieren.</span><span class="sxs-lookup"><span data-stu-id="5de02-216">Starting with Windows 10, version 1607, you can implement this behavior by using the [**MediaTimelineController**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaTimelineController) class.</span></span>

### <a name="implement-playback-controls"></a><span data-ttu-id="5de02-217">Implementieren der Wiedergabe-Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="5de02-217">Implement playback controls</span></span>
<span data-ttu-id="5de02-218">Das folgende Beispiel zeigt, wie Sie mit einem **MediaTimelineController** zwei Instanzen des **MediaPlayers** steuern können.</span><span class="sxs-lookup"><span data-stu-id="5de02-218">The following example shows how to use a **MediaTimelineController** to control two instances of **MediaPlayer**.</span></span> <span data-ttu-id="5de02-219">Zuerst werden alle Instanzen des **MediaPlayers** instanziiert und eine Mediendatei als **Source** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="5de02-219">First, each instance of the **MediaPlayer** is instantiated and the **Source** is set to a media file.</span></span> <span data-ttu-id="5de02-220">Als Nächstes wird eine neue **MediaTimelineController**-Klasse erstellt.</span><span class="sxs-lookup"><span data-stu-id="5de02-220">Next, a new **MediaTimelineController** is created.</span></span> <span data-ttu-id="5de02-221">Bei jedem **MediaPlayer** wird der mit den einzelnen Playern verknüpfte [**MediaPlaybackCommandManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager) deaktiviert, indem die [**IsEnabled**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager.IsEnabled)-Eigenschaft auf „false“ festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-221">For each **MediaPlayer**, the [**MediaPlaybackCommandManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager) associated with each player is disabled by setting the [**IsEnabled**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager.IsEnabled) property to false.</span></span> <span data-ttu-id="5de02-222">Anschließend wird die [**TimelineController**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.TimelineController)-Eigenschaft auf den Zeitachsencontroller festgelegt.</span><span class="sxs-lookup"><span data-stu-id="5de02-222">And then the [**TimelineController**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.TimelineController) property is set to the timeline controller object.</span></span>

[!code-cs[DeclareMediaTimelineController](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetDeclareMediaTimelineController)]

[!code-cs[SetTimelineController](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSetTimelineController)]

<span data-ttu-id="5de02-223">**Achtung** Die [**MediaPlaybackCommandManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager)-Klasse stellt eine automatische Integration zwischen **MediaPlayer** und den Steuerelementen für den Systemmedientransport (System Media Transport Controls, SMTC) bereit. Diese automatische Integration kann jedoch nicht für Media Player verwendet werden, die über eine **MediaTimelineController**-Klasse gesteuert werden.</span><span class="sxs-lookup"><span data-stu-id="5de02-223">**Caution** The [**MediaPlaybackCommandManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager) provides automatic integration between **MediaPlayer** and the System Media Transport Controls (SMTC), but this automatic integration can't be used with media players that are controlled with a **MediaTimelineController**.</span></span> <span data-ttu-id="5de02-224">Daher müssen Sie vor dem Festlegen des Zeitachsencontrollers des Players den Befehlsmanager des Media Players deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="5de02-224">Therefore you must disable the command manager for the media player before setting the player's timeline controller.</span></span> <span data-ttu-id="5de02-225">Andernfalls wird eine Ausnahme mit der Benachrichtigung ausgelöst, dass das Anfügen des Medienzeitachsencontrollers im aktuellen Objektzustand blockiert wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-225">Failure to do so will result in an exception being thrown with the following message: "Attaching Media Timeline Controller is blocked because of the current state of the object."</span></span> <span data-ttu-id="5de02-226">Weitere Informationen zur Integration des Media Players in die SMTC finden Sie unter [Integration in die Steuerelemente für den Systemmedientransport](integrate-with-systemmediatransportcontrols.md).</span><span class="sxs-lookup"><span data-stu-id="5de02-226">For more information on media player integration with the SMTC, see [Integrate with the System Media Transport Controls](integrate-with-systemmediatransportcontrols.md).</span></span> <span data-ttu-id="5de02-227">Auch wenn Sie eine **MediaTimelineController**-Klasse verwenden, können Sie die SMTC weiterhin manuell steuern.</span><span class="sxs-lookup"><span data-stu-id="5de02-227">If you are using a **MediaTimelineController** you can still control the SMTC manually.</span></span> <span data-ttu-id="5de02-228">Weitere Informationen finden Sie unter [Manuelle Steuerung der Steuerelemente für den Systemmedientransport](system-media-transport-controls.md).</span><span class="sxs-lookup"><span data-stu-id="5de02-228">For more information, see [Manual control of the System Media Transport Controls](system-media-transport-controls.md).</span></span>

<span data-ttu-id="5de02-229">Nachdem Sie eine **MediaTimelineController**-Klasse einem oder mehreren Media Player zugewiesen haben, können Sie den Wiedergabestatus mit den vom Controller bereitgestellten Methoden steuern.</span><span class="sxs-lookup"><span data-stu-id="5de02-229">Once you have attached a **MediaTimelineController** to one or more media players, you can control the playback state by using the methods exposed by the controller.</span></span> <span data-ttu-id="5de02-230">Im folgenden Beispiel wird [**Start**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaTimelineController.Start) aufgerufen, um die Wiedergabe aller zugeordneten Media Player zu Beginn des Mediums zu starten.</span><span class="sxs-lookup"><span data-stu-id="5de02-230">The following example calls [**Start**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaTimelineController.Start) to begin playback of all associated media players at the beginning of the media.</span></span>

[!code-cs[PlayButtonClick](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetPlayButtonClick)]

<span data-ttu-id="5de02-231">Dieses Beispiel veranschaulicht das Anhalten und Fortsetzen aller zugeordneten Media Player.</span><span class="sxs-lookup"><span data-stu-id="5de02-231">This example illustrates pausing and resuming all of the attached media players.</span></span>

[!code-cs[PauseButtonClick](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetPauseButtonClick)]

<span data-ttu-id="5de02-232">Für den schnellen Vorlauf aller verbundenen Media Player muss die Wiedergabegeschwindigkeit auf einen Wert größer als 1 festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="5de02-232">To fast-forward all connected media players, set the playback speed to a value greater that 1.</span></span>

[!code-cs[FastForwardButtonClick](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetFastForwardButtonClick)]

<span data-ttu-id="5de02-233">Das nächste Beispiel zeigt die Verwendung eines **Slider**-Steuerelements, um die aktuelle Wiedergabeposition des Zeitachsencontrollers in Relation zum Inhalt eines der verbundenen Media Player anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="5de02-233">The next example shows how to use a **Slider** control to show the current playback position of the timeline controller relative to the duration of the content of one of the connected media players.</span></span> <span data-ttu-id="5de02-234">Zunächst wird eine neue **MediaSource** erstellt und ein Handler für das [**OpenOperationCompleted**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaSource.OpenOperationCompleted)-Ereignis der Medienquelle registriert.</span><span class="sxs-lookup"><span data-stu-id="5de02-234">First, a new **MediaSource** is created and a handler for the [**OpenOperationCompleted**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaSource.OpenOperationCompleted) of the media source is registered.</span></span> 

[!code-cs[CreateSourceWithOpenCompleted](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetCreateSourceWithOpenCompleted)]

<span data-ttu-id="5de02-235">Der **OpenOperationCompleted**-Handler bietet eine Möglichkeit, um die Dauer des Inhalts der Medienquelle festzustellen.</span><span class="sxs-lookup"><span data-stu-id="5de02-235">The **OpenOperationCompleted** handler is used as an opportunity to discover the duration of the media source content.</span></span> <span data-ttu-id="5de02-236">Sobald die Dauer bestimmt ist, wird der Höchstwert des **Slider**-Steuerelements auf die Gesamtzahl der Sekunden des Medienelements festgelegt.</span><span class="sxs-lookup"><span data-stu-id="5de02-236">Once the duration is determined, the maximum value of the **Slider** control is set to the total number of seconds of the media item.</span></span> <span data-ttu-id="5de02-237">Der Wert wird innerhalb eines Aufrufs von [**RunAsync**](https://msdn.microsoft.com/library/windows/apps/hh750317) festgelegt, um sicherzustellen, dass es im UI-Thread ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-237">The value is set inside a call to [**RunAsync**](https://msdn.microsoft.com/library/windows/apps/hh750317) to make sure it is run on the UI thread.</span></span>

[!code-cs[DeclareDuration](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetDeclareDuration)]

[!code-cs[OpenCompleted](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetOpenCompleted)]

<span data-ttu-id="5de02-238">Als Nächstes wird ein Handler für das [**PositionChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaTimelineController.PositionChanged)-Ereignis des Zeitachsencontrollers registriert.</span><span class="sxs-lookup"><span data-stu-id="5de02-238">Next, a handler for the timeline controller's  [**PositionChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaTimelineController.PositionChanged) event is registered.</span></span> <span data-ttu-id="5de02-239">Dieses wird in regelmäßigen Abständen durch das System aufgerufen, ungefähr viermal pro Sekunde.</span><span class="sxs-lookup"><span data-stu-id="5de02-239">This is called periodically by the system, approximately 4 times per second.</span></span>

[!code-cs[RegisterPositionChanged](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetRegisterPositionChanged)]

<span data-ttu-id="5de02-240">Im Handler für **PositionChanged** wird der Schiebereglerwert aktualisiert, sodass er die aktuelle Position des Zeitachsencontrollers wiedergibt.</span><span class="sxs-lookup"><span data-stu-id="5de02-240">In the handler for **PositionChanged**, the slider value is updated to reflect the current position of the timeline controller.</span></span>

[!code-cs[PositionChanged](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetPositionChanged)]

### <a name="offset-the-playback-position-from-the-timeline-position"></a><span data-ttu-id="5de02-241">Versetzen der Wiedergabeposition in Relation zur Zeitachsenposition</span><span class="sxs-lookup"><span data-stu-id="5de02-241">Offset the playback position from the timeline position</span></span>
<span data-ttu-id="5de02-242">In einigen Fällen soll möglicherweise die Wiedergabeposition eines oder mehrerer mit einem Zeitachsencontroller verknüpften Media Player in Relation zu den anderen Playern versetzt werden.</span><span class="sxs-lookup"><span data-stu-id="5de02-242">In some cases you may want the playback position of one or more media players associated with a timeline controller to be offset from the other players.</span></span> <span data-ttu-id="5de02-243">Dafür können Sie die [**TimelineControllerPositionOffset**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.TimelineControllerPositionOffset)-Eigenschaft des **MediaPlayer**-Objekts festlegen, welches versetzt werden soll.</span><span class="sxs-lookup"><span data-stu-id="5de02-243">You can do this by setting the [**TimelineControllerPositionOffset**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.TimelineControllerPositionOffset) property of the **MediaPlayer** object you want to be offset.</span></span> <span data-ttu-id="5de02-244">Im folgenden Beispiel wird anhand der jeweiligen Dauer des Inhalts von zwei Media Playern der Minimal- und Maximalwert von zwei Schieberegler-Steuerelementen festgelegt, um die Länge des Elements zu verkürzen bzw. zu verlängern.</span><span class="sxs-lookup"><span data-stu-id="5de02-244">The following example uses the durations of the content of two media players to set the minimum and maximum values of two slider control to plus and minus the length of the item.</span></span>  

[!code-cs[OffsetSliders](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetOffsetSliders)]

<span data-ttu-id="5de02-245">Im [**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.Primitives.RangeBase.ValueChanged)-Ereignis jedes Schiebereglers wird **TimelineControllerPositionOffset** für jeden Player auf den entsprechenden Wert festgelegt.</span><span class="sxs-lookup"><span data-stu-id="5de02-245">In the [**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.Primitives.RangeBase.ValueChanged) event for each slider, the **TimelineControllerPositionOffset** for each player is set to the corresponding value.</span></span>

[!code-cs[TimelineOffset](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetTimelineOffset)]

<span data-ttu-id="5de02-246">Beachten Sie: Wird der Offsetwert eines Players einer negativen Wiedergabeposition zugeordnet, wird der Clip angehalten, bis der Offset den Wert Null erreicht. Anschließend beginnt die Wiedergabe.</span><span class="sxs-lookup"><span data-stu-id="5de02-246">Note that if the offset value of a player maps to a negative playback position, the clip will remain paused until the offset reaches zero and then playback will begin.</span></span> <span data-ttu-id="5de02-247">Wenn der Offsetwert einer Wiedergabeposition zugeordnet ist, welche die Dauer des Medientitels überschreitet, wird entsprechend das letzte Bild angezeigt. Dies entspricht dem Vorgehen, wenn ein einzelner Media Player das Ende der Inhaltswiedergabe erreicht.</span><span class="sxs-lookup"><span data-stu-id="5de02-247">Likewise, if the offset value maps to a playback position greater than the duration of the media item, the final frame will be shown, just as it does when a single media player reached the end of its content.</span></span>

## <a name="play-spherical-video-with-mediaplayer"></a><span data-ttu-id="5de02-248">Wiedergeben von sphärischen Videos mit MediaPlayer</span><span class="sxs-lookup"><span data-stu-id="5de02-248">Play spherical video with MediaPlayer</span></span>
<span data-ttu-id="5de02-249">Ab Windows10 Version 1703 unterstützt **MediaPlayer** equirektanguläre Projektionen für kugelförmige Videowiedergabe.</span><span class="sxs-lookup"><span data-stu-id="5de02-249">Starting with Windows 10, version 1703, **MediaPlayer** supports equirectangular projection for spherical video playback.</span></span> <span data-ttu-id="5de02-250">**MediaPlayer** unterscheidet sphärische Videoinhalte nicht von anderen und spielt das Video ab, sofern die Video-Codierung unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-250">Spherical video content is no different from regular, flat video in that **MediaPlayer** will render the video as long as the video encoding is supported.</span></span> <span data-ttu-id="5de02-251">Falls das sphärische Video einen Metadatentag enthält, der für das Video equirektanguläre Projektion fordert, kann **MediaPlayer** das Video mithilfe dieser Sichtfeld- und Ausrichtungsinformationen wiedergeben.</span><span class="sxs-lookup"><span data-stu-id="5de02-251">For spherical video that contains a metadata tag that specifies that the video uses equirectangular projection, **MediaPlayer** can render the video using a specified field-of-view and view orientation.</span></span> <span data-ttu-id="5de02-252">Dies ermöglicht Szenarien wie Virtual-Reality-Videowiedergabe durch Anzeigebrillen oder einfache Bildschwenks innerhalb des sphärischen Videoinhalt durch Maus- oder Tastatureingaben des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="5de02-252">This enables scenarios such as virtual reality video playback with a head-mounted display or simply allowing the user to pan around within spherical video content using the mouse or keyboard input.</span></span>

<span data-ttu-id="5de02-253">Für sphärische Videowiedergaben befolgen Sie die zuvor in diesem Artikel beschriebenen Schritte für die Videowiedergabe.</span><span class="sxs-lookup"><span data-stu-id="5de02-253">To play back spherical video, use the steps for playing back video content described previously in this article.</span></span> <span data-ttu-id="5de02-254">Ein zusätzliche Schritt ist das Registrieren des Handlers für das [**MediaPlayer.MediaOpened**])https://docs.microsoft.com/uwp/api/Windows.Media.Playback.MediaPlayer#Windows_Media_Playback_MediaPlayer_MediaOpened)-Ereignis.</span><span class="sxs-lookup"><span data-stu-id="5de02-254">The one additional step is to register a handler for the [**MediaPlayer.MediaOpened**])https://docs.microsoft.com/uwp/api/Windows.Media.Playback.MediaPlayer#Windows_Media_Playback_MediaPlayer_MediaOpened) event.</span></span> <span data-ttu-id="5de02-255">Dieses Ereignis bietet Ihnen die Möglichkeit, Parameter für die sphärische Videowiedergabe zu aktivieren und zu steuern.</span><span class="sxs-lookup"><span data-stu-id="5de02-255">This event gives you an opportunity to enable and control the spherical video playback parameters.</span></span>

[!code-cs[OpenSphericalVideo](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetOpenSphericalVideo)]

<span data-ttu-id="5de02-256">Prüfen Sie im **MediaOpened**-Handler zunächst das Frameformat des neu geöffneten Medienelements mithilfe der Eigenschaft [**PlaybackSession.SphericalVideoProjection.FrameFormat**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksphericalvideoprojection.FrameFormat).</span><span class="sxs-lookup"><span data-stu-id="5de02-256">In the **MediaOpened** handler, first check the frame format of the newly opened media item by checking the [**PlaybackSession.SphericalVideoProjection.FrameFormat**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksphericalvideoprojection.FrameFormat) property.</span></span> <span data-ttu-id="5de02-257">Wenn dieser Wert [**SphericaVideoFrameFormat.Equirectangular**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.sphericalvideoframeformat) lautet, kann das System den Videoinhalt automatisch projizieren.</span><span class="sxs-lookup"><span data-stu-id="5de02-257">If this value is [**SphericaVideoFrameFormat.Equirectangular**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.sphericalvideoframeformat), then the system can automatically project the video content.</span></span> <span data-ttu-id="5de02-258">Legen Sie zuerst die Eigenschaft [**PlaybackSession.SphericalVideoProjection.IsEnabled**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksphericalvideoprojection.IsEnabled) auf **true** fest.</span><span class="sxs-lookup"><span data-stu-id="5de02-258">First, set the [**PlaybackSession.SphericalVideoProjection.IsEnabled**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksphericalvideoprojection.IsEnabled) property to **true**.</span></span> <span data-ttu-id="5de02-259">Sie können auch Eigenschaften wie das Sichtfeld und die Ausrichtung anpassen, mit denen MediaPlayer die Videoinhalte projiziert.</span><span class="sxs-lookup"><span data-stu-id="5de02-259">You can also adjust properties such as the view orientation and field of view that the media player will use to project the video content.</span></span> <span data-ttu-id="5de02-260">In diesem Beispiel wurde das Sichtfeld über die [**HorizontalFieldOfViewInDegrees**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksphericalvideoprojection.HorizontalFieldOfViewInDegrees)-Eigenschaft auf einen breiten Wert von 120Grad festgelegt.</span><span class="sxs-lookup"><span data-stu-id="5de02-260">In this example, the field of view is set to a wide value of 120 degrees by setting the [**HorizontalFieldOfViewInDegrees**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybacksphericalvideoprojection.HorizontalFieldOfViewInDegrees) property.</span></span>

<span data-ttu-id="5de02-261">Für sphärische Videoinhalte, die nicht das equirektanguläre Format haben, können Sie mithilfe des MediaPlayer-FrameServer-Modus eigene Projektionsalgorithmen implementieren, die einzelne Frames empfangen und verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="5de02-261">If the video content is spherical, but is in a format other than equirectangular, you can implement your own projection algorithm using the media player's frame server mode to receive and process individual frames.</span></span>

[!code-cs[SphericalMediaOpened](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSphericalMediaOpened)]

<span data-ttu-id="5de02-262">Der folgende Beispielcode zeigt, wie die Ausrichtung von sphärischen Videos mithilfe der Links- und Rechts-Pfeiltasten angepasst wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-262">The following example code illustrates how to adjust the spherical video view orientation using the left and right arrow keys.</span></span>

[!code-cs[SphericalOnKeyDown](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSphericalOnKeyDown)]

<span data-ttu-id="5de02-263">Wenn Ihre App Wiedergabelisten für Videos unterstützt, können Sie Elemente für sphärische Videowiedergabe in Ihrer UI identifizieren.</span><span class="sxs-lookup"><span data-stu-id="5de02-263">If your app supports playlists of video, you may want to identify playback items that contain spherical video in your UI.</span></span> <span data-ttu-id="5de02-264">Medien-Wiedergabelisten werden ausführlich im Artikel [Medienelemente, Wiedergabelisten und Titel](media-playback-with-mediasource.md) beschrieben.</span><span class="sxs-lookup"><span data-stu-id="5de02-264">Media playlists are discussed in detail in the article, [Media items, playlists, and tracks](media-playback-with-mediasource.md).</span></span> <span data-ttu-id="5de02-265">Das folgende Beispiel zeigt, wie Sie eine neue Wiedergabeliste erstellen, ein Element hinzufügen und einen Handler für das [**MediaPlaybackItem.VideoTracksChanged**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybackitem.VideoTracksChanged)-Ereignis registrieren, das auftritt, wenn die Videotitel eines Medienelements aufgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="5de02-265">The following example shows creating a new playlist, adding an item, and registering a handler for the [**MediaPlaybackItem.VideoTracksChanged**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplaybackitem.VideoTracksChanged) event, which occurs when the video tracks for a media item are resolved.</span></span>

[!code-cs[SphericalList](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSphericalList)]

<span data-ttu-id="5de02-266">Die Codierungseigenschaften für alle hinzugefügten Videotitel erhalten Sie im **VideoTracksChanged**-Ereignishandler durch den Aufruf [**VideoTrack.GetEncodingProperties**](https://docs.microsoft.com/uwp/api/windows.media.core.videotrack.GetEncodingProperties).</span><span class="sxs-lookup"><span data-stu-id="5de02-266">In the **VideoTracksChanged** event handler, get the encoding properties for any added video tracks by calling [**VideoTrack.GetEncodingProperties**](https://docs.microsoft.com/uwp/api/windows.media.core.videotrack.GetEncodingProperties).</span></span> <span data-ttu-id="5de02-267">Wenn der Wert für [**SphericalVideoFrameFormat**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.videoencodingproperties.SphericalVideoFrameFormat) in den Codierungseigenschaften anders als [**SphericaVideoFrameFormat.None**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.sphericalvideoframeformat) lautet, enthält der Titel sphärische Videoinhalte, und Sie können die Benutzeroberfläche bei Bedarf aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="5de02-267">If the [**SphericalVideoFrameFormat**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.videoencodingproperties.SphericalVideoFrameFormat) property of the encoding properties is a value other than [**SphericaVideoFrameFormat.None**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.sphericalvideoframeformat), then the video track contains spherical video and you can update your UI accordingly if you choose.</span></span>

[!code-cs[SphericalTracksChanged](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSphericalTracksChanged)]

## <a name="use-mediaplayer-in-frame-server-mode"></a><span data-ttu-id="5de02-268">Verwenden des MediaPlayer-FrameServer-Modus</span><span class="sxs-lookup"><span data-stu-id="5de02-268">Use MediaPlayer in frame server mode</span></span>
<span data-ttu-id="5de02-269">Ab Windows10 Version 1703 können Sie **MediaPlayer** im FrameServer-Modus ausführen.</span><span class="sxs-lookup"><span data-stu-id="5de02-269">Starting with Windows 10, version 1703, you can use **MediaPlayer** in frame server mode.</span></span> <span data-ttu-id="5de02-270">In diesem Modus rendert **MediaPlayer** die Frames für ein zugehöriges **MediaPlayerElement** nicht automatisch.</span><span class="sxs-lookup"><span data-stu-id="5de02-270">In this mode, the **MediaPlayer** does not automatically render frames to an associated **MediaPlayerElement**.</span></span> <span data-ttu-id="5de02-271">Stattdessen kopiert Ihre App den aktuellen Frame von **MediaPlayer** in ein Objekt, das eine [**IDirect3DSurface**](https://docs.microsoft.com/uwp/api/windows.graphics.directx.direct3d11.idirect3dsurface) implementiert.</span><span class="sxs-lookup"><span data-stu-id="5de02-271">Instead, your app copies the current frame from the **MediaPlayer** to an object that implements [**IDirect3DSurface**](https://docs.microsoft.com/uwp/api/windows.graphics.directx.direct3d11.idirect3dsurface).</span></span> <span data-ttu-id="5de02-272">Dieses Feature ermöglicht vor allem Szenarios, in denen Videoframes von **MediaPlayer** durch Pixel-Shader verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="5de02-272">The primary scenario this feature enables is using pixel shaders to process video frames provided by the **MediaPlayer**.</span></span> <span data-ttu-id="5de02-273">Nach der Verarbeitung übernimmt Ihre App die Anzeige jedes Frames, um ihn z.B. in einem XAML-[**Image**](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.image)-Steuerelement anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="5de02-273">Your app is responsible for displaying each frame after processing, such as by showing the frame in a XAML [**Image**](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.image) control.</span></span>

<span data-ttu-id="5de02-274">Im folgenden Beispiel wird ein neuer **MediaPlayer** initialisiert, um Videoinhalte zu laden.</span><span class="sxs-lookup"><span data-stu-id="5de02-274">In the following example, a new **MediaPlayer** is initialized and video content is loaded.</span></span> <span data-ttu-id="5de02-275">Anschließend wird ein Handler für [**VideoFrameAvailable**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer.VideoFrameAvailable) registriert.</span><span class="sxs-lookup"><span data-stu-id="5de02-275">Next, a handler for [**VideoFrameAvailable**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer.VideoFrameAvailable) is registered.</span></span> <span data-ttu-id="5de02-276">Um den FrameServer-Modus zu aktivieren, wird die **MediaPlayer**-Objekteigenschaft [**IsVideoFrameServerEnabled**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer.IsVideoFrameServerEnabled) auf **true** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="5de02-276">Frame server mode is enabled by setting the **MediaPlayer** object's [**IsVideoFrameServerEnabled**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer.IsVideoFrameServerEnabled) property to **true**.</span></span> <span data-ttu-id="5de02-277">Anschließend wird mit dem Aufruf [**Play**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer.Play) die Medienwiedergabe gestartet.</span><span class="sxs-lookup"><span data-stu-id="5de02-277">Finally, media playback is started with a call to [**Play**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer.Play).</span></span>

[!code-cs[FrameServerInit](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetFrameServerInit)]

<span data-ttu-id="5de02-278">Das nächste Beispiel zeigt einen Handler für **VideoFrameAvailable**, der durch [Win2D](https://github.com/Microsoft/Win2D) jedem Frame eines Videos einen Weichzeichnereffekt hinzufügt und die verarbeiteten Frames in einem XAML-[Image](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.image)-Steuerelement anzeigt.</span><span class="sxs-lookup"><span data-stu-id="5de02-278">The next example shows a handler for **VideoFrameAvailable** that uses [Win2D](https://github.com/Microsoft/Win2D) to add a simple blur effect to each frame of a video and then displays the processed frames in a XAML [Image](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.image) control.</span></span>

<span data-ttu-id="5de02-279">Mit jedem Aufruf des **VideoFrameAvailable**-Ereignishandlers wird der Inhalt eines Frames mit der [**CopyFrameToVideoSurface**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer.copyframetovideosurface)-Methode in eine [**IDirect3DSurface**](https://docs.microsoft.com/uwp/api/windows.graphics.directx.direct3d11.idirect3dsurface) kopiert.</span><span class="sxs-lookup"><span data-stu-id="5de02-279">Whenever the **VideoFrameAvailable** handler is called, the [**CopyFrameToVideoSurface**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer.copyframetovideosurface) method is used to copy the contents of the frame to an [**IDirect3DSurface**](https://docs.microsoft.com/uwp/api/windows.graphics.directx.direct3d11.idirect3dsurface).</span></span> <span data-ttu-id="5de02-280">Mit dem Aufruf [**CopyFrameToStereoscopicVideoSurfaces**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer.copyframetostereoscopicvideosurfaces) können Sie 3D-Inhalte auch in zwei Oberflächen kopieren, um Inhalte für das linke und rechte Auge getrennt zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="5de02-280">You can also use [**CopyFrameToStereoscopicVideoSurfaces**](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer.copyframetostereoscopicvideosurfaces) to copy 3D content into two surfaces, for processing the left eye and right eye content separately.</span></span> <span data-ttu-id="5de02-281">Um ein Objekt abzurufen, das **IDirect3DSurface**  implementiert, erstellt dieses Beispiel mithilfe eines [**SoftwareBitmap**](https://docs.microsoft.com/uwp/api/windows.graphics.imaging.softwarebitmap)-Objekts eine Win2D **CanvasBitmap**, welche die benötigte Schnittstelle implementiert.</span><span class="sxs-lookup"><span data-stu-id="5de02-281">To get an object that implements **IDirect3DSurface**  this example creates a [**SoftwareBitmap**](https://docs.microsoft.com/uwp/api/windows.graphics.imaging.softwarebitmap) and then uses that object to create a Win2D **CanvasBitmap**, which implements the necessary interface.</span></span> <span data-ttu-id="5de02-282">Ein **CanvasImageSource**-Win2D-Objekt kann als Quelle für ein neu zu erstellendes **Image**-Steuerelement verwendet werden, das dann als Quelle für das **Bild** dient, welches den Inhalt anzeigt.</span><span class="sxs-lookup"><span data-stu-id="5de02-282">A **CanvasImageSource** is a Win2D object that can be used as the source for an **Image** control, so a new one is created and set as the source for the **Image** in which the content will be displayed.</span></span> <span data-ttu-id="5de02-283">Als Nächstes wird eine **CanvasDrawingSession** erstellt.</span><span class="sxs-lookup"><span data-stu-id="5de02-283">Next, a **CanvasDrawingSession** is created.</span></span> <span data-ttu-id="5de02-284">Dies wird von Win2D verwendet, um den Weichzeichnereffekt zu rendern.</span><span class="sxs-lookup"><span data-stu-id="5de02-284">This is used by Win2D to render the blur effect.</span></span>

<span data-ttu-id="5de02-285">Nachdem alle erforderlichen Objekte instanziiert sind, wird **CopyFrameToVideoSurface** aufgerufen, um den aktuellen Frame von **MediaPlayer** in die **CanvasBitmap** zu kopieren.</span><span class="sxs-lookup"><span data-stu-id="5de02-285">Once all of the necessary objects have been instantiated, **CopyFrameToVideoSurface** is called, which copies the current frame from the **MediaPlayer** into the **CanvasBitmap**.</span></span> <span data-ttu-id="5de02-286">Anschließend wird ein Win2D-**GaussianBlurEffect** erstellt, für den **CanvasBitmap** als Quelle festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="5de02-286">Next, a Win2D **GaussianBlurEffect** is created, with the **CanvasBitmap** set as the source of the operation.</span></span> <span data-ttu-id="5de02-287">Zum Schluss wird **CanvasDrawingSession.DrawImage** aufgerufen, um das Quellbild mit angewendetem Weichzeichnereffekt in die **CanvasImageSource** und deren zugeordnetes **Bild**-Steuerelement in der UI zu zeichnen.</span><span class="sxs-lookup"><span data-stu-id="5de02-287">Finally, **CanvasDrawingSession.DrawImage** is called to draw the source image, with the blur effect applied, into the **CanvasImageSource** that has been associated with **Image** control, causing it to be drawn in the UI.</span></span>

[!code-cs[VideoFrameAvailable](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetVideoFrameAvailable)]

<span data-ttu-id="5de02-288">Weitere Informationen zu Win2D finden Sie im [Win2D-Repository auf GitHub](https://github.com/Microsoft/Win2D).</span><span class="sxs-lookup"><span data-stu-id="5de02-288">For more information on Win2D, see the [Win2D GitHub repository](https://github.com/Microsoft/Win2D).</span></span> <span data-ttu-id="5de02-289">Um den oben gezeigten Beispielcode zu testen, müssen Sie Ihrem Projekt das Win2D-NuGet-Paket mit folgenden Anweisungen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="5de02-289">To try out the sample code shown above, you will need to add the Win2D NuGet package to your project with the following instructions.</span></span>

**<span data-ttu-id="5de02-290">Hinzufügen des Win2D-NuGet-Pakets zu Ihrem Effektprojekt</span><span class="sxs-lookup"><span data-stu-id="5de02-290">To add the Win2D NuGet package to your effect project</span></span>**

1.  <span data-ttu-id="5de02-291">Klicken Sie in **Projektmappen-Explorer** mit der rechten Maustaste auf Ihr Projekt und wählen Sie **NuGet-Pakete verwalten**.</span><span class="sxs-lookup"><span data-stu-id="5de02-291">In **Solution Explorer**, right-click your project and select **Manage NuGet Packages**.</span></span>
2.  <span data-ttu-id="5de02-292">Klicken Sie oben im Fenster auf die Registerkarte **Durchsuchen**.</span><span class="sxs-lookup"><span data-stu-id="5de02-292">At the top of the window, select the **Browse** tab.</span></span>
3.  <span data-ttu-id="5de02-293">Geben Sie im Suchfeld **Win2D** ein.</span><span class="sxs-lookup"><span data-stu-id="5de02-293">In the search box, enter **Win2D**.</span></span>
4.  <span data-ttu-id="5de02-294">Wählen Sie **Win2D.uwp** und anschließend im rechten Bereich **Installieren** aus.</span><span class="sxs-lookup"><span data-stu-id="5de02-294">Select **Win2D.uwp**, and then select **Install** in the right pane.</span></span>
5.  <span data-ttu-id="5de02-295">Im Dialogfeld **Änderungen überprüfen** wird das zu installierende Paket angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5de02-295">The **Review Changes** dialog shows you the package to be installed.</span></span> <span data-ttu-id="5de02-296">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="5de02-296">Click **OK**.</span></span>
6.  <span data-ttu-id="5de02-297">Akzeptieren Sie die Paketlizenz.</span><span class="sxs-lookup"><span data-stu-id="5de02-297">Accept the package license.</span></span>

## <a name="detect-and-respond-to-audio-level-changes-by-the-system"></a><span data-ttu-id="5de02-298">Erkennen und Reagieren auf Änderungen der Audioebene vom System</span><span class="sxs-lookup"><span data-stu-id="5de02-298">Detect and respond to audio level changes by the system</span></span>
<span data-ttu-id="5de02-299">Ab Windows10, Version 1803, erkennt Ihre App, wenn das System die Lautstärke der Audioaufnahme des aktuell wiedergegebenen **MediaPlayer**.</span><span class="sxs-lookup"><span data-stu-id="5de02-299">Starting with Windows 10, version 1803, your app can detect when the system lowers or mutes the audio level of a currently playing **MediaPlayer**.</span></span> <span data-ttu-id="5de02-300">Beispielsweise kann das System die Audiowiedergabe-Ebene reduzieren, wenn ein Alarm klingelt.</span><span class="sxs-lookup"><span data-stu-id="5de02-300">For example, the system may lower, or "duck", the audio playback level when an alarm is ringing.</span></span> <span data-ttu-id="5de02-301">Das System schaltet Ihre App stumm, wenn sie in den Hintergrund wechselt, falls Ihre App die *BackgroundMediaPlayback*-Funktion im App-Manifest nicht aktiviert hat.</span><span class="sxs-lookup"><span data-stu-id="5de02-301">The system will mute your app when it goes into the background if your app has not declared the *backgroundMediaPlayback* capability in the app manifest.</span></span> <span data-ttu-id="5de02-302">Mit der [**AudioStateMonitor**](https://docs.microsoft.comuwp/api/windows.media.audio.audiostatemonitor)-Klasse können Sie sich registrieren, um ein Ereignis zu erhalten, wenn das System die Lautstärke eines Audiostreams ändert.</span><span class="sxs-lookup"><span data-stu-id="5de02-302">The [**AudioStateMonitor**](https://docs.microsoft.comuwp/api/windows.media.audio.audiostatemonitor) class allows you to register to receive an event when the system modifies the volume of an audio stream.</span></span> <span data-ttu-id="5de02-303">Greifen Sie auf die **AudioStateMonitor**-Eigenschaft eines **MediaPlayers** zu und registrieren Sie einen Handler für das [**SoundLevelChanged**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.soundlevelchanged)-Ereignis, um informiert zu werden, wenn die Lautstärke für diesen \*\*MediaPlayer \*\*vom System geändert wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-303">Access the **AudioStateMonitor** property of a **MediaPlayer** and register a handler for the [**SoundLevelChanged**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.soundlevelchanged) event to be notified when the audio level for that **MediaPlayer** is changed by the system.</span></span>

[!code-cs[RegisterAudioStateMonitor](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetRegisterAudioStateMonitor)]

<span data-ttu-id="5de02-304">Bei der Behandlung des **SoundLevelChanged**-Ereignis, können Sie verschiedene Aktionen ausführen, je nach Art des wiedergegebenen Inhalts.</span><span class="sxs-lookup"><span data-stu-id="5de02-304">When handling the **SoundLevelChanged** event, you may take different actions depending on the type of content being played.</span></span> <span data-ttu-id="5de02-305">Wenn Sie zurzeit Musik wiedergegeben, empfiehlt es sich die Musik abzuspielen, während das Volume gedämpft ist.</span><span class="sxs-lookup"><span data-stu-id="5de02-305">If you are currently playing music, then you may want to let the music continue to play while the volume is ducked.</span></span> <span data-ttu-id="5de02-306">Wenn Sie allerdings einen Podcast spielen, empfiehlt sich die Wiedergabe anzuhalten, während die Audiowiedergabe gedämpft ist, damit der Benutzer keinen Inhalt verpasst.</span><span class="sxs-lookup"><span data-stu-id="5de02-306">If you are playing a podcast, however, you likely want to pause playback while the audio is ducked so the user doesn't miss any of the content.</span></span>

<span data-ttu-id="5de02-307">In diesem Beispiel deklariert eine Variable das Nachverfolgen des derzeit wiedergegebenen Inhalts eines Podcasts, vorausgesetzt, dass Sie dies auf den entsprechenden Wert festlegt haben, wenn der Inhalt für den **MediaPlayer** ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="5de02-307">This example declares a variable to track whether the currently playing content is a podcast, it is assumed that you set this to the appropriate value when selecting the content for the **MediaPlayer**.</span></span> <span data-ttu-id="5de02-308">Zudem erstellen wir eine Klassenvariable, um nachzuverfolgen, wann wir die Wiedergabe programmgesteuert anhalten, wenn die Lautstärke geändert wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-308">We also create a class variable to track when we pause playback programmatically when the audio level changes.</span></span>

[!code-cs[AudioStateVars](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetAudioStateVars)]

<span data-ttu-id="5de02-309">Im **SoundLevelChanged**-Ereignis-Handler können Sie die [**SoundLevel**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.soundlevel)-Eigenschaft des **AudioStateMonitor**-Senders überprüfen, um die neue Soundebene zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="5de02-309">In the **SoundLevelChanged** event handler, check the [**SoundLevel**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.soundlevel) property of the **AudioStateMonitor** sender to determine the new sound level.</span></span> <span data-ttu-id="5de02-310">In diesem Beispiel wird überprüft, ob die neue Lautstärke die volle Lautstärke ist, was bedeutet, dass das System das Stummschalten oder Dämpfen der Lautstärke beendet hat, oder wenn die Lautstärke verringert wurde, und ein anderer Inhalt als den des Podcast wiedergegeben wird.</span><span class="sxs-lookup"><span data-stu-id="5de02-310">This example checks to see if the new sound level is full volume, meaning the system has stopped muting or ducking the volume, or if the sound level has been lowered but is playing non-podcast content.</span></span> <span data-ttu-id="5de02-311">Wenn einer der beider Werte "wahr" ist, und der Inhalt programmgesteuert zuvor angehalten wurde, wird die Wiedergabe fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="5de02-311">If either of these are true and the content was previously paused programmatically, playback is resumed.</span></span> <span data-ttu-id="5de02-312">Wenn die neue Lautstärke stumm geschaltet ist oder wenn der aktuelle Inhalt ein Podcast ist und die Lautstärke gesenkt ist, wird die Wiedergabe angehalten, und die Variable wird festgelegt, um nachzuverfolgen, ob die Pause programmgesteuert initiiert wurde.</span><span class="sxs-lookup"><span data-stu-id="5de02-312">If the new sound level is muted or if the current content is a podcast and the sound level is low, playback is paused, and the variable is set to track that the pause was initiated programatically.</span></span>

[!code-cs[SoundLevelChanged](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSoundLevelChanged)]

<span data-ttu-id="5de02-313">Der Benutzer kann entscheiden, ob er die Wiedergabe anhalten oder fortsetzen möchte, auch wenn die Audiowiedergabe vom System gedämpft ist.</span><span class="sxs-lookup"><span data-stu-id="5de02-313">The user may decide that they want to pause or continue playback, even if the audio is ducked by the system.</span></span> <span data-ttu-id="5de02-314">Dieses Beispiel zeigt die Ereignishandler für die Wiedergabe und Pause-Tasten.</span><span class="sxs-lookup"><span data-stu-id="5de02-314">This example shows event handlers for a play and a pause button.</span></span> <span data-ttu-id="5de02-315">Wenn der Klickhandler der Pause-Schaltfläche angehalten ist, wenn die Wiedergabe bereits programmgesteuert angehalten wurde, aktualisieren wir die Variable, um anzugeben, dass der Benutzer den Inhalt angehalten hat.</span><span class="sxs-lookup"><span data-stu-id="5de02-315">In the pause button click handler is paused, if playback had already been paused programmatically, then we update the variable to indicate that the user has paused the content.</span></span> <span data-ttu-id="5de02-316">Wir setzen die Wiedergabe im Klickhandler der Pause-Schaltfläche fort und löschen die Tracking-Variable.</span><span class="sxs-lookup"><span data-stu-id="5de02-316">In the play button click handler, we resume playback and clear our tracking variable.</span></span>

[!code-cs[ButtonUserClick](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetButtonUserClick)]

## <a name="related-topics"></a><span data-ttu-id="5de02-317">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="5de02-317">Related topics</span></span>
* [<span data-ttu-id="5de02-318">Medienwiedergabe</span><span class="sxs-lookup"><span data-stu-id="5de02-318">Media playback</span></span>](media-playback.md)
* [<span data-ttu-id="5de02-319">Medienelemente, Wiedergabelisten und Titel</span><span class="sxs-lookup"><span data-stu-id="5de02-319">Media items, playlists, and tracks</span></span>](media-playback-with-mediasource.md)
* [<span data-ttu-id="5de02-320">Integration in die Steuerelemente für den Systemmedientransport</span><span class="sxs-lookup"><span data-stu-id="5de02-320">Integrate with the Sytem Media Transport Controls</span></span>](integrate-with-systemmediatransportcontrols.md)
* [<span data-ttu-id="5de02-321">Erstellen, Planen und Verwalten von Medienunterbrechungen</span><span class="sxs-lookup"><span data-stu-id="5de02-321">Create, schedule, and manage media breaks</span></span>](create-schedule-and-manage-media-breaks.md)
* [<span data-ttu-id="5de02-322">Wiedergeben von Medien im Hintergrund</span><span class="sxs-lookup"><span data-stu-id="5de02-322">Play media in the background</span></span>](background-audio.md)





 

 




