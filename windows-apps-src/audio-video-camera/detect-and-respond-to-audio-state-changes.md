---
ms.assetid: EE0C1B28-EF9C-4BD9-A3C0-BDF11E75C752
description: In diesem Artikel wird erläutert, wie UWP-Apps vom System initiierte Änderungen der Audiodatenstromebene erkennen und darauf reagieren können
title: Erkennen und reagieren auf Änderungen der Audiodatenstromebene
ms.date: 04/03/2018
ms.topic: article
keywords: Windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 69eeb82fd9a1e043e99b7fe0d635ca750779eda5
ms.sourcegitcommit: c01c29cd97f1cbf050950526e18e15823b6a12a0
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/05/2018
ms.locfileid: "8698723"
---
# <a name="detect-and-respond-to-audio-state-changes"></a><span data-ttu-id="9e4e3-104">Erkennen und reagieren auf Änderungen der Audiodatenstromebene</span><span class="sxs-lookup"><span data-stu-id="9e4e3-104">Detect and respond to audio state changes</span></span>
<span data-ttu-id="9e4e3-105">Ab Windows10, Version 1803, erkennt Ihre App, wenn das System die Lautstärke der Audioaufnahme Ihrer App oder des Audiodatenstroms reduziert oder stummschaltet.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-105">Starting with Windows 10, version 1803, your app can detect when the system lowers or mutes the audio level of an audio stream your app is using.</span></span> <span data-ttu-id="9e4e3-106">Sie können Benachrichtigungen für die Erfassung und die Wiedergabe von Datenströmen erhalten, für ein bestimmtes Audio-Gerät und eine Audiokategorie oder für eine [**MediaPlayer**](https://docs.microsoft.com/en-us/uwp/api/Windows.Media.Playback.MediaPlayer)-Objekt, das ist Ihrer App für die Medienwiedergabe verwendet.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-106">You can receive notifications for capture and render streams, for a particular audio device and audio category, or for a [**MediaPlayer**](https://docs.microsoft.com/en-us/uwp/api/Windows.Media.Playback.MediaPlayer) object your app is using for media playback.</span></span> <span data-ttu-id="9e4e3-107">Beispielsweise kann das System die Audiowiedergabe-Ebene reduzieren, wenn ein Alarm klingelt.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-107">For example, the system may lower, or "duck", the audio playback level when an alarm is ringing.</span></span> <span data-ttu-id="9e4e3-108">Das System schaltet Ihre App stumm, wenn sie in den Hintergrund wechselt, falls Ihre App die *BackgroundMediaPlayback*-Funktion im App-Manifest nicht aktiviert hat.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-108">The system will mute your app when it goes into the background if your app has not declared the *backgroundMediaPlayback* capability in the app manifest.</span></span> 

<span data-ttu-id="9e4e3-109">Das Muster für die Behandlung von Audio-Zustandsänderungen ist für alle unterstützten Audiostreams identisch.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-109">The pattern for handling audio state changes is the same for all supported audio streams.</span></span> <span data-ttu-id="9e4e3-110">Erstellen Sie zuerst eine Instanz der [**AudioStateMonitor**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor)-Klasse.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-110">First, create an instance of the [**AudioStateMonitor**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor) class.</span></span> <span data-ttu-id="9e4e3-111">Im folgenden Beispiel verwendet die App die [**MediaCapture**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture)-Klasse zum Aufnehmen von Audio für Spiele-Chats.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-111">In the following example, the app is using the [**MediaCapture**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture) class to capture audio for game chat.</span></span> <span data-ttu-id="9e4e3-112">Es wird eine Factorymethode aufgerufen, um den Audiostatus-Monitor für den Spiel-Chat-Auidioaufnahmedatenstrom des standardmäßigen Kommunikationsgeräts zugeordnet zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-112">A factory method is called to get an audio state monitor associated with the game chat audio capture stream of the default communications device.</span></span>  <span data-ttu-id="9e4e3-113">Danach wird ein Handler für das [**SoundLevelChanged**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.soundlevelchanged)-Ereignis registriert, das ausgelöst wird, wenn die Audiowiedergabe für die entsprechende Streamkategorie vom System geändert wird.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-113">Next, a handler is registered for the [**SoundLevelChanged**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.soundlevelchanged) event, which will be raised when the audio level for the associated stream is changed by the system.</span></span>

[!code-cs[DeviceIdCategoryVars](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetDeviceIdCategoryVars)]

[!code-cs[SoundLevelDeviceIdCategory](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetSoundLevelDeviceIdCategory)]

<span data-ttu-id="9e4e3-114">Überprüfen Sie im Ereignishandler **SoundLevelChanged** [**SoundLevel**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.soundlevel) -Eigenschaft des an den Handler übergebenen **AudioStateMonitor** Absenders zu ermitteln, was die neue Soundebene für den Stream.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-114">In the **SoundLevelChanged** event handler, check the [**SoundLevel**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.soundlevel) property of the **AudioStateMonitor** sender passed into the handler to determine what the new audio level for the stream is.</span></span> <span data-ttu-id="9e4e3-115">In diesem Beispiel wird die Aufzeichnung von Audio von der App beendet, wenn die Lautstärke stumm geschaltet ist, und fortgesetzt, wenn die volle Lautstärke wieder eingeschaltet wird.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-115">In this example, the app stops capturing audio when the sound level is muted and resumes capturing when the audio level returns to full volume.</span></span>

[!code-cs[GameChatSoundLevelChanged](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetGameChatSoundLevelChanged)]

<span data-ttu-id="9e4e3-116">Weitere Informationen über die Aufnahme von Audio mit **MediaCapture** finden Sie unter [Allgemeine Foto-, Video- und Audioaufnahme mit MediaCapture](basic-photo-video-and-audio-capture-with-MediaCapture.md).</span><span class="sxs-lookup"><span data-stu-id="9e4e3-116">For more information on capturing audio with **MediaCapture**, see [Basic photo, video, and audio capture with MediaCapture](basic-photo-video-and-audio-capture-with-MediaCapture.md).</span></span>

<span data-ttu-id="9e4e3-117">Jede Instanz der [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer)-Klasse verfügt über einen zugeordneten **AudioStateMonitor**, den Sie verwenden können, um festzustellen, ob das System die Lautstärke des aktuell wiedergegebenen Inhalts ändert.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-117">Every instance of the [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer) class has an **AudioStateMonitor** associated with it that you can use to detect when the system changes the volume level of the content currently being played.</span></span> <span data-ttu-id="9e4e3-118">Sie können auch entscheiden, Audio-Zustandsänderungen unterschiedlich zu behandeln, je nach Art der wiedergegeben Inhalte.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-118">You may decide to handle audio state changes differently depending on what type of content is being played.</span></span> <span data-ttu-id="9e4e3-119">Möglicherweise möchten Sie z.B. die Wiedergabe eines Podcasts anhalten, wenn die Audiowiedergabe leiser ist, und die Wiedergabe fortsetzen, wenn der Inhalt Musik ist.</span><span class="sxs-lookup"><span data-stu-id="9e4e3-119">For example, you may decide to pause playback of a podcast when the audio is lowered, but continue playback if the content is music.</span></span> 

[!code-cs[AudioStateVars](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetAudioStateVars)]

[!code-cs[SoundLevelChanged](./code/MediaPlayer_RS1/cs/MainPage.xaml.cs#SnippetSoundLevelChanged)]

<span data-ttu-id="9e4e3-120">Weitere Informationen zur Verwendung des **MediaPlayer** finden Sie unter [Wiedergeben von Audio- und Videoinhalten mit MediaPlayer](play-audio-and-video-with-mediaplayer.md).</span><span class="sxs-lookup"><span data-stu-id="9e4e3-120">For more information on using **MediaPlayer**, see [Play audio and video with MediaPlayer](play-audio-and-video-with-mediaplayer.md).</span></span> 

## <a name="related-topics"></a><span data-ttu-id="9e4e3-121">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="9e4e3-121">Related topics</span></span>