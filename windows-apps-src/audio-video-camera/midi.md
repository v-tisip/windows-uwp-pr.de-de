---
ms.assetid: 9146212C-8480-4C16-B74C-D7F08C7086AF
description: In diesem Artikel wird beschrieben, wie Sie MIDI-Geräte (Musical Instrument Digital Interface) aufzählen und MIDI-Nachrichten in einer universellen Windows-App senden und empfangen.
title: MIDI
ms.date: 02/08/2017
ms.topic: article
keywords: Windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: cb210621b74fef5128456d06a7cdf047752f45f5
ms.sourcegitcommit: 89ff8ff88ef58f4fe6d3b1368fe94f62e59118ad
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/29/2018
ms.locfileid: "8197096"
---
# <a name="midi"></a><span data-ttu-id="0b7df-104">MIDI</span><span class="sxs-lookup"><span data-stu-id="0b7df-104">MIDI</span></span>



<span data-ttu-id="0b7df-105">In diesem Artikel wird beschrieben, wie Sie MIDI-Geräte (Musical Instrument Digital Interface) aufzählen und MIDI-Nachrichten in einer universellen Windows-App senden und empfangen.</span><span class="sxs-lookup"><span data-stu-id="0b7df-105">This article shows you how to enumerate MIDI (Musical Instrument Digital Interface) devices and send and receive MIDI messages from a Universal Windows app.</span></span> <span data-ttu-id="0b7df-106">Windows 10 unterstützt MIDI über USB (Klasse-kompatibel und die meisten proprietäre Treiber), MIDI über Bluetooth LE (Windows 10 Anniversary Edition und höher), und über frei verfügbare Drittanbieter-Produkte, MIDI-Ethernet- und routed MIDI.</span><span class="sxs-lookup"><span data-stu-id="0b7df-106">Windows 10 supports MIDI over USB (class-compliant and most proprietary drivers), MIDI over Bluetooth LE (Windows 10 Anniversary Edition and later), and through freely-available third-party products, MIDI over Ethernet and routed MIDI.</span></span>

## <a name="enumerate-midi-devices"></a><span data-ttu-id="0b7df-107">Aufzählen von MIDI-Geräten</span><span class="sxs-lookup"><span data-stu-id="0b7df-107">Enumerate MIDI devices</span></span>

<span data-ttu-id="0b7df-108">Fügen Sie Ihrem Projekt vor dem Aufzählen und Verwenden von MIDI-Geräten die folgenden Namespaces hinzu.</span><span class="sxs-lookup"><span data-stu-id="0b7df-108">Before enumerating and using MIDI devices, add the following namespaces to your project.</span></span>

[!code-cs[Using](./code/MIDIWin10/cs/MainPage.xaml.cs#SnippetUsing)]

<span data-ttu-id="0b7df-109">Fügen Sie der XAML-Seite ein [**ListBox**](https://msdn.microsoft.com/library/windows/apps/br242868)-Steuerelement hinzu, über das der Benutzer eines der an das System angeschlossenen MIDI-Eingabegeräte auswählen kann.</span><span class="sxs-lookup"><span data-stu-id="0b7df-109">Add a [**ListBox**](https://msdn.microsoft.com/library/windows/apps/br242868) control to your XAML page that will allow the user to select one of the MIDI input devices attached to the system.</span></span> <span data-ttu-id="0b7df-110">Fügen Sie ein weiteres Steuerelement zum Auflisten der MIDI-Ausgabegeräte hinzu.</span><span class="sxs-lookup"><span data-stu-id="0b7df-110">Add another one to list the MIDI output devices.</span></span>

[!code-xml[MidiListBoxes](./code/MIDIWin10/cs/MainPage.xaml#SnippetMidiListBoxes)]

<span data-ttu-id="0b7df-111">Die [**FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/br225432)-Methode der [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/br225393)-Klasse wird verwendet, um viele verschiedene Arten von Geräten aufzulisten, die von Windows erkannt werden.</span><span class="sxs-lookup"><span data-stu-id="0b7df-111">The [**FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/br225432) method [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/br225393) class is used to enumerate many different types of devices that are recognized by Windows.</span></span> <span data-ttu-id="0b7df-112">Um anzugeben, dass die Methode nur nach MIDI-Eingabegeräten suchen soll, verwenden Sie die von [**MidiInPort.GetDeviceSelector**](https://msdn.microsoft.com/library/windows/apps/dn894779) zurückgegebene Auswahlzeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="0b7df-112">To specify that you only want the method to find MIDI input devices, use the selector string returned by [**MidiInPort.GetDeviceSelector**](https://msdn.microsoft.com/library/windows/apps/dn894779).</span></span> <span data-ttu-id="0b7df-113">**FindAllAsync** gibt eine [**DeviceInformationCollection**](https://msdn.microsoft.com/library/windows/apps/br225395) zurück, die für jedes beim System registrierte MIDI-Eingabegerät eine **DeviceInformation** enthält.</span><span class="sxs-lookup"><span data-stu-id="0b7df-113">**FindAllAsync** returns a [**DeviceInformationCollection**](https://msdn.microsoft.com/library/windows/apps/br225395) that contains a **DeviceInformation** for each MIDI input device registered with the system.</span></span> <span data-ttu-id="0b7df-114">Wenn die zurückgegebene Sammlung keine Elemente enthält, sind keine MIDI-Eingabegeräte verfügbar.</span><span class="sxs-lookup"><span data-stu-id="0b7df-114">If the returned collection contains no items, then there are no available MIDI input devices.</span></span> <span data-ttu-id="0b7df-115">Wenn die Sammlung Elemente enthält, durchlaufen Sie die **DeviceInformation**-Objekte, und fügen Sie den Namen der einzelnen Geräte zu **ListBox** mit MIDI-Eingabegeräten hinzu.</span><span class="sxs-lookup"><span data-stu-id="0b7df-115">If there are items in the collection, loop through the **DeviceInformation** objects and add the name of each device to the MIDI input device **ListBox**.</span></span>

[!code-cs[EnumerateMidiInputDevices](./code/MIDIWin10/cs/MainPage.xaml.cs#SnippetEnumerateMidiInputDevices)]

<span data-ttu-id="0b7df-116">Das Aufzählen von MIDI-Ausgabegeräten funktioniert genau wie das Aufzählen von Eingabegeräten, bis auf die Ausnahme, dass Sie beim Aufrufen von **FindAllAsync** die von [**MidiOutPort.GetDeviceSelector**](https://msdn.microsoft.com/library/windows/apps/dn894845) zurückgegebene Auswahlzeichenfolge angeben müssen.</span><span class="sxs-lookup"><span data-stu-id="0b7df-116">Enumerating MIDI output devices works the exact same way as enumerating input devices, except that you should specify the selector string returned by [**MidiOutPort.GetDeviceSelector**](https://msdn.microsoft.com/library/windows/apps/dn894845) when calling **FindAllAsync**.</span></span>

[!code-cs[EnumerateMidiOutputDevices](./code/MIDIWin10/cs/MainPage.xaml.cs#SnippetEnumerateMidiOutputDevices)]



## <a name="create-a-device-watcher-helper-class"></a><span data-ttu-id="0b7df-117">Erstellen einer Geräteüberwachungselement-Hilfsklasse</span><span class="sxs-lookup"><span data-stu-id="0b7df-117">Create a device watcher helper class</span></span>

<span data-ttu-id="0b7df-118">Der [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/br225459)-Namespace enthält die [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/br225446)-Klasse, die eine App benachrichtigen kann, wenn Geräte hinzugefügt oder aus dem System entfernt werden, oder wenn die Informationen für ein Gerät aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="0b7df-118">The [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/br225459) namespace provides the [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/br225446) which can notify your app if devices are added or removed from the system, or if the information for a device is updated.</span></span> <span data-ttu-id="0b7df-119">Da MIDI-fähige Apps in der Regel sowohl an Eingabe- als auch an Ausgabegeräten interessiert sind, wird in diesem Beispiel eine Hilfsklasse erstellt, die das **DeviceWatcher**-Muster implementiert, sodass derselbe Code für MIDI-Eingabe- und -Ausgabegeräte verwendet werden kann, ohne dass eine Duplizierung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="0b7df-119">Since MIDI-enabled apps typically are interested in both input and output devices, this example creates a helper class that implements the **DeviceWatcher** pattern, so that the same code can be used for both MIDI input and MIDI output devices, without the need for duplication.</span></span>

<span data-ttu-id="0b7df-120">Fügen Sie dem Projekt eine neue Klasse hinzu, die als Geräteüberwachungselement dienen soll.</span><span class="sxs-lookup"><span data-stu-id="0b7df-120">Add a new class to your project to serve as your device watcher.</span></span> <span data-ttu-id="0b7df-121">In diesem Beispiel hat die Klasse den Namen **MyMidiDeviceWatcher**.</span><span class="sxs-lookup"><span data-stu-id="0b7df-121">In this example the class is named **MyMidiDeviceWatcher**.</span></span> <span data-ttu-id="0b7df-122">Der restliche Code in diesem Abschnitt dient zur Implementierung der Hilfsklasse.</span><span class="sxs-lookup"><span data-stu-id="0b7df-122">The rest of the code in this section is used to implement the helper class.</span></span>

<span data-ttu-id="0b7df-123">Fügen Sie der Klasse einige Membervariablen hinzu:</span><span class="sxs-lookup"><span data-stu-id="0b7df-123">Add some member variables to the class:</span></span>

-   <span data-ttu-id="0b7df-124">Ein [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/br225446)-Objekt, das Geräteänderungen überwacht.</span><span class="sxs-lookup"><span data-stu-id="0b7df-124">A [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/br225446) object that will monitor for device changes.</span></span>
-   <span data-ttu-id="0b7df-125">Eine Geräteauswahlzeichenfolge, die die Auswahlzeichenfolge des MIDI-Eingabeports für eine Instanz und die Auswahlzeichenfolge des MIDI-Ausgabeports für eine andere Instanz enthält.</span><span class="sxs-lookup"><span data-stu-id="0b7df-125">A device selector string that will contain the MIDI in port selector string for one instance and the MIDI out port selector string for another instance.</span></span>
-   <span data-ttu-id="0b7df-126">Ein [**ListBox**](https://msdn.microsoft.com/library/windows/apps/br242868)-Steuerelement, das mit den Namen der verfügbaren Geräte gefüllt wird.</span><span class="sxs-lookup"><span data-stu-id="0b7df-126">A [**ListBox**](https://msdn.microsoft.com/library/windows/apps/br242868) control that will be populated with the names of the available devices.</span></span>
-   <span data-ttu-id="0b7df-127">Einen [**CoreDispatcher**](https://msdn.microsoft.com/library/windows/apps/br208211), der erforderlich ist, um die UI von einem anderen Thread als dem UI-Thread aus zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="0b7df-127">A [**CoreDispatcher**](https://msdn.microsoft.com/library/windows/apps/br208211) that is required to update the UI from a thread other than the UI thread.</span></span>

[!code-cs[WatcherVariables](./code/MIDIWin10/cs/MyMidiDeviceWatcher.cs#SnippetWatcherVariables)]

<span data-ttu-id="0b7df-128">Fügen Sie eine [**DeviceInformationCollection**](https://msdn.microsoft.com/library/windows/apps/br225395)-Eigenschaft hinzu, mit der von außerhalb der Hilfsklasse auf die aktuelle Geräteliste zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="0b7df-128">Add a [**DeviceInformationCollection**](https://msdn.microsoft.com/library/windows/apps/br225395) property that is used to access the current list of devices from outside the helper class.</span></span>

[!code-cs[DeclareDeviceInformationCollection](./code/MIDIWin10/cs/MyMidiDeviceWatcher.cs#SnippetDeclareDeviceInformationCollection)]

<span data-ttu-id="0b7df-129">Im Klassenkonstruktor übergibt der Aufrufer die Auswahlzeichenfolge für das MIDI-Gerät, das **ListBox** zum Auflisten der Geräte und den zum Aktualisieren der Benutzeroberfläche benötigten **Dispatcher**.</span><span class="sxs-lookup"><span data-stu-id="0b7df-129">In class constructor, the caller passes in the MIDI device selector string, the **ListBox** for listing the devices, and the **Dispatcher** needed to update the UI.</span></span>

<span data-ttu-id="0b7df-130">Rufen Sie [**DeviceInformation.CreateWatcher**](https://msdn.microsoft.com/library/windows/apps/br225427) auf, um eine neue Instanz der **DeviceWatcher**-Klasse zu erstellen, und übergeben Sie die Auswahlzeichenfolge für das MIDI-Gerät.</span><span class="sxs-lookup"><span data-stu-id="0b7df-130">Call [**DeviceInformation.CreateWatcher**](https://msdn.microsoft.com/library/windows/apps/br225427) to create a new instance of the **DeviceWatcher** class, passing in the MIDI device selector string.</span></span>

<span data-ttu-id="0b7df-131">Registrieren Sie Handler für die Ereignishandler des Überwachungselements.</span><span class="sxs-lookup"><span data-stu-id="0b7df-131">Register handlers for the watcher's event handlers.</span></span>

[!code-cs[WatcherConstructor](./code/MIDIWin10/cs/MyMidiDeviceWatcher.cs#SnippetWatcherConstructor)]

<span data-ttu-id="0b7df-132">**DeviceWatcher** hat die folgenden Ereignisse:</span><span class="sxs-lookup"><span data-stu-id="0b7df-132">The **DeviceWatcher** has the following events:</span></span>

-   <span data-ttu-id="0b7df-133">[**Added**](https://msdn.microsoft.com/library/windows/apps/br225450): Wird ausgelöst, wenn dem System ein neues Gerät hinzugefügt wird</span><span class="sxs-lookup"><span data-stu-id="0b7df-133">[**Added**](https://msdn.microsoft.com/library/windows/apps/br225450) - Raised when a new device is added to the system.</span></span>
-   <span data-ttu-id="0b7df-134">[**Removed**](https://msdn.microsoft.com/library/windows/apps/br225453) - Wird ausgelöst, wenn ein Gerät aus dem System entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="0b7df-134">[**Removed**](https://msdn.microsoft.com/library/windows/apps/br225453) - Raised when a device is removed from the system.</span></span>
-   <span data-ttu-id="0b7df-135">[**Updated**](https://msdn.microsoft.com/library/windows/apps/br225458) - Wird ausgelöst, wenn die Informationen im Zusammenhang mit einem vorhandenen Gerät aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="0b7df-135">[**Updated**](https://msdn.microsoft.com/library/windows/apps/br225458) - Raised when the information associated with an existing device is updated.</span></span>
-   <span data-ttu-id="0b7df-136">[**EnumerationCompleted**](https://msdn.microsoft.com/library/windows/apps/br225451) - Wird ausgelöst, wenn das Überwachungselement die Aufzählung des angeforderten Gerätetyps abgeschlossen hat.</span><span class="sxs-lookup"><span data-stu-id="0b7df-136">[**EnumerationCompleted**](https://msdn.microsoft.com/library/windows/apps/br225451) - Raised when the watcher has completed its enumeration of the requested device type.</span></span>

<span data-ttu-id="0b7df-137">Im Ereignishandler für jedes dieser Ereignisse wird die **UpdateDevices**-Hilfsmethode aufgerufen, um das **ListBox** mit der aktuellen Geräteliste zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="0b7df-137">In the event handler for each of these events, a helper method, **UpdateDevices**, is called to update the **ListBox** with the current list of devices.</span></span> <span data-ttu-id="0b7df-138">Da **UpdateDevices** UI-Elemente aktualisiert und diese Ereignishandler nicht für den UI-Thread aufgerufen werden, muss jeder Aufruf von einem Aufruf von [**RunAsync**](https://msdn.microsoft.com/library/windows/apps/hh750317) umschlossen werden, wodurch der angegebene Code für den UI-Thread ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="0b7df-138">Because **UpdateDevices** updates UI elements and these event handlers are not called on the UI thread, each call must be wrapped in a call to [**RunAsync**](https://msdn.microsoft.com/library/windows/apps/hh750317), which causes the specified code to be run on the UI thread.</span></span>

[!code-cs[WatcherEventHandlers](./code/MIDIWin10/cs/MyMidiDeviceWatcher.cs#SnippetWatcherEventHandlers)]

<span data-ttu-id="0b7df-139">Die **UpdateDevices**-Hilfsmethode ruft [**DeviceInformation.FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/br225432) auf und aktualisiert das **ListBox** mit den Namen der zurückgegebenen Geräte, wie zuvor in diesem Artikel beschrieben.</span><span class="sxs-lookup"><span data-stu-id="0b7df-139">The **UpdateDevices** helper method calls [**DeviceInformation.FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/br225432) and updates the **ListBox** with the names of the returned devices as described previously in this article.</span></span>

[!code-cs[WatcherUpdateDevices](./code/MIDIWin10/cs/MyMidiDeviceWatcher.cs#SnippetWatcherUpdateDevices)]

<span data-ttu-id="0b7df-140">Fügen Sie Methoden zum Starten und Beenden des Überwachungselements hinzu. Verwenden Sie hierzu die [**Start**](https://msdn.microsoft.com/library/windows/apps/br225454)-Methode bzw. die [**Stop**](https://msdn.microsoft.com/library/windows/apps/br225456)-Methode des **DeviceWatcher**-Objekts.</span><span class="sxs-lookup"><span data-stu-id="0b7df-140">Add methods to start the watcher, using the **DeviceWatcher** object's [**Start**](https://msdn.microsoft.com/library/windows/apps/br225454) method, and to stop the watcher, using the [**Stop**](https://msdn.microsoft.com/library/windows/apps/br225456) method.</span></span>

[!code-cs[WatcherStopStart](./code/MIDIWin10/cs/MyMidiDeviceWatcher.cs#SnippetWatcherStopStart)]

<span data-ttu-id="0b7df-141">Geben Sie einen Destruktor an, um die Registrierung der Überwachungselement-Ereignishandler aufzuheben und das Geräteüberwachungselement auf NULL festzulegen.</span><span class="sxs-lookup"><span data-stu-id="0b7df-141">Provide a destructor to unregister the watcher event handlers and set the device watcher to null.</span></span>

[!code-cs[WatcherDestructor](./code/MIDIWin10/cs/MyMidiDeviceWatcher.cs#SnippetWatcherDestructor)]

## <a name="create-midi-ports-to-send-and-receive-messages"></a><span data-ttu-id="0b7df-142">Erstellen von MIDI-Ports zum Senden und Empfangen von Nachrichten</span><span class="sxs-lookup"><span data-stu-id="0b7df-142">Create MIDI ports to send and receive messages</span></span>

<span data-ttu-id="0b7df-143">Deklarieren Sie in der CodeBehind-Datei für die Seite Membervariablen für zwei Instanzen der **MyMidiDeviceWatcher**-Hilfsklasse, eine für Eingabe- und eine für Ausgabegeräte.</span><span class="sxs-lookup"><span data-stu-id="0b7df-143">In the code behind for your page, declare member variables to hold two instances of the **MyMidiDeviceWatcher** helper class, one for input devices and one for output devices.</span></span>

[!code-cs[DeclareDeviceWatchers](./code/MIDIWin10/cs/MainPage.xaml.cs#SnippetDeclareDeviceWatchers)]

<span data-ttu-id="0b7df-144">Erstellen Sie eine neue Instanz der Überwachungselement-Hilfsklassen, und übergeben Sie die Geräteauswahlzeichenfolge, das zu füllende **ListBox** und das **CoreDispatcher**-Objekt, auf das über die **Dispatcher**-Eigenschaft der Seite zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="0b7df-144">Create a new instance of the watcher helper classes, passing in the device selector string, the **ListBox** to be populated, and the **CoreDispatcher** object that can be accessed through the page's **Dispatcher** property.</span></span> <span data-ttu-id="0b7df-145">Rufen Sie dann die Methode zum Starten des **DeviceWatcher** jedes Objekts auf.</span><span class="sxs-lookup"><span data-stu-id="0b7df-145">Then, call the method to start each object's **DeviceWatcher**.</span></span>

<span data-ttu-id="0b7df-146">Kurz nach dem Starten der einzelnen **DeviceWatcher**-Elemente wird die Enumeration der aktuellen mit dem System verbundenen Geräte beendet, und das [**EnumerationCompleted**](https://msdn.microsoft.com/library/windows/apps/br225451)-Ereignis wird ausgelöst, das die Aktualisierung der einzelnen **ListBox**-Objekte mit den aktuellen MIDI-Geräten bewirkt.</span><span class="sxs-lookup"><span data-stu-id="0b7df-146">Shortly after each **DeviceWatcher** is started, it will finish enumerating the current devices connected to the system and raise its [**EnumerationCompleted**](https://msdn.microsoft.com/library/windows/apps/br225451) event, which will cause each **ListBox** to be updated with the current MIDI devices.</span></span>

[!code-cs[StartWatchers](./code/MIDIWin10/cs/MainPage.xaml.cs#SnippetStartWatchers)]

<span data-ttu-id="0b7df-147">Wenn der Benutzer ein Element im **ListBox** für MIDI-Eingabegeräte auswählt, wird das [**SelectionChanged**](https://msdn.microsoft.com/library/windows/apps/br209776)-Ereignis ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="0b7df-147">When the user selects an item in the MIDI input **ListBox**, the [**SelectionChanged**](https://msdn.microsoft.com/library/windows/apps/br209776) event is raised.</span></span> <span data-ttu-id="0b7df-148">Greifen Sie im Handler für dieses Ereignis auf die **DeviceInformationCollection**-Eigenschaft der Hilfsklasse zu, um die aktuelle Geräteliste abzurufen.</span><span class="sxs-lookup"><span data-stu-id="0b7df-148">In the handler for this event, access the **DeviceInformationCollection** property of the helper class to get the current list of devices.</span></span> <span data-ttu-id="0b7df-149">Wenn die Liste Einträge enthält, wählen Sie das **DeviceInformation**-Objekt aus, dessen Index dem **ListBox** des [**SelectedIndex**](https://msdn.microsoft.com/library/windows/apps/br209768)-Steuerelements entspricht.</span><span class="sxs-lookup"><span data-stu-id="0b7df-149">If there are entries in the list, select the **DeviceInformation** object with the index corresponding to the **ListBox** control's [**SelectedIndex**](https://msdn.microsoft.com/library/windows/apps/br209768).</span></span>

<span data-ttu-id="0b7df-150">Erstellen Sie das [**MidiInPort**](https://msdn.microsoft.com/library/windows/apps/dn894770)-Objekt, das das ausgewählte Eingabegerät darstellt, indem Sie [**MidiInPort.FromIdAsync**](https://msdn.microsoft.com/library/windows/apps/dn894776) aufrufen und die [**Id**](https://msdn.microsoft.com/library/windows/apps/br225437)-Eigenschaft des ausgewählten Geräts übergeben.</span><span class="sxs-lookup"><span data-stu-id="0b7df-150">Create the [**MidiInPort**](https://msdn.microsoft.com/library/windows/apps/dn894770) object representing the selected input device by calling [**MidiInPort.FromIdAsync**](https://msdn.microsoft.com/library/windows/apps/dn894776), passing in the [**Id**](https://msdn.microsoft.com/library/windows/apps/br225437) property of the selected device.</span></span>

<span data-ttu-id="0b7df-151">Registrieren Sie einen Handler für das [**MessageReceived**](https://msdn.microsoft.com/library/windows/apps/dn894781)-Ereignis, das ausgelöst wird, wenn eine MIDI-Nachricht über das angegebene Gerät empfangen wird.</span><span class="sxs-lookup"><span data-stu-id="0b7df-151">Register a handler for the [**MessageReceived**](https://msdn.microsoft.com/library/windows/apps/dn894781) event, which is raised whenever a MIDI message is received through the specified device.</span></span>

[!code-cs[DeclareMidiPorts](./code/MIDIWin10/cs/MainPage.xaml.cs#SnippetDeclareMidiPorts)]

[!code-cs[InPortSelectionChanged](./code/MIDIWin10/cs/MainPage.xaml.cs#SnippetInPortSelectionChanged)]

<span data-ttu-id="0b7df-152">Wenn der **MessageReceived**-Handler aufgerufen wird, ist die Nachricht in der [**Message**](https://msdn.microsoft.com/library/windows/apps/dn894783)-Eigenschaft von **MidiMessageReceivedEventArgs** enthalten.</span><span class="sxs-lookup"><span data-stu-id="0b7df-152">When the **MessageReceived** handler is called, the message is contained in the [**Message**](https://msdn.microsoft.com/library/windows/apps/dn894783) property of the **MidiMessageReceivedEventArgs**.</span></span> <span data-ttu-id="0b7df-153">Der [**Type**](https://msdn.microsoft.com/library/windows/apps/dn894726) des Nachrichtenobjekts ist ein Wert aus der [**MidiMessageType**](https://msdn.microsoft.com/library/windows/apps/dn894786)-Enumeration, der den Typ der empfangenen Nachricht angibt.</span><span class="sxs-lookup"><span data-stu-id="0b7df-153">The [**Type**](https://msdn.microsoft.com/library/windows/apps/dn894726) of the message object is a value from the [**MidiMessageType**](https://msdn.microsoft.com/library/windows/apps/dn894786) enumeration indicating the type of message that was received.</span></span> <span data-ttu-id="0b7df-154">Die Daten der Nachricht hängen vom Typ der Nachricht ab.</span><span class="sxs-lookup"><span data-stu-id="0b7df-154">The data of the message depends on the type of the message.</span></span> <span data-ttu-id="0b7df-155">In diesem Beispiel wird überprüft, ob die Nachricht ein Hinweis auf eine Nachricht ist; wenn dies der Fall ist, werden der MIDI-Kanal, der Hinweis und die Geschwindigkeit der Nachricht ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="0b7df-155">This example checks to see if the message is a note on message and, if so, outputs the midi channel, note, and velocity of the message.</span></span>

[!code-cs[MessageReceived](./code/MIDIWin10/cs/MainPage.xaml.cs#SnippetMessageReceived)]

<span data-ttu-id="0b7df-156">Der [**SelectionChanged**](https://msdn.microsoft.com/library/windows/apps/br209776)-Handler für das **ListBox** mit Ausgabegeräten funktioniert genauso wie der Handler für Eingabegeräte, mit der Ausnahme, dass kein Ereignishandler registriert ist.</span><span class="sxs-lookup"><span data-stu-id="0b7df-156">The [**SelectionChanged**](https://msdn.microsoft.com/library/windows/apps/br209776) handler for the output device **ListBox** works the same as the handler for input devices, except no event handler is registered.</span></span>

[!code-cs[OutPortSelectionChanged](./code/MIDIWin10/cs/MainPage.xaml.cs#SnippetOutPortSelectionChanged)]

<span data-ttu-id="0b7df-157">Nachdem das Ausgabegerät erstellt wurde, können Sie eine Nachricht senden, indem Sie eine neue [**IMidiMessage**](https://msdn.microsoft.com/library/windows/apps/dn911508) für den Typ der Nachricht erstellen, die Sie senden möchten.</span><span class="sxs-lookup"><span data-stu-id="0b7df-157">Once the output device is created, you can send a message by creating a new [**IMidiMessage**](https://msdn.microsoft.com/library/windows/apps/dn911508) for the type of message you want to send.</span></span> <span data-ttu-id="0b7df-158">In diesem Beispiel ist die Nachricht eine [**NoteOnMessage**](https://msdn.microsoft.com/library/windows/apps/dn894817).</span><span class="sxs-lookup"><span data-stu-id="0b7df-158">In this example, the message is a [**NoteOnMessage**](https://msdn.microsoft.com/library/windows/apps/dn894817).</span></span> <span data-ttu-id="0b7df-159">Die [**SendMessage**](https://msdn.microsoft.com/library/windows/apps/dn894730)-Methode des [**IMidiOutPort**](https://msdn.microsoft.com/library/windows/apps/dn894727)-Objekts wird zum Senden der Nachricht aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="0b7df-159">The [**SendMessage**](https://msdn.microsoft.com/library/windows/apps/dn894730) method of the [**IMidiOutPort**](https://msdn.microsoft.com/library/windows/apps/dn894727) object is called to send the message.</span></span>

[!code-cs[SendMessage](./code/MIDIWin10/cs/MainPage.xaml.cs#SnippetSendMessage)]

<span data-ttu-id="0b7df-160">Achten Sie beim Deaktivieren Ihrer App darauf, die App-Ressourcen zu bereinigen.</span><span class="sxs-lookup"><span data-stu-id="0b7df-160">When your app is deactivated, be sure to clean up your apps resources.</span></span> <span data-ttu-id="0b7df-161">Heben Sie die Registrierung der Ereignishandler auf, und legen Sie die Objekte für MIDI-Eingabeport und -Ausgabeport auf NULL fest.</span><span class="sxs-lookup"><span data-stu-id="0b7df-161">Unregister your event handlers and set the MIDI in port and out port objects to null.</span></span> <span data-ttu-id="0b7df-162">Beenden Sie die Geräteüberwachungselemente, und legen Sie sie auf NULL fest.</span><span class="sxs-lookup"><span data-stu-id="0b7df-162">Stop the device watchers and set them to null.</span></span>

[!code-cs[CleanUp](./code/MIDIWin10/cs/MainPage.xaml.cs#SnippetCleanUp)]

## <a name="using-the-built-in-windows-general-midi-synth"></a><span data-ttu-id="0b7df-163">Verwenden des integrierten Windows General MIDI-Synthesizers</span><span class="sxs-lookup"><span data-stu-id="0b7df-163">Using the built-in Windows General MIDI synth</span></span>

<span data-ttu-id="0b7df-164">Beim Aufzählen der MIDI-Ausgabegeräte mit dem oben beschriebenen Verfahren erkennt Ihre App ein MIDI-Gerät namens „Microsoft GS Wavetable Synth“.</span><span class="sxs-lookup"><span data-stu-id="0b7df-164">When you enumerate output MIDI devices using the technique described above, your app will discover a MIDI device called "Microsoft GS Wavetable Synth".</span></span> <span data-ttu-id="0b7df-165">Hierbei handelt es sich um einen integrierten General MIDI-Synthesizer, der von Ihrer App aus wiedergeben werden kann.</span><span class="sxs-lookup"><span data-stu-id="0b7df-165">This is a built-in General MIDI synthesizer that you can play from your app.</span></span> <span data-ttu-id="0b7df-166">Bei dem Versuch, einen MIDI-Out-Port für dieses Gerät zu erstellen, tritt jedoch ein Fehler auf, wenn die SDK-Erweiterung für den integrierten Synthesizer nicht in Ihrem Projekt enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="0b7df-166">However, attempting to create a MIDI outport to this device will fail unless you have included the SDK extension for the built-in synth in your project.</span></span>

**<span data-ttu-id="0b7df-167">So fügen Sie die General MIDI Synth SDK-Erweiterung in Ihrem App-Projekt hinzu</span><span class="sxs-lookup"><span data-stu-id="0b7df-167">To include the General MIDI Synth SDK extension in your app project</span></span>**

1.  <span data-ttu-id="0b7df-168">Klicken Sie im **Projektmappen-Explorer** unter Ihrem Projekt mit der rechten Maustaste auf **Verweise**, und wählen Sie **Verweis hinzufügen...** aus.</span><span class="sxs-lookup"><span data-stu-id="0b7df-168">In **Solution Explorer**, under your project, right-click **References** and select **Add reference...**</span></span>
2.  <span data-ttu-id="0b7df-169">Erweitern Sie den Knoten **Universelle Windows-App**.</span><span class="sxs-lookup"><span data-stu-id="0b7df-169">Expand the **Universal Windows** node.</span></span>
3.  <span data-ttu-id="0b7df-170">Wählen Sie **Erweiterungen**.</span><span class="sxs-lookup"><span data-stu-id="0b7df-170">Select **Extensions**.</span></span>
4.  <span data-ttu-id="0b7df-171">Wählen Sie aus der Liste der Erweiterungen **Microsoft General MIDI-DLS für universelle Windows-Apps**.</span><span class="sxs-lookup"><span data-stu-id="0b7df-171">From the list of extensions, select **Microsoft General MIDI DLS for Universal Windows Apps**.</span></span>
    > [!NOTE] 
    > <span data-ttu-id="0b7df-172">Wenn mehrere Versionen der Erweiterung vorhanden sind, müssen Sie die Version auswählen, die dem Ziel Ihrer App entspricht.</span><span class="sxs-lookup"><span data-stu-id="0b7df-172">If there are multiple versions of the extension, be sure to select the version that matches the target for your app.</span></span> <span data-ttu-id="0b7df-173">Auf der Registerkarte **Anwendung** der Projekteigenschaften können Sie sehen, welche SDK-Version Ihre App als Ziel aufweist.</span><span class="sxs-lookup"><span data-stu-id="0b7df-173">You can see which SDK version your app is targeting on the **Application** tab of the project Properties.</span></span>

 

 




