---
author: drewbatgit
ms.assetid: A7E0DA1E-535A-459E-9A35-68A4150EE9F5
description: Dieses Thema enthält eine Übersicht über das Hinzufügen der hardwarebasierten Verwaltung digitaler Rechte (Digital Rights Management, DRM) mit PlayReady zu Ihrer App für die Universelle Windows-Plattform (UWP).
title: Hardwarebasiertes DRM
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
keywords: Windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 6e898e342cb26ab86a74c30b5ced3dd3a9b68165
ms.sourcegitcommit: 144f5f127fc4fbd852f2f6780ef26054192d68fc
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/02/2018
ms.locfileid: "5978662"
---
# <a name="hardware-drm"></a><span data-ttu-id="45468-104">Hardwarebasiertes DRM</span><span class="sxs-lookup"><span data-stu-id="45468-104">Hardware DRM</span></span>


<span data-ttu-id="45468-105">Dieses Thema enthält eine Übersicht über das Hinzufügen der hardwarebasierten Verwaltung digitaler Rechte (Digital Rights Management, DRM) mit PlayReady zu Ihrer App für die Universelle Windows-Plattform (UWP).</span><span class="sxs-lookup"><span data-stu-id="45468-105">This topic provides an overview of how to add PlayReady hardware-based digital rights management (DRM) to your Universal Windows Platform (UWP) app.</span></span>

> [!NOTE] 
> <span data-ttu-id="45468-106">Hardwarebasierte PlayReadyDRM-Funktionalität wird auf einer Vielzahl von Geräten unterstützt, sowohl auf Windows-Geräten als auch Nicht-Windows-Geräten wie Fernsehern, Telefonen und Tablets.</span><span class="sxs-lookup"><span data-stu-id="45468-106">Hardware-based PlayReady DRM is supported on a multitude of devices, including both Windows and non-Windows devices such as TV sets, phones, and tablets.</span></span> <span data-ttu-id="45468-107">Damit ein Windows-Gerät PlayReady Hardware-DRM unterstützt, muss auf dem Gerät Windows10 ausgeführt werden und eine unterstützte Hardwarekonfiguration vorliegen.</span><span class="sxs-lookup"><span data-stu-id="45468-107">For a Windows device to support PlayReady Hardware DRM, it must be running Windows 10 and have a supported hardware configuration.</span></span>

<span data-ttu-id="45468-108">Inhaltsanbieter verwenden zunehmend hardwarebasierten Schutz, um die Berechtigung zur Wiedergabe vollständiger hochwertiger Inhalte in Apps zu gewähren.</span><span class="sxs-lookup"><span data-stu-id="45468-108">Increasingly, content providers are moving towards hardware-based protections for granting permission to play back full high value content in apps.</span></span> <span data-ttu-id="45468-109">Aus diesem Grund wurde PlayReady stabile Unterstützung für eine Hardwareimplementierung des kryptografischen Cores hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="45468-109">Robust support for a hardware implementation of the cryptographic core has been added to PlayReady to meet this need.</span></span> <span data-ttu-id="45468-110">Diese Unterstützung ermöglicht die sichere Wiedergabe von HD (1080p)- und Ultra-High-Definition (UHD)-Inhalten auf mehreren Geräteplattformen.</span><span class="sxs-lookup"><span data-stu-id="45468-110">This support enables secure playback of high definition (1080p) and ultra-high definition (UHD) content on multiple device platforms.</span></span> <span data-ttu-id="45468-111">Schlüsselmaterial (einschließlich privater Schlüssel, Inhaltsschlüssel und anderer Schlüsselmaterialien zum Ableiten oder Entsperren dieser Schlüssel) sowie entschlüsselte komprimierte und nicht komprimierte Videobeispiele werden durch Hardwaresicherheit geschützt.</span><span class="sxs-lookup"><span data-stu-id="45468-111">Key material (including private keys, content keys, and any other key material used to derive or unlock said keys), and decrypted compressed and uncompressed video samples are protected by leveraging hardware security.</span></span>

## <a name="windows-tee-implementation"></a><span data-ttu-id="45468-112">Windows-TEE-Implementierung</span><span class="sxs-lookup"><span data-stu-id="45468-112">Windows TEE implementation</span></span>

<span data-ttu-id="45468-113">Dieses Thema enthält eine kurze Übersicht darüber, wie Windows 10 der trusted Execution Environment (TEE) implementiert.</span><span class="sxs-lookup"><span data-stu-id="45468-113">This topic provides a brief overview of how Windows10 implements the trusted execution environment (TEE).</span></span>

<span data-ttu-id="45468-114">Auf die Details der Windows-TEE-Implementierung gehen wir in diesem Dokument nicht ein.</span><span class="sxs-lookup"><span data-stu-id="45468-114">The details of the Windows TEE implementation is out of scope for this document.</span></span> <span data-ttu-id="45468-115">Eine kurze Erläuterung des Unterschieds zwischen dem Standard-TEE-Port des Porting Kits und dem Windows-Port ist jedoch sinnvoll.</span><span class="sxs-lookup"><span data-stu-id="45468-115">However, a brief discussion of the difference between the standard porting kit TEE port and the Windows port will be beneficial.</span></span> <span data-ttu-id="45468-116">Windows implementiert die OEM-Proxyschicht und überträgt die serialisierten PRITEE-Funktionsaufrufe an einen Benutzermodustreiber im Windows Media Foundation-Subsystem.</span><span class="sxs-lookup"><span data-stu-id="45468-116">Windows implements the OEM proxy layer and transfers the serialized PRITEE functions calls to a user mode driver in the Windows Media Foundation subsystem.</span></span> <span data-ttu-id="45468-117">Diese werden letztendlich an den Windows-TrEE (Trusted Execution Environment)-Treiber oder den Grafiktreiber des OEMs weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="45468-117">This will eventually get routed to either the Windows TrEE (Trusted Execution Environment) driver or the OEM’s graphics driver.</span></span> <span data-ttu-id="45468-118">Die Details dieser Ansätze werden in diesem Dokument nicht erläutert.</span><span class="sxs-lookup"><span data-stu-id="45468-118">The details of either of these approaches is out of scope for this document.</span></span> <span data-ttu-id="45468-119">Das folgende Diagramm zeigt die allgemeine Komponenteninteraktion für den Windows-Port.</span><span class="sxs-lookup"><span data-stu-id="45468-119">The following diagram shows the general component interaction for the Windows port.</span></span> <span data-ttu-id="45468-120">Wenn Sie eine Windows PlayReady-TEE-Implementierung entwickeln möchten, können Sie sich an <WMLA@Microsoft.com> wenden.</span><span class="sxs-lookup"><span data-stu-id="45468-120">If you want to develop a Windows PlayReady TEE implementation, you can contact <WMLA@Microsoft.com>.</span></span>

![Diagramm der Windows-TEE-Komponenten](images/windowsteecomponentdiagram720.jpg)

## <a name="considerations-for-using-hardware-drm"></a><span data-ttu-id="45468-122">Überlegungen zur Verwendung des hardwarebasierten DRM</span><span class="sxs-lookup"><span data-stu-id="45468-122">Considerations for using hardware DRM</span></span>

<span data-ttu-id="45468-123">Dieses Thema enthält eine kurze Liste der Punkte, die Sie beim Entwickeln von Apps, die Hardware-DRM verwenden, berücksichtigen sollten.</span><span class="sxs-lookup"><span data-stu-id="45468-123">This topic provides a brief list of items that should be considered when developing apps designed to use hardware DRM.</span></span> <span data-ttu-id="45468-124">Wie unter [PlayReady DRM](playready-client-sdk.md#output-protection) erläutert, wird bei PlayReady HWDRM für Windows10 der gesamte Ausgabeschutz innerhalb der Windows-TEE-Implementierung erzwungen. Dies wirkt sich auf das Verhalten des Ausgabeschutzes aus:</span><span class="sxs-lookup"><span data-stu-id="45468-124">As explained in [PlayReady DRM](playready-client-sdk.md#output-protection), with PlayReady HWDRM for Windows 10, all output protections are enforced from within the Windows TEE implementation, which has some consequences on output protection behaviors:</span></span>

-   <span data-ttu-id="45468-125">**Unterstützung für Ausgabeschutzebene (Output Protection Level, OPL) 270 für nicht komprimierte digitale Videos:** PlayReady HWDRM für Windows10 unterstützt nicht die Abwärtsauflösung und erzwingt den Einsatz von HDCP.</span><span class="sxs-lookup"><span data-stu-id="45468-125">**Support for output protection level (OPL) for uncompressed digital video 270:** PlayReady HWDRM for Windows 10 doesn't support down-resolution and will enforce that HDCP is engaged.</span></span> <span data-ttu-id="45468-126">Es empfiehlt sich, bei HD-Inhalten für das HWDRM einen OPL-Wert zu verwenden, der größer als270 ist (dies ist jedoch nicht zwingend erforderlich).</span><span class="sxs-lookup"><span data-stu-id="45468-126">We recommend that high definition content for HWDRM have an OPL greater than 270 (although it is not required).</span></span> <span data-ttu-id="45468-127">Darüber hinaus empfiehlt Microsoft die Festlegung einer HDCP-Typeinschränkung in der Lizenz (HDCP-Version 2.2 unter Windows10).</span><span class="sxs-lookup"><span data-stu-id="45468-127">Additionally, we recommend that you set HDCP type restriction in the license (HDCP version 2.2 on Windows 10).</span></span>
-   **<span data-ttu-id="45468-128">Im Gegensatz zum Software-DRM (SWDRM) wird der Ausgabeschutz für alle Monitore basierend auf dem langsamsten Monitor erzwungen.</span><span class="sxs-lookup"><span data-stu-id="45468-128">Unlike software DRM (SWDRM), output protections are enforced on all monitors based on the least capable monitor.</span></span>** <span data-ttu-id="45468-129">Wenn der Benutzer beispielsweise zwei Monitore angeschlossen hat und nur einer davon HDCP unterstützt, ist die Wiedergabe nicht möglich, falls die Lizenz HDCP erfordert. Dies gilt auch dann, wenn der Inhalt nur auf dem Monitor gerendert wird, der HDCP unterstützt.</span><span class="sxs-lookup"><span data-stu-id="45468-129">For example, if the user has two monitors connected where one of the monitors supports HDCP and the other does not, playback will fail if the license requires HDCP even if the content is only being rendered on the monitor that supports HDCP.</span></span> <span data-ttu-id="45468-130">Beim Software-DRM wird der Inhalt wiedergegeben, solange das Rendering nur auf dem Monitor erfolgt, der HDCP unterstützt.</span><span class="sxs-lookup"><span data-stu-id="45468-130">In software DRM, content would play back as long as it is only being rendered on the monitor that supports HDCP.</span></span>
-   <span data-ttu-id="45468-131">**Es ist nicht garantiert, dass das HWDRM vom Client verwendet wird und dass das Verfahren sicher ist,** es sei denn, von den Inhaltsschlüsseln und -lizenzen werden die folgenden Bedingungen erfüllt:</span><span class="sxs-lookup"><span data-stu-id="45468-131">**HWDRM is not guaranteed to be used by the client and secure unless the following conditions are met** by the content keys and licenses:</span></span>
    -   <span data-ttu-id="45468-132">Die für den Videoinhaltsschlüssel verwendete Lizenz muss als Mindestsicherheitsstufe3.000 aufweisen.</span><span class="sxs-lookup"><span data-stu-id="45468-132">The license used for the video content key must have a Minimum Security level property of 3000.</span></span>
    -   <span data-ttu-id="45468-133">Audiodaten müssen mit einem anderen Inhaltsschlüssel verschlüsselt werden als Videodaten, und für die für Audiodaten verwendete Lizenz muss als Mindestsicherheitsstufe 2.000 festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="45468-133">Audio must be encrypted to a different content key than video, and the license used for the audio must have a Minimum Security level property of 2000.</span></span> <span data-ttu-id="45468-134">Alternativ können Audiodaten auch unverschlüsselt bleiben.</span><span class="sxs-lookup"><span data-stu-id="45468-134">Alternatively, audio could be left in the clear.</span></span>
    
<span data-ttu-id="45468-135">Darüber hinaus sollten Sie bei der Verwendung des HWDRM die folgenden Elemente berücksichtigen:</span><span class="sxs-lookup"><span data-stu-id="45468-135">Additionally, you should take the following items into consideration when using HWDRM:</span></span>

-   <span data-ttu-id="45468-136">Protected Media Process (PMP) wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="45468-136">Protected Media Process (PMP) is not supported.</span></span>
-   <span data-ttu-id="45468-137">Windows Media Video (auch bekannt als VC-1) wird nicht unterstützt (siehe [Außerkraftsetzen des Hardware-DRM](#override-hardware-drm)).</span><span class="sxs-lookup"><span data-stu-id="45468-137">Windows Media Video (also known as VC-1) is not supported (see [Override hardware DRM](#override-hardware-drm)).</span></span>
-   <span data-ttu-id="45468-138">Mehrere Grafikprozessoren (GPUs) werden für persistente Lizenzen nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="45468-138">Multiple graphics processing units (GPUs) are not supported for persistent licenses.</span></span>

<span data-ttu-id="45468-139">Sehen Sie sich das folgende Szenario an, bei dem es um die Behandlung von persistenten Lizenzen auf Computern mit mehreren GPUs geht:</span><span class="sxs-lookup"><span data-stu-id="45468-139">To handle persistent licenses on machines with multiple GPUs, consider the following scenario:</span></span>

1.  <span data-ttu-id="45468-140">Ein Kunde kauft einen neuen Computer mit einer integrierten Grafikkarte.</span><span class="sxs-lookup"><span data-stu-id="45468-140">A customer buys a new machine with an integrated graphics card.</span></span>
2.  <span data-ttu-id="45468-141">Der Kunde verwendet eine App, über die persistente Lizenzen beschafft werden, während Hardware-DRM verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="45468-141">The customer uses an app that acquires persistent licenses while using hardware DRM.</span></span>
3.  <span data-ttu-id="45468-142">Die persistente Lizenz ist jetzt an die Hardwareschlüssel dieser Grafikkarte gebunden.</span><span class="sxs-lookup"><span data-stu-id="45468-142">The persistent license is now bound to that graphics card’s hardware keys.</span></span>
4.  <span data-ttu-id="45468-143">Der Kunde installiert dann eine neue Grafikkarte.</span><span class="sxs-lookup"><span data-stu-id="45468-143">The customer then installs a new graphics card.</span></span>
5.  <span data-ttu-id="45468-144">Alle Lizenzen im Datenspeicher mit Hash (HDS) sind an die integrierte Grafikkarte gebunden, aber der Kunde möchte jetzt geschützte Inhalte mit der neu installierten Grafikkarte wiedergeben.</span><span class="sxs-lookup"><span data-stu-id="45468-144">All licenses in the hashed data store (HDS) are bound to the integrated video card, but the customer now wants to play back protected content using the newly-installed graphics card.</span></span>

<span data-ttu-id="45468-145">Um Fehler bei der Wiedergabe zu verhindern, weil die Lizenzen von der Hardware nicht entschlüsselt werden können, nutzt PlayReady für jede erkannte Grafikkarte einen separaten HDS.</span><span class="sxs-lookup"><span data-stu-id="45468-145">To prevent playback from failing because the licenses can’t be decrypted by the hardware, PlayReady uses a separate HDS for each graphics card that it encounters.</span></span> <span data-ttu-id="45468-146">Daher versucht PlayReady, eine Lizenz für ein Inhaltselement zu beschaffen, für das PlayReady normalerweise bereits über eine Lizenz verfügen würde (beim Software-DRM oder in einem Fall ohne Wechsel der Hardware müsste PlayReady also nicht erneut eine Lizenz beschaffen).</span><span class="sxs-lookup"><span data-stu-id="45468-146">This will cause PlayReady to attempt license acquisition for a piece of content where PlayReady would normally already have a license (that is, in the software DRM case or any case without a hardware change, PlayReady wouldn’t need to reacquire a license).</span></span> <span data-ttu-id="45468-147">Falls die App eine persistente Lizenz beschafft, während Hardware-DRM genutzt wird, muss Ihre App also den Fall behandeln können, in dem diese Lizenz praktisch als „verloren“ gilt, wenn der Endbenutzer eine Grafikkarte installiert (oder deinstalliert).</span><span class="sxs-lookup"><span data-stu-id="45468-147">Therefore, if the app acquires a persistent license while using hardware DRM, your app needs to be able to handle the case where that license is effectively “lost” if the end user installs (or uninstalls) a graphics card.</span></span> <span data-ttu-id="45468-148">Da dies ein seltener Fall ist, können Sie sich auch für die Bearbeitung der Supportanfragen entscheiden, wenn Inhalte nach einem Wechsel der Hardware nicht mehr wiedergegeben werden können, anstatt nach einer Lösung für den Umgang mit einem Hardwarewechsel im Client-/Servercode zu suchen.</span><span class="sxs-lookup"><span data-stu-id="45468-148">Because this is not a common scenario, you may decide to handle the support calls when the content no longer plays after a hardware change rather than figure out how to deal with a hardware change in the client/server code.</span></span>

## <a name="override-hardware-drm"></a><span data-ttu-id="45468-149">Außerkraftsetzen des Hardware-DRM</span><span class="sxs-lookup"><span data-stu-id="45468-149">Override hardware DRM</span></span>

<span data-ttu-id="45468-150">In diesem Abschnitt wird beschrieben, wie Sie das Hardware-DRM (HWDRM) außer Kraft setzen, wenn der wiederzugebende Inhalt das Hardware-DRM nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="45468-150">This section describes how to override hardware DRM (HWDRM) if the content to be played back does not support hardware DRM.</span></span>

<span data-ttu-id="45468-151">Das Hardware-DRM wird standardmäßig verwendet, wenn es vom System unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="45468-151">By default, hardware DRM is used if the system supports it.</span></span> <span data-ttu-id="45468-152">Manche Inhalte werden jedoch nicht vom Hardware-DRM unterstützt.</span><span class="sxs-lookup"><span data-stu-id="45468-152">However, some content is not supported in hardware DRM.</span></span> <span data-ttu-id="45468-153">Ein Beispiel hierfür sind Cocktail-Inhalte.</span><span class="sxs-lookup"><span data-stu-id="45468-153">One example of this is Cocktail content.</span></span> <span data-ttu-id="45468-154">Ein weiteres Beispiel sind Inhalte, die einen anderen Videocodec als H.264 und HEVC verwenden.</span><span class="sxs-lookup"><span data-stu-id="45468-154">Another example is any content that uses a video codec other than H.264 and HEVC.</span></span> <span data-ttu-id="45468-155">HEVC-Inhalte sind ebenfalls ein Beispiel, da HEVC nicht von allen Hardware-DRM-Typen unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="45468-155">Another example is HEVC content, as some hardware DRM will support HEVC and some will not.</span></span> <span data-ttu-id="45468-156">Wenn Sie einen bestimmten Inhalt wiedergeben möchten, der auf dem betreffenden System nicht vom Hardware-DRM unterstützt wird, können Sie das Hardware-DRM daher außer Kraft setzen.</span><span class="sxs-lookup"><span data-stu-id="45468-156">Therefore, if you want to play a piece of content and hardware DRM doesn’t support it on the system in question, you may want to opt out of hardware DRM.</span></span>

<span data-ttu-id="45468-157">Das folgende Beispiel zeigt, wie Sie das Hardware-DRM außer Kraft setzen.</span><span class="sxs-lookup"><span data-stu-id="45468-157">The following example shows how to opt-out of hardware DRM.</span></span> <span data-ttu-id="45468-158">Diesen Schritt müssen Sie nur vor dem Wechseln ausführen.</span><span class="sxs-lookup"><span data-stu-id="45468-158">You only need to do this before you switch.</span></span> <span data-ttu-id="45468-159">Stellen Sie außerdem sicher, dass kein PlayReady-Objekt im Speicher vorhanden ist. Andernfalls kann es zu unerwartetem Verhalten kommen.</span><span class="sxs-lookup"><span data-stu-id="45468-159">Also, make sure you don’t have any PlayReady object in memory, otherwise behavior is undefined.</span></span>

```js
var applicationData = Windows.Storage.ApplicationData.current;
var localSettings = applicationData.localSettings.createContainer("PlayReady", Windows.Storage.ApplicationDataCreateDisposition.always);
localSettings.values["SoftwareOverride"] = 1;
```

<span data-ttu-id="45468-160">Wenn Sie das Hardware-DRM wieder verwenden möchten, legen Sie den **SoftwareOverride**-Wert auf **0** fest.</span><span class="sxs-lookup"><span data-stu-id="45468-160">To switch back to hardware DRM, set the **SoftwareOverride** value to **0**.</span></span>

<span data-ttu-id="45468-161">**MediaProtectionManager** muss für jede Medienwiedergabe wie folgt festgelegt werden:</span><span class="sxs-lookup"><span data-stu-id="45468-161">For every media playback, you need to set **MediaProtectionManager** to:</span></span>

```js
mediaProtectionManager.properties["Windows.Media.Protection.UseSoftwareProtectionLayer"] = true;
```

<span data-ttu-id="45468-162">Die beste Möglichkeit, festzustellen, ob Sie befinden sich im Hardware-DRM oder Software-DRM wird C:\\Users\\ betrachten&lt;Benutzername&gt;\\AppData\\Local\\Packages\\&lt;Anwendungsnamen&gt;\\LocalCache\\PlayReady\\\*</span><span class="sxs-lookup"><span data-stu-id="45468-162">The best way to tell if you are in hardware DRM or software DRM is to look at C:\\Users\\&lt;username&gt;\\AppData\\Local\\Packages\\&lt;application name&gt;\\LocalCache\\PlayReady\\\*</span></span>

-   <span data-ttu-id="45468-163">Wenn dort die Datei „mspr.hds“ vorhanden ist, verwenden Sie ein softwarebasiertes DRM.</span><span class="sxs-lookup"><span data-stu-id="45468-163">If there is an mspr.hds file, you are in software DRM.</span></span>
-   <span data-ttu-id="45468-164">Ist eine weitere Datei mit der Erweiterung „\*.hds“ vorhanden, ist Hardware-DRM aktiv.</span><span class="sxs-lookup"><span data-stu-id="45468-164">If you have another \*.hds file, you are in hardware DRM.</span></span>
-   <span data-ttu-id="45468-165">Sie können auch den gesamten PlayReady-Ordner löschen und den Test wiederholen.</span><span class="sxs-lookup"><span data-stu-id="45468-165">You can delete the entire PlayReady folder and retry your test as well.</span></span>

## <a name="detect-the-type-of-hardware-drm"></a><span data-ttu-id="45468-166">Erkennen des Hardware-DRM-Typs</span><span class="sxs-lookup"><span data-stu-id="45468-166">Detect the type of hardware DRM</span></span>

<span data-ttu-id="45468-167">In diesem Abschnitt wird beschrieben, wie Sie den auf dem System unterstützten Hardware-DRM-Typ erkennen.</span><span class="sxs-lookup"><span data-stu-id="45468-167">This section describes how to detect what type of hardware DRM is supported on the system.</span></span>

<span data-ttu-id="45468-168">Sie können die [**PlayReadyStatics.CheckSupportedHardware**](https://msdn.microsoft.com/library/windows/apps/dn986441)-Methode verwenden, um festzustellen, ob das System ein bestimmtes Hardware-DRM-Feature unterstützt.</span><span class="sxs-lookup"><span data-stu-id="45468-168">You can use the [**PlayReadyStatics.CheckSupportedHardware**](https://msdn.microsoft.com/library/windows/apps/dn986441) method to determine whether the system supports a specific hardware DRM feature.</span></span> <span data-ttu-id="45468-169">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="45468-169">For example:</span></span>

```csharp
bool isFeatureSupported = PlayReadyStatics.CheckSupportedHardware(PlayReadyHardwareDRMFeatures.HEVC);
```

<span data-ttu-id="45468-170">Die [**PlayReadyHardwareDRMFeatures**](https://msdn.microsoft.com/library/windows/apps/dn986265)-Enumeration enthält die Liste gültiger Werte für das Hardware-DRM-Feature, die abgefragt werden können.</span><span class="sxs-lookup"><span data-stu-id="45468-170">The [**PlayReadyHardwareDRMFeatures**](https://msdn.microsoft.com/library/windows/apps/dn986265) enumeration contains the valid list of hardware DRM feature values that can be queried.</span></span> <span data-ttu-id="45468-171">Um festzustellen, ob das Hardware-DRM unterstützt wird, verwenden Sie den **HardwareDRM**-Member in der Abfrage.</span><span class="sxs-lookup"><span data-stu-id="45468-171">To determine if hardware DRM is supported, use the **HardwareDRM** member in the query.</span></span> <span data-ttu-id="45468-172">Um festzustellen, ob die Hardware den High Efficiency Video Coding (HEVC)/H.265-Codec unterstützt, verwenden Sie den **HEVC**-Member in der Abfrage.</span><span class="sxs-lookup"><span data-stu-id="45468-172">To determine if the hardware supports the High Efficiency Video Coding (HEVC)/H.265 codec, use the **HEVC** member in the query.</span></span>

<span data-ttu-id="45468-173">Sie können auch die [**PlayReadyStatics.PlayReadyCertificateSecurityLevel**](https://msdn.microsoft.com/library/windows/apps/windows.media.protection.playready.playreadystatics.playreadycertificatesecuritylevel.aspx)-Eigenschaft zum Abrufen der Sicherheitsstufe des Clientzertifikats verwenden, um festzustellen, ob das Hardware-DRM unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="45468-173">You can also use the [**PlayReadyStatics.PlayReadyCertificateSecurityLevel**](https://msdn.microsoft.com/library/windows/apps/windows.media.protection.playready.playreadystatics.playreadycertificatesecuritylevel.aspx) property to get the security level of the client certificate to determine if hardware DRM is supported.</span></span> <span data-ttu-id="45468-174">Sofern die zurückgegebene Zertifikatssicherheitsstufe nicht größer oder gleich 3000 ist, ist entweder der Client nicht individualisiert oder bereitgestellt (in diesem Fall gibt die Eigenschaft 0 zurück) oder das Hardware-DRM wird nicht verwendet (in diesem Fall gibt die Eigenschaft einen Wert unter 3000 zurück).</span><span class="sxs-lookup"><span data-stu-id="45468-174">Unless the returned certificate security level is greater than or equal to 3000, either the client is not individualized or provisioned (in which case this property returns 0) or hardware DRM is not in use (in which case this property returns a value that is less than 3000).</span></span>

### <a name="detecting-support-for-aes128cbc-hardware-drm"></a><span data-ttu-id="45468-175">Erkenn des Supports für AES128CBC Hardware-DRM</span><span class="sxs-lookup"><span data-stu-id="45468-175">Detecting support for AES128CBC hardware DRM</span></span>
<span data-ttu-id="45468-176">Ab Windows10, Version 1709, können Sie die Unterstützung für AES128CBC Hardware-Verschlüsselung auf einem Gerät durch Aufrufen von **[PlayReadyStatics.CheckSupportedHardware](https://msdn.microsoft.com/library/windows/apps/dn986441)** und Angeben des Enumerationswerts [\*\*PlayReadyHardwareDRMFeatures.Aes128Cbc \*\*](https://msdn.microsoft.com/library/windows/apps/dn986265) erkennen.</span><span class="sxs-lookup"><span data-stu-id="45468-176">Starting with Windows 10, version 1709, you can detect support for AES128CBC hardware encryption on a device by calling **[PlayReadyStatics.CheckSupportedHardware](https://msdn.microsoft.com/library/windows/apps/dn986441)** and specifying the enumeration value [**PlayReadyHardwareDRMFeatures.Aes128Cbc**](https://msdn.microsoft.com/library/windows/apps/dn986265).</span></span> <span data-ttu-id="45468-177">In früheren Versionen von Windows10 verursachte die Angabe dieses Werts eine Ausnahme.</span><span class="sxs-lookup"><span data-stu-id="45468-177">On previous versions of Windows 10, specifying this value will cause an exception to be thrown.</span></span> <span data-ttu-id="45468-178">Aus diesem Grund sollten Sie das Vorhandensein des Enumerationswerts überprüfen, indem Sie **[ApiInformation.IsApiContractPresent](https://docs.microsoft.com/uwp/api/windows.foundation.metadata.apiinformation.isapicontractpresent)** aufrufen und die wichtige Vertragsversion 5 vor dem Aufruf von \*\*CheckSupportedHardware \*\* angeben.</span><span class="sxs-lookup"><span data-stu-id="45468-178">For this reason, you should check for the presence of the enumeration value by calling **[ApiInformation.IsApiContractPresent](https://docs.microsoft.com/uwp/api/windows.foundation.metadata.apiinformation.isapicontractpresent)** and specifying major contract version 5 before calling **CheckSupportedHardware**.</span></span>

```csharp
bool supportsAes128Cbc = ApiInformation.IsApiContractPresent("Windows.Foundation.UniversalApiContract", 5);

if (supportsAes128Cbc)
{
    supportsAes128Cbc = PlayReadyStatics.CheckSupportedHardware(PlayReadyHardwareDRMFeatures.Aes128Cbc);
}
```

## <a name="see-also"></a><span data-ttu-id="45468-179">Weitere Informationen:</span><span class="sxs-lookup"><span data-stu-id="45468-179">See also</span></span>
- [<span data-ttu-id="45468-180">PlayReady DRM</span><span class="sxs-lookup"><span data-stu-id="45468-180">PlayReady DRM</span></span>](playready-client-sdk.md)
