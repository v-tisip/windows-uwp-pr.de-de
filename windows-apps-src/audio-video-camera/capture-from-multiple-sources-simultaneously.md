---
ms.assetid: ''
description: Dieser Artikel zeigt Ihnen, wie Sie Videos aus mehreren Quellen gleichzeitig in eine einzige Datei mit mehreren eingebetteten Videospuren aufnehmen können.
title: Erfassen von mehreren Quellen mit MediaFrameSourceGroup
ms.date: 09/12/2017
ms.topic: article
keywords: Windows10, Uwp, Aufnahme, Video
ms.localizationpriority: medium
ms.openlocfilehash: a654739490043b9f821e7906fa8cf9e3e7259fed
ms.sourcegitcommit: b4c502d69a13340f6e3c887aa3c26ef2aeee9cee
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/03/2018
ms.locfileid: "8472361"
---
# <a name="capture-from-multiple-sources-using-mediaframesourcegroup"></a><span data-ttu-id="69d07-104">Erfassen von mehreren Quellen mit MediaFrameSourceGroup</span><span class="sxs-lookup"><span data-stu-id="69d07-104">Capture from multiple sources using MediaFrameSourceGroup</span></span>

<span data-ttu-id="69d07-105">Dieser Artikel zeigt Ihnen, wie Sie Videos aus mehreren Quellen gleichzeitig in eine einzige Datei mit mehreren eingebetteten Videospuren aufnehmen können.</span><span class="sxs-lookup"><span data-stu-id="69d07-105">This article shows you how to capture video from multiple sources simultaneously to a single file with multiple embedded video tracks.</span></span> <span data-ttu-id="69d07-106">Ab RS3 können Sie mehrere **[VideoStreamDescriptor](https://docs.microsoft.com/uwp/api/windows.media.core.videostreamdescriptor)**-Objekte für ein einzelnes **[MediaEncodingProfile](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile)** angeben.</span><span class="sxs-lookup"><span data-stu-id="69d07-106">Starting with RS3, you can specify multiple **[VideoStreamDescriptor](https://docs.microsoft.com/uwp/api/windows.media.core.videostreamdescriptor)** objects for a single **[MediaEncodingProfile](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile)**.</span></span> <span data-ttu-id="69d07-107">Dadurch können Sie mehrere Streams gleichzeitig in eine einzige Datei kodieren.</span><span class="sxs-lookup"><span data-stu-id="69d07-107">This enables you to encode multiple streams simultaneously to a single file.</span></span> <span data-ttu-id="69d07-108">Die Videoströme, die in diesem Vorgang kodiert werden, müssen in einer einzigen **[MediaFrameSourceGroup](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframesourcegroup)** enthalten sein, die eine Reihe von Kameras auf dem aktuellen Gerät angibt, die gleichzeitig verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="69d07-108">The video streams that are encoded in this operation must be included in a single **[MediaFrameSourceGroup](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframesourcegroup)** which specifies a set of cameras on the current device that can be used at the same time.</span></span> 

<span data-ttu-id="69d07-109">Weitere Informationen zur Verwendung von **[MediaFrameSourceGroup](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframesourcegroup)** in Verbindung mit der **[MediaFrameReader](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframereader)**-Klasse zur Aktivierung von Echtzeit-Szenarien für Computer-Vision, die mehrere Kameras verwenden, finden Sie unter [Verarbeiten von Medienframes mit MediaFrameReader](process-media-frames-with-mediaframereader.md).</span><span class="sxs-lookup"><span data-stu-id="69d07-109">For information on using **[MediaFrameSourceGroup](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframesourcegroup)** with the **[MediaFrameReader](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframereader)** class to enable real-time computer vision scenarios that use multiple cameras, see [Process media frames with MediaFrameReader](process-media-frames-with-mediaframereader.md).</span></span>

<span data-ttu-id="69d07-110">Der Rest dieses Artikels wird Sie durch die Schritte der Aufnahme von Videos von zwei Farbkameras zu einer einzigen Datei mit mehreren Videospuren führen.</span><span class="sxs-lookup"><span data-stu-id="69d07-110">The rest of this article will walk you through the steps of recording video from two color cameras to a single file with multiple video tracks.</span></span>

## <a name="find-available-sensor-groups"></a><span data-ttu-id="69d07-111">Verfügbare Sensorgruppen finden</span><span class="sxs-lookup"><span data-stu-id="69d07-111">Find available sensor groups</span></span>
<span data-ttu-id="69d07-112">Eine **MediaFrameSourceGroup** stellt eine Sammlung von Bildquellen, typischerweise Kameras, dar, auf die gleichzeitig zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="69d07-112">A **MediaFrameSourceGroup** represents a collection of frame sources, typically cameras, that can be accessed simulataneously.</span></span> <span data-ttu-id="69d07-113">Der erste Schritt in diesem Beispiel besteht also darin, die Liste der verfügbaren Bildquellengruppen zu erhalten und eine zu finden, die die notwendigen Kameras für das Szenario enthält, das in diesem Fall zwei Farbkameras benötigt.</span><span class="sxs-lookup"><span data-stu-id="69d07-113">The set of available frame source groups is different for each device, so the first step in this example is to get the list of available frame source groups and finding one that contains the necessary cameras for the scenario, which in this case requires two color cameras.</span></span>

<span data-ttu-id="69d07-114">Die Methode **[MediaFrameSourceGroup.FindAllAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframesourcegroup.FindAllAsync)** liefert alle auf dem aktuellen Gerät verfügbaren Quellgruppen zurück.</span><span class="sxs-lookup"><span data-stu-id="69d07-114">The **[MediaFrameSourceGroup.FindAllAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframesourcegroup.FindAllAsync)** method returns all source groups available on the current device.</span></span> <span data-ttu-id="69d07-115">Jede zurückgegebene **MediaFrameSourceGroup** hat eine Liste von **[MediaFrameSourceInfo](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframesourceinfo)**-Objekten, die jede Frame-Quelle in der Gruppe beschreibt.</span><span class="sxs-lookup"><span data-stu-id="69d07-115">Each returned **MediaFrameSourceGroup** has a list of **[MediaFrameSourceInfo](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframesourceinfo)** objects that describes each frame source in the group.</span></span> <span data-ttu-id="69d07-116">Eine Linq-Abfrage wird verwendet, um eine Quellengruppe zu finden, die zwei Farbkameras enthält, eine auf der Vorderseite und eine auf der Rückseite.</span><span class="sxs-lookup"><span data-stu-id="69d07-116">A Linq query is used to find a source group that contains two color cameras, one on the front panel and one on the back.</span></span> <span data-ttu-id="69d07-117">Für jede Farbkamera wird ein anonymes Objekt zurückgegeben, das die ausgewählte **MediaFrameSourceGroup** und die **MediaFrameSourceInfo** enthält.</span><span class="sxs-lookup"><span data-stu-id="69d07-117">An anonymous object is returned that contains the selected **MediaFrameSourceGroup** and the **MediaFrameSourceInfo** for each color camera.</span></span> <span data-ttu-id="69d07-118">Anstatt den Linq-Syntax zu verwenden, können Sie jede Gruppe und dann jede **MediaFrameSourceInfo** durchgehen, um nach einer Gruppe zu suchen, die Ihren Anforderungen entspricht.</span><span class="sxs-lookup"><span data-stu-id="69d07-118">Instead of using Linq syntax, you could instead loop through each group, and then each **MediaFrameSourceInfo** to look for a group that meets your requirements.</span></span>

<span data-ttu-id="69d07-119">Beachten Sie, dass nicht jedes Gerät eine Quellgruppe mit zwei Farbkameras enthält. Überprüfen Sie daher, ob eine Quellgruppe gefunden wurde, bevor Sie versuchen, ein Video aufzunehmen.</span><span class="sxs-lookup"><span data-stu-id="69d07-119">Note that not every device will contain a source group that contains two color cameras, so you should check to make sure that a source group was found before trying to capture video.</span></span>

[!code-cs[MultiRecordFindSensorGroups](./code/SimpleCameraPreview_Win10/cs/MainPage.MultiRecord.xaml.cs#SnippetMultiRecordFindSensorGroups)]

## <a name="initialize-the-mediacapture-object"></a><span data-ttu-id="69d07-120">Initialisieren des MediaCapture-Objekts</span><span class="sxs-lookup"><span data-stu-id="69d07-120">Initialize the MediaCapture object</span></span>
<span data-ttu-id="69d07-121">Die **[MediaCapture](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapture)**-Klasse ist die primäre Klasse, die für die meisten Audio-, Video- und Foto-Capture-Operationen in UWP-Anwendungen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="69d07-121">The **[MediaCapture](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapture)** class is the primary class that is used for most audio, video, and photo capture operations in UWP apps.</span></span> <span data-ttu-id="69d07-122">Initialisieren Sie das Objekt durch Aufruf von **[InitializeAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapture.InitializeAsync)**, indem Sie ein **[MediaCaptureInitializationSettings](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacaptureinitializationsettings)**-Objekt übergeben, das Initialisierungsparameter enthält.</span><span class="sxs-lookup"><span data-stu-id="69d07-122">Initialize the object by calling **[InitializeAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapture.InitializeAsync)**, passing in a **[MediaCaptureInitializationSettings](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacaptureinitializationsettings)** object that contains initialization parameters.</span></span> <span data-ttu-id="69d07-123">In diesem Beispiel ist die einzige angegebene Einstellung die **[SourceGroup](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacaptureinitializationsettings.SourceGroup)**-Eigenschaft, die auf die **MediaFrameSourceGroup** gesetzt ist, die im vorherigen Code-Beispiel abgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="69d07-123">In this example, the only specified setting is the **[SourceGroup](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacaptureinitializationsettings.SourceGroup)** property, which is set to the **MediaFrameSourceGroup** that was retrieved in the previous code example.</span></span>

<span data-ttu-id="69d07-124">Weitere Informationen zu anderen Operationen, die Sie mit **MediaCapture** und anderen UWP-Funktionen für das Capturing von Medien durchführen können, finden Sie unter [Kamera](camera.md).</span><span class="sxs-lookup"><span data-stu-id="69d07-124">For information on other operations you can perform with **MediaCapture** and other UWP app features for capturing media, see [Camera](camera.md).</span></span>

[!code-cs[MultiRecordInitMediaCapture](./code/SimpleCameraPreview_Win10/cs/MainPage.MultiRecord.xaml.cs#SnippetMultiRecordInitMediaCapture)]

## <a name="create-a-mediaencodingprofile"></a><span data-ttu-id="69d07-125">Erstellen eines MediaEncodingProfiles</span><span class="sxs-lookup"><span data-stu-id="69d07-125">Create a MediaEncodingProfile</span></span>
<span data-ttu-id="69d07-126">Die Klasse **[MediaEncodingProfil](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile)** gibt der Pipeline für die Medienerfassung an, wie Audio- und Video-Captures beim Schreiben in eine Datei kodiert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="69d07-126">The **[MediaEncodingProfile](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile)** class tells the media capture pipeline how captured audio and video should be encoded as they are written to a file.</span></span> <span data-ttu-id="69d07-127">Für typische Capture- und Transcoding-Szenarien bietet diese Klasse eine Reihe statischer Methoden zur Erstellung gemeinsamer Profile, wie **[CreateAvi](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createavi)** und **[CreateMp3](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createmp3)**.</span><span class="sxs-lookup"><span data-stu-id="69d07-127">For typical capture and transcoding scenarios, this class provides a set of static methods for creating common profiles, like **[CreateAvi](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createavi)** and **[CreateMp3](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createmp3)**.</span></span> <span data-ttu-id="69d07-128">Für dieses Beispiel wird manuell ein Kodierungsprofil mit einem Mpeg4-Container und H264-Videokodierung erstellt.</span><span class="sxs-lookup"><span data-stu-id="69d07-128">For this example, an encoding profile is manually created using an Mpeg4 container and H264 video encoding.</span></span> <span data-ttu-id="69d07-129">Die Videocodierungseinstellungen werden über ein **[VideoEncodingProperties](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.videoencodingproperties)**-Objekt festgelegt.</span><span class="sxs-lookup"><span data-stu-id="69d07-129">Video encoding settings are specified using a **[VideoEncodingProperties](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.videoencodingproperties)** object.</span></span> <span data-ttu-id="69d07-130">Für jede in diesem Szenario verwendete Farbkamera wird ein **VideoStreamDescriptor**-Objekt konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="69d07-130">For each color camera used in this scenario, a **VideoStreamDescriptor** object is configured.</span></span> <span data-ttu-id="69d07-131">Der Deskriptor wird mit dem **VideoEncodingProperties**-Objekt konstruiert, das die Kodierung angibt.</span><span class="sxs-lookup"><span data-stu-id="69d07-131">The descriptor is constructed with the **VideoEncodingProperties** object specifying the encoding.</span></span> <span data-ttu-id="69d07-132">Die **[Label](https://docs.microsoft.com/uwp/api/windows.media.core.videostreamdescriptor.Label)**-Eigenschaft des **VideoStreamDescriptors** muss auf die ID der Medien-Frame-Quelle gesetzt werden, die in den Stream aufgenommen wird.</span><span class="sxs-lookup"><span data-stu-id="69d07-132">The **[Label](https://docs.microsoft.com/uwp/api/windows.media.core.videostreamdescriptor.Label)** property of the **VideoStreamDescriptor** must be set to the ID of the media frame source that will be captured to the stream.</span></span> <span data-ttu-id="69d07-133">So weiß die Capture-Pipeline, welche Stream-Deskriptor- und Encoding-Eigenschaften für jede Kamera verwendet werden sollten.</span><span class="sxs-lookup"><span data-stu-id="69d07-133">This is how the capture pipeline knows which stream descriptor and encoding properties should be used for each camera.</span></span> <span data-ttu-id="69d07-134">Die ID der Bildquelle wird von den **[MediaFrameSourceInfo](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframesourceinfo)**-Objekten, die im vorherigen Abschnitt gefunden wurden, angezeigt, wenn eine **MediaFrameSourceGroup** ausgewählt wurde.</span><span class="sxs-lookup"><span data-stu-id="69d07-134">The ID of the frame source is exposed by the **[MediaFrameSourceInfo](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframesourceinfo)** objects that were found in the previous section, when a **MediaFrameSourceGroup** was selected.</span></span>


<span data-ttu-id="69d07-135">Ab Windows 10, Version 1709, können Sie mehrere Encoding-Eigenschaften auf einem **MediaEncodingProfil** einstellen, indem Sie **[SetVideoTracks](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.setvideotracks)** aufrufen.</span><span class="sxs-lookup"><span data-stu-id="69d07-135">Starting with Windows 10, version 1709, you can set multiple encoding properties on a **MediaEncodingProfile** by calling **[SetVideoTracks](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.setvideotracks)**.</span></span> <span data-ttu-id="69d07-136">Sie können die Liste der Videostream-Deskriptoren abrufen, indem Sie **[GetVideoTracks](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.GetVideoTracks)** aufrufen.</span><span class="sxs-lookup"><span data-stu-id="69d07-136">You can retrieve the list of video stream descriptors by calling **[GetVideoTracks](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.GetVideoTracks)**.</span></span> <span data-ttu-id="69d07-137">Beachten Sie, dass beim Festlegen der **[Video](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.Video)**-Eigenschaft, die einen einzelnen Stream-Deskriptor speichert, die von Ihnen über das Aufrufen von **SetVideoTracks** festgelegt Deskriptor-Liste durch eine Liste mit dem einzelnen angegebenen Deskriptor ersetzt wird.</span><span class="sxs-lookup"><span data-stu-id="69d07-137">Note that if you set the **[Video](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.Video)** property, which stores a single stream descriptor, the descriptor list you set by calling **SetVideoTracks** will be replaced with a list containing the single descriptor you specified.</span></span>


[!code-cs[MultiRecordMediaEncodingProfile](./code/SimpleCameraPreview_Win10/cs/MainPage.MultiRecord.xaml.cs#SnippetMultiRecordMediaEncodingProfile)]

### <a name="encode-timed-metadata-in-media-files"></a><span data-ttu-id="69d07-138">Codieren von zeitgesteuerten Metadaten in Mediendateien</span><span class="sxs-lookup"><span data-stu-id="69d07-138">Encode timed metadata in media files</span></span>

<span data-ttu-id="69d07-139">Ab Windows10, Version 1803, können Sie neben Audio und Video ebenfalls Metadaten in einer Mediendatei codieren, dessen Datenformat unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="69d07-139">Starting with Windows 10, version 1803, in addition to audio and video you can encode timed metadata into a media file for which the data format is supported.</span></span> <span data-ttu-id="69d07-140">GoPro-Metadaten (Gpmd) können z.B. in MP4-Dateien gespeichert werden, um den geografischen Standort, der mit einem Videostream korrelierte ist, zu vermitteln.</span><span class="sxs-lookup"><span data-stu-id="69d07-140">For example, GoPro metadata (gpmd) can be stored in MP4 files to convey the geographic location correlated with a video stream.</span></span> 

<span data-ttu-id="69d07-141">Die Codierung von Metadaten verwendet ein Muster, das parallel zur Codierung von Audio oder Video ist.</span><span class="sxs-lookup"><span data-stu-id="69d07-141">Encoding metadata uses a pattern that is parallel to encoding audio or video.</span></span> <span data-ttu-id="69d07-142">Die [**TimedMetadataEncodingProperties**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.timedmetadataencodingproperties)-Klasse beschreibt den Typ, Untertyp und die Codierungseigenschaften der Metadaten, wie **VideoEncodingProperties** für Videos.</span><span class="sxs-lookup"><span data-stu-id="69d07-142">The [**TimedMetadataEncodingProperties**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.timedmetadataencodingproperties) class describes the type, subtype and encoding properties of the metadata, like **VideoEncodingProperties** does for video.</span></span> <span data-ttu-id="69d07-143">Der [**TimedMetadataStreamDescriptor**](https://docs.microsoft.com/uwp/api/windows.media.core.timedmetadatastreamdescriptor) identifiziert einen Metadatenstream, wie **VideoStreamDescriptor** für Videostreams.</span><span class="sxs-lookup"><span data-stu-id="69d07-143">The [**TimedMetadataStreamDescriptor**](https://docs.microsoft.com/uwp/api/windows.media.core.timedmetadatastreamdescriptor) identifies a metadata stream, just as the **VideoStreamDescriptor** does for video streams.</span></span>  

<span data-ttu-id="69d07-144">Das folgende Beispiel zeigt, wie Sie ein **TimedMetadataStreamDescriptor**-Objekt initialisieren.</span><span class="sxs-lookup"><span data-stu-id="69d07-144">The following example shows how to intialize a **TimedMetadataStreamDescriptor** object.</span></span> <span data-ttu-id="69d07-145">Zuerst wird ein **TimedMetadataEncodingProperties**-Objekt erstellt, und der **Untertyp** auf GUID festgelegt, der den Typ der Metadaten identifiziert, die in den Datenstrom aufgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="69d07-145">First, a **TimedMetadataEncodingProperties** object is created and the **Subtype** is set to a GUID that identifies the type of metadata that will be included in the stream.</span></span> <span data-ttu-id="69d07-146">Dieses Beispiel verwendet GUID für GoPro-Metadaten (Gpmd).</span><span class="sxs-lookup"><span data-stu-id="69d07-146">This example uses the GUID for GoPro metadata (gpmd).</span></span> <span data-ttu-id="69d07-147">Die [**SetFormatUserData**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.timedmetadataencodingproperties.setformatuserdata)-Methode wird aufgerufen, um formatspezifische Daten festzulegen.</span><span class="sxs-lookup"><span data-stu-id="69d07-147">The [**SetFormatUserData**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.timedmetadataencodingproperties.setformatuserdata) method is called to set format-specific data.</span></span> <span data-ttu-id="69d07-148">Für MP4-Dateien werden die formatspezifischen Daten im Feld SampleDescription (Stsd) gespeichert.</span><span class="sxs-lookup"><span data-stu-id="69d07-148">For MP4 files, the format-specific data is stored in the SampleDescription box (stsd).</span></span> <span data-ttu-id="69d07-149">Als Nächstes wird ein neuer **TimedMetadataStreamDescriptor** aus den Codierungseigenschaften erstellt.</span><span class="sxs-lookup"><span data-stu-id="69d07-149">Next, a new **TimedMetadataStreamDescriptor** is created from the encoding properties.</span></span> <span data-ttu-id="69d07-150">Die Eigenschaften **Bezeichnung** und **Name** werden festgelegt, um den Stream, der codiert werden muss, zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="69d07-150">The **Label** and **Name** properties are set to identify the stream to be encoded.</span></span> 

[!code-cs[GetStreamDescriptor](./code/SimpleCameraPreview_Win10/cs/MainPage.MultiRecord.xaml.cs#SnippetGetStreamDescriptor)]

<span data-ttu-id="69d07-151">Rufen Sie [MediaEncodingProfile.SetTimedMetadataTracks](**https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.settimedmetadatatracks**) auf, um den Metadatenstream-Deskriptor dem Codierungsprofil hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="69d07-151">Call [MediaEncodingProfile.SetTimedMetadataTracks](**https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.settimedmetadatatracks**) to add the metadata stream descriptor to the encoding profile.</span></span> <span data-ttu-id="69d07-152">Das folgende Beispiel zeigt eine Hilfsmethode, die zwei Videostream-Deskriptoren akzeptiert, einen Audiodatenstrom-Deskriptor, und einen zeitgesteuerten Metadatenstream-Deskriptor und ein **MediaEncodingProfile** zurückgibt, das zum Codieren von Streams verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="69d07-152">The following example shows a helper method that takes two video stream descriptors, one audio stream descriptor, and one timed metadata stream descriptor and returns a **MediaEncodingProfile** that can be used to encode the streams.</span></span>

[!code-cs[GetMediaEncodingProfile](./code/SimpleCameraPreview_Win10/cs/MainPage.MultiRecord.xaml.cs#SnippetGetMediaEncodingProfile)]

## <a name="record-using-the-multi-stream-mediaencodingprofile"></a><span data-ttu-id="69d07-153">Aufzeichnung mit dem Multi-Stream-MediaEncodingProfil</span><span class="sxs-lookup"><span data-stu-id="69d07-153">Record using the multi-stream MediaEncodingProfile</span></span>
<span data-ttu-id="69d07-154">Der letzte Schritt in diesem Beispiel ist es, die Videoaufnahme zu initiieren, indem Sie **[StartRecordToStorageFileAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapture.startrecordtostoragefileasync)** aufrufen, **StorageFile** übergeben, das in die das aufgenommene Medium geschrieben wird, und das **MediaEncodingProfil**, das im vorherigen Code-Beispiel erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="69d07-154">The final step in this example is to initiate video capture by calling **[StartRecordToStorageFileAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapture.startrecordtostoragefileasync)**, passing in the **StorageFile** to which the captured media is written, and the **MediaEncodingProfile** created in the previous code example.</span></span> <span data-ttu-id="69d07-155">Nach einigen Sekunden Wartezeit wird die Aufnahme mit einem Anruf bei **[StopRecordAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapture.StopRecordAsync)** gestoppt.</span><span class="sxs-lookup"><span data-stu-id="69d07-155">After waiting a few seconds, the recording is stopped with a call to **[StopRecordAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapture.StopRecordAsync)**.</span></span>

[!code-cs[MultiRecordToFile](./code/SimpleCameraPreview_Win10/cs/MainPage.MultiRecord.xaml.cs#SnippetMultiRecordToFile)]

<span data-ttu-id="69d07-156">Wenn der Vorgang abgeschlossen ist, wurde eine Videodatei erstellt, die das von jeder Kamera aufgenommene Video als separaten Stream in der Datei enthält.</span><span class="sxs-lookup"><span data-stu-id="69d07-156">When the operation is complete, a video file will have been created that contains the video captured from each camera encoded as a separate stream within the file.</span></span> <span data-ttu-id="69d07-157">Informationen zur Wiedergabe von Mediendateien mit mehreren Videospuren finden Sie unter [Medienelemente, Wiedergabelisten und Tracks](media-playback-with-mediasource.md).</span><span class="sxs-lookup"><span data-stu-id="69d07-157">For information on playing media files containing multiple video tracks, see [Media items, playlists, and tracks](media-playback-with-mediasource.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="69d07-158">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="69d07-158">Related topics</span></span>

* [<span data-ttu-id="69d07-159">Kamera</span><span class="sxs-lookup"><span data-stu-id="69d07-159">Camera</span></span>](camera.md)
* [<span data-ttu-id="69d07-160">Allgemeine Foto-, Video- und Audioaufnahme mit MediaCapture</span><span class="sxs-lookup"><span data-stu-id="69d07-160">Basic photo, video, and audio capture with MediaCapture</span></span>](basic-photo-video-and-audio-capture-with-MediaCapture.md)
* [<span data-ttu-id="69d07-161">Verarbeiten von Medienframes mit „MediaFrameReader“</span><span class="sxs-lookup"><span data-stu-id="69d07-161">Process media frames with MediaFrameReader</span></span>](process-media-frames-with-mediaframereader.md)
* [<span data-ttu-id="69d07-162">Medienelemente, Wiedergabelisten und Titel</span><span class="sxs-lookup"><span data-stu-id="69d07-162">Media items, playlists, and tracks</span></span>](media-playback-with-mediasource.md)


 

 




