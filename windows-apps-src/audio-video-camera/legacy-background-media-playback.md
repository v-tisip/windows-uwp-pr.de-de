---
author: drewbatgit
ms.assetid: 3848cd72-eccd-400e-93ff-13649cd81b6c
description: Dieser Artikel bietet Unterstützung für Apps mit dem Legacy-Hintergrundmedienmodell für die Wiedergabe und gibt Anleitungen für die Migration in das neue Modell.
title: Medienwiedergabe im Hintergrund (Legacy)
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 319343a06eeb49fc4ec0ca2fcd340f655654f718
ms.sourcegitcommit: 144f5f127fc4fbd852f2f6780ef26054192d68fc
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/02/2018
ms.locfileid: "5988570"
---
# <a name="legacy-background-media-playback"></a><span data-ttu-id="957da-104">Medienwiedergabe im Hintergrund (Legacy)</span><span class="sxs-lookup"><span data-stu-id="957da-104">Legacy background media playback</span></span>


<span data-ttu-id="957da-105">In diesem Artikel wird das ältere Modell zur Unterstützung von Hintergrundaudio für Ihre UWP-App beschrieben, das zwei Prozesse umfasst.</span><span class="sxs-lookup"><span data-stu-id="957da-105">This article describes the legacy, two-process model for adding background audio support to your UWP app.</span></span> <span data-ttu-id="957da-106">Ab Windows 10, Version 1607, wird ein Modell für die Audiowiedergabe im Hintergrund verwendet, das nur einen Prozess umfasst und sehr viel einfacher zu implementieren ist.</span><span class="sxs-lookup"><span data-stu-id="957da-106">Starting with Windows 10, version 1607, a single-process model for background audio that is much simpler to implement.</span></span> <span data-ttu-id="957da-107">Weitere Informationen zu den aktuellen Empfehlungen für Hintergrundaudio finden Sie unter [Wiedergeben von Medien im Hintergrund](background-audio.md).</span><span class="sxs-lookup"><span data-stu-id="957da-107">For more information on the current recommendations for background audio, see [Play media in the background](background-audio.md).</span></span> <span data-ttu-id="957da-108">Dieser Artikel bietet Hilfe bei der Unterstützung von Apps, die unter Verwendung des älteren Modells mit zwei Prozessen entwickelt wurden.</span><span class="sxs-lookup"><span data-stu-id="957da-108">This article is intended to provide support for apps that are have already been developed using the legacy two-process model.</span></span>

> [!NOTE]
> <span data-ttu-id="957da-109">Ab Windows, Version 1703, **BackgroundMediaPlayer** ist veraltet und möglicherweise nicht in zukünftigen Versionen von Windows zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="957da-109">Starting with Windows, version 1703, **BackgroundMediaPlayer** is deprecated and may not be available in future versions of Windows.</span></span>

## <a name="background-audio-architecture"></a><span data-ttu-id="957da-110">Architektur von Hintergrundaudio</span><span class="sxs-lookup"><span data-stu-id="957da-110">Background audio architecture</span></span>

<span data-ttu-id="957da-111">Eine App für die Hintergrundwiedergabe besteht aus zwei Prozessen.</span><span class="sxs-lookup"><span data-stu-id="957da-111">An app performing background playback consists of two processes.</span></span> <span data-ttu-id="957da-112">Der erste Prozess ist die Haupt-App, die die App-UI und Clientlogik enthält und im Vordergrund ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="957da-112">The first process is the main app, which contains the app UI and client logic, running in the foreground.</span></span> <span data-ttu-id="957da-113">Der zweite Prozess ist die Wiedergabeaufgabe im Hintergrund, die [**IBackgroundTask**](https://msdn.microsoft.com/library/windows/apps/br224794) wie alle Hintergrundaufgaben von UWP-Apps implementiert.</span><span class="sxs-lookup"><span data-stu-id="957da-113">The second process is the background playback task, which implements [**IBackgroundTask**](https://msdn.microsoft.com/library/windows/apps/br224794) like all UWP app background tasks.</span></span> <span data-ttu-id="957da-114">Die Hintergrundaufgabe enthält die Logik für die Audiowiedergabe und die Hintergrunddienste.</span><span class="sxs-lookup"><span data-stu-id="957da-114">The background task contains the audio playback logic and background services.</span></span> <span data-ttu-id="957da-115">Die Hintergrundaufgabe kommuniziert mit dem System über die Steuerelemente für den Systemmedientransport.</span><span class="sxs-lookup"><span data-stu-id="957da-115">The background task communicates with the system through the System Media Transport Controls.</span></span>

<span data-ttu-id="957da-116">Das folgende Diagramm ist eine Übersicht des Systemdesigns.</span><span class="sxs-lookup"><span data-stu-id="957da-116">The following diagram is an overview of how the system is designed.</span></span>

![Architektur der Windows10-Hintergrundaudio](images/backround-audio-architecture-win10.png)
## <a name="mediaplayer"></a><span data-ttu-id="957da-118">Media Player</span><span class="sxs-lookup"><span data-stu-id="957da-118">MediaPlayer</span></span>

<span data-ttu-id="957da-119">Der [**Windows.Media.Playback**](https://msdn.microsoft.com/library/windows/apps/dn640562)-Namespace enthält APIs, die zum Wiedergeben von Audio im Hintergrund verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="957da-119">The [**Windows.Media.Playback**](https://msdn.microsoft.com/library/windows/apps/dn640562) namespace contains APIs used to play audio in the background.</span></span> <span data-ttu-id="957da-120">Es gibt eine einzige Instanz von [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/dn652535) pro App, über die die Wiedergabe erfolgt.</span><span class="sxs-lookup"><span data-stu-id="957da-120">There is a single instance of [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/dn652535) per app through which playback occurs.</span></span> <span data-ttu-id="957da-121">Ihre Hintergrundaudio-App ruft Methoden auf und legt Eigenschaften für die **MediaPlayer**-Klasse zum Festlegen des aktuellen Titels, zum Starten der Wiedergabe, zum Anhalten, zum schnellen Vor- und Zurückspulen usw. fest.</span><span class="sxs-lookup"><span data-stu-id="957da-121">Your background audio app calls methods and sets properties on the **MediaPlayer** class to set the current track, start playback, pause, fast forward, rewind, and so on.</span></span> <span data-ttu-id="957da-122">Der Zugriff auf die Media Player-Objektinstanz erfolgt immer über die [**BackgroundMediaPlayer.Current**](https://msdn.microsoft.com/library/windows/apps/dn652528)-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="957da-122">The media player object instance is always accessed through the [**BackgroundMediaPlayer.Current**](https://msdn.microsoft.com/library/windows/apps/dn652528) property.</span></span>

## <a name="mediaplayer-proxy-and-stub"></a><span data-ttu-id="957da-123">MediaPlayer-Proxy und -Stub</span><span class="sxs-lookup"><span data-stu-id="957da-123">MediaPlayer Proxy and Stub</span></span>

<span data-ttu-id="957da-124">Wenn auf **BackgroundMediaPlayer.Current** über den Hintergrundprozess der App zugegriffen wird, wird die **MediaPlayer**-Instanz im Hintergrundaufgabenhost aktiviert und kann direkt bearbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="957da-124">When **BackgroundMediaPlayer.Current** is accessed from your app's background process, the **MediaPlayer** instance is activated in the background task host and can be manipulated directly.</span></span>

<span data-ttu-id="957da-125">Wenn auf **BackgroundMediaPlayer.Current** über die Vordergrund-App zugegriffen wird, ist die zurückgegebene **MediaPlayer**-Instanz tatsächlich ein Proxy, der mit einem Stub im Hintergrundprozess kommuniziert.</span><span class="sxs-lookup"><span data-stu-id="957da-125">When **BackgroundMediaPlayer.Current** is accessed from the foreground application, the **MediaPlayer** instance that is returned is actually a proxy that communicates with a stub in the background process.</span></span> <span data-ttu-id="957da-126">Dieser Stub kommuniziert mit der tatsächlichen **MediaPlayer**-Instanz, die auch im Hintergrundprozess gehostet wird.</span><span class="sxs-lookup"><span data-stu-id="957da-126">This stub communicates with the actual **MediaPlayer** instance, which is also hosted in the background process.</span></span>

<span data-ttu-id="957da-127">Sowohl der Vordergrund- als auch der Hintergrundprozess können auf den Großteil der Eigenschaften der **MediaPlayer**-Instanz zugreifen, mit Ausnahme von [**MediaPlayer.Source**](https://msdn.microsoft.com/library/windows/apps/dn987010) und [**MediaPlayer.SystemMediaTransportControls**](https://msdn.microsoft.com/library/windows/apps/dn926635), auf die nur über den Hintergrundprozess zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="957da-127">Both the foreground and background process can access most of the properties of the **MediaPlayer** instance, with the exception of [**MediaPlayer.Source**](https://msdn.microsoft.com/library/windows/apps/dn987010) and [**MediaPlayer.SystemMediaTransportControls**](https://msdn.microsoft.com/library/windows/apps/dn926635) which can only be accessed from the background process.</span></span> <span data-ttu-id="957da-128">Die Vordergrund-App und der Hintergrundprozess können beide Benachrichtigungen über medienspezifische Ereignisse wie [**MediaOpened**](https://msdn.microsoft.com/library/windows/apps/dn652609), [**MediaEnded**](https://msdn.microsoft.com/library/windows/apps/dn652603) und [**MediaFailed**](https://msdn.microsoft.com/library/windows/apps/dn652606) empfangen.</span><span class="sxs-lookup"><span data-stu-id="957da-128">The foreground app and the background process can both receive notifications of media-specific events like [**MediaOpened**](https://msdn.microsoft.com/library/windows/apps/dn652609), [**MediaEnded**](https://msdn.microsoft.com/library/windows/apps/dn652603), and [**MediaFailed**](https://msdn.microsoft.com/library/windows/apps/dn652606).</span></span>

## <a name="playback-lists"></a><span data-ttu-id="957da-129">Wiedergabelisten</span><span class="sxs-lookup"><span data-stu-id="957da-129">Playback Lists</span></span>

<span data-ttu-id="957da-130">Ein häufiges Szenario für Hintergrundaudioanwendungen besteht darin, mehrere Elemente in einer Zeile wiederzugeben.</span><span class="sxs-lookup"><span data-stu-id="957da-130">A common scenario for background audio applications is to play multiple items in a row.</span></span> <span data-ttu-id="957da-131">Dies kann am einfachsten im Hintergrundprozess mithilfe eines [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/dn930955)-Objekts erreicht werden, das als Quelle für den **MediaPlayer** festgelegt werden kann, indem es der [**MediaPlayer.Source**](https://msdn.microsoft.com/library/windows/apps/dn987010)-Eigenschaft zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="957da-131">This is most easily accomplished in your background process by using a [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/dn930955) object, which can be set as a source on the **MediaPlayer** by assigning it to the [**MediaPlayer.Source**](https://msdn.microsoft.com/library/windows/apps/dn987010) property.</span></span>

<span data-ttu-id="957da-132">Es ist nicht möglich, über den Vordergrundprozess, der im Hintergrundprozess festgelegt wurde, auf eine **MediaPlaybackList** zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="957da-132">It is not possible to access a **MediaPlaybackList** from the foreground process that was set in the background process.</span></span>

## <a name="system-media-transport-controls"></a><span data-ttu-id="957da-133">Steuerelemente für den Systemmedientransport</span><span class="sxs-lookup"><span data-stu-id="957da-133">System Media Transport Controls</span></span>

<span data-ttu-id="957da-134">Ein Benutzer kann beispielsweise mithilfe von Bluetooth-Geräten, SmartGlass und die Steuerelemente für den Systemmedientransport die Audiowiedergabe ohne direkte Verwendung der Benutzeroberfläche der App steuern.</span><span class="sxs-lookup"><span data-stu-id="957da-134">A user may control audio playback without directly using your app's UI through means such as Bluetooth devices, SmartGlass, and the System Media Transport Controls.</span></span> <span data-ttu-id="957da-135">Die Hintergrundaufgabe verwendet die [**SystemMediaTransportControls**](https://msdn.microsoft.com/library/windows/apps/dn278677)-Klasse, um diese vom Benutzer initiierten Systemereignisse zu abonnieren.</span><span class="sxs-lookup"><span data-stu-id="957da-135">Your background task uses the [**SystemMediaTransportControls**](https://msdn.microsoft.com/library/windows/apps/dn278677) class to subscribe to these user-initiated system events.</span></span>

<span data-ttu-id="957da-136">Zum Abrufen einer **SystemMediaTransportControls**-Instanz aus dem Hintergrundprozess verwenden Sie die [**MediaPlayer.SystemMediaTransportControls**](https://msdn.microsoft.com/library/windows/apps/dn926635)-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="957da-136">To get a **SystemMediaTransportControls** instance from within the background process, use the [**MediaPlayer.SystemMediaTransportControls**](https://msdn.microsoft.com/library/windows/apps/dn926635) property.</span></span> <span data-ttu-id="957da-137">Vordergrund-Apps rufen eine Instanz der Klasse mithilfe von [**SystemMediaTransportControls.GetForCurrentView**](https://msdn.microsoft.com/library/windows/apps/dn278708) auf. Die zurückgegebene Instanz ist jedoch eine Vordergrundinstanz, die nicht mit der Hintergrundaufgabe im Zusammenhang steht.</span><span class="sxs-lookup"><span data-stu-id="957da-137">Foreground apps get an instance of the class by calling [**SystemMediaTransportControls.GetForCurrentView**](https://msdn.microsoft.com/library/windows/apps/dn278708), but the instance returned is a foreground-only instance that does not relate to the background task.</span></span>

## <a name="sending-messages-between-tasks"></a><span data-ttu-id="957da-138">Senden von Nachrichten zwischen Aufgaben</span><span class="sxs-lookup"><span data-stu-id="957da-138">Sending Messages Between Tasks</span></span>

<span data-ttu-id="957da-139">Unter Umständen möchten Sie, dass die beiden Prozesse einer Hintergrund-App miteinander kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="957da-139">There are times when you will want to communicate between the two processes of a background audio app.</span></span> <span data-ttu-id="957da-140">Beispielsweise kann es sein, dass die Hintergrundaufgabe die Vordergrundaufgabe benachrichtigen soll, wenn die Wiedergabe eines neuen Titels gestartet wird. Außerdem soll dann der Songtitel an die Vordergrundaufgabe gesendet werden, damit er auf dem Bildschirm angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="957da-140">For example, you might want the background task to notify the foreground task when a new track starts playing, and then send the new song title to the foreground task to display on the screen.</span></span>

<span data-ttu-id="957da-141">Über einen einfachen Kommunikationsmechanismus werden Ereignisse sowohl im Vordergrundprozess als auch im Hintergrundprozess ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="957da-141">A simple communication mechanism raises events in both the foreground and background processes.</span></span> <span data-ttu-id="957da-142">Die Methoden [**SendMessageToForeground**](https://msdn.microsoft.com/library/windows/apps/dn652533) und [**SendMessageToBackground**](https://msdn.microsoft.com/library/windows/apps/dn652532) rufen jeweils Ereignisse in dem entsprechenden Prozess auf.</span><span class="sxs-lookup"><span data-stu-id="957da-142">The [**SendMessageToForeground**](https://msdn.microsoft.com/library/windows/apps/dn652533) and [**SendMessageToBackground**](https://msdn.microsoft.com/library/windows/apps/dn652532) methods each invoke events in the corresponding process.</span></span> <span data-ttu-id="957da-143">Nachrichten können durch Abonnieren der Ereignisse [**MessageReceivedFromBackground**](https://msdn.microsoft.com/library/windows/apps/dn652530) und [**MessageReceivedFromForeground**](https://msdn.microsoft.com/library/windows/apps/dn652531) empfangen werden.</span><span class="sxs-lookup"><span data-stu-id="957da-143">Messages can be received by subscribing to the [**MessageReceivedFromBackground**](https://msdn.microsoft.com/library/windows/apps/dn652530) and [**MessageReceivedFromForeground**](https://msdn.microsoft.com/library/windows/apps/dn652531) events.</span></span>

<span data-ttu-id="957da-144">Daten können als Argument an die Methoden zum Senden einer Nachricht übergeben werden, die dann an die „MessageReceived“-Ereignishandler übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="957da-144">Data can be passed as an argument to the send message methods that are then passed into the message received event handlers.</span></span> <span data-ttu-id="957da-145">Übergeben Sie Daten mit der [**ValueSet**](https://msdn.microsoft.com/library/windows/apps/dn636131)-Klasse.</span><span class="sxs-lookup"><span data-stu-id="957da-145">Pass data using the [**ValueSet**](https://msdn.microsoft.com/library/windows/apps/dn636131) class.</span></span> <span data-ttu-id="957da-146">Bei dieser Klasse handelt es sich um ein Wörterbuch, das eine Zeichenfolge als Schlüssel und andere Werttypen als Werte enthält.</span><span class="sxs-lookup"><span data-stu-id="957da-146">This class is a dictionary that contains a string as a key and other value types as values.</span></span> <span data-ttu-id="957da-147">Sie können einfache Werttypen übergeben, z.B. ganze Zahlen, Zeichenfolgen und booleschen Werte.</span><span class="sxs-lookup"><span data-stu-id="957da-147">You can pass simple value types such as integers, strings, and booleans.</span></span>

## <a name="background-task-life-cycle"></a><span data-ttu-id="957da-148">Lebenszyklus von Hintergrundaufgaben</span><span class="sxs-lookup"><span data-stu-id="957da-148">Background Task Life Cycle</span></span>

<span data-ttu-id="957da-149">Die Lebensdauer einer Hintergrundaufgabe ist eng mit dem aktuellen Wiedergabestatus Ihrer App verknüpft.</span><span class="sxs-lookup"><span data-stu-id="957da-149">The lifetime of a background task is closely tied to your app's current playback status.</span></span> <span data-ttu-id="957da-150">Wenn der Benutzer die Audiowiedergabe beispielsweise anhält, kann das System die App je nach den Umständen beenden oder abbrechen.</span><span class="sxs-lookup"><span data-stu-id="957da-150">For example, when the user pauses audio playback, the system may terminate or cancel your app depending on the circumstances.</span></span> <span data-ttu-id="957da-151">Das System kann die Hintergrundaufgabe nach einer gewissen Zeit ohne Audiowiedergabe automatisch beenden.</span><span class="sxs-lookup"><span data-stu-id="957da-151">After a period of time without audio playback, the system may automatically shut down the background task.</span></span>

<span data-ttu-id="957da-152">Die [**IBackgroundTask.Run**](https://msdn.microsoft.com/library/windows/apps/br224811)-Methode wird gestartet, wenn die App das erste Mal auf [**BackgroundMediaPlayer.Current**](https://msdn.microsoft.com/library/windows/apps/dn652528) im Code zugreift, der in der Vordergrund-App ausgeführt wird, oder wenn Sie einen Handler für das [**MessageReceivedFromBackground**](https://msdn.microsoft.com/library/windows/apps/dn652530)-Ereignis registrieren, je nachdem, welcher Fall zuerst eintritt.</span><span class="sxs-lookup"><span data-stu-id="957da-152">The [**IBackgroundTask.Run**](https://msdn.microsoft.com/library/windows/apps/br224811) method is called the first time your app accesses either [**BackgroundMediaPlayer.Current**](https://msdn.microsoft.com/library/windows/apps/dn652528) from code running in the foreground app or when you register a handler for the [**MessageReceivedFromBackground**](https://msdn.microsoft.com/library/windows/apps/dn652530) event, whichever occurs first.</span></span> <span data-ttu-id="957da-153">Es wird empfohlen, dass Sie sich für den „MessageReceived“-Ereignishandler registrieren, bevor Sie **BackgroundMediaPlayer.Current** das erste Mal aufrufen, damit die Vordergrund-App keine Nachrichten versäumt, die vom Hintergrundprozess gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="957da-153">It is recommended that you register for the message received handler before calling **BackgroundMediaPlayer.Current** for the first time so that the foreground app doesn't miss any messages sent from the background process.</span></span>

<span data-ttu-id="957da-154">Damit die Hintergrundaufgabe aktiv bleibt, muss die App eine [**BackgroundTaskDeferral**](https://msdn.microsoft.com/library/windows/apps/hh700499) aus der **Run**-Methode anfordern und [**BackgroundTaskDeferral.Complete**](https://msdn.microsoft.com/library/windows/apps/hh700504) aufrufen, wenn die Aufgabeninstanz das Ereignis [**Canceled**](https://msdn.microsoft.com/library/windows/apps/br224798) oder [**Completed**](https://msdn.microsoft.com/library/windows/apps/br224788) empfängt.</span><span class="sxs-lookup"><span data-stu-id="957da-154">To keep the background task alive, your app must request a [**BackgroundTaskDeferral**](https://msdn.microsoft.com/library/windows/apps/hh700499) from within the **Run** method and call [**BackgroundTaskDeferral.Complete**](https://msdn.microsoft.com/library/windows/apps/hh700504) when the task instance receives the [**Canceled**](https://msdn.microsoft.com/library/windows/apps/br224798) or [**Completed**](https://msdn.microsoft.com/library/windows/apps/br224788) events.</span></span> <span data-ttu-id="957da-155">Verwenden Sie in der **Run**-Methode keine Schleife oder Warten, da dabei Ressourcen verwendet werden. Dies könnte dazu führen, dass die Hintergrundaufgabe der App vom System beendet wird.</span><span class="sxs-lookup"><span data-stu-id="957da-155">Do not loop or wait in the **Run** method because this consumes resources and may cause your app's background task to be terminated by the system.</span></span>

<span data-ttu-id="957da-156">Die Hintergrundaufgabe ruft das **Completed**-Ereignis ab, wenn die **Run**-Methode abgeschlossen ist und keine Verzögerung angefordert wurde.</span><span class="sxs-lookup"><span data-stu-id="957da-156">Your background task gets the **Completed** event when the **Run** method is completed and deferral is not requested.</span></span> <span data-ttu-id="957da-157">In manchen Fällen kann, nachdem die App das **Canceled**-Ereignis abgerufen hat, das **Completed**-Ereignis folgen.</span><span class="sxs-lookup"><span data-stu-id="957da-157">In some cases, when your app gets the **Canceled** event, it can be also followed by the **Completed** event.</span></span> <span data-ttu-id="957da-158">Die Aufgabe kann möglicherweise ein **Canceled**-Ereignis empfangen, während **Run** ausgeführt wird, Sie sollten daher sicherstellen, dass diese potenzielle Übereinstimmung verwaltet wird.</span><span class="sxs-lookup"><span data-stu-id="957da-158">Your task may receive a **Canceled** event while **Run** is executing, so be sure to manage this potential concurrence.</span></span>

<span data-ttu-id="957da-159">Eine Hintergrundaufgabe kann in den folgenden Situationen abgebrochen werden:</span><span class="sxs-lookup"><span data-stu-id="957da-159">Situations in which the background task can be cancelled include:</span></span>

-   <span data-ttu-id="957da-160">Eine neue App mit Audiowiedergabefunktionen wird in Systemen gestartet, die die Unterrichtlinie für Exklusivität erzwingen.</span><span class="sxs-lookup"><span data-stu-id="957da-160">A new app with audio playback capabilities starts on systems that enforce the exclusivity sub-policy.</span></span> <span data-ttu-id="957da-161">Weitere Informationen finden Sie im Abschnitt [Systemrichtlinien für die Lebensdauer einer Audiohintergrundaufgabe](#system-policies-for-background-audio-task-lifetime) weiter unten.</span><span class="sxs-lookup"><span data-stu-id="957da-161">See the [System policies for background audio task lifetime](#system-policies-for-background-audio-task-lifetime) section below.</span></span>

-   <span data-ttu-id="957da-162">Eine Hintergrundaufgabe wurde gestartet, aber es wird noch keine Musik wiedergegeben. Anschließend wird die Vordergrund-App angehalten.</span><span class="sxs-lookup"><span data-stu-id="957da-162">A background task has been launched but music is not yet playing, and then the foreground app is suspended.</span></span>

-   <span data-ttu-id="957da-163">Andere Medienunterbrechungen, z. B. eingehende Telefonanrufe oder VoIP-Anrufe.</span><span class="sxs-lookup"><span data-stu-id="957da-163">Other media interruptions, such as incoming phone calls or VoIP calls.</span></span>

<span data-ttu-id="957da-164">Situationen, in denen die Hintergrundaufgabe ohne vorherige Ankündigung beendet werden kann:</span><span class="sxs-lookup"><span data-stu-id="957da-164">Situations in which the background task can be terminated without notice include:</span></span>

-   <span data-ttu-id="957da-165">Ein VoIP-Anruf geht ein, und es ist nicht genügend Speicherplatz auf dem System vorhanden, um die Hintergrundaufgabe aktiv zu halten.</span><span class="sxs-lookup"><span data-stu-id="957da-165">A VoIP call comes in and there is not enough available memory on the system to keep the background task alive.</span></span>

-   <span data-ttu-id="957da-166">Es wird gegen eine Ressourcenrichtlinie verstoßen.</span><span class="sxs-lookup"><span data-stu-id="957da-166">A resource policy is violated.</span></span>

-   <span data-ttu-id="957da-167">Eine Aufgabe wird nicht korrekt abgebrochen oder abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="957da-167">Task cancellation or completion does not end gracefully.</span></span>

## <a name="system-policies-for-background-audio-task-lifetime"></a><span data-ttu-id="957da-168">Systemrichtlinien für die Lebensdauer einer Audiohintergrundaufgabe</span><span class="sxs-lookup"><span data-stu-id="957da-168">System policies for background audio task lifetime</span></span>

<span data-ttu-id="957da-169">Anhand der folgenden Richtlinien können Sie feststellen, wie das System die Lebensdauer von Audiohintergrundaufgaben verwaltet.</span><span class="sxs-lookup"><span data-stu-id="957da-169">The following policies help determine how the system manages the lifetime of background audio tasks.</span></span>

### <a name="exclusivity"></a><span data-ttu-id="957da-170">Exklusivität</span><span class="sxs-lookup"><span data-stu-id="957da-170">Exclusivity</span></span>

<span data-ttu-id="957da-171">Wenn diese Unterrichtlinie aktiviert ist, wird die Anzahl von Audiohintergrundaufgaben zu einem bestimmten Zeitpunkt auf maximal 1 beschränkt.</span><span class="sxs-lookup"><span data-stu-id="957da-171">If enabled, this sub-policy limits the number of background audio tasks to be at most 1 at any given time.</span></span> <span data-ttu-id="957da-172">Sie ist für Mobile- und andere Nicht-Desktop-SKUs aktiviert.</span><span class="sxs-lookup"><span data-stu-id="957da-172">It is enabled on Mobile and other non-Desktop SKUs.</span></span>

### <a name="inactivity-timeout"></a><span data-ttu-id="957da-173">Zeitüberschreitung nach Inaktivität</span><span class="sxs-lookup"><span data-stu-id="957da-173">Inactivity Timeout</span></span>

<span data-ttu-id="957da-174">Aufgrund von Ressourcenbeschränkungen kann das System die Hintergrundaufgabe nach einer gewissen Zeit der Inaktivität beenden.</span><span class="sxs-lookup"><span data-stu-id="957da-174">Due to resource constraints, the system may terminate your background task after a period of inactivity.</span></span>

<span data-ttu-id="957da-175">Eine Hintergrundaufgabe gilt als „inaktiv“, wenn beide der folgenden Bedingungen erfüllt sind:</span><span class="sxs-lookup"><span data-stu-id="957da-175">A background task is considered “inactive” if both of the following conditions are met:</span></span>

-   <span data-ttu-id="957da-176">Die Vordergrund-App ist nicht sichtbar (sie ist angehalten oder beendet).</span><span class="sxs-lookup"><span data-stu-id="957da-176">The foreground app is not visible (it is suspended or terminated).</span></span>

-   <span data-ttu-id="957da-177">Der Hintergrund-Media Player befindet sich nicht im Wiedergabezustand.</span><span class="sxs-lookup"><span data-stu-id="957da-177">The background media player is not in the playing state.</span></span>

<span data-ttu-id="957da-178">Wenn beide der folgenden Bedingungen erfüllt sind, startet die Richtlinie für das Hintergrundmediensystem einen Zeitgeber.</span><span class="sxs-lookup"><span data-stu-id="957da-178">If both of these conditions are satisfied, the background media system policy will start a timer.</span></span> <span data-ttu-id="957da-179">Wenn sich keine der beiden Bedingungen geändert hat, wenn der Zeitgeber abläuft, beendet die Richtlinie für das Hintergrundmediensystem die Hintergrundaufgabe.</span><span class="sxs-lookup"><span data-stu-id="957da-179">If neither condition has changed when the timer expires, the background media system policy will terminate the background task.</span></span>

### <a name="shared-lifetime"></a><span data-ttu-id="957da-180">Freigegebene Lebensdauer</span><span class="sxs-lookup"><span data-stu-id="957da-180">Shared Lifetime</span></span>

<span data-ttu-id="957da-181">Wenn diese Unterrichtlinie aktiviert ist, wird erzwungen, dass die Hintergrundaufgabe von der Lebensdauer der Vordergrundaufgabe abhängig ist.</span><span class="sxs-lookup"><span data-stu-id="957da-181">If enabled, this sub-policy forces the background task to be dependent on the lifetime of the foreground task.</span></span> <span data-ttu-id="957da-182">Wenn die Vordergrundaufgabe entweder durch den Benutzer oder vom System beendet wird, wird auch die Hintergrundaufgabe beendet.</span><span class="sxs-lookup"><span data-stu-id="957da-182">If the foreground task is shut down, either by the user or the system, the background task will also shut down.</span></span>

<span data-ttu-id="957da-183">Beachten Sie jedoch, dass dies nicht bedeutet, dass der Vordergrund vom Hintergrund abhängig ist.</span><span class="sxs-lookup"><span data-stu-id="957da-183">However, note that this does not mean that the foreground is dependent on the background.</span></span> <span data-ttu-id="957da-184">Wenn die Hintergrundaufgabe beendet wird, wird dadurch nicht erzwungen, dass auch die Vordergrundaufgabe beendet wird.</span><span class="sxs-lookup"><span data-stu-id="957da-184">If the background task is shut down, this does not force the foreground task to shut down.</span></span>

<span data-ttu-id="957da-185">In der folgenden Tabelle ist aufgeführt, welche Richtlinie auf welchen Gerätetypen erzwungen werden.</span><span class="sxs-lookup"><span data-stu-id="957da-185">The following table lists the which policies are enforced on which device types.</span></span>

| <span data-ttu-id="957da-186">Unterrichtlinie</span><span class="sxs-lookup"><span data-stu-id="957da-186">Sub-policy</span></span>             | <span data-ttu-id="957da-187">Desktop</span><span class="sxs-lookup"><span data-stu-id="957da-187">Desktop</span></span>  | <span data-ttu-id="957da-188">Mobilgerät</span><span class="sxs-lookup"><span data-stu-id="957da-188">Mobile</span></span>   | <span data-ttu-id="957da-189">Sonstiges</span><span class="sxs-lookup"><span data-stu-id="957da-189">Other</span></span>    |
|------------------------|----------|----------|----------|
| **<span data-ttu-id="957da-190">Exklusivität</span><span class="sxs-lookup"><span data-stu-id="957da-190">Exclusivity</span></span>**        | <span data-ttu-id="957da-191">Deaktiviert</span><span class="sxs-lookup"><span data-stu-id="957da-191">Disabled</span></span> | <span data-ttu-id="957da-192">Aktiviert</span><span class="sxs-lookup"><span data-stu-id="957da-192">Enabled</span></span>  | <span data-ttu-id="957da-193">Aktiviert</span><span class="sxs-lookup"><span data-stu-id="957da-193">Enabled</span></span>  |
| **<span data-ttu-id="957da-194">Zeitüberschreitung nach Inaktivität</span><span class="sxs-lookup"><span data-stu-id="957da-194">Inactivity Timeout</span></span>** | <span data-ttu-id="957da-195">Deaktiviert</span><span class="sxs-lookup"><span data-stu-id="957da-195">Disabled</span></span> | <span data-ttu-id="957da-196">Aktiviert</span><span class="sxs-lookup"><span data-stu-id="957da-196">Enabled</span></span>  | <span data-ttu-id="957da-197">Deaktiviert</span><span class="sxs-lookup"><span data-stu-id="957da-197">Disabled</span></span> |
| **<span data-ttu-id="957da-198">Freigegebene Lebensdauer</span><span class="sxs-lookup"><span data-stu-id="957da-198">Shared Lifetime</span></span>**    | <span data-ttu-id="957da-199">Aktiviert</span><span class="sxs-lookup"><span data-stu-id="957da-199">Enabled</span></span>  | <span data-ttu-id="957da-200">Deaktiviert</span><span class="sxs-lookup"><span data-stu-id="957da-200">Disabled</span></span> | <span data-ttu-id="957da-201">Deaktiviert</span><span class="sxs-lookup"><span data-stu-id="957da-201">Disabled</span></span> |


 

 




