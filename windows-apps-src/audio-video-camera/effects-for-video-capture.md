---
ms.assetid: E0189423-1DF3-4052-AB2E-846EA18254C4
description: In diesem Thema erfahren Sie, wie Sie Effekte auf die Kameravorschau und auf Videoaufnahmedatenströme anwenden und wie Sie den Videostabilisierungseffekt verwenden.
title: Effekte für die Videoaufnahme
ms.date: 02/08/2017
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: e9960e66c6bcdd7105e201d48e2317de4a39a19a
ms.sourcegitcommit: b5c9c18e70625ab770946b8243f3465ee1013184
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/28/2018
ms.locfileid: "7968455"
---
# <a name="effects-for-video-capture"></a><span data-ttu-id="9e68e-104">Effekte für die Videoaufnahme</span><span class="sxs-lookup"><span data-stu-id="9e68e-104">Effects for video capture</span></span>


<span data-ttu-id="9e68e-105">In diesem Thema erfahren Sie, wie Sie Effekte auf die Kameravorschau und auf Videoaufnahmedatenströme anwenden und wie Sie den Videostabilisierungseffekt verwenden.</span><span class="sxs-lookup"><span data-stu-id="9e68e-105">This topic shows you how to apply effects to the camera preview and recording video streams and shows you how to use the video stabilization effect.</span></span>

> [!NOTE] 
> <span data-ttu-id="9e68e-106">Dieser Artikel baut auf Konzepten und Code auf, die unter [Allgemeine Foto-, Video- und Audioaufnahme mit „MediaCapture“](basic-photo-video-and-audio-capture-with-MediaCapture.md) erläutert werden. Dort werden die Schritte für die Implementierung einer grundlegenden Foto- und Videoaufnahme beschrieben.</span><span class="sxs-lookup"><span data-stu-id="9e68e-106">This article builds on concepts and code discussed in [Basic photo, video, and audio capture with MediaCapture](basic-photo-video-and-audio-capture-with-MediaCapture.md), which describes the steps for implementing basic photo and video capture.</span></span> <span data-ttu-id="9e68e-107">Wir empfehlen Ihnen, sich mit dem grundlegenden Medienaufnahmemuster in diesem Artikel vertraut zu machen, bevor Sie sich komplexeren Aufnahmeszenarien zuwenden.</span><span class="sxs-lookup"><span data-stu-id="9e68e-107">We recommend that you familiarize yourself with the basic media capture pattern in that article before moving on to more advanced capture scenarios.</span></span> <span data-ttu-id="9e68e-108">Der Code in diesem Artikel setzt voraus, dass Ihre App bereits über eine korrekt initialisierte MediaCapture-Instanz verfügt.</span><span class="sxs-lookup"><span data-stu-id="9e68e-108">The code in this article assumes that your app already has an instance of MediaCapture that has been properly initialized.</span></span>

## <a name="adding-and-removing-effects-from-the-camera-video-stream"></a><span data-ttu-id="9e68e-109">Hinzufügen und Entfernen von Effekten im Kameravideodatenstrom</span><span class="sxs-lookup"><span data-stu-id="9e68e-109">Adding and removing effects from the camera video stream</span></span>
<span data-ttu-id="9e68e-110">Um Videos mithilfe der Gerätekamera aufzunehmen oder in der Vorschau anzuzeigen, verwenden Sie das [**MediaCapture**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture)-Objekt, wie unter [Allgemeine Foto-, Video- und Audioaufnahme mit „MediaCapture“](basic-photo-video-and-audio-capture-with-MediaCapture.md) beschrieben.</span><span class="sxs-lookup"><span data-stu-id="9e68e-110">To capture or preview video from the device's camera, you use the [**MediaCapture**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture) object as described in [Basic photo, video, and audio capture with MediaCapture](basic-photo-video-and-audio-capture-with-MediaCapture.md).</span></span> <span data-ttu-id="9e68e-111">Nachdem Sie das **MediaCapture**-Objekt initialisiert haben, können Sie dem Vorschau- oder Aufnahmedatenstrom einen oder mehrere Videoeffekte hinzufügen, indem Sie [**AddVideoEffectAsync**](https://msdn.microsoft.com/library/windows/apps/dn878035) aufrufen, ein [**IVideoEffectDefinition**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Effects.IVideoEffectDefinition)-Objekt übergeben, das den hinzuzufügenden Effekt darstellt, und einen Member der [**MediaStreamType**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaStreamType)-Enumeration übergeben, der angibt, ob der Effekt dem Vorschaudatenstrom oder Aufnahmedatenstrom der Kamera hinzugefügt werden soll.</span><span class="sxs-lookup"><span data-stu-id="9e68e-111">After you have initialized the **MediaCapture** object, you can add one or more video effects to the preview or capture stream by calling [**AddVideoEffectAsync**](https://msdn.microsoft.com/library/windows/apps/dn878035), passing in an [**IVideoEffectDefinition**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Effects.IVideoEffectDefinition) object representing the effect to be added, and a member of the [**MediaStreamType**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaStreamType) enumeration indicating whether the effect should be added to the camera's preview stream or the record stream.</span></span>

> [!NOTE]
> <span data-ttu-id="9e68e-112">Auf einigen Geräten sind der Vorschaudatenstrom und Aufnahmedatenstrom identisch. Wenn Sie **MediaStreamType.VideoPreview** oder **MediaStreamType.VideoRecord** angeben und **AddVideoEffectAsync** aufrufen, wird der Effekt folglich sowohl auf den Vorschaudatenstrom als auch auf den Aufnahmedatenstrom angewendet.</span><span class="sxs-lookup"><span data-stu-id="9e68e-112">On some devices, the preview stream and the capture stream are the same, which means that if you specify **MediaStreamType.VideoPreview** or **MediaStreamType.VideoRecord** when you call **AddVideoEffectAsync**, the effect will be applied to both preview and record streams.</span></span> <span data-ttu-id="9e68e-113">Sie können bestimmen, ob der Vorschaudatenstrom und Aufnahmedatenstrom auf dem aktuellen Gerät identisch sind, indem Sie die [**VideoDeviceCharacteristic**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCaptureSettings.VideoDeviceCharacteristic)-Eigenschaft von [**MediaCaptureSettings**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.MediaCaptureSettings) auf das **MediaCapture**-Objekt überprüfen.</span><span class="sxs-lookup"><span data-stu-id="9e68e-113">You can determine whether the preview and record streams are the same on the current device by checking the [**VideoDeviceCharacteristic**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCaptureSettings.VideoDeviceCharacteristic) property of the [**MediaCaptureSettings**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.MediaCaptureSettings) for the **MediaCapture** object.</span></span> <span data-ttu-id="9e68e-114">Wenn der Wert dieser Eigenschaft **VideoDeviceCharacteristic.AllStreamsIdentical** oder **VideoDeviceCharacteristic.PreviewRecordStreamsIdentical** lautet, sind die Datenströme identisch, und alle auf einen Datenstrom angewendeten Effekte wirken sich auch auf den anderen aus.</span><span class="sxs-lookup"><span data-stu-id="9e68e-114">If the value of this property is **VideoDeviceCharacteristic.AllStreamsIdentical** or **VideoDeviceCharacteristic.PreviewRecordStreamsIdentical**, then the streams are the same and any effect you apply to one will affect the other.</span></span>

<span data-ttu-id="9e68e-115">Im folgenden Beispiel wird sowohl dem Vorschaudatenstrom als auch dem Aufnahmedatenstrom der Kamera ein Effekt hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="9e68e-115">The following example adds an effect to both the camera preview and record streams.</span></span> <span data-ttu-id="9e68e-116">Dieses Beispiel veranschaulicht, wie Sie überprüfen, ob Aufnahme- und Vorschaustreams identisch sind.</span><span class="sxs-lookup"><span data-stu-id="9e68e-116">This example illustrates checking to see if the record and preview streams are the same.</span></span>

[!code-cs[BasicAddEffect](./code/SimpleCameraPreview_Win10/cs/MainPage.Effects.xaml.cs#SnippetBasicAddEffect)]

<span data-ttu-id="9e68e-117">Beachten Sie, dass **AddVideoEffectAsync** ein Objekt zurückgibt, das die [**IMediaExtension**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.IMediaExtension)-Schnittstelle implementiert, die den hinzugefügten Videoeffekt darstellt.</span><span class="sxs-lookup"><span data-stu-id="9e68e-117">Note that **AddVideoEffectAsync** returns an object that implements [**IMediaExtension**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.IMediaExtension) that represents the added video effect.</span></span> <span data-ttu-id="9e68e-118">Bei einigen Effekten können die Effekteinstellungen geändert werden, indem Sie [**PropertySet**](https://msdn.microsoft.com/library/windows/apps/Windows.Foundation.Collections.PropertySet) an die [**SetProperties**](https://msdn.microsoft.com/library/windows/apps/br240986)-Methode übergeben.</span><span class="sxs-lookup"><span data-stu-id="9e68e-118">Some effects allow you to change the effect settings by passing a [**PropertySet**](https://msdn.microsoft.com/library/windows/apps/Windows.Foundation.Collections.PropertySet) into the [**SetProperties**](https://msdn.microsoft.com/library/windows/apps/br240986) method.</span></span>

<span data-ttu-id="9e68e-119">Ab Windows10, Version 1607, können Sie auch das von **AddVideoEffectAsync** zurückgegebene Objekt verwenden, um den Effekt aus der Videopipeline zu entfernen, indem Sie es an [**RemoveEffectAsync**](https://msdn.microsoft.com/library/windows/apps/mt667957) übergeben.</span><span class="sxs-lookup"><span data-stu-id="9e68e-119">Starting with Windows 10, version 1607, you can also use the object returned by **AddVideoEffectAsync** to remove the effect from the video pipeline by passing it into [**RemoveEffectAsync**](https://msdn.microsoft.com/library/windows/apps/mt667957).</span></span> <span data-ttu-id="9e68e-120">**RemoveEffectAsync** ermittelt automatisch, ob der Effektobjektparameter dem Vorschau- oder Aufnahmedatenstrom hinzugefügt wurde. Auf diese Weise müssen Sie beim Aufrufen keinen Datenstromtyp angeben.</span><span class="sxs-lookup"><span data-stu-id="9e68e-120">**RemoveEffectAsync** automatically determines whether the effect object parameter was added to the preview or record stream, so you don't need to specify the stream type when making the call.</span></span>

[!code-cs[RemoveOneEffect](./code/SimpleCameraPreview_Win10/cs/MainPage.Effects.xaml.cs#SnippetRemoveOneEffect)]

<span data-ttu-id="9e68e-121">Sie können auch alle Effekte aus dem Vorschau- oder Aufnahmedatenstrom entfernen, indem Sie [**ClearEffectsAsync**](https://msdn.microsoft.com/library/windows/apps/br226592) aufrufen und den Datenstrom angeben, für den alle Effekte entfernt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="9e68e-121">You can also remove all effects from the preview or capture stream by calling [**ClearEffectsAsync**](https://msdn.microsoft.com/library/windows/apps/br226592) and specifying the stream for which all effects should be removed.</span></span>

[!code-cs[ClearAllEffects](./code/SimpleCameraPreview_Win10/cs/MainPage.Effects.xaml.cs#SnippetClearAllEffects)]

## <a name="video-stabilization-effect"></a><span data-ttu-id="9e68e-122">Videostabilisierungseffekt</span><span class="sxs-lookup"><span data-stu-id="9e68e-122">Video stabilization effect</span></span>

<span data-ttu-id="9e68e-123">Der Videostabilisierungseffekt ändert die Frames eines Videodatenstroms, um das Wackeln durch das Halten des Aufnahmegeräts mit der Hand zu minimieren.</span><span class="sxs-lookup"><span data-stu-id="9e68e-123">The video stabilization effect manipulates the frames of a video stream to minimize shaking caused by holding the capture device in your hand.</span></span> <span data-ttu-id="9e68e-124">Da durch diese Technik Pixel nach rechts, links, oben und unten verschoben werden und der Effekt den Inhalt außerhalb des Videoframes nicht kennen kann, wird das stabilisierte Video im Vergleich zum Originalvideo leicht zugeschnitten.</span><span class="sxs-lookup"><span data-stu-id="9e68e-124">Because this technique causes the pixels to be shifted right, left, up, and down, and because the effect can't know what the content just outside the video frame is, the stabilized video is cropped slightly from the original video.</span></span> <span data-ttu-id="9e68e-125">Eine Hilfsfunktion wird bereitgestellt, damit Sie Ihre Videocodierungseinstellungen zum optimalen Verwalten der durch den Effekt vorgenommenen Zuschneidung anpassen können.</span><span class="sxs-lookup"><span data-stu-id="9e68e-125">A utility function is provided to allow you to adjust your video encoding settings to optimally manage the cropping performed by the effect.</span></span>

<span data-ttu-id="9e68e-126">Auf Geräten, die dies unterstützen, stabilisiert OIS (Optical Image Stabilization) das Video durch mechanisches Manipulieren das Aufnahmegeräts, sodass die Kanten der Videoframes nicht zugeschnitten werden müssen.</span><span class="sxs-lookup"><span data-stu-id="9e68e-126">On devices that support it, Optical Image Stabilization (OIS) stabilizes video by mechanically manipulating the capture device and, therefore, does not need to crop the edges of the video frames.</span></span> <span data-ttu-id="9e68e-127">Weitere Informationen finden Sie unter [Steuerelemente des Aufnahmegeräts für Videoaufnahmen](capture-device-controls-for-video-capture.md).</span><span class="sxs-lookup"><span data-stu-id="9e68e-127">For more information, see [Capture device controls for video capture](capture-device-controls-for-video-capture.md).</span></span>

### <a name="set-up-your-app-to-use-video-stabilization"></a><span data-ttu-id="9e68e-128">Einrichten der App für die Verwendung der Videostabilisierung</span><span class="sxs-lookup"><span data-stu-id="9e68e-128">Set up your app to use video stabilization</span></span>

<span data-ttu-id="9e68e-129">Neben den Namespaces, die für die grundlegende Medienaufnahme erforderlich sind, erfordert die Verwendung des Videostabilisierungseffekts den folgenden Namespace.</span><span class="sxs-lookup"><span data-stu-id="9e68e-129">In addition to the namespaces required for basic media capture, using the video stabilization effect requires the following namespace.</span></span>

[!code-cs[VideoStabilizationEffectUsing](./code/SimpleCameraPreview_Win10/cs/MainPage.Effects.xaml.cs#SnippetVideoStabilizationEffectUsing)]

<span data-ttu-id="9e68e-130">Deklarieren Sie eine Membervariable zum Speichern des [**VideoStabilizationEffect**](https://msdn.microsoft.com/library/windows/apps/dn926760)-Objekts.</span><span class="sxs-lookup"><span data-stu-id="9e68e-130">Declare a member variable to store the [**VideoStabilizationEffect**](https://msdn.microsoft.com/library/windows/apps/dn926760) object.</span></span> <span data-ttu-id="9e68e-131">Im Rahmen der Effektimplementierung ändern Sie die Codierungseigenschaften, die Sie für das Codieren des aufgezeichneten Videos verwenden.</span><span class="sxs-lookup"><span data-stu-id="9e68e-131">As part of the effect implementation, you will modify the encoding properties that you use to encode the captured video.</span></span> <span data-ttu-id="9e68e-132">Deklarieren Sie zwei Variablen zum Speichern einer Sicherungskopie der ursprünglichen Eingabe- und Ausgabecodierungseigenschaften, sodass Sie diese später wiederherstellen können, wenn der Effekt deaktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="9e68e-132">Declare two variables to store a backup copy of the initial input and output encoding properties so that you can restore them later when the effect is disabled.</span></span> <span data-ttu-id="9e68e-133">Deklarieren Sie abschließend eine Membervariable vom Typ [**MediaEncodingProfile**](https://msdn.microsoft.com/library/windows/apps/hh701026), da auf dieses Objekt von mehreren Positionen innerhalb des Codes aus zugegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="9e68e-133">Finally, declare a member variable of type [**MediaEncodingProfile**](https://msdn.microsoft.com/library/windows/apps/hh701026) because this object will be accessed from multiple locations within your code.</span></span>

[!code-cs[DeclareVideoStabilizationEffect](./code/SimpleCameraPreview_Win10/cs/MainPage.Effects.xaml.cs#SnippetDeclareVideoStabilizationEffect)]

<span data-ttu-id="9e68e-134">Für dieses Szenario sollten Sie einer Membervariablen das Profilobjekt für die Mediencodierung zuweisen, damit Sie später darauf zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="9e68e-134">For this scenario, you should assign the media encoding profile object to a member variable so that you can access it later.</span></span>

[!code-cs[EncodingProfileMember](./code/SimpleCameraPreview_Win10/cs/MainPage.Effects.xaml.cs#SnippetEncodingProfileMember)]

### <a name="initialize-the-video-stabilization-effect"></a><span data-ttu-id="9e68e-135">Initialisieren des Videostabilisierungseffekts</span><span class="sxs-lookup"><span data-stu-id="9e68e-135">Initialize the video stabilization effect</span></span>

<span data-ttu-id="9e68e-136">Erstellen Sie nach dem Initialisieren des **MediaCapture**-Objekts eine neue Instanz des [**VideoStabilizationEffectDefinition**](https://msdn.microsoft.com/library/windows/apps/dn926762)-Objekts.</span><span class="sxs-lookup"><span data-stu-id="9e68e-136">After your **MediaCapture** object has been initialized, create a new instance of the [**VideoStabilizationEffectDefinition**](https://msdn.microsoft.com/library/windows/apps/dn926762) object.</span></span> <span data-ttu-id="9e68e-137">Rufen Sie [**MediaCapture.AddVideoEffectAsync**](https://msdn.microsoft.com/library/windows/apps/dn878035) auf, um den Effekt der Videopipeline hinzuzufügen und eine Instanz der [**VideoStabilizationEffect**](https://msdn.microsoft.com/library/windows/apps/dn926760)-Klasse abzurufen.</span><span class="sxs-lookup"><span data-stu-id="9e68e-137">Call [**MediaCapture.AddVideoEffectAsync**](https://msdn.microsoft.com/library/windows/apps/dn878035) to add the effect to the video pipeline and retrieve an instance of the [**VideoStabilizationEffect**](https://msdn.microsoft.com/library/windows/apps/dn926760) class.</span></span> <span data-ttu-id="9e68e-138">Geben Sie [**MediaStreamType.VideoRecord**](https://msdn.microsoft.com/library/windows/apps/br226640) an, um anzuzeigen, dass der Effekt auf den Videoaufnahmedatenstrom angewendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="9e68e-138">Specify [**MediaStreamType.VideoRecord**](https://msdn.microsoft.com/library/windows/apps/br226640) to indicate that the effect should be applied to the video record stream.</span></span>

<span data-ttu-id="9e68e-139">Registrieren Sie einen Ereignishandler für das Ereignis [**EnabledChanged**](https://msdn.microsoft.com/library/windows/apps/dn948982), und rufen Sie die Hilfsmethode **SetUpVideoStabilizationRecommendationAsync** auf. Beide werden später in diesem Artikel erläutert.</span><span class="sxs-lookup"><span data-stu-id="9e68e-139">Register an event handler for the [**EnabledChanged**](https://msdn.microsoft.com/library/windows/apps/dn948982) event and call the helper method **SetUpVideoStabilizationRecommendationAsync**, both of which are discussed later in this article.</span></span> <span data-ttu-id="9e68e-140">Legen Sie abschließend die [**Enabled**](https://msdn.microsoft.com/library/windows/apps/dn926775)-Eigenschaft des Effekts auf „true“ fest, um den Effekt zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="9e68e-140">Finally, set the [**Enabled**](https://msdn.microsoft.com/library/windows/apps/dn926775) property of the effect to true to enable the effect.</span></span>

[!code-cs[CreateVideoStabilizationEffect](./code/SimpleCameraPreview_Win10/cs/MainPage.Effects.xaml.cs#SnippetCreateVideoStabilizationEffect)]

### <a name="use-recommended-encoding-properties"></a><span data-ttu-id="9e68e-141">Verwenden empfohlener Codierungseigenschaften</span><span class="sxs-lookup"><span data-stu-id="9e68e-141">Use recommended encoding properties</span></span>

<span data-ttu-id="9e68e-142">Wie weiter oben in diesem Artikel beschrieben wurde, verursacht die Technik, die der Videostabilisierungseffekt verwendet, eine geringe Zuschneidung des stabilisierten Videos im Vergleich zum Quellvideo.</span><span class="sxs-lookup"><span data-stu-id="9e68e-142">As discussed earlier in this article, the technique that the video stabilization effect uses necessarily causes the stabilized video to be cropped slightly from the source video.</span></span> <span data-ttu-id="9e68e-143">Definieren Sie die folgende Hilfsfunktion in Ihrem Code, um die Videocodierungseigenschaften anzupassen und diese Beschränkung des Effekts optimal zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="9e68e-143">Define the following helper function in your code in order to adjust the video encoding properties to optimally handle this limitation of the effect.</span></span> <span data-ttu-id="9e68e-144">Dieser Schritt ist nicht erforderlich, um den Videostabilisierungseffekt zu verwenden. Wenn Sie diesen Schritt jedoch nicht ausführen, wird das resultierende Video leicht hochskaliert und hat dadurch eine etwas niedrigere Bildqualität.</span><span class="sxs-lookup"><span data-stu-id="9e68e-144">This step is not required in order to use the video stabilization effect, but if you don't perform this step, the resulting video will be upscaled slightly and therefore have slightly lower visual fidelity.</span></span>

<span data-ttu-id="9e68e-145">Rufen Sie [**GetRecommendedStreamConfiguration**](https://msdn.microsoft.com/library/windows/apps/dn948983) für die Instanz des Videostabilisierungseffekts auf, übergeben Sie das [**VideoDeviceController**](https://msdn.microsoft.com/library/windows/apps/br226825)-Objekt, das den Effekt über Ihre aktuellen Eingabedatenstrom-Codierungseigenschaften informiert, und Ihr **MediaEncodingProfile**, sodass der Effekt Ihre aktuellen Ausgabecodierungseigenschaften kennt.</span><span class="sxs-lookup"><span data-stu-id="9e68e-145">Call [**GetRecommendedStreamConfiguration**](https://msdn.microsoft.com/library/windows/apps/dn948983) on your video stabilization effect instance, passing in the [**VideoDeviceController**](https://msdn.microsoft.com/library/windows/apps/br226825) object, which informs the effect about your current input stream encoding properties, and your **MediaEncodingProfile** which lets the effect know your current output encoding properties.</span></span> <span data-ttu-id="9e68e-146">Diese Methode gibt ein [**VideoStreamConfiguration**](https://msdn.microsoft.com/library/windows/apps/dn926727)-Objekt zurück, das neue empfohlene Eingabe- und Ausgabedatenstrom-Codierungseigenschaften enthält.</span><span class="sxs-lookup"><span data-stu-id="9e68e-146">This method returns a [**VideoStreamConfiguration**](https://msdn.microsoft.com/library/windows/apps/dn926727) object containing new recommended input and output stream encoding properties.</span></span>

<span data-ttu-id="9e68e-147">Die empfohlenen Eingabecodierungseigenschaften bieten, sofern vom Gerät unterstützt, eine höhere Auflösung als die ursprünglichen Einstellungen, die Sie bereitgestellt haben, sodass es einen minimalen Datenverlust bei der Auflösung nach dem Anwenden der Zuschneidung des Effekts gibt.</span><span class="sxs-lookup"><span data-stu-id="9e68e-147">The recommended input encoding properties are, if it is supported by the device, a higher resolution that the initial settings you provided so that there is minimal loss in resolution after the effect's cropping is applied.</span></span>

<span data-ttu-id="9e68e-148">Rufen Sie [**VideoDeviceController.SetMediaStreamPropertiesAsync**](https://msdn.microsoft.com/library/windows/apps/hh700895) auf, um die neuen Codierungseigenschaften festzulegen.</span><span class="sxs-lookup"><span data-stu-id="9e68e-148">Call [**VideoDeviceController.SetMediaStreamPropertiesAsync**](https://msdn.microsoft.com/library/windows/apps/hh700895) to set the new encoding properties.</span></span> <span data-ttu-id="9e68e-149">Verwenden Sie vor dem Festlegen der neuen Eigenschaften die Membervariable, um die ursprünglichen Codierungseigenschaften zu speichern, damit Sie die Einstellungen wieder zurückändern können, wenn Sie den Effekt deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="9e68e-149">Before setting the new properties, use the member variable to store the initial encoding properties so that you can change the settings back when you disable the effect.</span></span>

<span data-ttu-id="9e68e-150">Wenn der Videostabilisierungseffekt das Ausgabevideo zuschneiden muss, entsprechen die empfohlenen Ausgabecodierungseigenschaften der Größe des zugeschnittenen Videos.</span><span class="sxs-lookup"><span data-stu-id="9e68e-150">If the video stabilization effect must crop the output video, the recommended output encoding properties will be the size of the cropped video.</span></span> <span data-ttu-id="9e68e-151">Das bedeutet, dass die Ausgabeauflösung mit der Größe des zugeschnittenen Videos übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="9e68e-151">This means that the output resolution will match the cropped video size.</span></span> <span data-ttu-id="9e68e-152">Wenn Sie die empfohlenen Ausgabeeigenschaften nicht verwenden, wird das Video hochskaliert, um der anfänglichen Ausgabegröße zu entsprechen, was zu einem Verlust an Bildqualität führt.</span><span class="sxs-lookup"><span data-stu-id="9e68e-152">If you do not use the recommended output properties, the video will be scaled up to match the initial output size, which will result in a loss of visual fidelity.</span></span>

<span data-ttu-id="9e68e-153">Legen Sie die [**Video**](https://msdn.microsoft.com/library/windows/apps/hh701124)-Eigenschaft des **MediaEncodingProfile**-Objekts fest.</span><span class="sxs-lookup"><span data-stu-id="9e68e-153">Set the [**Video**](https://msdn.microsoft.com/library/windows/apps/hh701124) property of the **MediaEncodingProfile** object.</span></span> <span data-ttu-id="9e68e-154">Verwenden Sie vor dem Festlegen der neuen Eigenschaften die Membervariable, um die ursprünglichen Codierungseigenschaften zu speichern, damit Sie die Einstellungen wieder zurückändern können, wenn Sie den Effekt deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="9e68e-154">Before setting the new properties, use the member variable to store the initial encoding properties so that you can change the settings back when you disable the effect.</span></span>

[!code-cs[SetUpVideoStabilizationRecommendationAsync](./code/SimpleCameraPreview_Win10/cs/MainPage.Effects.xaml.cs#SnippetSetUpVideoStabilizationRecommendationAsync)]

### <a name="handle-the-video-stabilization-effect-being-disabled"></a><span data-ttu-id="9e68e-155">Behandeln des Deaktivierens des Videostabilisierungseffekts</span><span class="sxs-lookup"><span data-stu-id="9e68e-155">Handle the video stabilization effect being disabled</span></span>

<span data-ttu-id="9e68e-156">Das System kann den Videostabilisierungseffekt automatisch deaktivieren, wenn Sie der Pixeldurchsatz zu groß für die Verarbeitung durch den Effekt ist oder wenn erkannt wird, dass der Effekt langsam ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="9e68e-156">The system may automatically disable the video stabilization effect if the pixel throughput is too high for the effect to handle or if it detects that the effect is running slowly.</span></span> <span data-ttu-id="9e68e-157">In diesem Fall wird das „EnabledChanged“-Ereignis ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="9e68e-157">If this occurs, the EnabledChanged event is raised.</span></span> <span data-ttu-id="9e68e-158">Die **VideoStabilizationEffect**-Instanz im Parameter *sender* gibt den neuen Zustand des Effekts (aktiviert oder deaktiviert) an.</span><span class="sxs-lookup"><span data-stu-id="9e68e-158">The **VideoStabilizationEffect** instance in the *sender* parameter indicates the new state of the effect, enabled or disabled.</span></span> <span data-ttu-id="9e68e-159">[**VideoStabilizationEffectEnabledChangedEventArgs**](https://msdn.microsoft.com/library/windows/apps/dn948979) hat einen [**VideoStabilizationEffectEnabledChangedReason**](https://msdn.microsoft.com/library/windows/apps/dn948981)-Wert, der angibt, warum der Effekt aktiviert oder deaktiviert wurde.</span><span class="sxs-lookup"><span data-stu-id="9e68e-159">The [**VideoStabilizationEffectEnabledChangedEventArgs**](https://msdn.microsoft.com/library/windows/apps/dn948979) has a [**VideoStabilizationEffectEnabledChangedReason**](https://msdn.microsoft.com/library/windows/apps/dn948981) value indicating why the effect was enabled or disabled.</span></span> <span data-ttu-id="9e68e-160">Beachten Sie, dass dieses Ereignis auch ausgelöst wird, wenn Sie den Effekt programmgesteuert aktivieren oder deaktivieren. In diesem Fall ist der Grund **Programmatic**.</span><span class="sxs-lookup"><span data-stu-id="9e68e-160">Note that this event is also raised if you programmatically enable or disable the effect, in which case the reason will be **Programmatic**.</span></span>

<span data-ttu-id="9e68e-161">In der Regel verwenden Sie dieses Ereignis zum Anpassen der Benutzeroberfläche Ihrer App, um den aktuellen Status der Videostabilisierung anzugeben.</span><span class="sxs-lookup"><span data-stu-id="9e68e-161">Typically, you would use this event to adjust your app's UI to indicate the current status of video stabilization.</span></span>

[!code-cs[VideoStabilizationEnabledChanged](./code/SimpleCameraPreview_Win10/cs/MainPage.Effects.xaml.cs#SnippetVideoStabilizationEnabledChanged)]

### <a name="clean-up-the-video-stabilization-effect"></a><span data-ttu-id="9e68e-162">Bereinigen des Videostabilisierungseffekts</span><span class="sxs-lookup"><span data-stu-id="9e68e-162">Clean up the video stabilization effect</span></span>

<span data-ttu-id="9e68e-163">Rufen Sie zum Bereinigen des Videostabilisierungseffekts [**RemoveEffectAsync**](https://msdn.microsoft.com/library/windows/apps/mt667957) auf, um den Effekt aus der Videopipeline zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="9e68e-163">To clean up the video stabilization effect, call [**RemoveEffectAsync**](https://msdn.microsoft.com/library/windows/apps/mt667957) to remove the effect from the video pipeline.</span></span> <span data-ttu-id="9e68e-164">Wenn die Membervariablen mit den ursprünglichen Codierungseigenschaften nicht NULL sind, verwenden Sie diese zum Wiederherstellen der Codierungseigenschaften.</span><span class="sxs-lookup"><span data-stu-id="9e68e-164">If the member variables containing the initial encoding properties are not null, use them to restore the encoding properties.</span></span> <span data-ttu-id="9e68e-165">Entfernen Sie schließlich den Ereignishandler **EnabledChanged**, und legen Sie den Effekt auf Null fest.</span><span class="sxs-lookup"><span data-stu-id="9e68e-165">Finally, remove the **EnabledChanged** event handler and set the effect to null.</span></span>

[!code-cs[CleanUpVisualStabilizationEffect](./code/SimpleCameraPreview_Win10/cs/MainPage.Effects.xaml.cs#SnippetCleanUpVisualStabilizationEffect)]

## <a name="related-topics"></a><span data-ttu-id="9e68e-166">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="9e68e-166">Related topics</span></span>

* [<span data-ttu-id="9e68e-167">Kamera</span><span class="sxs-lookup"><span data-stu-id="9e68e-167">Camera</span></span>](camera.md)
* [<span data-ttu-id="9e68e-168">Allgemeine Foto-, Video- und Audioaufnahme mit „MediaCapture“</span><span class="sxs-lookup"><span data-stu-id="9e68e-168">Basic photo, video, and audio capture with MediaCapture</span></span>](basic-photo-video-and-audio-capture-with-MediaCapture.md)
 

 




