---
author: drewbatgit
ms.assetid: dd2a1e01-c284-4d62-963e-f59f58dca61a
description: In diesem Artikel wird beschrieben, wie Medien von einem Gerät importiert werden, darunter die Suche nach verfügbaren Medienquellen, das Importieren von Dateien wie Fotos und Sidecardateien und das Löschen der importierten Dateien vom Quellgerät.
title: Importieren von Medien
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
keywords: Windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 36f8956e2ca167d98bb8e6ecf35ce3d131d7b032
ms.sourcegitcommit: 93c0a60cf531c7d9fe7b00e7cf78df86906f9d6e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/21/2018
ms.locfileid: "7557397"
---
# <a name="import-media-from-a-device"></a><span data-ttu-id="f2a7e-104">Importieren von Medien von einem Gerät</span><span class="sxs-lookup"><span data-stu-id="f2a7e-104">Import media from a device</span></span>

<span data-ttu-id="f2a7e-105">In diesem Artikel wird beschrieben, wie Medien von einem Gerät importiert werden, darunter die Suche nach verfügbaren Medienquellen, das Importieren von Dateien wie Videos, Fotos und Sidecardateien und das Löschen der importierten Dateien vom Quellgerät.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-105">This article describes how to import media from a device, including searching for available media sources, importing files such as videos, photos, and sidecar files, and deleting the imported files from the source device.</span></span>

> [!NOTE] 
> <span data-ttu-id="f2a7e-106">Der Code in diesem Artikel wurde aus dem [**MediaImport UWP-App-Beispiel**](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/MediaImport) übernommen und angepasst.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-106">The code in this article was adapted from the [**MediaImport UWP app sample**](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/MediaImport) .</span></span> <span data-ttu-id="f2a7e-107">Sie können dieses Beispiel klonen oder aus dem [**Git-Repository für universelle Windows-App-Beispiele**](https://github.com/Microsoft/Windows-universal-samples) herunterladen, um den Code im Kontext anzuzeigen oder ihn als Ausgangspunkt für Ihre eigene App zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-107">You can clone or download this sample from the [**Universal Windows app samples Git repo**](https://github.com/Microsoft/Windows-universal-samples) to see the code in context or to use it as a starting point for your own app.</span></span>

## <a name="create-a-simple-media-import-ui"></a><span data-ttu-id="f2a7e-108">Erstellen einer einfachen Medienimport-Benutzeroberfläche</span><span class="sxs-lookup"><span data-stu-id="f2a7e-108">Create a simple media import UI</span></span>
<span data-ttu-id="f2a7e-109">Für das Beispiel in diesem Artikel wird eine minimale Benutzeroberfläche verwendet, um die grundlegenden Medienimportszenarien zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-109">The example in this article uses a minimal UI to enable the core media import scenarios.</span></span> <span data-ttu-id="f2a7e-110">Informationen zum Erstellen einer stabileren Benutzeroberfläche für eine Medienimport-App finden Sie im [**MediaImport-Beispiel**](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/MediaImport).</span><span class="sxs-lookup"><span data-stu-id="f2a7e-110">To see how to create a more robust UI for a media import app, see the [**MediaImport sample**](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/MediaImport).</span></span> <span data-ttu-id="f2a7e-111">Der folgende XAML-Code erstellt ein StackPanel-Element mit den folgenden Steuerelementen:</span><span class="sxs-lookup"><span data-stu-id="f2a7e-111">The following XAML creates a stack panel with the following controls:</span></span>
* <span data-ttu-id="f2a7e-112">Ein [**Button**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.Button)-Steuerelement zum Initiieren der Suche nach Quellen, aus denen Medien importiert werden können.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-112">A [**Button**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.Button) to initiate searching for sources from which media can be imported.</span></span>
* <span data-ttu-id="f2a7e-113">Ein [**ComboBox**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.ComboBox)-Steuerelement zum Auflisten und Auswählen der Medienimportquellen, die gefunden werden.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-113">A [**ComboBox**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.ComboBox) to list and select from the media import sources that are found.</span></span>
* <span data-ttu-id="f2a7e-114">Ein [**ListView**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.ListView)-Steuerelement zum Anzeigen und Auswählen der Medienelemente aus der ausgewählten Importquelle.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-114">A [**ListView**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.ListView) control to display and select from the media items from the selected import source.</span></span>
* <span data-ttu-id="f2a7e-115">Ein **Button**-Steuerelement zum Initiieren des Imports von Medienelementen aus der ausgewählten Quelle.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-115">A **Button** to initiate importing media items from the selected source.</span></span>
* <span data-ttu-id="f2a7e-116">Ein **Button**-Steuerelement zum Initiieren des Löschens der Elemente, die aus der ausgewählten Quelle importiert wurden.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-116">A **Button** to initiate deleting the items that have been imported from the selected source.</span></span>
* <span data-ttu-id="f2a7e-117">Ein **Button**-Steuerelement zum Abbrechen eines asynchronen Medienimportvorgangs.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-117">A **Button** to cancel an asynchronous media import operation.</span></span>

[!code-xml[ImportXAML](./code/PhotoImport_Win10/cs/MainPage.xaml#SnippetImportXAML)]

## <a name="set-up-your-code-behind-file"></a><span data-ttu-id="f2a7e-118">Einrichten der CodeBehind-Datei</span><span class="sxs-lookup"><span data-stu-id="f2a7e-118">Set up your code-behind file</span></span>
<span data-ttu-id="f2a7e-119">Fügen Sie *using*-Direktiven hinzu, um die in diesem Beispiel verwendeten Namespaces einzubeziehen, die noch nicht in der Standardprojektvorlage enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-119">Add *using* directives to include the namespaces used by this example that are not already included in the default project template.</span></span>

[!code-cs[Using](./code/PhotoImport_Win10/cs/MainPage.xaml.cs#SnippetUsing)]

## <a name="set-up-task-cancellation-for-media-import-operations"></a><span data-ttu-id="f2a7e-120">Einrichten des Abbruchs von Aufgaben für Medienimportvorgänge</span><span class="sxs-lookup"><span data-stu-id="f2a7e-120">Set up task cancellation for media import operations</span></span>

<span data-ttu-id="f2a7e-121">Da Medienimportvorgänge lange dauern können, werden sie mit [**IAsyncOperationWithProgress**](https://msdn.microsoft.com/library/windows/apps/br206594.aspx) asynchron ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-121">Because media import operations can take a long time, they are performed asynchronously using [**IAsyncOperationWithProgress**](https://msdn.microsoft.com/library/windows/apps/br206594.aspx).</span></span> <span data-ttu-id="f2a7e-122">Deklarieren Sie eine Klassenmembervariable vom Typ [**CancellationTokenSource**](https://msdn.microsoft.com/library/system.threading.cancellationtokensource), mit der ein laufender Vorgang abgebrochen wird, wenn der Benutzer auf die Schaltfläche zum Abbrechen klickt.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-122">Declare a class member variable of type [**CancellationTokenSource**](https://msdn.microsoft.com/library/system.threading.cancellationtokensource) that will be used to cancel an in-progress operation if the user clicks the cancel button.</span></span>

[!code-cs[DeclareCts](./code/PhotoImport_Win10/cs/MainPage.xaml.cs#SnippetDeclareCts)]

<span data-ttu-id="f2a7e-123">Implementieren Sie einen Handler für die Schaltfläche zum Abbrechen.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-123">Implement a handler for the cancel button.</span></span> <span data-ttu-id="f2a7e-124">In den Beispielen weiter unten in diesem Artikel wird **CancellationTokenSource** initialisiert, wenn ein Vorgang beginnt, und auf Null festgelegt, wenn der Vorgang abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-124">The examples shown later in this article will initialize the **CancellationTokenSource** when an operation begins and set it to null when the operation completes.</span></span> <span data-ttu-id="f2a7e-125">Überprüfen Sie im Handler für die Schaltfläche zum Abbrechen, ob das Token Null ist, und rufen Sie andernfalls [**Cancel**](https://msdn.microsoft.com/library/dd321955) auf, um den Vorgang abzubrechen.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-125">In the cancel button handler, check to see if the token is null, and if not, call [**Cancel**](https://msdn.microsoft.com/library/dd321955) to cancel the operation.</span></span>

[!code-cs[OnCancel](./code/PhotoImport_Win10/cs/MainPage.xaml.cs#SnippetOnCancel)]

## <a name="data-binding-helper-classes"></a><span data-ttu-id="f2a7e-126">Datenbindungs-Hilfsklassen</span><span class="sxs-lookup"><span data-stu-id="f2a7e-126">Data binding helper classes</span></span>

<span data-ttu-id="f2a7e-127">In einem typischen Medienimportszenario wird dem Benutzer eine Liste der zum Import verfügbaren Medienelemente angezeigt. Es kann eine große Anzahl von Mediendateien zur Auswahl vorhanden sein, und in der Regel soll eine Miniaturansicht für jedes Medienelement angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-127">In a typical media import scenario you show the user a list of available media items to import, there can be a large number of media files to choose from and, typically, you want to show a thumbnail for each media item.</span></span> <span data-ttu-id="f2a7e-128">Aus diesem Grund werden in diesem Beispiel drei Hilfsklassen zum inkrementellen Laden von Einträgen in das ListView-Steuerelement verwendet, wenn der Benutzer in der Liste nach unten scrollt.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-128">For this reason, this example uses three helper classes to incrementally load entries into the ListView control as the user scrolls down through the list.</span></span>

* <span data-ttu-id="f2a7e-129">**IncrementalLoadingBase**-Klasse – Implementiert [**IList**](https://msdn.microsoft.com/library/system.collections.ilist), [**ISupportIncrementalLoading**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.data.isupportincrementalloading) und [**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/system.collections.specialized.inotifycollectionchanged(v=vs.105).aspx), um das grundlegende inkrementelle Ladeverhalten bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-129">**IncrementalLoadingBase** class - Implements the [**IList**](https://msdn.microsoft.com/library/system.collections.ilist), [**ISupportIncrementalLoading**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.data.isupportincrementalloading), and [**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/system.collections.specialized.inotifycollectionchanged(v=vs.105).aspx) to provide the base incremental loading behavior.</span></span>
* <span data-ttu-id="f2a7e-130">**GeneratorIncrementalLoadingClass**-Klasse – Stellt die Implementierung der Basisklasse für das inkrementelle Laden bereit.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-130">**GeneratorIncrementalLoadingClass** class - Provides an implementation of the incremental loading base class.</span></span>
* <span data-ttu-id="f2a7e-131">**ImportableItemWrapper**-Klasse – Ein dünner Wrapper um die [**PhotoImportItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportItem)-Klasse zum Hinzufügen einer bindbaren [**BitmapImage**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Media.Imaging.BitmapImage)-Eigenschaft für das Miniaturbild für jedes importierte Element.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-131">**ImportableItemWrapper** class - A thin wrapper around the [**PhotoImportItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportItem) class to add a bindable [**BitmapImage**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Media.Imaging.BitmapImage) property for the thumbnail image for each imported item.</span></span>

<span data-ttu-id="f2a7e-132">Diese Klassen werden im [**MediaImport-Beispiel**](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/MediaImport) bereitgestellt und können dem Projekt ohne Änderungen hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-132">These classes are provided in the [**MediaImport sample**](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/MediaImport) and can be added to your project without modifications.</span></span> <span data-ttu-id="f2a7e-133">Deklarieren Sie nach dem Hinzufügen der Hilfsklassen zum Projekt eine Klassenmembervariable vom Typ **GeneratorIncrementalLoadingClass**, die weiter unten in diesem Beispiel verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-133">After adding the helper classes to your project, declare a class member variable of type **GeneratorIncrementalLoadingClass** that will be used later in this example.</span></span>

[!code-cs[GeneratorIncrementalLoadingClass](./code/PhotoImport_Win10/cs/MainPage.xaml.cs#SnippetGeneratorIncrementalLoadingClass)]


## <a name="find-available-sources-from-which-media-can-be-imported"></a><span data-ttu-id="f2a7e-134">Suchen nach verfügbaren Quellen, aus denen Medien importiert werden können</span><span class="sxs-lookup"><span data-stu-id="f2a7e-134">Find available sources from which media can be imported</span></span>

<span data-ttu-id="f2a7e-135">Rufen Sie im Klickhandler für die Schaltfläche zur Suche nach Quellen die statische Methode [**PhotoImportManager.FindAllSourcesAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportManager.FindAllSourcesAsync) auf, um die Systemsuche nach Geräten, von denen Medien importiert werden können, zu starten.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-135">In the click handler for the find sources button, call the static method [**PhotoImportManager.FindAllSourcesAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportManager.FindAllSourcesAsync) to start the system searching for devices from which media can be imported.</span></span> <span data-ttu-id="f2a7e-136">Durchlaufen Sie nach dem Warten auf den Abschluss des Vorgangs jedes [**PhotoImportSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportSource)-Objekt in der zurückgegebenen Liste, fügen Sie einen Eintrag zu **ComboBox** hinzu, und legen Sie die **Tag**-Eigenschaft direkt auf das Quellobjekt fest, damit es einfach abgerufen werden kann, wenn der Benutzer eine Auswahl trifft.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-136">After awaiting the completion of the operation, loop through each [**PhotoImportSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportSource) object in the returned list and add an entry to the **ComboBox**, setting the **Tag** property to the source object itself so it can be easily retrieved when the user makes a selection.</span></span>

[!code-cs[FindSourcesClick](./code/PhotoImport_Win10/cs/MainPage.xaml.cs#SnippetFindSourcesClick)]

<span data-ttu-id="f2a7e-137">Deklarieren Sie eine Klassenmembervariable zum Speichern der ausgewählten Importquelle des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-137">Declare a class member variable to store the user's selected import source.</span></span>

[!code-cs[DeclareImportSource](./code/PhotoImport_Win10/cs/MainPage.xaml.cs#SnippetDeclareImportSource)]

<span data-ttu-id="f2a7e-138">Legen Sie im [**SelectionChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.Primitives.Selector.SelectionChanged)-Handler für **ComboBox** für die Importquelle die Klassenmembervariable auf die ausgewählte Quelle fest, und rufen Sie dann die **FindItems**-Hilfsmethode auf, die weiter unten in diesem Artikel erläutert wird.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-138">In the [**SelectionChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.Primitives.Selector.SelectionChanged) handler for the import source **ComboBox**, set the class member variable to the selected source and then call the **FindItems** helper method which will be shown later in this article.</span></span> 

[!code-cs[SourcesSelectionChanged](./code/PhotoImport_Win10/cs/MainPage.xaml.cs#SnippetSourcesSelectionChanged)]

## <a name="find-items-to-import"></a><span data-ttu-id="f2a7e-139">Suchen nach zu importierenden Elementen</span><span class="sxs-lookup"><span data-stu-id="f2a7e-139">Find items to import</span></span>

<span data-ttu-id="f2a7e-140">Fügen Sie Klassenmembervariablen vom Typ [**PhotoImportSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportSession) und [**PhotoImportFindItemsResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult) hinzu, die in den folgenden Schritten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-140">Add class member variables of type [**PhotoImportSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportSession) and [**PhotoImportFindItemsResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult) which will be used in the following steps.</span></span>

[!code-cs[DeclareImport](./code/PhotoImport_Win10/cs/MainPage.xaml.cs#SnippetDeclareImport)]

<span data-ttu-id="f2a7e-141">Initialisieren Sie in der **FindItems**-Methode die **CancellationTokenSource**-Variable, sodass sie zum Abbrechen des Suchvorgangs verwendet werden kann, falls dies erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-141">In the **FindItems** method, initialize the **CancellationTokenSource** variable so it can be used to cancel the find operation if necessary.</span></span> <span data-ttu-id="f2a7e-142">Erstellen Sie in einem **try**-Block eine neue Importsitzung durch Aufrufen von [**CreateImportSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportSource.CreateImportSession) für das vom Benutzer ausgewählte [**PhotoImportSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportSource)-Objekt.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-142">Within a **try** block, create a new import session by calling [**CreateImportSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportSource.CreateImportSession) on the [**PhotoImportSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportSource) object selected by the user.</span></span> <span data-ttu-id="f2a7e-143">Erstellen Sie ein neues [**Progress**](https://msdn.microsoft.com/library/hh193692.aspx)-Objekt, um einen Rückruf zum Anzeigen des Status des Suchvorgangs bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-143">Create a new [**Progress**](https://msdn.microsoft.com/library/hh193692.aspx) object to provide a callback to display the progress of the find operation.</span></span> <span data-ttu-id="f2a7e-144">Rufen Sie als Nächstes **[FindItemsAsync](https://docs.microsoft.com/uwp/api/windows.media.import.photoimportsession.finditemsasync)** auf, um den Suchvorgang zu starten.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-144">Next, call **[FindItemsAsync](https://docs.microsoft.com/uwp/api/windows.media.import.photoimportsession.finditemsasync)** to start the find operation.</span></span> <span data-ttu-id="f2a7e-145">Stellen Sie einen [**PhotoImportContentTypeFilter**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportContentTypeFilter)-Wert bereit, um anzugeben, ob Fotos, Videos oder beides zurückgegeben werden sollen.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-145">Provide a [**PhotoImportContentTypeFilter**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportContentTypeFilter) value to specify whether photos, videos, or both should be returned.</span></span> <span data-ttu-id="f2a7e-146">Stellen Sie einen [**PhotoImportItemSelectionMode**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportItemSelectionMode)-Wert bereit, um anzugeben, ob alle, keine oder nur die neuen Medienelemente zurückgegeben werden, deren [**IsSelected**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportItem.IsSelected)-Eigenschaft auf „true“ festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-146">Provide a [**PhotoImportItemSelectionMode**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportItemSelectionMode) value to specify whether all, none, or only the new media items are returned with their [**IsSelected**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportItem.IsSelected) property set to true.</span></span> <span data-ttu-id="f2a7e-147">Diese Eigenschaft ist an ein Kontrollkästchen für jedes Medienelement in der ListBox-Elementvorlage gebunden.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-147">This property is bound to a checkbox for each media item in our ListBox item template.</span></span>

<span data-ttu-id="f2a7e-148">**FindItemsAsync** gibt [**IAsyncOperationWithProgress**](https://msdn.microsoft.com/library/windows/apps/br206594.aspx) zurück.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-148">**FindItemsAsync** returns an [**IAsyncOperationWithProgress**](https://msdn.microsoft.com/library/windows/apps/br206594.aspx).</span></span> <span data-ttu-id="f2a7e-149">Die Erweiterungsmethode [**AsTask**](https://msdn.microsoft.com/library/hh779750.aspx) wird verwendet, um eine Aufgabe zu erstellen, auf die gewartet werden kann, die mit dem Abbruchtoken abgebrochen werden kann und den Status mit dem bereitgestellten **Progress**-Objekt meldet.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-149">The extension method [**AsTask**](https://msdn.microsoft.com/library/hh779750.aspx) is used to create a task that can be awaited, can be cancelled with the cancellation token, and that reports progress using the supplied **Progress** object.</span></span>

<span data-ttu-id="f2a7e-150">Als Nächstes wird die Datenbindungs-Hilfsklasse **GeneratorIncrementalLoadingClass** initialisiert.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-150">Next the data binding helper class, **GeneratorIncrementalLoadingClass** is initialized.</span></span> <span data-ttu-id="f2a7e-151">**FindItemsAsync** gibt bei der Rückkehr aus dem Wartezustand ein [**PhotoImportFindItemsResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult)-Objekt zurück.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-151">**FindItemsAsync**, when it returns from being awaited, returns a [**PhotoImportFindItemsResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult) object.</span></span> <span data-ttu-id="f2a7e-152">Dieses Objekt enthält Statusinformationen über den Suchvorgang, darunter den Erfolg des Vorgangs und die Anzahl der verschiedenen Typen von Medienelementen, die gefunden wurden.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-152">This object contains status information about the find operation, including the success of the operation and the count of different types of media items that were found.</span></span> <span data-ttu-id="f2a7e-153">Die [**FoundItems**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult.FoundItems)-Eigenschaft enthält eine Liste von [**PhotoImportItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportItem)-Objekten, die die gefundenen Medienelemente darstellen.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-153">The [**FoundItems**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult.FoundItems) property contains a list of [**PhotoImportItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportItem) objects representing the found media items.</span></span> <span data-ttu-id="f2a7e-154">Der **GeneratorIncrementalLoadingClass**-Konstruktor verwendet als Argumente die Gesamtzahl der Elemente, die inkrementell geladen werden, und eine Funktion, die je nach Bedarf zu ladende neue Elemente generiert.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-154">The **GeneratorIncrementalLoadingClass** constructor takes as arguments the total count of items that will be loaded incrementally, and a function that generates new items to be loaded as needed.</span></span> <span data-ttu-id="f2a7e-155">In diesem Fall erstellt der bereitgestellten Lambda-Ausdruck eine neue Instanz von **ImportableItemWrapper**, der **PhotoImportItem** umschließt und eine Miniaturansicht für jedes Element enthält.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-155">In this case, the provided lambda expression creates a new instance of the **ImportableItemWrapper** which wraps **PhotoImportItem** and includes a thumbnail for each item.</span></span> <span data-ttu-id="f2a7e-156">Nachdem die Klasse zum inkrementellen Laden initialisiert wurde, legen Sie diese auf die [**ItemsSource**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.ItemsControl.ItemsSource)-Eigenschaft des **ListView**-Steuerelements in der UI fest.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-156">Once the incremental loading class has been initialized, set it to the [**ItemsSource**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.ItemsControl.ItemsSource) property of the **ListView** control in the UI.</span></span> <span data-ttu-id="f2a7e-157">Jetzt werden die gefundenen Medienelemente inkrementell geladen und in der Liste angezeigt.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-157">Now, the found media items will be loaded incrementally and displayed in the list.</span></span>

<span data-ttu-id="f2a7e-158">Als Nächstes werden die Statusinformationen für den Suchvorgang ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-158">Next, the status information of the find operation are output.</span></span> <span data-ttu-id="f2a7e-159">Eine typische App zeigt diese Informationen dem Benutzer in der UI an, aber in diesem Beispiel werden die Informationen einfach in der Debugkonsole ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-159">A typical app will display this information to the user in the UI, but this example simply outputs the information to the debug console.</span></span> <span data-ttu-id="f2a7e-160">Legen Sie zum Schluss das Abbruchtoken auf Null fest, da der Vorgang abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-160">Finally, set the cancellation token to null because the operation is complete.</span></span>

[!code-cs[FindItems](./code/PhotoImport_Win10/cs/MainPage.xaml.cs#SnippetFindItems)]

## <a name="import-media-items"></a><span data-ttu-id="f2a7e-161">Importieren von Medienelementen</span><span class="sxs-lookup"><span data-stu-id="f2a7e-161">Import media items</span></span>

<span data-ttu-id="f2a7e-162">Deklarieren Sie vor dem Implementieren des Importvorgangs ein [**PhotoImportImportItemsResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportImportItemsResult)-Objekt zur Speicherung der Ergebnisse des Importvorgangs.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-162">Before implementing the import operation, declare a [**PhotoImportImportItemsResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportImportItemsResult) object to store the results of the import operation.</span></span> <span data-ttu-id="f2a7e-163">Dieses wird später zum Löschen von Medienelementen verwendet, die erfolgreich aus der Quelle importiert wurden.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-163">This will be used later to delete media items that were successfully imported from the source.</span></span>

[!code-cs[DeclareImportResult](./code/PhotoImport_Win10/cs/MainPage.xaml.cs#SnippetDeclareImportResult)]

<span data-ttu-id="f2a7e-164">Initialisieren Sie vor dem Starten der Medienimportvorgangs die **CancellationTokenSource**-Variable, und legen Sie den Wert des [**ProgressBar**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.ProgressBar)-Steuerelements auf 0 fest.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-164">Before starting the media import operation initialize the **CancellationTokenSource** variable and by setting the value of the [**ProgressBar**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.ProgressBar) control to 0.</span></span>

<span data-ttu-id="f2a7e-165">Wenn keine ausgewählten Elemente im **ListView**-Steuerelement vorhanden sind, gibt es nichts zu importieren.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-165">If there are no selected items in the **ListView** control, then there is nothing to import.</span></span> <span data-ttu-id="f2a7e-166">Initialisieren Sie andernfalls ein [**Progress**](https://msdn.microsoft.com/library/hh193692.aspx)-Objekt, um einen Statusrückruf bereitzustellen, der den Wert des Steuerelements für die Statusanzeige aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-166">Otherwise, initialize a [**Progress**](https://msdn.microsoft.com/library/hh193692.aspx) object to provide a progress callback which updates the value of the progress bar control.</span></span> <span data-ttu-id="f2a7e-167">Registrieren Sie einen Handler für das [**ItemImported**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult.ItemImported)-Ereignis von [**PhotoImportFindItemsResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult), das vom Suchvorgang zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-167">Register a handler for the [**ItemImported**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult.ItemImported) event of the [**PhotoImportFindItemsResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult) returned by the find operation.</span></span> <span data-ttu-id="f2a7e-168">Dieses Ereignis wird ausgelöst, wenn ein Element importiert wird, und gibt in diesem Beispiel den Namen jeder importierten Datei in der Debugkonsole aus.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-168">This event will be raised whenever an item is imported and, in this example, outputs the name of each imported file to the debug console.</span></span>

<span data-ttu-id="f2a7e-169">Rufen Sie [**ImportItemsAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult.ImportItemsAsync) auf, um den Importvorgang zu starten.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-169">Call [**ImportItemsAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult.ImportItemsAsync) to begin the import operation.</span></span> <span data-ttu-id="f2a7e-170">Genau wie bei dem Suchvorgang wird die [**AsTask**](https://msdn.microsoft.com/library/hh779750.aspx)-Erweiterungsmethode verwendet, um den zurückgegebenen Vorgang in eine Ausgabe zu konvertieren, auf die gewartet werden kann, die den Status meldet und abgebrochen werden kann.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-170">Just as with the find operation, the [**AsTask**](https://msdn.microsoft.com/library/hh779750.aspx) extension method is used to convert the returned operation to a task that can be awaited, reports progress, and can be cancelled.</span></span>

<span data-ttu-id="f2a7e-171">Nach Abschluss des Importvorgangs kann der Vorgangsstatus aus dem [**PhotoImportImportItemsResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportImportItemsResult)-Objekt abgerufen werden, das von [**ImportItemsAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult.ImportItemsAsync) zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-171">After the import operation is complete, the operation status can be obtained from the [**PhotoImportImportItemsResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportImportItemsResult) object returned by [**ImportItemsAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult.ImportItemsAsync).</span></span> <span data-ttu-id="f2a7e-172">In diesem Beispiel werden die Statusinformationen an die Debugkonsole ausgegeben und abschließend das Abbruchtoken auf Null festlegt.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-172">This example outputs the status information to the debug console and then finallly, sets the cancellation token to null.</span></span>

[!code-cs[ImportClick](./code/PhotoImport_Win10/cs/MainPage.xaml.cs#SnippetImportClick)]

## <a name="delete-imported-items"></a><span data-ttu-id="f2a7e-173">Löschen von importierten Elementen</span><span class="sxs-lookup"><span data-stu-id="f2a7e-173">Delete imported items</span></span>
<span data-ttu-id="f2a7e-174">Um erfolgreich importierte Elemente aus der Quelle zu löschen, aus der sie importiert wurden, initialisieren Sie zuerst das Abbruchtoken so, dass der Löschvorgang abgebrochen werden kann, und legen Sie den Wert der Statusanzeige auf 0 fest.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-174">To delete the successfully imported items from the source from which they were imported, first initialize the cancellation token so that the delete operation can be cancelled and set the progress bar value to 0.</span></span> <span data-ttu-id="f2a7e-175">Stellen Sie sicher, dass das [**PhotoImportImportItemsResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportImportItemsResult), das von [**ImportItemsAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult.ImportItemsAsync) zurückgegeben wurde, nicht Null ist.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-175">Make sure that the [**PhotoImportImportItemsResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportImportItemsResult) returned from [**ImportItemsAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportFindItemsResult.ImportItemsAsync) is not null.</span></span> <span data-ttu-id="f2a7e-176">Erstellen Sie andernfalls erneut ein [**Progress**](https://msdn.microsoft.com/library/hh193692.aspx)-Objekt, um einen Statusrückruf für den Löschvorgang bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-176">If not, once again create a [**Progress**](https://msdn.microsoft.com/library/hh193692.aspx) object to provide a progress callback for the delete operation.</span></span> <span data-ttu-id="f2a7e-177">Rufen Sie [**DeleteImportedItemsFromSourceAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportImportItemsResult.DeleteImportedItemsFromSourceAsync) auf, um den Löschvorgang für die importierten Elemente zu starten.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-177">Call [**DeleteImportedItemsFromSourceAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportImportItemsResult.DeleteImportedItemsFromSourceAsync) to start deleting the imported items.</span></span> <span data-ttu-id="f2a7e-178">Verwenden Sie **AsTask**, um das Ergebnis in eine awaitable-Aufgabe mit Status- und Abbruchfunktionen zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-178">Us **AsTask** to convert the result to an awaitable task with progress and cancellation capabilities.</span></span> <span data-ttu-id="f2a7e-179">Nach dem Warten kann das zurückgegebene [**PhotoImportDeleteImportedItemsFromSourceResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportDeleteImportedItemsFromSourceResult)-Objekt zum Abrufen und Anzeigen von Statusinformationen über den Löschvorgang verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f2a7e-179">After awaiting, the returned [**PhotoImportDeleteImportedItemsFromSourceResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Import.PhotoImportDeleteImportedItemsFromSourceResult) object can be used to get and display status information about the delete operation.</span></span>

[!code-cs[DeleteClick](./code/PhotoImport_Win10/cs/MainPage.xaml.cs#SnippetDeleteClick)]








 


