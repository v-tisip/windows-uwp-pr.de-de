---
author: drewbatgit
ms.assetid: 0309c7a1-8e4c-4326-813a-cbd9f8b8300d
description: In diesem Artikel wird beschrieben, wie Sie für Ihre App zur Medienwiedergabe Medienunterbrechungen erstellen, planen und verwalten.
title: Erstellen, Planen und Verwalten von Medienunterbrechungen
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 5b8d25047435ece1c55a982e69be45fa0e6efb74
ms.sourcegitcommit: 517c83baffd344d4c705bc644d7c6d2b1a4c7e1a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 05/07/2018
ms.locfileid: "1843663"
---
# <a name="create-schedule-and-manage-media-breaks"></a><span data-ttu-id="73734-104">Erstellen, Planen und Verwalten von Medienunterbrechungen</span><span class="sxs-lookup"><span data-stu-id="73734-104">Create, schedule, and manage media breaks</span></span>

<span data-ttu-id="73734-105">In diesem Artikel wird beschrieben, wie Sie für Ihre App zur Medienwiedergabe Medienunterbrechungen erstellen, planen und verwalten.</span><span class="sxs-lookup"><span data-stu-id="73734-105">This article shows you how to create, schedule, and manage media breaks to your media playback app.</span></span> <span data-ttu-id="73734-106">Medienunterbrechungen werden normalerweise genutzt, um Audio- und Videoanzeigen in Medieninhalte einzufügen.</span><span class="sxs-lookup"><span data-stu-id="73734-106">Media breaks are typically used to insert audio or video ads into media content.</span></span> <span data-ttu-id="73734-107">Ab Windows 10, Version 1607, können Sie die [**MediaBreakManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager)-Klasse verwenden, um schnell und einfach Medienunterbrechungen zu jedem [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem)-Element hinzuzufügen, das Sie mit einem [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer) abspielen.</span><span class="sxs-lookup"><span data-stu-id="73734-107">Starting with Windows 10, version 1607, you can use the [**MediaBreakManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager) class to quickly and easily add media breaks to any [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem) that you play with a [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer).</span></span>


<span data-ttu-id="73734-108">Nachdem Sie eine oder mehrere Medienunterbrechungen geplant haben, spielt das System automatisch die Medieninhalte zum angegebenen Zeitpunkt während der Wiedergabe ab.</span><span class="sxs-lookup"><span data-stu-id="73734-108">After you schedule one or more media breaks, the system will automatically play your media content at the specified time during playback.</span></span> <span data-ttu-id="73734-109">Der **MediaBreakManager** stellt Ereignisse bereit, damit Ihre App reagieren kann, wenn Medienunterbrechungen beginnen, enden oder vom Benutzer übersprungen werden.</span><span class="sxs-lookup"><span data-stu-id="73734-109">The **MediaBreakManager** provides events so that your app can react when media breaks start, end, or when they are skipped by the user.</span></span> <span data-ttu-id="73734-110">Sie können auch auf eine [**MediaPlaybackSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession) für Ihre Medienunterbrechnungen zugreifen, um Ereignisse, wie z. B. das Herunterladen und Puffern von Updates, zu überwachen.</span><span class="sxs-lookup"><span data-stu-id="73734-110">You can also access a [**MediaPlaybackSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession) for your media breaks to monitor events such as download and buffering progress updates.</span></span>

## <a name="schedule-media-breaks"></a><span data-ttu-id="73734-111">Medienunterbrechungen planen</span><span class="sxs-lookup"><span data-stu-id="73734-111">Schedule media breaks</span></span>
<span data-ttu-id="73734-112">Jedes **MediaPlaybackItem**-Objekt verfügt über einen eigenen [**MediaBreakSchedule**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakSchedule) zum Konfigurieren der Medienunterbrechungen, die wiedergegeben werden sollen, wenn das Element abgespielt wird.</span><span class="sxs-lookup"><span data-stu-id="73734-112">Every **MediaPlaybackItem** object has its own [**MediaBreakSchedule**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakSchedule) that you use to configure the media breaks that will play when the item is played.</span></span> <span data-ttu-id="73734-113">Der erste Schritt zur Verwendung von Medienunterbrechungen in Ihrer App ist die Erstellung eines [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem)-Elements für Ihre Hauptinhalte für die Wiedergabe.</span><span class="sxs-lookup"><span data-stu-id="73734-113">The first step for using media breaks in your app is to create a [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem) for your main playback content.</span></span> 

[!code-cs[MoviePlaybackItem](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetMoviePlaybackItem)]

<span data-ttu-id="73734-114">Weitere Informationen zum Arbeiten mit **MediaPlaybackItem**, [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList) und anderen grundlegenden Medienwiedergabe-APIs finden Sie unter [Medienelemente, Wiedergabelisten und Titel](media-playback-with-mediasource.md).</span><span class="sxs-lookup"><span data-stu-id="73734-114">For more information about working with **MediaPlaybackItem**, [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList) and other fundamental media playback APIs, see [Media items, playlists, and tracks](media-playback-with-mediasource.md).</span></span>

<span data-ttu-id="73734-115">Das nächste Beispiel zeigt, wie Sie dem **MediaPlaybackItem**-Element eine PreRoll-Unterbrechung hinzufügen, was bedeutet, dass das System die Medienunterbrechung vor der Wiedergabe des Wiedergabeelements, zu dem die Unterbrechung gehört, wiedergibt.</span><span class="sxs-lookup"><span data-stu-id="73734-115">The next example shows how to add a preroll break to the **MediaPlaybackItem**, which means that the system will play the media break before playing the playback item to which the break belongs.</span></span> <span data-ttu-id="73734-116">Zuerst wird ein neues [**MediaBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreak)-Objekt instanziiert.</span><span class="sxs-lookup"><span data-stu-id="73734-116">First a new [**MediaBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreak) object is instantiated.</span></span> <span data-ttu-id="73734-117">In diesem Beispiel wird der Konstruktor mit [**MediaBreakInsertionMethod.Interrupt**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakInsertionMethod) aufgerufen, d. h. der Hauptinhalt wird angehalten, während der Unterbrechungsinhalt wiedergegeben wird.</span><span class="sxs-lookup"><span data-stu-id="73734-117">In this example, the constructor is called with [**MediaBreakInsertionMethod.Interrupt**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakInsertionMethod), meaning that the main content will be paused while the break content is played.</span></span> 

<span data-ttu-id="73734-118">Als Nächstes wird ein neues **MediaPlaybackItem**-Element für den Inhalt erstellt, der während der Unterbrechung, z. B. in Form einer Anzeige, wiedergegeben wird.</span><span class="sxs-lookup"><span data-stu-id="73734-118">Next, a new **MediaPlaybackItem** is created for the content that will be played during the break, such as an ad.</span></span> <span data-ttu-id="73734-119">Die [**CanSkip**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.CanSkip)-Eigenschaft dieses Wiedergabeelements ist auf "false" festgelegt.</span><span class="sxs-lookup"><span data-stu-id="73734-119">The [**CanSkip**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.CanSkip) property of this playback item is set to false.</span></span> <span data-ttu-id="73734-120">Das bedeutet, dass der Benutzer das Element mit den integrierten Mediensteuerelementen nicht überspringen kann.</span><span class="sxs-lookup"><span data-stu-id="73734-120">This means that the user will not be able to skip the item using the built-in media controls.</span></span> <span data-ttu-id="73734-121">Die App kann dennoch entscheiden, die Anzeige durch den Aufruf von [**SkipCurrentBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.SkipCurrentBreak) programmgesteuert zu überspringen.</span><span class="sxs-lookup"><span data-stu-id="73734-121">Your app can still choose to skip the add programatically by calling [**SkipCurrentBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.SkipCurrentBreak).</span></span> 

<span data-ttu-id="73734-122">Die [**PlaybackList**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreak.PlaybackList)-Eigenschaft der Medienunterbrechung ist eine [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList), mit der Sie mehrere Medienelemente als eine Wiedergabeliste wiedergegeben können.</span><span class="sxs-lookup"><span data-stu-id="73734-122">The media break's [**PlaybackList**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreak.PlaybackList) property is a [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList) that allows you to play multiple media items as a playlist.</span></span> <span data-ttu-id="73734-123">Fügen Sie ein oder mehrere **MediaPlaybackItem**-Objekte aus der Sammlung **Elemente** der Liste hinzu, um sie in die Wiedergabeliste der Medienunterbrechung einzufügen.</span><span class="sxs-lookup"><span data-stu-id="73734-123">Add one or more **MediaPlaybackItem** objects from the list's **Items** collection to include them in the media break's playlist.</span></span>

<span data-ttu-id="73734-124">Planen Sie dann die Medienunterbrechung, indem Sie die [**BreakSchedule**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.BreakSchedule)-Eigenschaft des Elements für die Wiedergabe des Hauptinhalts.</span><span class="sxs-lookup"><span data-stu-id="73734-124">Finally, schedule the media break by using the main content playback item's [**BreakSchedule**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.BreakSchedule) property.</span></span> <span data-ttu-id="73734-125">Definieren Sie die Unterbrechung als PreRoll-Unterbrechung, indem Sie sie der [**PrerollBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakSchedule.PrerollBreak)-Eigenschaft des Schedule-Objekts zuweisen.</span><span class="sxs-lookup"><span data-stu-id="73734-125">Specify the break to be a preroll break by assigning it to the [**PrerollBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakSchedule.PrerollBreak) property of the schedule object.</span></span>

[!code-cs[PreRollBreak](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetPreRollBreak)]

<span data-ttu-id="73734-126">Jetzt können Sie das Hauptmedienelement wiedergeben, wobei die von Ihnen erstellte Medienunterbrechung vor dem Hauptinhalt wiedergegeben wird.</span><span class="sxs-lookup"><span data-stu-id="73734-126">Now you can play back the main media item, and the media break that you created will play before the main content.</span></span> <span data-ttu-id="73734-127">Erstellen Sie ein neues [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer)-Objekt, und legen Sie die [**AutoPlay**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.AutoPlay)-Eigenschaft optional auf "true" fest, um die Wiedergabe automatisch zu starten.</span><span class="sxs-lookup"><span data-stu-id="73734-127">Create a new [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer) object and optionally set the [**AutoPlay**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.AutoPlay) property to true to start playback automatically.</span></span> <span data-ttu-id="73734-128">Legen Sie die [**Source**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Source)-Eigenschaft des **MediaPlayer** auf das Element für die Wiedergabe des Hauptinhalts fest.</span><span class="sxs-lookup"><span data-stu-id="73734-128">Set the [**Source**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Source) property of the **MediaPlayer** to your main content playback item.</span></span> <span data-ttu-id="73734-129">Es ist zwar nicht erforderlich, aber Sie können den **MediaPlayer** einem [**MediaPlayerElement**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement) zuweisen, um die Medien auf einer XAML-Seite zu rendern.</span><span class="sxs-lookup"><span data-stu-id="73734-129">It's not required, but you can assign the **MediaPlayer** to a [**MediaPlayerElement**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement) to render the media in a XAML page.</span></span> <span data-ttu-id="73734-130">Weitere Informationen zur Verwendung des **MediaPlayer** finden Sie unter [Wiedergeben von Audio- und Videoinhalten mit MediaPlayer](play-audio-and-video-with-mediaplayer.md).</span><span class="sxs-lookup"><span data-stu-id="73734-130">For more information about using **MediaPlayer**, see [Play audio and video with MediaPlayer](play-audio-and-video-with-mediaplayer.md).</span></span>

[!code-cs[Play](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetPlay)]

<span data-ttu-id="73734-131">Fügen Sie eine PostRoll-Unterbrechung hinzu, die nach Abschluss der Wiedergabe des **MediaPlaybackItem**, das den Hauptinhalt enthält, wiedergegeben wird. Verwenden Sie dabei das gleiche Verfahren wie bei einer PreRoll-Unterbrechung, außer dass Sie Ihr **MediaBreak**-Objekt der [**PostrollBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakSchedule.PostrollBreak)-Eigenschaft zuweisen.</span><span class="sxs-lookup"><span data-stu-id="73734-131">Add a postroll break that plays after the **MediaPlaybackItem** containing your main content finishes playing, by using the same technique as a preroll break, except that you assign your **MediaBreak** object to the [**PostrollBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakSchedule.PostrollBreak) property.</span></span>

[!code-cs[PostRollBreak](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetPostRollBreak)]

<span data-ttu-id="73734-132">Sie können auch eine oder mehrere MidRoll-Unterbrechungen planen, die zur angegebenen Zeit innerhalb der Wiedergabe des Hauptinhalts wiedergegeben werden.</span><span class="sxs-lookup"><span data-stu-id="73734-132">You can also schedule one or more midroll breaks that play at a specified time within the playback of the main content.</span></span> <span data-ttu-id="73734-133">Im folgenden Beispiel wird das [**MediaBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreak)-Objekt mit der Konstruktorüberladung erstellt, die ein **TimeSpan**-Objekt akzeptiert, das innerhalb der Wiedergabe des Hauptmedienelements die Zeit für die Wiedergabe der Unterbrechung angibt.</span><span class="sxs-lookup"><span data-stu-id="73734-133">In the following example, the [**MediaBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreak) is created with the constructor overload that accepts a **TimeSpan** object, which specifies the time within the playback of the main media item when the break will be played.</span></span> <span data-ttu-id="73734-134">Auch hier wird ein [**MediaBreakInsertionMethod.Interrupt**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakInsertionMethod) festgelegt, um anzugeben, dass die Wiedergabe des Hauptinhalts während der Wiedergabe der Unterbrechung angehalten wird.</span><span class="sxs-lookup"><span data-stu-id="73734-134">Again, [**MediaBreakInsertionMethod.Interrupt**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakInsertionMethod) is specified to indicate that the main content's playback will be paused while the break plays.</span></span> <span data-ttu-id="73734-135">Die MidRoll-Unterbrechung wird dem Zeitplan durch Aufrufen von [**InsertMidrollBreak**](https://msdn.microsoft.com/library/windows/apps/mt670692) hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="73734-135">The midroll break is added to the schedule by calling [**InsertMidrollBreak**](https://msdn.microsoft.com/library/windows/apps/mt670692).</span></span> <span data-ttu-id="73734-136">Sie können eine schreibgeschützte Liste der aktuellen MidRoll-Unterbrechungen im Zeitplan abrufen, indem Sie auf die [**MidrollBreaks**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakSchedule.MidrollBreaks)-Eigenschaft zugreifen.</span><span class="sxs-lookup"><span data-stu-id="73734-136">You can get a read-only list of the current midroll breaks in the schedule by accessing the [**MidrollBreaks**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakSchedule.MidrollBreaks) property.</span></span>

[!code-cs[MidrollBreak](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetMidrollBreak)]

<span data-ttu-id="73734-137">Beim nächsten Beispiel für eine MidRoll-Unterbrechung wird die [**MediaBreakInsertionMethod.Replace**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakInsertionMethod)-Einfügemethode verwendet. Dies bedeutet, dass das System während der Wiedergabe der Unterbrechung die Verarbeitung des Hauptinhalts fortsetzt.</span><span class="sxs-lookup"><span data-stu-id="73734-137">The next midroll break example shown uses the [**MediaBreakInsertionMethod.Replace**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakInsertionMethod) insertion method, which means that the system will continue processing the main content while the break is playing.</span></span> <span data-ttu-id="73734-138">Diese Option wird normalerweise von Live-Streaming-Medien-Apps verwendet, deren Inhalt nicht angehalten und hinter den Live-Stream zurückfallen soll, während die Anzeige wiedergegeben wird.</span><span class="sxs-lookup"><span data-stu-id="73734-138">This option is typically used by live streaming media apps where you don't want the content to pause and fall behind the live stream while the ad is played.</span></span> 

<span data-ttu-id="73734-139">Bei diesem Beispiel wird auch eine Überladung des [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem)-Konstruktors verwendet, der zwei [**TimeSpan**](https://msdn.microsoft.com/library/windows/apps/Windows.Foundation.TimeSpan)-Parameter akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="73734-139">This example also uses an overload of the [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem) constructor that accepts two [**TimeSpan**](https://msdn.microsoft.com/library/windows/apps/Windows.Foundation.TimeSpan) parameters.</span></span> <span data-ttu-id="73734-140">Der erste Parameter definiert den Startpunkt innerhalb des Medienunterbrechungselements, an dem die Wiedergabe beginnen soll.</span><span class="sxs-lookup"><span data-stu-id="73734-140">The first parameter specifies the starting point within the media break item where playback will begin.</span></span> <span data-ttu-id="73734-141">Der zweite Parameter definiert die Dauer, während der die Medienunterbrechung wiedergegeben werden soll.</span><span class="sxs-lookup"><span data-stu-id="73734-141">The second parameter specifies the duration for which the media break item will be played.</span></span> <span data-ttu-id="73734-142">Im folgenden Beispiel beginnt daher die **MediaBreak**-Wiedergabe bei 20 Minuten im Hauptinhalt.</span><span class="sxs-lookup"><span data-stu-id="73734-142">So, in the following example, the **MediaBreak** will begin playing at 20 minutes into the main content.</span></span> <span data-ttu-id="73734-143">Mit seiner Wiedergabe beginnt das Medienelement 30 Sekunden ab dem Beginn des Unterbrechungsmedienelements und setzt sie 15 Sekunden lang fort, bevor die Wiedergabe des Hauptmedieninhalts wieder aufgenommen wird.</span><span class="sxs-lookup"><span data-stu-id="73734-143">When it plays, the media item will start 30 seconds from the beginning of the break media item and will play for 15 seconds before the main media content resumes playing.</span></span>

[!code-cs[MidrollBreak2](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetMidrollBreak2)]

## <a name="skip-media-breaks"></a><span data-ttu-id="73734-144">Medienunterbrechungen überspringen</span><span class="sxs-lookup"><span data-stu-id="73734-144">Skip media breaks</span></span>
<span data-ttu-id="73734-145">Wie bereits in diesem Artikel erwähnt, kann die [**CanSkip**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.CanSkip)-Eigenschaft eines **MediaPlaybackItem** so festgelegt werden, dass der Benutzer den Inhalt mit den integrierten Steuerelementen nicht überspringen kann.</span><span class="sxs-lookup"><span data-stu-id="73734-145">As mentioned previously in this article, the [**CanSkip**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.CanSkip) property of a **MediaPlaybackItem** can be set to prevent the user from skipping the content with the built-in controls.</span></span> <span data-ttu-id="73734-146">Sie können jedoch [**SkipCurrentBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.SkipCurrentBreak) im Code jederzeit aufrufen, um die aktuelle Unterbrechung zu überspringen.</span><span class="sxs-lookup"><span data-stu-id="73734-146">However, you can call [**SkipCurrentBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.SkipCurrentBreak) from your code at any time to skip the current break.</span></span>

[!code-cs[SkipButtonClick](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetSkipButtonClick)]

## <a name="handle-mediabreak-events"></a><span data-ttu-id="73734-147">Behandeln von MediaBreak-Ereignissen</span><span class="sxs-lookup"><span data-stu-id="73734-147">Handle MediaBreak events</span></span>

<span data-ttu-id="73734-148">Es gibt verschiedene Ereignisse im Zusammenhang mit Medienunterbrechungen, für die Sie sich registrieren können, um basierend auf den Zustandsänderungen von Medienunterbrechungen Maßnahmen zu ergreifen.</span><span class="sxs-lookup"><span data-stu-id="73734-148">There are several events related to media breaks that you can register for in order to take action based on the changing state of media breaks.</span></span>

[!code-cs[RegisterMediaBreakEvents](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetRegisterMediaBreakEvents)]

<span data-ttu-id="73734-149">Das [**BreakStarted**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.BreakStarted)-Ereignis wird ausgelöst, wenn eine Medienunterbrechung beginnt.</span><span class="sxs-lookup"><span data-stu-id="73734-149">The [**BreakStarted**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.BreakStarted) is raised when a media break starts.</span></span> <span data-ttu-id="73734-150">Es empfiehlt sich, die Benutzeroberfläche zu aktualisieren, um den Benutzer darauf hinzuweisen, dass Unterbrechungsmedieninhalt wiedergegeben wird.</span><span class="sxs-lookup"><span data-stu-id="73734-150">You may want to update your UI to let the user know that media break content is playing.</span></span> <span data-ttu-id="73734-151">In diesem Beispiel wird das dem Handler übergebene [**MediaBreakStartedEventArgs**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakStartedEventArgs)-Objekt verwendet, um einen Verweis auf die Medienunterbrechung zu erhalten, die begonnen hat.</span><span class="sxs-lookup"><span data-stu-id="73734-151">This example uses the [**MediaBreakStartedEventArgs**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakStartedEventArgs) passed into the handler to get a reference to the media break that started.</span></span> <span data-ttu-id="73734-152">Anschließend wird die [**CurrentItemIndex**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList.CurrentItemIndex)-Eigenschaft verwendet, um zu bestimmen, welches Medienelement in der Wiedergabeliste der Medienunterbrechung wiedergegeben wird.</span><span class="sxs-lookup"><span data-stu-id="73734-152">Then the [**CurrentItemIndex**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList.CurrentItemIndex) property is used to determine which media item in the media break's playlist is being played.</span></span> <span data-ttu-id="73734-153">Dann wird die Benutzeroberfläche aktualisiert, um dem Benutzer den aktuellen Anzeigenindex und die Anzahl der in der Unterbrechung verbliebenen Anzeigen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="73734-153">Then the UI is updated to show the user the current ad index and the number of ads remaining in the break.</span></span> <span data-ttu-id="73734-154">Beachten Sie, dass Aktualisierungen der Benutzeroberfläche im UI-Thread vorgenommen werden müssen. Daher sollte der Aufruf innerhalb eines Aufrufs von [**RunAsync**](https://msdn.microsoft.com/library/windows/apps/hh750317) erfolgen.</span><span class="sxs-lookup"><span data-stu-id="73734-154">Remember that updates to the UI must be made on the UI thread, so the call should be made inside a call to [**RunAsync**](https://msdn.microsoft.com/library/windows/apps/hh750317).</span></span> 

[!code-cs[BreakStarted](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetBreakStarted)]

<span data-ttu-id="73734-155">[**BreakEnded**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.BreakEnded) wird ausgelöst, wenn alle Medienelemente in der Unterbrechung wiedergegeben oder übersprungen wurden.</span><span class="sxs-lookup"><span data-stu-id="73734-155">[**BreakEnded**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.BreakEnded) is raised when all of the media items in the break have finished playing or have been skipped over.</span></span> <span data-ttu-id="73734-156">Sie können den Handler für dieses Ereignis zum Aktualisieren der Benutzeroberfläche verwenden, um anzugeben, dass die Wiedergabe der Medienunterbrechung beendet ist.</span><span class="sxs-lookup"><span data-stu-id="73734-156">You can use the handler for this event to update the UI to indicate that media break content is no longer playing.</span></span>

[!code-cs[BreakEnded](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetBreakEnded)]

<span data-ttu-id="73734-157">Das **BreakSkipped**-Ereignis wird ausgelöst, wenn der Benutzer in der integrierten Benutzeroberfläche die Schaltfläche *Weiter* während der Wiedergabe eines Elements drückt, für das [**CanSkip**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.CanSkip) den Wert true hat, oder wenn Sie eine Unterbrechung in Ihrem Code durch Aufrufen von [**SkipCurrentBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.SkipCurrentBreak) überspringen.</span><span class="sxs-lookup"><span data-stu-id="73734-157">The **BreakSkipped** event is raised when the user presses the *Next* button in the built-in UI during playback of an item for which [**CanSkip**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.CanSkip) is true, or when you skip a break in your code by calling [**SkipCurrentBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.SkipCurrentBreak).</span></span>

<span data-ttu-id="73734-158">Im folgenden Beispiel wird die [**Source**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Source)-Eigenschaft des **MediaPlayer** verwendet, um einen Verweis auf das Medienelement für den Hauptinhalt zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="73734-158">The following example uses the [**Source**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Source) property of the **MediaPlayer** to get a reference to the media item for the main content.</span></span> <span data-ttu-id="73734-159">Die übersprungene Medienunterbrechung gehört zum Unterbrechungszeitplan dieses Elements.</span><span class="sxs-lookup"><span data-stu-id="73734-159">The skipped media break belongs to the break schedule of this item.</span></span> <span data-ttu-id="73734-160">Als Nächstes führt der Code eine Überprüfung durch, um festzustellen, ob die übersprungene Medienunterbrechung der Medienunterbrechung entspricht, für die die [**PrerollBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakSchedule.PrerollBreak)-Eigenschaft des Zeitplans festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="73734-160">Next, the code checks to see if the media break that was skipped is the same as the media break set to the [**PrerollBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakSchedule.PrerollBreak) property of the schedule.</span></span> <span data-ttu-id="73734-161">Falls ja, bedeutet dies, dass es sich bei der PreRoll-Unterbrechung um die übersprungene Unterbrechung handelt, und in diesem Fall eine neue MidRoll-Unterbrechung erstellt und für die Wiedergabe von 10 Minuten in den Hauptinhalt geplant wird.</span><span class="sxs-lookup"><span data-stu-id="73734-161">If so, this means that the preroll break was the break that was skipped, and in this case, a new midroll break is created and scheduled to play 10 minutes into the main content.</span></span>

[!code-cs[BreakSkipped](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetBreakSkipped)]

<span data-ttu-id="73734-162">[**BreaksSeekedOver**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.BreaksSeekedOver) wird ausgelöst, wenn die Wiedergabeposition des Hauptmedienelements den geplanten Zeitpunkt für eine oder mehrere Medienunterbrechungen passiert.</span><span class="sxs-lookup"><span data-stu-id="73734-162">[**BreaksSeekedOver**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.BreaksSeekedOver) is raised when the playback position of the main media item passes over the scheduled time for one or more media breaks.</span></span> <span data-ttu-id="73734-163">Im folgenden Beispiel wird eine Überprüfung durchgeführt, um festzustellen, ob mehr als eine Medienunterbrechung übergangen wurde, wenn die Wiedergabeposition nach vorne verschoben wird und wenn sie um weniger als 10 Minuten nach vorne verschoben wird.</span><span class="sxs-lookup"><span data-stu-id="73734-163">The following example checks to see if more than one media break was seeked over, if the playback position was moved forward, and if it was moved forward less than 10 minutes.</span></span> <span data-ttu-id="73734-164">Falls ja, wird die erste übergangene Unterbrechung, die aus der [**SeekedOverBreaks**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakSeekedOverEventArgs.SeekedOverBreaks)-Sammlung abgerufen und von den Ereignisargumenten verfügbar gemacht wurde, durch einen Aufruf der [**PlayBreak**](https://msdn.microsoft.com/library/windows/apps/mt670689)-Methode des **MediaPlayer.BreakManager** sofort wiedergegeben.</span><span class="sxs-lookup"><span data-stu-id="73734-164">If so, the first break that was seeked over, obtained from the [**SeekedOverBreaks**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakSeekedOverEventArgs.SeekedOverBreaks) collection exposed by the event args, is played immediately with a call to the [**PlayBreak**](https://msdn.microsoft.com/library/windows/apps/mt670689) method of the **MediaPlayer.BreakManager**.</span></span>

[!code-cs[BreakSeekedOver](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetBreakSeekedOver)]

## <a name="get-information-about-the-current-media-break"></a><span data-ttu-id="73734-165">Abrufen von Informationen über die aktuelle Medienunterbrechung</span><span class="sxs-lookup"><span data-stu-id="73734-165">Get information about the current media break</span></span>
<span data-ttu-id="73734-166">Wie in diesem Artikel bereits erwähnt, kann die [**CurrentItemIndex**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList.CurrentItemIndex)-Eigenschaft verwendet werden, um zu ermitteln, welches Medienelement in einer Medienunterbrechung gerade wiedergegeben wird.</span><span class="sxs-lookup"><span data-stu-id="73734-166">As mentioned previously in this article, the [**CurrentItemIndex**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList.CurrentItemIndex) property can be used to determine which media item in a media break is currently playing.</span></span> <span data-ttu-id="73734-167">Es empfiehlt sich, in regelmäßigen Abständen eine Überprüfung auf das gerade wiedergegebene Element durchzuführen, um die Benutzeroberfläche zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="73734-167">You may want to periodically check for the currently playing item in order to update your UI.</span></span> <span data-ttu-id="73734-168">Überprüfen Sie unbedingt zuerst die [**CurrentBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.CurrentBreak)-Eigenschaft auf null.</span><span class="sxs-lookup"><span data-stu-id="73734-168">Be sure to check the [**CurrentBreak**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager.CurrentBreak) property for null first.</span></span> <span data-ttu-id="73734-169">Wenn die Eigenschaft null ist, wird gerade keine Medienunterbrechung wiedergegeben.</span><span class="sxs-lookup"><span data-stu-id="73734-169">If the property is null, no media break is currently playing.</span></span>

[!code-cs[GetCurrentBreakItemIndex](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetGetCurrentBreakItemIndex)]

## <a name="access-the-current-playback-session"></a><span data-ttu-id="73734-170">Zugreifen auf die aktuelle Wiedergabesitzung</span><span class="sxs-lookup"><span data-stu-id="73734-170">Access the current playback session</span></span>
<span data-ttu-id="73734-171">Das [**MediaPlaybackSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession)-Objekt verwendet die **MediaPlayer**-Klasse, um Daten und Ereignisse in Zusammenhang mit den gerade wiedergegebenen Medieninhalten bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="73734-171">The [**MediaPlaybackSession**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession) object uses the **MediaPlayer** class to provide data and events related to the currently playing media content.</span></span> <span data-ttu-id="73734-172">Der [**MediaBreakManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager) verfügt auch über eine **MediaPlaybackSession**, auf die Sie zugreifen können, um Daten und Ereignisse abzurufen, die sich speziell auf den Inhalt der Medienunterbrechung beziehen, der gerade wiedergegeben wird.</span><span class="sxs-lookup"><span data-stu-id="73734-172">The [**MediaBreakManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaBreakManager) also has a **MediaPlaybackSession** that you can access to get data and events specifically related to the media break content that is being played.</span></span> <span data-ttu-id="73734-173">Zu den Informationen, die Sie aus der Wiedergabesitzung erhalten können, gehören der aktuelle Wiedergabestatus, Wiedergabe oder Angehalten, und die aktuelle Wiedergabeposition innerhalb des Inhalts.</span><span class="sxs-lookup"><span data-stu-id="73734-173">Information you can get from the playback session includes the current playback state, playing or paused, and the current playback position within the content.</span></span> <span data-ttu-id="73734-174">Sie können die Eigenschaften [**NaturalVideoWidth**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.NaturalVideoWidth) und [**NaturalVideoHeight**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.NaturalVideoHeight) sowie [**NaturalVideoSizeChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.NaturalVideoSizeChanged) verwenden, um die Video-Benutzeroberfläche anzupassen, wenn der Inhalt der Medienunterbrechung ein anderes Seitenverhältnis besitzt als der Hauptinhalt.</span><span class="sxs-lookup"><span data-stu-id="73734-174">You can use the [**NaturalVideoWidth**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.NaturalVideoWidth) and [**NaturalVideoHeight**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.NaturalVideoHeight) properties and the [**NaturalVideoSizeChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.NaturalVideoSizeChanged) to adjust your video UI if the media break content has a different aspect ratio than your main content.</span></span> <span data-ttu-id="73734-175">Sie können auch Ereignisse empfangen, wie z. B. [**BufferingStarted**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.BufferingStarted), [**BufferingEnded**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.BufferingEnded) und [**DownloadProgressChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.DownloadProgressChanged), die wertvolle Telemetriedaten zur Leistung Ihrer App liefern können.</span><span class="sxs-lookup"><span data-stu-id="73734-175">You can also receive events such as [**BufferingStarted**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.BufferingStarted), [**BufferingEnded**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.BufferingEnded), and [**DownloadProgressChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackSession.DownloadProgressChanged) that can provide valuable telemetry about the performance of your app.</span></span>

<span data-ttu-id="73734-176">Im folgenden Beispiel wird ein Handler für das **BufferingProgressChanged-Ereignis** registriert. Im Ereignishandler aktualisiert es die Benutzeroberfläche, um den aktuellen Fortschritt der Pufferung anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="73734-176">The following example registers a handler for the **BufferingProgressChanged event**; in the event handler, it updates the UI to show the current buffering progress.</span></span>

[!code-cs[RegisterBufferingProgressChanged](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetRegisterBufferingProgressChanged)]

[!code-cs[BufferingProgressChanged](./code/MediaBreaks_RS1/cs/MainPage.xaml.cs#SnippetBufferingProgressChanged)]

## <a name="related-topics"></a><span data-ttu-id="73734-177">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="73734-177">Related topics</span></span>
* [<span data-ttu-id="73734-178">Medienwiedergabe</span><span class="sxs-lookup"><span data-stu-id="73734-178">Media playback</span></span>](media-playback.md)
* [<span data-ttu-id="73734-179">Wiedergeben von Audio- und Videoinhalten mit „MediaPlayer“</span><span class="sxs-lookup"><span data-stu-id="73734-179">Play audio and video with MediaPlayer</span></span>](play-audio-and-video-with-mediaplayer.md)
* [<span data-ttu-id="73734-180">Manuelle Steuerung der Steuerelemente für den Systemmedientransport</span><span class="sxs-lookup"><span data-stu-id="73734-180">Manual control of the System Media Transport Controls</span></span>](system-media-transport-controls.md)

 

 




