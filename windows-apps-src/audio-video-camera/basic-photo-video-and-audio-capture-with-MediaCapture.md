---
author: drewbatgit
ms.assetid: 66d0c3dc-81f6-4d9a-904b-281f8a334dd0
description: In diesem Artikel wird beschrieben, wie Sie Fotos und Videos mit der MediaCapture-Klasse am einfachsten aufnehmen.
title: Allgemeine Foto-, Video- und Audioaufnahme mit „MediaCapture“
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
keywords: Windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 7204c01cc80c50dacb2009b2138a7c046974dc62
ms.sourcegitcommit: 38f06f1714334273d865935d9afb80efffe97a17
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/09/2018
ms.locfileid: "6185096"
---
# <a name="basic-photo-video-and-audio-capture-with-mediacapture"></a><span data-ttu-id="ceff7-104">Allgemeine Foto-, Video- und Audioaufnahme mit „MediaCapture“</span><span class="sxs-lookup"><span data-stu-id="ceff7-104">Basic photo, video, and audio capture with MediaCapture</span></span>


<span data-ttu-id="ceff7-105">In diesem Artikel wird beschrieben, wie Sie Fotos und Videos mit der [**MediaCapture**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture)-Klasse am einfachsten aufnehmen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-105">This article shows the simplest way to capture photos and video using the [**MediaCapture**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture) class.</span></span> <span data-ttu-id="ceff7-106">Die **MediaCapture**-Klasse stellt einen leistungsfähigen Satz von APIs bereit, der eine Steuerung der Aufnahmepipeline auf unterster Ebene sowie fortgeschrittene Aufnahmeszenarien ermöglicht. Dieser Artikel soll Ihnen jedoch helfen, Ihre App schnell und einfach durch grundlegende Medienaufnahmefunktionen zu erweitern.</span><span class="sxs-lookup"><span data-stu-id="ceff7-106">The **MediaCapture** class exposes a robust set of APIs that provide low-level control over the capture pipeline and enable advanced capture scenarios, but this article is intended to help you add basic media capture to your app quickly and easily.</span></span> <span data-ttu-id="ceff7-107">Informationen zu den von **MediaCapture** bereitgestellten Features finden Sie unter [**Kamera**](camera.md).</span><span class="sxs-lookup"><span data-stu-id="ceff7-107">To learn about more of the features that  **MediaCapture** provides, see [**Camera**](camera.md).</span></span>

<span data-ttu-id="ceff7-108">Wenn Sie einfach ein Foto oder Video aufnehmen möchten, ohne weitere Features für die Medienaufnahme hinzuzufügen, oder wenn Sie keine eigene Kamera-UI erstellen möchten, können Sie die [**CameraCaptureUI**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CameraCaptureUI)-Klasse verwenden. So können Sie einfach die in Windows integrierte Kamera-App starten, um die bereits aufgenommene Foto- oder Videodatei zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-108">If you simply want to capture a photo or video and don't intend to add any additional media capture features, or if you don't want to create your own camera UI, you may want to use the [**CameraCaptureUI**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CameraCaptureUI) class, which allows you to simply launch the Windows built-in camera app and receive the photo or video file that was captured.</span></span> <span data-ttu-id="ceff7-109">Weitere Informationen finden Sie unter [**Aufnehmen von Fotos und Videos mit der in Windows integrierten Kamera-UI**](capture-photos-and-video-with-cameracaptureui.md)</span><span class="sxs-lookup"><span data-stu-id="ceff7-109">For more information, see [**Capture photos and video with Windows built-in camera UI**](capture-photos-and-video-with-cameracaptureui.md)</span></span>

<span data-ttu-id="ceff7-110">Der Code in diesem Artikel wurde aus dem [**Camera Starter Kit**](https://go.microsoft.com/fwlink/?linkid=619479) übernommen und angepasst.</span><span class="sxs-lookup"><span data-stu-id="ceff7-110">The code in this article was adapted from the [**Camera starter kit**](https://go.microsoft.com/fwlink/?linkid=619479) sample.</span></span> <span data-ttu-id="ceff7-111">Sie können das Beispiel herunterladen, um den verwendeten Code im Kontext anzuzeigen oder das Beispiel als Ausgangspunkt für Ihre eigene App zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="ceff7-111">You can download the sample to see the code used in context or to use the sample as a starting point for your own app.</span></span>

## <a name="add-capability-declarations-to-the-app-manifest"></a><span data-ttu-id="ceff7-112">Hinzufügen von Funktionsdeklarationen zum App-Manifest</span><span class="sxs-lookup"><span data-stu-id="ceff7-112">Add capability declarations to the app manifest</span></span>

<span data-ttu-id="ceff7-113">Damit Ihre App auf die Kamera eines Geräts zugreifen kann, müssen Sie die Verwendung der *webcam*- und *microphone*-Gerätefunktionen durch Ihre App deklarieren.</span><span class="sxs-lookup"><span data-stu-id="ceff7-113">In order for your app to access a device's camera, you must declare that your app uses the *webcam* and *microphone* device capabilities.</span></span> <span data-ttu-id="ceff7-114">Wenn Sie aufgenommene Fotos und Videos in der Bild- oder Videobibliothek des Benutzers speichern möchten, müssen Sie auch die Funktionen *picturesLibrary* und *videosLibrary* deklarieren.</span><span class="sxs-lookup"><span data-stu-id="ceff7-114">If you want to save captured photos and videos to the users's Pictures or Videos library, you must also declare the *picturesLibrary* and *videosLibrary* capability.</span></span>

**<span data-ttu-id="ceff7-115">So fügen Sie dem App-Manifest Funktionen hinzu</span><span class="sxs-lookup"><span data-stu-id="ceff7-115">To add capabilities to the app manifest</span></span>**

1.  <span data-ttu-id="ceff7-116">Öffnen Sie in MicrosoftVisual Studio im **Projektmappen-Explorer** den Designer für das Anwendungsmanifest, indem Sie auf das Element **package.appxmanifest** doppelklicken.</span><span class="sxs-lookup"><span data-stu-id="ceff7-116">In Microsoft Visual Studio, in **Solution Explorer**, open the designer for the application manifest by double-clicking the **package.appxmanifest** item.</span></span>
2.  <span data-ttu-id="ceff7-117">Wählen Sie die Registerkarte **Funktionen** aus.</span><span class="sxs-lookup"><span data-stu-id="ceff7-117">Select the **Capabilities** tab.</span></span>
3.  <span data-ttu-id="ceff7-118">Aktivieren Sie die Kontrollkästchen für **Webcam** und **Mikrofon**.</span><span class="sxs-lookup"><span data-stu-id="ceff7-118">Check the box for **Webcam** and the box for **Microphone**.</span></span>
4.  <span data-ttu-id="ceff7-119">Für den Zugriff auf die Bibliothek „Bilder und Videos“ aktivieren Sie die Kontrollkästchen für **Bildbibliothek** und **Videobibliothek**.</span><span class="sxs-lookup"><span data-stu-id="ceff7-119">For access to the Pictures and Videos library check the boxes for **Pictures Library** and the box for **Videos Library**.</span></span>


## <a name="initialize-the-mediacapture-object"></a><span data-ttu-id="ceff7-120">Initialisieren des MediaCapture-Objekts</span><span class="sxs-lookup"><span data-stu-id="ceff7-120">Initialize the MediaCapture object</span></span>
<span data-ttu-id="ceff7-121">Alle in diesem Artikel beschriebenen Aufnahmemethoden erfordern als ersten Schritt die Initialisierung des [ **MediaCapture**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture)-Objekts. Dazu wird erst der Konstruktor und dann [**InitializeAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.InitializeAsync) aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-121">All of the capture methods described in this article require the first step of initializing the [**MediaCapture**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture) object by calling the constructor and then calling [**InitializeAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.InitializeAsync).</span></span> <span data-ttu-id="ceff7-122">Da der Zugriff auf das **MediaCapture**-Objekt von mehreren Stellen in der App erfolgt, deklarieren Sie eine Klassenvariable als Container für das Objekt.</span><span class="sxs-lookup"><span data-stu-id="ceff7-122">Since the **MediaCapture** object will be accessed from multiple places in your app, declare a class variable to hold the object.</span></span>  <span data-ttu-id="ceff7-123">Implementieren Sie einen Handler für das [**Failed**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.Failed)-Ereignis des **MediaCapture**-Objekts, damit Sie bei einem fehlerhaften Aufnahmevorgang benachrichtigt werden.</span><span class="sxs-lookup"><span data-stu-id="ceff7-123">Implement a handler for the **MediaCapture** object's [**Failed**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.Failed) event to be notified if a capture operation fails.</span></span>

[!code-cs[DeclareMediaCapture](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetDeclareMediaCapture)]

[!code-cs[InitMediaCapture](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetInitMediaCapture)]

## <a name="set-up-the-camera-preview"></a><span data-ttu-id="ceff7-124">Einrichten der Kameravorschau</span><span class="sxs-lookup"><span data-stu-id="ceff7-124">Set up the camera preview</span></span>
<span data-ttu-id="ceff7-125">Fotos, Videos und Audiodateien können auch mit **MediaCapture** aufgezeichnet werden, ohne die Kameravorschau anzuzeigen. Normalerweise ist der Vorschaudatenstrom jedoch erwünscht, damit der Benutzer sehen kann, was er aufzeichnet.</span><span class="sxs-lookup"><span data-stu-id="ceff7-125">It's possible to capture photos, videos, and audio using **MediaCapture** without showing the camera preview, but typically you want to show the preview stream so that the user can see what's being captured.</span></span> <span data-ttu-id="ceff7-126">Zum Aktivieren einiger **MediaCapture**-Features wie Autofokus, automatische Belichtung und automatischer Weißabgleich ist es außerdem erforderlich, dass der Vorschaudatenstrom aktiv ist.</span><span class="sxs-lookup"><span data-stu-id="ceff7-126">Also, a few **MediaCapture** features require the preview stream to be running before they can be enbled, including auto focus, auto exposure, and auto white balance.</span></span> <span data-ttu-id="ceff7-127">Informationen zum Einrichten der Kameravorschau finden Sie unter [**Anzeigen der Kameravorschau**](simple-camera-preview-access.md).</span><span class="sxs-lookup"><span data-stu-id="ceff7-127">To see how to set up the camera preview, see [**Display the camera preview**](simple-camera-preview-access.md).</span></span>

## <a name="capture-a-photo-to-a-softwarebitmap"></a><span data-ttu-id="ceff7-128">Aufnehmen eines Fotos in „SoftwareBitmap“</span><span class="sxs-lookup"><span data-stu-id="ceff7-128">Capture a photo to a SoftwareBitmap</span></span>
<span data-ttu-id="ceff7-129">Die [**SoftwareBitmap**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.SoftwareBitmap)-Klasse wurde in Windows 10 eingeführt, um über mehrere Features hinweg eine einheitliche Bilddarstellung zu gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="ceff7-129">The [**SoftwareBitmap**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.SoftwareBitmap) class was introduced in Windows 10 to provide a common representation of images across multiple features.</span></span> <span data-ttu-id="ceff7-130">Wenn Sie ein Foto aufzeichnen und dieses dann direkt in Ihrer App verwenden (z. B. in XAML anzeigen) möchten, sollte Sie es in **SoftwareBitmap** statt in einer Datei aufzeichnen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-130">If you want to capture a photo and then immediately use the captured image in your app, such as displaying it in XAML, instead of capturing to a file, then you should capture to a **SoftwareBitmap**.</span></span> <span data-ttu-id="ceff7-131">Sie können das Bild später immer noch auf einem Datenträger speichern.</span><span class="sxs-lookup"><span data-stu-id="ceff7-131">You still have the option of saving the image to disk later.</span></span>

<span data-ttu-id="ceff7-132">Nachdem Sie das **MediaCapture**-Objekt initialisiert haben, können Sie ein Foto mithilfe der [**LowLagPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagPhotoCapture)-Klasse in **SoftwareBitmap** aufzeichnen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-132">After initializing the **MediaCapture** object, you can capture a photo to a **SoftwareBitmap** using the [**LowLagPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagPhotoCapture) class.</span></span> <span data-ttu-id="ceff7-133">Rufen Sie eine Instanz dieser Klasse ab, indem Sie [**PrepareLowLagPhotoCaptureAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.PrepareLowLagPhotoCaptureAsync) aufrufen und ein [**ImageEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.ImageEncodingProperties)-Objekt übergeben, das das zu verwendende Bildformat angibt.</span><span class="sxs-lookup"><span data-stu-id="ceff7-133">Get an instance of this class by calling [**PrepareLowLagPhotoCaptureAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.PrepareLowLagPhotoCaptureAsync), passing in an [**ImageEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.ImageEncodingProperties) object specifying the image format you want.</span></span> <span data-ttu-id="ceff7-134">Mit [**CreateUncompressed**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.ImageEncodingProperties.CreateUncompressed) wird eine nicht komprimierte Codierung mit dem angegebenen Pixelformat erstellt.</span><span class="sxs-lookup"><span data-stu-id="ceff7-134">[**CreateUncompressed**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.ImageEncodingProperties.CreateUncompressed) creates an uncompressed encoding with the specified pixel format.</span></span> <span data-ttu-id="ceff7-135">Nehmen Sie ein Foto durch Aufrufen von [**CaptureAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagPhotoCapture.CaptureAsync) auf. Dadurch wird ein [**CapturedPhoto**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CapturedPhoto)-Objekt zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="ceff7-135">Capture a photo by calling [**CaptureAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagPhotoCapture.CaptureAsync), which returns a [**CapturedPhoto**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CapturedPhoto) object.</span></span> <span data-ttu-id="ceff7-136">Rufen Sie **SoftwareBitmap** ab, indem Sie erst auf die [**Frame**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CapturedPhoto.Frame)-Eigenschaft und dann auf die [**SoftwareBitmap**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CapturedFrame.SoftwareBitmap)-Eigenschaft zugreifen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-136">Get a **SoftwareBitmap** by accessing the [**Frame**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CapturedPhoto.Frame) property and then the [**SoftwareBitmap**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CapturedFrame.SoftwareBitmap) property.</span></span>

<span data-ttu-id="ceff7-137">Sie können auch mehrere Fotos erfassen, indem Sie **CaptureAsync** wiederholt aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-137">If you want, you can capture multiple photos by repeatedly calling **CaptureAsync**.</span></span> <span data-ttu-id="ceff7-138">Nachdem die Aufzeichnung abgeschlossen ist, rufen Sie [**FinishAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedPhotoCapture.FinishAsync) auf, um die **LowLagPhotoCapture**-Sitzung zu schließen und die zugeordneten Ressourcen freizugeben.</span><span class="sxs-lookup"><span data-stu-id="ceff7-138">When you are done capturing, call [**FinishAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedPhotoCapture.FinishAsync) to shut down the **LowLagPhotoCapture** session and free up the associated resources.</span></span> <span data-ttu-id="ceff7-139">Wenn Sie nach dem Aufrufen von **FinishAsync** mit dem Aufzeichnen von Fotos beginnen möchten, müssen Sie [**PrepareLowLagPhotoCaptureAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.PrepareLowLagPhotoCaptureAsync) erneut aufrufen, um die Aufzeichnungssitzung erneut zu initialisieren, bevor Sie [**CaptureAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagPhotoCapture.CaptureAsync) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-139">After calling **FinishAsync**, to begin capturing photos again you will need to call [**PrepareLowLagPhotoCaptureAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.PrepareLowLagPhotoCaptureAsync) again to reinitialize the capture session before calling [**CaptureAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagPhotoCapture.CaptureAsync).</span></span>

[!code-cs[CaptureToSoftwareBitmap](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetCaptureToSoftwareBitmap)]

<span data-ttu-id="ceff7-140">Beginnend mit Windows, Version 1803, können Sie auf die [**BitmapProperties**](https://docs.microsoft.com/uwp/api/windows.media.capture.capturedframe.bitmapproperties)-Eigenschaft der **CapturedFrame** -Klasse zugreifen, die von **CaptureAsync** zum Abrufen von Metadaten zu den erfassten Fotos zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="ceff7-140">Starting with Windows, version 1803, you can access the [**BitmapProperties**](https://docs.microsoft.com/uwp/api/windows.media.capture.capturedframe.bitmapproperties) property of the **CapturedFrame** class returned from **CaptureAsync** to retrieve metadata about the captured photo.</span></span> <span data-ttu-id="ceff7-141">Sie können diese Daten an einen **BitmapEncoder** übergeben, um die Metadaten in einer Datei zu speichern.</span><span class="sxs-lookup"><span data-stu-id="ceff7-141">You can pass this data into a **BitmapEncoder** to save the metadata to a file.</span></span> <span data-ttu-id="ceff7-142">Früher gab es keine Möglichkeit, auf diese Daten für nicht komprimierte Bildformate zugreifen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-142">Previously, there was no way to access this data for uncompressed image formats.</span></span> <span data-ttu-id="ceff7-143">Sie können auch auf die [**ControlValues**](https://docs.microsoft.com/uwp/api/windows.media.capture.capturedframe.controlvalues)-Eigenschaft zum Abrufen eines [**CapturedFrameControlValues**](https://docs.microsoft.com/uwp/api/windows.media.capture.capturedframecontrolvalues)-Objekts zugreifen, das das Steuerelement wie z.B. die Belichtung und den Weißabgleich der aufgenommenen Frame beschreibt.</span><span class="sxs-lookup"><span data-stu-id="ceff7-143">You can also access the [**ControlValues**](https://docs.microsoft.com/uwp/api/windows.media.capture.capturedframe.controlvalues) property to retrieve a [**CapturedFrameControlValues**](https://docs.microsoft.com/uwp/api/windows.media.capture.capturedframecontrolvalues) object that describes the control values, such as exposure and white balance, for the captured frame.</span></span>

<span data-ttu-id="ceff7-144">Weitere Informationen zum Arbeiten mit dem **BitmapEncoder** und dem **SoftwareBitmap**-Objekt, z. B. wie Sie ein Objekt in einer XAML-Seite anzeigen, finden Sie unter [**Erstellen, Bearbeiten und Speichern von Bitmapbildern**](imaging.md).</span><span class="sxs-lookup"><span data-stu-id="ceff7-144">For information about using **BitmapEncoder** and about working with the **SoftwareBitmap** object, including how to display one in a XAML page, see [**Create, edit, and save bitmap images**](imaging.md).</span></span> 

<span data-ttu-id="ceff7-145">Weitere Informationen zum Festlegen der Steurelementwerte des Aufnahmegeräts finden Sie unter [Steuerelemente des Aufnahmegeräts für Foto- und Videoaufnahmen](capture-device-controls-for-photo-and-video-capture.md).</span><span class="sxs-lookup"><span data-stu-id="ceff7-145">For more information on setting capture device control values, see [Capture device controls for photo and video](capture-device-controls-for-photo-and-video-capture.md).</span></span>

<span data-ttu-id="ceff7-146">Ab Windows10, Version 1803, erhalten Sie die Metadaten wie z.B. EXIF-Informationen für Fotos, die nicht komprimiert erfasst wurden, durch den Zugriff auf die [**BitmapProperties**](https://docs.microsoft.com/uwp/api/windows.media.capture.capturedframe.bitmapproperties)-Eigenschaft von der **CapturedFrame**, die von **MediaCapture** zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="ceff7-146">Starting with Windows 10, version 1803, you can get the metadata, such as EXIF information, for photos captured in uncompressed format by accessing the [**BitmapProperties**](https://docs.microsoft.com/uwp/api/windows.media.capture.capturedframe.bitmapproperties) property of the **CapturedFrame** returned by **MediaCapture**.</span></span> <span data-ttu-id="ceff7-147">In früheren Versionen waren diese Daten nur in der Kopfzeile des Fotos in einem komprimierten Dateiformat erhältlich.</span><span class="sxs-lookup"><span data-stu-id="ceff7-147">In previous releases this data was only accessible in the header of photos captured to a compressed file format.</span></span> <span data-ttu-id="ceff7-148">Sie können diese Daten für den [**BitmapEncoder**](https://docs.microsoft.com/uwp/api/windows.graphics.imaging.bitmapencoder) bereitstellen, wenn Sie sie manuell in eine Bilddatei schreiben.</span><span class="sxs-lookup"><span data-stu-id="ceff7-148">You can provide this data to a [**BitmapEncoder**](https://docs.microsoft.com/uwp/api/windows.graphics.imaging.bitmapencoder) when manually writing an image file.</span></span> <span data-ttu-id="ceff7-149">Weitere Informationen zur Kodierung von Bitmaps finden Sie im Artikel [Erstellen, Bearbeiten und Speichern von Bitmapbildern.](imaging.md).</span><span class="sxs-lookup"><span data-stu-id="ceff7-149">For more information on encoding bitmaps, see [Create, edit, and save bitmap images](imaging.md).</span></span>  <span data-ttu-id="ceff7-150">Sie können auch auf die Werte des Frame-Steuerelements zugreifen, z.B. die Belichtung und Flash-Einstellungen, die verwendet wurden, als das Image erfasst wurde, indem Sie auf die [**ControlValues**](https://docs.microsoft.com/en-us/uwp/api/windows.media.capture.capturedframe.controlvalues)-Eigenschaft zugreifen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-150">You can also access the frame control values, such as exposure and flash settings, used when the image was captured by accessing the [**ControlValues**](https://docs.microsoft.com/en-us/uwp/api/windows.media.capture.capturedframe.controlvalues) property.</span></span> <span data-ttu-id="ceff7-151">Weitere Informationen finden Sie unter [Steuerelemente des Aufnahmegeräts für Foto- und Videoaufnahmen](capture-device-controls-for-photo-and-video-capture.md).</span><span class="sxs-lookup"><span data-stu-id="ceff7-151">For more information, see [Capture device controls for photo and video capture](capture-device-controls-for-photo-and-video-capture.md).</span></span>

## <a name="capture-a-photo-to-a-file"></a><span data-ttu-id="ceff7-152">Aufnehmen eines Fotos in einer Datei</span><span class="sxs-lookup"><span data-stu-id="ceff7-152">Capture a photo to a file</span></span>
<span data-ttu-id="ceff7-153">Bei einer normalen Foto-App wird ein aufgenommenes Foto auf einem Datenträger oder in der Cloud gespeichert. Dabei müssen der Datei Metadaten hinzugefügt werden, z. B. die Ausrichtung des Fotos.</span><span class="sxs-lookup"><span data-stu-id="ceff7-153">A typical photography app will save a captured photo to disk or to cloud storage and will need to add metadata, such as photo orientation, to the file.</span></span> <span data-ttu-id="ceff7-154">Das folgende Beispiel zeigt, wie Sie ein Foto in einer Datei aufnehmen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-154">The following example shows you how to capture an photo to a file.</span></span> <span data-ttu-id="ceff7-155">Sie können später immer noch ein **SoftwareBitmap**-Objekt aus der Bilddatei erstellen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-155">You still have the option of creating a **SoftwareBitmap** from the image file later.</span></span> 

<span data-ttu-id="ceff7-156">Bei dem in diesem Beispiel dargestellten Verfahren wird das Foto in einen In-Memory-Datenstrom aufgenommen und dann vom Datenstrom in eine Datei auf einem Datenträger codiert.</span><span class="sxs-lookup"><span data-stu-id="ceff7-156">The technique shown in this example captures the photo to an in-memory stream and then transcode the photo from the stream to a file on disk.</span></span> <span data-ttu-id="ceff7-157">Im Beispiel wird [**GetLibraryAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Storage.StorageLibrary.GetLibraryAsync) verwendet, um die Bildbibliothek des Benutzers abzurufen, und dann die [**SaveFolder**](https://msdn.microsoft.com/library/windows/apps/Windows.Storage.StorageLibrary.SaveFolder)-Eigenschaft, um einen Referenz-Standardspeicherordner abzurufen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-157">This example uses [**GetLibraryAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Storage.StorageLibrary.GetLibraryAsync) to get the user's pictures library and then the [**SaveFolder**](https://msdn.microsoft.com/library/windows/apps/Windows.Storage.StorageLibrary.SaveFolder) property to get a reference default save folder.</span></span> <span data-ttu-id="ceff7-158">Denken Sie daran, Ihrem App-Manifest die Funktion **Bildbibliothek** hinzuzufügen, um auf diesen Ordner zugreifen zu können.</span><span class="sxs-lookup"><span data-stu-id="ceff7-158">Remember to add the **Pictures Library** capability to your app manifest to access this folder.</span></span> <span data-ttu-id="ceff7-159">[Mit **CreateFileAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Storage.StorageFolder.CreateFileAsync) wird eine neue [**StorageFile**](https://msdn.microsoft.com/library/windows/apps/Windows.Storage.StorageFile) erstellt, in der das Foto gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="ceff7-159">[**CreateFileAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Storage.StorageFolder.CreateFileAsync) creates a new [**StorageFile**](https://msdn.microsoft.com/library/windows/apps/Windows.Storage.StorageFile) to which the photo will be saved.</span></span>

<span data-ttu-id="ceff7-160">Erstellen Sie eine [**InMemoryRandomAccessStream**](https://msdn.microsoft.com/library/windows/apps/Windows.Storage.Streams.InMemoryRandomAccessStream)-Klasse, und rufen Sie [**CapturePhotoToStreamAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.CapturePhotoToStreamAsync) auf, um ein Foto in den Datenstrom aufzunehmen. Dabei werden der Datenstrom und ein [**ImageEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.ImageEncodingProperties)-Objekt übergeben, in dem das zu verwendende Bildformat angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="ceff7-160">Create an [**InMemoryRandomAccessStream**](https://msdn.microsoft.com/library/windows/apps/Windows.Storage.Streams.InMemoryRandomAccessStream) and then call [**CapturePhotoToStreamAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.CapturePhotoToStreamAsync) to capture a photo to the stream, passing in the stream and an [**ImageEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.ImageEncodingProperties) object specifying the image format that should be used.</span></span> <span data-ttu-id="ceff7-161">Sie können benutzerdefinierte Codierungseigenschaften erstellen, indem Sie das Objekt selbst initialisieren. Die Klasse stellt jedoch statische Methoden wie [**ImageEncodingProperties.CreateJpeg**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.ImageEncodingProperties.CreateJpeg) für allgemeine Codierungsformate bereit.</span><span class="sxs-lookup"><span data-stu-id="ceff7-161">You can create custom encoding properties by initializing the object yourself, but the class provides static methods, like [**ImageEncodingProperties.CreateJpeg**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.ImageEncodingProperties.CreateJpeg) for common encoding formats.</span></span> <span data-ttu-id="ceff7-162">Als Nächstes erstellen Sie einen Dateidatenstrom zur Ausgabedatei, indem Sie [ **OpenAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Storage.StorageFile.OpenAsync) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-162">Next, create a file stream to the output file by calling [**OpenAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Storage.StorageFile.OpenAsync).</span></span> <span data-ttu-id="ceff7-163">Erstellen Sie [**BitmapDecoder**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapDecoder), um das Bild aus dem In-Memory-Datenstrom zu decodieren, und erstellen Sie dann [**BitmapEncoder**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapEncoder), um das Bild durch Aufrufen von [**CreateForTranscodingAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapEncoder.CreateForTranscodingAsync) in eine Datei zu codieren.</span><span class="sxs-lookup"><span data-stu-id="ceff7-163">Create a [**BitmapDecoder**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapDecoder) to decode the image from the in memory stream and then create a [**BitmapEncoder**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapEncoder) to encode the image to file by calling [**CreateForTranscodingAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapEncoder.CreateForTranscodingAsync).</span></span>

<span data-ttu-id="ceff7-164">Optional können Sie ein [**BitmapPropertySet**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapPropertySet)-Objekt erstellen und dann [**SetPropertiesAsync**](https://msdn.microsoft.com/library/windows/apps/br226252.aspx) für den Bildcodierer aufrufen, um die Fotometadaten in die Bilddatei aufzunehmen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-164">You can optionally create a [**BitmapPropertySet**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapPropertySet) object and then call [**SetPropertiesAsync**](https://msdn.microsoft.com/library/windows/apps/br226252.aspx) on the image encoder to include metadata about the photo in the image file.</span></span> <span data-ttu-id="ceff7-165">Weitere Informationen über Codierungseigenschaften finden Sie unter [**Bildmetadaten**](image-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="ceff7-165">For more information about encoding properties, see [**Image metadata**](image-metadata.md).</span></span> <span data-ttu-id="ceff7-166">Bei den meisten Foto-Apps kommt es darauf an, dass die Geräteausrichtung richtig behandelt wird.</span><span class="sxs-lookup"><span data-stu-id="ceff7-166">Handling device orientation properly is essential for most photography apps.</span></span> <span data-ttu-id="ceff7-167">Weitere Informationen finden Sie unter [**Handhaben der Geräte- und Bildschirmausrichtung mit „MediaCapture“**](handle-device-orientation-with-mediacapture.md).</span><span class="sxs-lookup"><span data-stu-id="ceff7-167">For more information, see [**Handle device orientation with MediaCapture**](handle-device-orientation-with-mediacapture.md).</span></span>

<span data-ttu-id="ceff7-168">Rufen Sie zuletzt [**FlushAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapEncoder.FlushAsync) für das Codiererobjekt auf, um das Foto vom In-Memory-Datenstrom in die Datei zu transcodieren.</span><span class="sxs-lookup"><span data-stu-id="ceff7-168">Finally, call [**FlushAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapEncoder.FlushAsync) on the encoder object to transcode the photo from the in-memory stream to the file.</span></span>

[!code-cs[CaptureToFile](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetCaptureToFile)]

<span data-ttu-id="ceff7-169">Weitere Informationen zum Arbeiten mit Dateien und Ordnern finden Sie unter [**Dateien, Ordner und Bibliotheken**](https://msdn.microsoft.com/windows/uwp/files/index).</span><span class="sxs-lookup"><span data-stu-id="ceff7-169">For more information about working with files and folders, see [**Files, folders, and libraries**](https://msdn.microsoft.com/windows/uwp/files/index).</span></span>

## <a name="capture-a-video"></a><span data-ttu-id="ceff7-170">Aufnehmen eines Videos</span><span class="sxs-lookup"><span data-stu-id="ceff7-170">Capture a video</span></span>
<span data-ttu-id="ceff7-171">Mithilfe der [**LowLagMediaRecording**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording)-Klasse fügen Sie Ihrer App schnell eine Videoaufnahme hinzu.</span><span class="sxs-lookup"><span data-stu-id="ceff7-171">Quickly add video capture to your app by using the [**LowLagMediaRecording**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording) class.</span></span> <span data-ttu-id="ceff7-172">Deklarieren Sie zuerst eine Klassenvariable für das Objekt.</span><span class="sxs-lookup"><span data-stu-id="ceff7-172">First, declare a class variable to for the object.</span></span>

[!code-cs[LowLagMediaRecording](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetLowLagMediaRecording)]

<span data-ttu-id="ceff7-173">Erstellen Sie als Nächstes ein **StorageFile**-Objekt, in dem das Video gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="ceff7-173">Next, create a **StorageFile** object to which the video will be saved.</span></span> <span data-ttu-id="ceff7-174">Um die Videobibliothek des Benutzers wie im Beispiel gezeigt zu speichern, müssen Sie Ihrem App-Manifest die Funktion **Videobibliothek** hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-174">Note that to save to the user's video library, as shown in this example, you must add the **Videos Library** capability to your app manifest.</span></span> <span data-ttu-id="ceff7-175">Rufen Sie [**PrepareLowLagRecordToStorageFileAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.PrepareLowLagRecordToStorageFileAsync) auf, um die Medienaufzeichnung zu initialisieren. Dabei übergeben Sie die Speicherdatei und ein [**MediaEncodingProfile**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.MediaEncodingProfile)-Objekt, in dem die Codierung für das Video angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="ceff7-175">Call [**PrepareLowLagRecordToStorageFileAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.PrepareLowLagRecordToStorageFileAsync) to initialize the media recording, passing in the storage file and a [**MediaEncodingProfile**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.MediaEncodingProfile) object specifying the encoding for the video.</span></span> <span data-ttu-id="ceff7-176">Von der Klasse werden statische Methoden wie [**CreateMp4**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.MediaEncodingProfile.CreateMp4) zum Erstellen allgemeiner Videocodierungsprofile bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="ceff7-176">The class provides static methods, like [**CreateMp4**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.MediaEncodingProfile.CreateMp4), for creating common video encoding profiles.</span></span>

<span data-ttu-id="ceff7-177">Rufen Sie zuletzt [**StartAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.StartAsync) auf, um mit der Videoaufnahme zu beginnen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-177">Finally, call [**StartAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.StartAsync) to begin capturing video.</span></span>

[!code-cs[StartVideoCapture](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetStartVideoCapture)]

<span data-ttu-id="ceff7-178">Zum Beenden der Videoaufnahme rufen Sie [**StopAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.StopAsync) auf.</span><span class="sxs-lookup"><span data-stu-id="ceff7-178">To stop recording video, call [**StopAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.StopAsync).</span></span>

[!code-cs[StopRecording](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetStopRecording)]

<span data-ttu-id="ceff7-179">Sie können **StartAsync** und **StopAsync** weiterhin aufrufen, um zusätzliche Videos aufzunehmen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-179">You can continue to call **StartAsync** and **StopAsync** to capture additional videos.</span></span> <span data-ttu-id="ceff7-180">Nachdem die Videoaufnahme abgeschlossen ist, rufen Sie [**FinishAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.FinishAsync) auf, um die Aufzeichnungssitzung zu löschen und die zugehörigen Ressourcen zu bereinigen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-180">When you are done capturing videos, call [**FinishAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.FinishAsync) to dispose of the capture session and clean up associated resources.</span></span> <span data-ttu-id="ceff7-181">Nach diesem Aufruf müssen Sie **PrepareLowLagRecordToStorageFileAsync** erneut aufrufen, um die Aufzeichnungssitzung vor dem Aufrufen von **StartAsync** erneut zu initialisieren.</span><span class="sxs-lookup"><span data-stu-id="ceff7-181">After this call, you must call **PrepareLowLagRecordToStorageFileAsync** again to reinitialize the capture session before calling **StartAsync**.</span></span>

[!code-cs[FinishAsync](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetFinishAsync)]

<span data-ttu-id="ceff7-182">Bei der Videoaufnahme sollten Sie einen Handler für das [**RecordLimitationExceeded**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.RecordLimitationExceeded)-Ereignis des **MediaCapture**-Objekts registrieren. Dieses Ereignis wird vom Betriebssystem ausgelöst, wenn Sie den Grenzwert für eine einzelne Aufnahme (derzeit drei Stunden) überschreiten.</span><span class="sxs-lookup"><span data-stu-id="ceff7-182">When capturing video, you should register a handler for the [**RecordLimitationExceeded**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.RecordLimitationExceeded) event of the **MediaCapture** object, which will be raised by the operating system if you surpass the limit for a single recording, currently three hours.</span></span> <span data-ttu-id="ceff7-183">Schließen Sie die Aufnahme im Ereignishandler ab, indem Sie [**StopAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.StopAsync) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-183">In the handler for the event, you should finalize your recording by calling [**StopAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.StopAsync).</span></span>

[!code-cs[RecordLimitationExceeded](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetRecordLimitationExceeded)]

[!code-cs[RecordLimitationExceededHandler](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetRecordLimitationExceededHandler)]

### <a name="play-and-edit-captured-video-files"></a><span data-ttu-id="ceff7-184">Wiedergeben und Bearbeiten von aufgenommenen Videodateien</span><span class="sxs-lookup"><span data-stu-id="ceff7-184">Play and edit captured video files</span></span>
<span data-ttu-id="ceff7-185">Nachdem Sie ein Video in einer Datei aufgezeichnet haben, empfiehlt es sich, die Datei hochzuladen und in der Benutzeroberfläche Ihrer App wiederzugeben.</span><span class="sxs-lookup"><span data-stu-id="ceff7-185">Once you have captured a video to a file, you may want to load the file and play it back within your app's UI.</span></span> <span data-ttu-id="ceff7-186">Sie können dazu das **[MediaPlayerElement](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.MediaPlayerElement)** XAML-Steuerelement und einen zugeordneten **[MediaPlayer ](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer)** verwenden.</span><span class="sxs-lookup"><span data-stu-id="ceff7-186">You can do this using the **[MediaPlayerElement](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.MediaPlayerElement)** XAML control and an associated **[MediaPlayer](https://docs.microsoft.com/uwp/api/windows.media.playback.mediaplayer)**.</span></span> <span data-ttu-id="ceff7-187">Weitere Informationen zur Wiedergabe von Medien in einer XAML-Seite finden Sie unter [Wiedergeben von Audio- und Videoinhalten mit MediaPlayer.](play-audio-and-video-with-mediaplayer.md)</span><span class="sxs-lookup"><span data-stu-id="ceff7-187">For information on playing media in a XAML page, see [Play audio and video with MediaPlayer](play-audio-and-video-with-mediaplayer.md).</span></span>

<span data-ttu-id="ceff7-188">Sie können auch ein **[MediaClip](https://docs.microsoft.com/uwp/api/windows.media.editing.mediaclip)**-Objekt aus einer Videodatei durch Aufrufen von **[Mediaclip ](https://docs.microsoft.com/uwp/api/windows.media.editing.mediaclip.createfromfileasync)** erstellen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-188">You can also create a **[MediaClip](https://docs.microsoft.com/uwp/api/windows.media.editing.mediaclip)** object from a video file by calling **[CreateFromFileAsync](https://docs.microsoft.com/uwp/api/windows.media.editing.mediaclip.createfromfileasync)**.</span></span>  <span data-ttu-id="ceff7-189">Die **[MediaComposition](https://docs.microsoft.com/uwp/api/windows.media.editing.mediacomposition)** bietet grundlegende Videobearbeitungs-Funktionen wie das Anordnen der **MediaClip**-Objekte, Zuschneiden von Videos, Erstellen von Ebenen, Hinzufügen von Musik im Hintergrund und Anwenden von Videoeffekten.</span><span class="sxs-lookup"><span data-stu-id="ceff7-189">A **[MediaComposition](https://docs.microsoft.com/uwp/api/windows.media.editing.mediacomposition)** provides basic video editing functionality like arranging the sequence of **MediaClip** objects, trimming video length, creating layers, adding background music, and applying video effects.</span></span> <span data-ttu-id="ceff7-190">Weitere Informationen zu Medienkompositionen finden Sie unter [Medienkompositionen und -bearbeitung](media-compositions-and-editing.md).</span><span class="sxs-lookup"><span data-stu-id="ceff7-190">For more information on working with media compositions, see [Media compositions and editing](media-compositions-and-editing.md).</span></span>

## <a name="pause-and-resume-video-recording"></a><span data-ttu-id="ceff7-191">Anhalten und Fortsetzen der Videoaufnahme</span><span class="sxs-lookup"><span data-stu-id="ceff7-191">Pause and resume video recording</span></span>
<span data-ttu-id="ceff7-192">Sie können eine Videoaufnahme anhalten und dann ohne Erstellung einer separaten Ausgabedatei fortsetzen, indem Sie [**PauseAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.PauseAsync) und dann [**ResumeAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.ResumeAsync) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-192">You can pause a video recording and then resume recording without creating a separate output file by calling [**PauseAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.PauseAsync) and then calling [**ResumeAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.ResumeAsync).</span></span>

[!code-cs[PauseRecordingSimple](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetPauseRecordingSimple)]

[!code-cs[ResumeRecordingSimple](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetResumeRecordingSimple)]

<span data-ttu-id="ceff7-193">Ab Windows 10, Version 1607, können Sie eine Videoaufnahme anhalten und den letzten Frame empfangen, der vor dem Anhalten der Aufnahme erfasst wurde.</span><span class="sxs-lookup"><span data-stu-id="ceff7-193">Starting with Windows 10, version 1607, you can pause a video recording and receive the last frame captured before the recording was paused.</span></span> <span data-ttu-id="ceff7-194">Anschließend können Sie diesen Frame in der Kameravorschau überlagern, damit der Benutzer die Kamera auf den angehaltenen Frame ausrichten kann, bevor die Aufnahme fortgesetzt wird.</span><span class="sxs-lookup"><span data-stu-id="ceff7-194">You can then overlay this frame on the camera preview to allow the user to align the camera with the paused frame before resuming recording.</span></span> <span data-ttu-id="ceff7-195">Durch Aufruf von [**PauseWithResultAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.PauseWithResultAsync) wird ein [**MediaCapturePauseResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapturePauseResult)-Objekt zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="ceff7-195">Calling [**PauseWithResultAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.PauseWithResultAsync) returns a [**MediaCapturePauseResult**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapturePauseResult) object.</span></span> <span data-ttu-id="ceff7-196">Die [**LastFrame**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapturePauseResult.LastFrame)-Eigenschaft ist ein [**VideoFrame**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.VideoFrame)-Objekt, das den letzten Frame darstellt.</span><span class="sxs-lookup"><span data-stu-id="ceff7-196">The [**LastFrame**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapturePauseResult.LastFrame) property is a [**VideoFrame**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.VideoFrame) object representing the last frame.</span></span> <span data-ttu-id="ceff7-197">Um den Frame in XAML anzuzeigen, rufen Sie die **SoftwareBitmap**-Darstellung des Videoframes ab.</span><span class="sxs-lookup"><span data-stu-id="ceff7-197">To display the frame in XAML, get the **SoftwareBitmap** representation of the video frame.</span></span> <span data-ttu-id="ceff7-198">Derzeit werden nur Bilder im BGRA8-Format mit prämultipliziertem oder leerem Alphakanal unterstützt. Zum Abrufen des richtigen Formats müssen Sie deshalb [**Convert**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.SoftwareBitmap.Covert) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-198">Currently, only images in BGRA8 format with premultiplied or empty alpha channel are supported, so call [**Convert**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.SoftwareBitmap.Covert) if necessary to get the correct format.</span></span>  <span data-ttu-id="ceff7-199">Erstellen Sie ein neues [**SoftwareBitmapSource**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Media.Imaging.SoftwareBitmapSource)-Objekt, und rufen Sie [**SetBitmapAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Media.Imaging.SoftwareBitmapSource.SetBitmapAsync) auf, um es zu initialisieren.</span><span class="sxs-lookup"><span data-stu-id="ceff7-199">Create a new [**SoftwareBitmapSource**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Media.Imaging.SoftwareBitmapSource) object and call [**SetBitmapAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Media.Imaging.SoftwareBitmapSource.SetBitmapAsync) to initialize it.</span></span> <span data-ttu-id="ceff7-200">Legen Sie zuletzt die **Source**-Eigenschaft des XAML-Steuerelements [**Image**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.Image) fest, um das Bild anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-200">Finally, set the **Source** property of a XAML [**Image**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.Image) control to display the image.</span></span> <span data-ttu-id="ceff7-201">Damit dies funktioniert, muss Ihr Bild auf das **CaptureElement**-Steuerelement ausgerichtet sein und einen Transparenzwert kleiner als 1 aufweisen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-201">For this trick to work, your image must be aligned with the **CaptureElement** control and should have an opacity value less than one.</span></span> <span data-ttu-id="ceff7-202">Da Sie die Benutzeroberfläche nur im UI-Thread ändern können, müssen Sie den Aufruf in [**RunAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Core.CoreDispatcher.RunAsync) ausführen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-202">Don't forget that you can only modify the UI on the UI thread, so make this call inside [**RunAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Core.CoreDispatcher.RunAsync).</span></span>

<span data-ttu-id="ceff7-203">Durch **PauseWithResultAsync** wird auch die Dauer der Videoaufnahme im vorangehenden Segment zurückgegeben, falls Sie die Gesamtaufnahmezeit nachverfolgen müssen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-203">**PauseWithResultAsync** also returns the duration of the video that was recorded in the preceeding segment in case you need to track how much total time has been recorded.</span></span>

[!code-cs[PauseCaptureWithResult](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetPauseCaptureWithResult)]

<span data-ttu-id="ceff7-204">Wenn Sie die Aufnahme fortsetzen, können Sie die Quelle des Bilds auf NULL festlegen, um es auszublenden.</span><span class="sxs-lookup"><span data-stu-id="ceff7-204">When you resume recording, you can set the source of the image to null and hide it.</span></span>

[!code-cs[ResumeCaptureWithResult](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetResumeCaptureWithResult)]

<span data-ttu-id="ceff7-205">Sie können beim Beenden des Videos auch einen Ergebnisframe abrufen, indem Sie [**StopWithResultAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.StopWithResultAsync) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-205">Note that you can also get a result frame when you stop the video by calling [**StopWithResultAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.StopWithResultAsync).</span></span>


## <a name="capture-audio"></a><span data-ttu-id="ceff7-206">Audioaufnahme</span><span class="sxs-lookup"><span data-stu-id="ceff7-206">Capture audio</span></span> 
<span data-ttu-id="ceff7-207">Sie können Ihrer App schnell eine Audioaufnahme hinzufügen, indem Sie die oben bei der Videoaufnahme beschriebene Vorgehensweise verwenden.</span><span class="sxs-lookup"><span data-stu-id="ceff7-207">You can quickly add audio capture to your app by using the same technique shown above for capturing video.</span></span> <span data-ttu-id="ceff7-208">Im folgenden Beispiel wird eine **StorageFile** im Anwendungsdatenordner erstellt.</span><span class="sxs-lookup"><span data-stu-id="ceff7-208">The example below creates a **StorageFile** in the application data folder.</span></span> <span data-ttu-id="ceff7-209">Rufen Sie [**PrepareLowLagRecordToStorageFileAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.PrepareLowLagRecordToStorageFileAsync) auf, um die Aufzeichnungssitzung zu initialisieren. Dabei werden die Datei und eine [**MediaEncodingProfile**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.MediaEncodingProfile)-Klasse übergeben, die im Beispiel von der statischen Methode [**CreateMp3**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.MediaEncodingProfile.CreateMp3) generiert wird.</span><span class="sxs-lookup"><span data-stu-id="ceff7-209">Call [**PrepareLowLagRecordToStorageFileAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.MediaCapture.PrepareLowLagRecordToStorageFileAsync) to initialize the capture session, passing in the file and a [**MediaEncodingProfile**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.MediaEncodingProfile) which is generated in this example by the [**CreateMp3**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaProperties.MediaEncodingProfile.CreateMp3) static method.</span></span> <span data-ttu-id="ceff7-210">Um mit der Aufnahme zu beginnen, rufen Sie [**StartAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.StartAsync) auf.</span><span class="sxs-lookup"><span data-stu-id="ceff7-210">To begin recording, call [**StartAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.StartAsync).</span></span>

[!code-cs[StartAudioCapture](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetStartAudioCapture)]


<span data-ttu-id="ceff7-211">Rufen Sie [**StopAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagPhotoSequenceCapture.StopAsync) auf, um die Audioaufnahme zu beenden.</span><span class="sxs-lookup"><span data-stu-id="ceff7-211">Call [**StopAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagPhotoSequenceCapture.StopAsync) to stop the audio recording.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ceff7-212">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="ceff7-212">Related topics</span></span>

* [<span data-ttu-id="ceff7-213">Kamera</span><span class="sxs-lookup"><span data-stu-id="ceff7-213">Camera</span></span>](camera.md)
[!code-cs[StopRecording](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetStopRecording)]

<span data-ttu-id="ceff7-214">Sie können **StartAsync** und **StopAsync** mehrfach aufrufen, um mehrere Audiodateien aufzuzeichnen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-214">You can call **StartAsync** and **StopAsync** multiple times to record several audio files.</span></span> <span data-ttu-id="ceff7-215">Nachdem die Audioaufnahme abgeschlossen ist, rufen Sie [**FinishAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.FinishAsync) auf, um die Aufzeichnungssitzung zu löschen und die zugehörigen Ressourcen zu bereinigen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-215">When you are done capturing audio, call [**FinishAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.LowLagMediaRecording.FinishAsync) to dispose of the capture session and clean up associated resources.</span></span> <span data-ttu-id="ceff7-216">Nach diesem Aufruf müssen Sie **PrepareLowLagRecordToStorageFileAsync** erneut aufrufen, um die Aufzeichnungssitzung vor dem Aufrufen von **StartAsync** erneut zu initialisieren.</span><span class="sxs-lookup"><span data-stu-id="ceff7-216">After this call, you must call **PrepareLowLagRecordToStorageFileAsync** again to reinitialize the capture session before calling **StartAsync**.</span></span>

[!code-cs[FinishAsync](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetFinishAsync)]


## <a name="detect-and-respond-to-audio-level-changes-by-the-system"></a><span data-ttu-id="ceff7-217">Erkennen und Reagieren auf Änderungen der Audioebene vom System</span><span class="sxs-lookup"><span data-stu-id="ceff7-217">Detect and respond to audio level changes by the system</span></span>
<span data-ttu-id="ceff7-218">Ab Windows10, Version 1803, erkennt Ihre App, wenn das System die Lautstärke der Audioaufnahme Ihrer App oder die Audiowiedergabe reduziert oder stummschaltet.</span><span class="sxs-lookup"><span data-stu-id="ceff7-218">Starting with Windows 10, version 1803, your app can detect when the system lowers or mutes the audio level of your app's audio capture and audio render streams.</span></span> <span data-ttu-id="ceff7-219">Beispielsweise kann das System das Streamen der App stumm schalten, wenn es in den Hintergrund wechselt.</span><span class="sxs-lookup"><span data-stu-id="ceff7-219">For example, the system may mute your app's streams when it goes into the background.</span></span> <span data-ttu-id="ceff7-220">Mit der [**AudioStateMonitor**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor)-Klasse können Sie sich registrieren, um ein Ereignis zu erhalten, wenn das System die Lautstärke eines Audiodatenstroms ändert.</span><span class="sxs-lookup"><span data-stu-id="ceff7-220">The [**AudioStateMonitor**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor) class allows you to register to receive an event when the system modifies the volume of an audio stream.</span></span> <span data-ttu-id="ceff7-221">Rufen Sie eine Instanz des **AudioStateMonitor** für die Überwachung des Audio-Datenstroms durch [**CreateForCaptureMonitoring**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.createforcapturemonitoring#Windows_Media_Audio_AudioStateMonitor_CreateForCaptureMonitoring) auf.</span><span class="sxs-lookup"><span data-stu-id="ceff7-221">Get an instance of **AudioStateMonitor** for monitoring audio capture streams by calling [**CreateForCaptureMonitoring**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.createforcapturemonitoring#Windows_Media_Audio_AudioStateMonitor_CreateForCaptureMonitoring).</span></span> <span data-ttu-id="ceff7-222">Rufen Sie eine Instanz für die Überwachung von Audiowiedergabestreams durch [**CreateForRenderMonitoring**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.createforrendermonitoring) auf.</span><span class="sxs-lookup"><span data-stu-id="ceff7-222">Get an instance for monitoring audio render streams by calling [**CreateForRenderMonitoring**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.createforrendermonitoring).</span></span> <span data-ttu-id="ceff7-223">Registrieren Sie einen Handler für das [**SoundLevelChanged**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.soundlevelchanged)-Ereignis jedes Monitors, um benachrichtigt zu werden, wenn die Audiowiedergabe für die entsprechende Streamkategorie vom System geändert wird.</span><span class="sxs-lookup"><span data-stu-id="ceff7-223">Register a handler for the [**SoundLevelChanged**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.soundlevelchanged) event of each monitor to be notified when the audio for the corresponding stream category is changed by the system.</span></span>

[!code-cs[AudioStateMonitorUsing](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetAudioStateMonitorUsing)]

[!code-cs[AudioStateVars](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetAudioStateVars)]

[!code-cs[RegisterAudioStateMonitor](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetRegisterAudioStateMonitor)]

<span data-ttu-id="ceff7-224">Im **SoundLevelChanged** Handler für den Aufnahmedatenstrom, können Sie die [**SoundLevel**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.soundlevel)-Eigenschaft des **AudioStateMonitor**-Senders überprüfen, um die neue Soundebene zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-224">In the **SoundLevelChanged** handler for the capture stream, you can check the [**SoundLevel**](https://docs.microsoft.com/uwp/api/windows.media.audio.audiostatemonitor.soundlevel) property of the **AudioStateMonitor** sender to determine the new sound level.</span></span> <span data-ttu-id="ceff7-225">Beachten Sie, dass ein Aufnahmedatenstrom sollte nie vom System gesenkt oder "gedämpft" werden sollte.</span><span class="sxs-lookup"><span data-stu-id="ceff7-225">Note that a capture stream should never be lowered, or "ducked", by the system.</span></span> <span data-ttu-id="ceff7-226">Es sollte immer nur stummgeschaltet oder auf volle Lautstärke gewechselt werden.</span><span class="sxs-lookup"><span data-stu-id="ceff7-226">It should only ever be muted or switched back to full volume.</span></span> <span data-ttu-id="ceff7-227">Wenn der Audiodatenstrom stumm geschaltet ist, können Sie eine Aufzeichnung in Bearbeitung beenden.</span><span class="sxs-lookup"><span data-stu-id="ceff7-227">If the audio stream is muted, you can stop a capture in progress.</span></span> <span data-ttu-id="ceff7-228">Wenn der Audiodatenstrom auf die volle Lautstärke wiederhergestellt wird, können Sie beginnen, erneut aufzuzeichnen.</span><span class="sxs-lookup"><span data-stu-id="ceff7-228">If the audio stream is restored to full volume, you can start capturing again.</span></span> <span data-ttu-id="ceff7-229">Das folgende Beispiel verwendet einige Variablen der booleschen Klasse, um nachzuverfolgen, ob die App derzeit Audio aufnimmt und ob die Aufnahme aufgrund der Änderung der Audiostatus beendet wurde.</span><span class="sxs-lookup"><span data-stu-id="ceff7-229">The following example uses some boolean class variables to track whether the app is currently capturing audio and if the capture was stopped due to the audio state change.</span></span> <span data-ttu-id="ceff7-230">Diese Variablen werden verwendet, um zu bestimmen, wann ist es angemessen ist, die Audio-Aufnahme programmgesteuert zu beenden oder zu starten.</span><span class="sxs-lookup"><span data-stu-id="ceff7-230">These variables are used to determine when it's appropriate to programmatically stop or start audio capture.</span></span>

[!code-cs[CaptureSoundLevelChanged](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetCaptureSoundLevelChanged)]

<span data-ttu-id="ceff7-231">Im folgenden Codebeispiel wird eine Implementierung des **SoundLevelChanged** Handlers für die Wiedergabe von Audio veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="ceff7-231">The following code example illustrates an implementation of the **SoundLevelChanged** handler for audio rendering.</span></span> <span data-ttu-id="ceff7-232">Je nach App-Szenario, und der Art der Inhalte, die Sie abspielen, sollte die Audiowiedergabe angehalten werden, wenn die Lautstärke gedämpft ist.</span><span class="sxs-lookup"><span data-stu-id="ceff7-232">Depending on your app scenario, and the type of content you are playing, you may want to pause audio playback when the sound level is ducked.</span></span> <span data-ttu-id="ceff7-233">Weitere Informationen zum Behandeln von Soundänderungen auf Systemebene für die Wiedergabe von Medien finden Sie unter [Wiedergeben von Audio- und Videoinhalten mit MediaPlayer](play-audio-and-video-with-mediaplayer.md).</span><span class="sxs-lookup"><span data-stu-id="ceff7-233">For more information on handling sound level changes for media playback, see [Play audio and video with MediaPlayer](play-audio-and-video-with-mediaplayer.md).</span></span>

[!code-cs[RenderSoundLevelChanged](./code/SimpleCameraPreview_Win10/cs/MainPage.xaml.cs#SnippetRenderSoundLevelChanged)]


* [<span data-ttu-id="ceff7-234">Aufnehmen von Fotos und Videos mit der in Windows integrierten Kamera-UI</span><span class="sxs-lookup"><span data-stu-id="ceff7-234">Capture photos and video with Windows built-in camera UI</span></span>](capture-photos-and-video-with-cameracaptureui.md)
* [<span data-ttu-id="ceff7-235">Handhaben der Geräte- und Bildschirmausrichtung mit „MediaCapture“</span><span class="sxs-lookup"><span data-stu-id="ceff7-235">Handle device orientation with MediaCapture</span></span>](handle-device-orientation-with-mediacapture.md)
* [<span data-ttu-id="ceff7-236">Erstellen, Bearbeiten und Speichern von Bitmapbildern</span><span class="sxs-lookup"><span data-stu-id="ceff7-236">Create, edit, and save bitmap images</span></span>](imaging.md)
* [<span data-ttu-id="ceff7-237">Dateien, Ordner und Bibliotheken</span><span class="sxs-lookup"><span data-stu-id="ceff7-237">Files, folders, and libraries</span></span>](https://msdn.microsoft.com/windows/uwp/files/index)

