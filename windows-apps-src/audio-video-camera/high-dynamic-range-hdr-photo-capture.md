---
author: drewbatgit
ms.assetid: 0186EA01-8446-45BA-A109-C5EB4B80F368
description: In diesem Artikel wird beschrieben, wie Sie die AdvancedPhotoCapture-Klasse verwenden, um HDR-Fotos (High Dynamic Range) und Fotos bei schlechten Lichtverhältnissen aufzunehmen.
title: HDR-Fotoaufnahmen (High Dynamic Range) und Fotoaufnahmen bei schlechten Lichtverhältnissen
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
keywords: Windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: cc81fdc03096dd8cac5e844a496b38da78eb6136
ms.sourcegitcommit: e2fca6c79f31e521ba76f7ecf343cf8f278e6a15
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/15/2018
ms.locfileid: "6970122"
---
# <a name="high-dynamic-range-hdr-and-low-light-photo-capture"></a><span data-ttu-id="9ed29-104">HDR-Fotoaufnahmen (High Dynamic Range) und Fotoaufnahmen bei schlechten Lichtverhältnissen</span><span class="sxs-lookup"><span data-stu-id="9ed29-104">High dynamic range (HDR) and low-light photo capture</span></span>



<span data-ttu-id="9ed29-105">Dieser Artikel beschreibt, wie Sie die [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/mt181386)-Klasse zum Aufnehmen von HDR-Fotos (High Dynamic Range) verwenden.</span><span class="sxs-lookup"><span data-stu-id="9ed29-105">This article shows you how to use the [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/mt181386) class to capture high dynamic range (HDR) photos.</span></span> <span data-ttu-id="9ed29-106">Mithilfe dieser API können Sie außerdem einen Referenzframe aus der HDR-Aufnahme abrufen, bevor die Verarbeitung des endgültigen Bilds abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="9ed29-106">This API also allows you to obtain a reference frame from the HDR capture before the processing of the final image is complete.</span></span>

<span data-ttu-id="9ed29-107">Die folgenden Artikel beziehen sich ebenfalls auf HDR-Aufnahmen:</span><span class="sxs-lookup"><span data-stu-id="9ed29-107">Other articles related to HDR capture include:</span></span>

-   <span data-ttu-id="9ed29-108">Sie können den [**SceneAnalysisEffect**](https://msdn.microsoft.com/library/windows/apps/dn948902) verwenden, damit das System den Inhalt des Vorschaudatenstroms der Medienaufnahme auswerten kann, um zu ermitteln, ob das Aufnahmeergebnis durch eine HDR-Verarbeitung verbessert werden kann.</span><span class="sxs-lookup"><span data-stu-id="9ed29-108">You can use the [**SceneAnalysisEffect**](https://msdn.microsoft.com/library/windows/apps/dn948902) to allow the system to evaluate the content of the media capture preview stream to determine if HDR processing would improve the capture result.</span></span> <span data-ttu-id="9ed29-109">Weitere Informationen finden Sie im Artikel [Szenenanalyse für die Medienaufnahme](scene-analysis-for-media-capture.md) (MediaCapture).</span><span class="sxs-lookup"><span data-stu-id="9ed29-109">For more information, see [Scene analysis for MediaCapture](scene-analysis-for-media-capture.md).</span></span>

-   <span data-ttu-id="9ed29-110">Verwenden Sie die [**HdrVideoControl**](https://msdn.microsoft.com/library/windows/apps/dn926680)-Klasse für Videoaufnahmen mit dem integrierten Windows-HDR-Verarbeitungsalgorithmus.</span><span class="sxs-lookup"><span data-stu-id="9ed29-110">Use the [**HdrVideoControl**](https://msdn.microsoft.com/library/windows/apps/dn926680) to capture video using the Windows built-in HDR processing algorithm.</span></span> <span data-ttu-id="9ed29-111">Weitere Informationen finden Sie unter [Steuerelemente des Aufnahmegeräts für Videoaufnahmen](capture-device-controls-for-video-capture.md).</span><span class="sxs-lookup"><span data-stu-id="9ed29-111">For more information, see [Capture device controls for video capture](capture-device-controls-for-video-capture.md).</span></span>

-   <span data-ttu-id="9ed29-112">Mit der [**VariablePhotoSequenceCapture**](https://msdn.microsoft.com/library/windows/apps/dn652564)-Klasse können Sie eine Abfolge von Fotos unter Verwendung unterschiedlicher Aufnahmeeinstellungen für jedes Foto aufnehmen und Ihren eigenen HDR- oder einen anderen Verarbeitungsalgorithmus implementieren.</span><span class="sxs-lookup"><span data-stu-id="9ed29-112">You can use the [**VariablePhotoSequenceCapture**](https://msdn.microsoft.com/library/windows/apps/dn652564) to capture a sequence of photos, each with different capture settings, and implement your own HDR or other processing algorithm.</span></span> <span data-ttu-id="9ed29-113">Weitere Informationen finden Sie unter [Variable Fotosequenz](variable-photo-sequence.md).</span><span class="sxs-lookup"><span data-stu-id="9ed29-113">For more information, see [Variable photo sequence](variable-photo-sequence.md).</span></span>



> [!NOTE] 
> <span data-ttu-id="9ed29-114">Ab Windows10, Version 1709, wird das Aufzeichnen von Video und mithilfe von **AdvancedPhotoCapture** unterstützt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-114">Starting with Windows 10, version 1709, recording video and using **AdvancedPhotoCapture** concurrently is supported.</span></span>  <span data-ttu-id="9ed29-115">Dies wurde in früheren Versionen nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-115">This is not supported in previous versions.</span></span> <span data-ttu-id="9ed29-116">Diese Änderung bedeutet, dass Sie ein vorbereitetes **[LowLagMediaRecording](https://docs.microsoft.com/uwp/api/windows.media.capture.lowlagmediarecording)** und **[AdvancedPhotoCapture](https://docs.microsoft.com/uwp/api/windows.media.capture.advancedphotocapture)** zur gleichen Zeit ausführen können.</span><span class="sxs-lookup"><span data-stu-id="9ed29-116">This change means that you can have a prepared **[LowLagMediaRecording](https://docs.microsoft.com/uwp/api/windows.media.capture.lowlagmediarecording)** and **[AdvancedPhotoCapture](https://docs.microsoft.com/uwp/api/windows.media.capture.advancedphotocapture)** at the same time.</span></span> <span data-ttu-id="9ed29-117">Sie können die Videoaufnahme zwischen Aufrufen starten oder beenden, um **[MediaCapture.PrepareAdvancedPhotoCaptureAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapture.prepareadvancedphotocaptureasync)** und **[AdvancedPhotoCapture.FinishAsync ](https://docs.microsoft.com/uwp/api/windows.media.capture.advancedphotocapture.FinishAsync)** durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="9ed29-117">You can start or stop video recording between calls to **[MediaCapture.PrepareAdvancedPhotoCaptureAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapture.prepareadvancedphotocaptureasync)** and **[AdvancedPhotoCapture.FinishAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.advancedphotocapture.FinishAsync)**.</span></span> <span data-ttu-id="9ed29-118">Sie können auch **[AdvancedPhotoCapture.CaptureAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.advancedphotocapture.CaptureAsync)** aufrufen, während Sie ein Video aufzeichnen.</span><span class="sxs-lookup"><span data-stu-id="9ed29-118">You can also call **[AdvancedPhotoCapture.CaptureAsync](https://docs.microsoft.com/uwp/api/windows.media.capture.advancedphotocapture.CaptureAsync)** while video is recording.</span></span> <span data-ttu-id="9ed29-119">Allerdings können einige **AdvancedPhotoCapture**-Szenarien, wie das Aufnehmen eines HDR-Fotos beim Aufzeichnen von Video, dazu führen, dass einige Videoframes geändert werden, die von HDR aufgenommen wurden, was zu einer negativen Benutzererfahrung führt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-119">However, some **AdvancedPhotoCapture** scenarios, like capturing an HDR photo while recording video would cause some video frames to be altered by the HDR capture, resulting in a negative user experience.</span></span> <span data-ttu-id="9ed29-120">Aus diesem Grund unterscheidet sich die Liste der Modi, die von **[AdvancedPhotoControl.SupportedModes](https://docs.microsoft.com/uwp/api/windows.media.devices.advancedphotocontrol.SupportedModes)** während der Videoaufzeichnung zurückgegebenen wird.</span><span class="sxs-lookup"><span data-stu-id="9ed29-120">For this reason, the list of modes returned by the **[AdvancedPhotoControl.SupportedModes](https://docs.microsoft.com/uwp/api/windows.media.devices.advancedphotocontrol.SupportedModes)** will be different while video is recording.</span></span> <span data-ttu-id="9ed29-121">Überprüfen Sie diesen Wert sofort nach dem Starten oder Beenden der Videoaufnahme, um sicherzustellen, dass der gewünschte Modus im aktuellen Zustand der Videoaufnahme unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="9ed29-121">You should check this value immediately after starting or stopping video recording to ensure that the desired mode is supported in the current video recording state.</span></span>


> [!NOTE] 
> <span data-ttu-id="9ed29-122">Ab Windows10, Version 1709, wenn **AdvancedPhotoCapture** auf den HDR-Modus festgelegt ist, wird die [**FlashControl.Enabled**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Devices.FlashControl.Enabled)-Eigenschaft ignoriert, und der Blitz wird nie ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="9ed29-122">Starting with Windows 10, version 1709, when the **AdvancedPhotoCapture** is set to HDR mode, the setting of the [**FlashControl.Enabled**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Devices.FlashControl.Enabled) property is ignored and the flash is never fired.</span></span> <span data-ttu-id="9ed29-123">Wenn die **FlashControl.Enabled-Eigenschaft** bei anderen Aufnahmemodi auf „True” festgelegt ist, überschreibt sie die **AdvancedPhotoCapture**-Einstellungen. Dies führt dazu, dass ein normales Foto mit Blitz aufgenommen wird.</span><span class="sxs-lookup"><span data-stu-id="9ed29-123">For other capture modes, if the **FlashControl.Enabled**, it will override the **AdvancedPhotoCapture** settings and cause a normal photo to be captured with flash.</span></span> <span data-ttu-id="9ed29-124">Wenn [**Auto**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Devices.FlashControl.Auto) auf "true" festgelegt ist, verwendet **AdvancedPhotoCapture** den Blitz oder auch nicht, je nach dem Standardverhalten des Kameratreibers für die Bedingungen in der aktuellen Szene.</span><span class="sxs-lookup"><span data-stu-id="9ed29-124">If [**Auto**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Devices.FlashControl.Auto) is set to true, the **AdvancedPhotoCapture** may or may not use flash, depending on the camera driver's default behavior for the conditions in the current scene.</span></span> <span data-ttu-id="9ed29-125">In früheren Versionen setzte die **AdvancedPhotoCapture** Blitz-Einstellung immer die **FlashControl.Enabled**-Einstellung außer Kraft.</span><span class="sxs-lookup"><span data-stu-id="9ed29-125">On previous releases, the **AdvancedPhotoCapture** flash setting always overrides the **FlashControl.Enabled** setting.</span></span>

> [!NOTE] 
> <span data-ttu-id="9ed29-126">Dieser Artikel baut auf Konzepten und Codebeispielen auf, die unter [Allgemeine Foto-, Video- und Audioaufnahme mit „MediaCapture“](basic-photo-video-and-audio-capture-with-MediaCapture.md) erläutert werden. Dort werden die Schritte für die Implementierung einer grundlegenden Foto- und Videoaufnahme beschrieben.</span><span class="sxs-lookup"><span data-stu-id="9ed29-126">This article builds on concepts and code discussed in [Basic photo, video, and audio capture with MediaCapture](basic-photo-video-and-audio-capture-with-MediaCapture.md), which describes the steps for implementing basic photo and video capture.</span></span> <span data-ttu-id="9ed29-127">Wir empfehlen Ihnen, sich mit dem grundlegenden Medienaufnahmemuster in diesem Artikel vertraut zu machen, bevor Sie sich komplexeren Aufnahmeszenarien zuwenden.</span><span class="sxs-lookup"><span data-stu-id="9ed29-127">We recommend that you familiarize yourself with the basic media capture pattern in that article before moving on to more advanced capture scenarios.</span></span> <span data-ttu-id="9ed29-128">Der Code in diesem Artikel setzt voraus, dass Ihre App bereits über eine korrekt initialisierte MediaCapture-Instanz verfügt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-128">The code in this article assumes that your app already has an instance of MediaCapture that has been properly initialized.</span></span>

<span data-ttu-id="9ed29-129">Es ist ein universelles Windows-Beispiel verfügbar, das die Verwendung der **AdvancedPhotoCapture**-Klasse veranschaulicht. Sie können dieses Beispiel verwenden, um sich die API im Kontext anzusehen, oder es als Ausgangspunkt für Ihre eigene App nutzen.</span><span class="sxs-lookup"><span data-stu-id="9ed29-129">There is a Universal Windows Sample demonstrating the use of the **AdvancedPhotoCapture** class that you can use to see the API used in context or as a starting point for your own app.</span></span> <span data-ttu-id="9ed29-130">Weitere Informationen finden Sie im [Beispiel für erweiterte Kameraaufnahmen](http://go.microsoft.com/fwlink/?LinkID=620517).</span><span class="sxs-lookup"><span data-stu-id="9ed29-130">For more information see, [Camera Advanced Capture sample](http://go.microsoft.com/fwlink/?LinkID=620517).</span></span>

## <a name="advanced-photo-capture-namespaces"></a><span data-ttu-id="9ed29-131">Namespaces für erweiterte Fotoaufnahmen</span><span class="sxs-lookup"><span data-stu-id="9ed29-131">Advanced photo capture namespaces</span></span>

<span data-ttu-id="9ed29-132">Neben den erforderlichen Namespaces für die grundlegende Medienaufnahme werden in den Codebeispielen in diesem Artikel APIs in den folgenden Namespaces verwendet.</span><span class="sxs-lookup"><span data-stu-id="9ed29-132">The code examples in this article use APIs in the following namespaces in addition to the namespaces required for basic media capture.</span></span>

[!code-cs[HDRPhotoUsing](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetHDRPhotoUsing)]

## <a name="hdr-photo-capture"></a><span data-ttu-id="9ed29-133">HDR-Fotoaufnahme</span><span class="sxs-lookup"><span data-stu-id="9ed29-133">HDR photo capture</span></span>

### <a name="determine-if-hdr-photo-capture-is-supported-on-the-current-device"></a><span data-ttu-id="9ed29-134">Ermitteln, ob die HDR-Fotoaufnahme vom aktuellen Gerät unterstützt wird</span><span class="sxs-lookup"><span data-stu-id="9ed29-134">Determine if HDR photo capture is supported on the current device</span></span>

<span data-ttu-id="9ed29-135">Das in diesem Artikel beschriebene HDR-Aufnahmeverfahren wird mithilfe des [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/mt181386)-Objekts ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-135">The HDR capture technique described in this article is performed using the [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/mt181386) object.</span></span> <span data-ttu-id="9ed29-136">Nicht alle Geräte unterstützen die HDR-Aufnahme mit **AdvancedPhotoCapture**.</span><span class="sxs-lookup"><span data-stu-id="9ed29-136">Not all devices support HDR capture with **AdvancedPhotoCapture**.</span></span> <span data-ttu-id="9ed29-137">Ermitteln Sie, ob das Gerät, auf dem Ihre App derzeit ausgeführt wird, dieses Verfahren unterstützt, indem Sie zunächst den [**VideoDeviceController**](https://msdn.microsoft.com/library/windows/apps/br226825) des **MediaCapture**-Objekts und anschließend die [**AdvancedPhotoControl**](https://msdn.microsoft.com/library/windows/apps/mt147840)-Eigenschaft abrufen.</span><span class="sxs-lookup"><span data-stu-id="9ed29-137">Determine if the device on which your app is currently running supports the technique by getting the **MediaCapture** object's [**VideoDeviceController**](https://msdn.microsoft.com/library/windows/apps/br226825) and then getting the [**AdvancedPhotoControl**](https://msdn.microsoft.com/library/windows/apps/mt147840) property.</span></span> <span data-ttu-id="9ed29-138">Überprüfen Sie die [**SupportedModes**](https://msdn.microsoft.com/library/windows/apps/mt147844)-Sammlung des Videogerätecontrollers, um festzustellen, ob es [**AdvancedPhotoMode.Hdr**](https://msdn.microsoft.com/library/windows/apps/mt147845) enthält. Wenn dies der Fall ist, wird die HDR-Aufnahme mit **AdvancedPhotoCapture** unterstützt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-138">Check the video device controller's [**SupportedModes**](https://msdn.microsoft.com/library/windows/apps/mt147844) collection to see if it includes [**AdvancedPhotoMode.Hdr**](https://msdn.microsoft.com/library/windows/apps/mt147845). If it does, HDR capture using **AdvancedPhotoCapture** is supported.</span></span>

[!code-cs[HdrSupported](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetHdrSupported)]

### <a name="configure-and-prepare-the-advancedphotocapture-object"></a><span data-ttu-id="9ed29-139">Konfigurieren und Vorbereiten des AdvancedPhotoCapture-Objekts</span><span class="sxs-lookup"><span data-stu-id="9ed29-139">Configure and prepare the AdvancedPhotoCapture object</span></span>

<span data-ttu-id="9ed29-140">Da Sie von mehreren Stellen innerhalb des Codes aus auf die [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/mt181386)-Instanz zugreifen müssen, deklarieren Sie eine Membervariable als Container für das Objekt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-140">Because you will need to access the [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/mt181386) instance from multiple places within your code, you should declare a member variable to hold the object.</span></span>

[!code-cs[DeclareAdvancedCapture](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetDeclareAdvancedCapture)]

<span data-ttu-id="9ed29-141">Nach der Initialisierung des **MediaCapture**-Objekts in Ihrer App, erstellen Sie ein [**AdvancedPhotoCaptureSettings**](https://msdn.microsoft.com/library/windows/apps/mt147837)-Objekt, und legen Sie den Modus auf [**AdvancedPhotoMode.Hdr**](https://msdn.microsoft.com/library/windows/apps/mt147845) fest. Rufen Sie die [**AdvancedPhotoControl**](https://msdn.microsoft.com/library/windows/apps/mt147840) [**Konfigurieren**](https://msdn.microsoft.com/library/windows/apps/mt147841)-Methode des Objekts auf, und übergeben Sie das **AdvancedPhotoCaptureSettings**-Objekt, das Sie erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="9ed29-141">In your app, after you have initialized the **MediaCapture** object, create an [**AdvancedPhotoCaptureSettings**](https://msdn.microsoft.com/library/windows/apps/mt147837) object and set the mode to [**AdvancedPhotoMode.Hdr**](https://msdn.microsoft.com/library/windows/apps/mt147845). Call the [**AdvancedPhotoControl**](https://msdn.microsoft.com/library/windows/apps/mt147840) object's [**Configure**](https://msdn.microsoft.com/library/windows/apps/mt147841) method, passing in the **AdvancedPhotoCaptureSettings** object you created.</span></span>

<span data-ttu-id="9ed29-142">Rufen Sie die [**PrepareAdvancedPhotoCaptureAsync**](https://msdn.microsoft.com/library/windows/apps/mt181403)-Methode des **MediaCapture**-Objekts auf, und übergeben Sie ein [**ImageEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh700993)-Objekt, das den von der Aufnahme zu verwendenden Codierungstyp angibt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-142">Call the **MediaCapture** object's [**PrepareAdvancedPhotoCaptureAsync**](https://msdn.microsoft.com/library/windows/apps/mt181403), passing in an [**ImageEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh700993) object specifying the type of encoding the capture should use.</span></span> <span data-ttu-id="9ed29-143">Die **ImageEncodingProperties**-Klasse enthält statische Methoden zum Erstellen der Bildcodierungen, die vom **MediaCapture**-Objekt unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="9ed29-143">The **ImageEncodingProperties** class provides static methods for creating the image encodings that are supported by **MediaCapture**.</span></span>

<span data-ttu-id="9ed29-144">**PrepareAdvancedPhotoCaptureAsync** gibt das [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/mt181386)-Objekt zurück, mit dem Sie die Fotoaufnahme initiieren.</span><span class="sxs-lookup"><span data-stu-id="9ed29-144">**PrepareAdvancedPhotoCaptureAsync** returns the [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/mt181386) object you will use to initiate photo capture.</span></span> <span data-ttu-id="9ed29-145">Sie können dieses Objekt zum Registrieren von Handlern für die Ereignisse [**OptionalReferencePhotoCaptured**](https://msdn.microsoft.com/library/windows/apps/mt181392) und [**AllPhotosCaptured**](https://msdn.microsoft.com/library/windows/apps/mt181387) verwenden, die später in diesem Artikel erläutert werden.</span><span class="sxs-lookup"><span data-stu-id="9ed29-145">You can use this object to register handlers for the [**OptionalReferencePhotoCaptured**](https://msdn.microsoft.com/library/windows/apps/mt181392) and [**AllPhotosCaptured**](https://msdn.microsoft.com/library/windows/apps/mt181387) which are discussed later in this article.</span></span>

[!code-cs[CreateAdvancedCaptureAsync](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetCreateAdvancedCaptureAsync)]

### <a name="capture-an-hdr-photo"></a><span data-ttu-id="9ed29-146">Aufnehmen eines HDR-Fotos</span><span class="sxs-lookup"><span data-stu-id="9ed29-146">Capture an HDR photo</span></span>

<span data-ttu-id="9ed29-147">Nehmen Sie ein HDR-Foto auf, indem Sie die [**CaptureAsync**](https://msdn.microsoft.com/library/windows/apps/mt181388)-Methode des [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/mt181386)-Objekts aufrufen.</span><span class="sxs-lookup"><span data-stu-id="9ed29-147">Capture an HDR photo by calling the [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/mt181386) object's [**CaptureAsync**](https://msdn.microsoft.com/library/windows/apps/mt181388) method.</span></span> <span data-ttu-id="9ed29-148">Diese Methode gibt ein [**AdvancedCapturedPhoto**](https://msdn.microsoft.com/library/windows/apps/mt181378)-Objekt zurück, das das aufgenommene Foto in seiner [**Frame**](https://msdn.microsoft.com/library/windows/apps/mt181382)-Eigenschaft angibt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-148">This method returns an [**AdvancedCapturedPhoto**](https://msdn.microsoft.com/library/windows/apps/mt181378) object that provides the captured photo in its [**Frame**](https://msdn.microsoft.com/library/windows/apps/mt181382) property.</span></span>

[!code-cs[CaptureHdrPhotoAsync](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetCaptureHdrPhotoAsync)]

<span data-ttu-id="9ed29-149">Die meisten Foto-Apps versuchen, die Drehung eines aufgenommenen Fotos in der Bilddatei zu codieren, damit es von anderen Apps und Geräten richtig angezeigt werden kann.</span><span class="sxs-lookup"><span data-stu-id="9ed29-149">Most photography apps will want to encode a captured photo's rotation into the image file so that it can be displayed correctly by other apps and devices.</span></span> <span data-ttu-id="9ed29-150">Dieses Beispiel veranschaulicht die Verwendung der **CameraRotationHelper**-Hilfsklasse zum Berechnen der richtigen Ausrichtung für die Datei.</span><span class="sxs-lookup"><span data-stu-id="9ed29-150">This example shows the use of the helper class **CameraRotationHelper** to calculate the proper orientation for the file.</span></span> <span data-ttu-id="9ed29-151">Eine vollständige Beschreibung und Auflistung dieser Klasse finden Sie im Artikel [**Handhaben der Geräte- und Bildschirmausrichtung mit „MediaCapture“**](handle-device-orientation-with-mediacapture.md).</span><span class="sxs-lookup"><span data-stu-id="9ed29-151">This class is described and listed in full in the article [**Handle device orientation with MediaCapture**](handle-device-orientation-with-mediacapture.md).</span></span>

<span data-ttu-id="9ed29-152">Die **SaveCapturedFrameAsync**-Hilfsmethode, die das Bild auf einem Datenträger speichert, wird an späterer Stelle in diesem Artikel erläutert.</span><span class="sxs-lookup"><span data-stu-id="9ed29-152">The **SaveCapturedFrameAsync** helper method, which saves the image to disk, is discussed later in this article.</span></span>

### <a name="get-optional-reference-frame"></a><span data-ttu-id="9ed29-153">Abrufen des optionalen Referenzframes</span><span class="sxs-lookup"><span data-stu-id="9ed29-153">Get optional reference frame</span></span>

<span data-ttu-id="9ed29-154">Beim HDR-Prozess werden mehrere Frames aufgenommen und nach Aufnahme aller Frames zu einem einzigen Bild zusammengesetzt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-154">The HDR process captures multiple frames and then composites them into a single image after all of the frames have been captured.</span></span> <span data-ttu-id="9ed29-155">Durch Behandeln des [**OptionalReferencePhotoCaptured**](https://msdn.microsoft.com/library/windows/apps/mt181392)-Ereignisses können Sie auf einen Frame zugreifen, nachdem er aufgenommen wurde, aber bevor das gesamte HDR-Verfahren abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="9ed29-155">You can get access to a frame after it is captured but before the entire HDR process is complete by handling the [**OptionalReferencePhotoCaptured**](https://msdn.microsoft.com/library/windows/apps/mt181392) event.</span></span> <span data-ttu-id="9ed29-156">Dies ist jedoch nicht erforderlich, wenn Sie lediglich am endgültigen HDR-Fotoergebnis interessiert sind.</span><span class="sxs-lookup"><span data-stu-id="9ed29-156">You don't need to do this if you are only interested in the final HDR photo result.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9ed29-157">[**OptionalReferencePhotoCaptured**](https://msdn.microsoft.com/library/windows/apps/mt181392) wird nicht auf Geräten ausgelöst, die Hardware-HDR unterstützen und daher keine Referenzframes generieren.</span><span class="sxs-lookup"><span data-stu-id="9ed29-157">[**OptionalReferencePhotoCaptured**](https://msdn.microsoft.com/library/windows/apps/mt181392) is not raised on devices that support hardware HDR and therefore do not generate reference frames.</span></span> <span data-ttu-id="9ed29-158">Ihre App sollte den Fall behandeln, in dem dieses Ereignis nicht ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="9ed29-158">Your app should handle the case where this event is not raised.</span></span>

<span data-ttu-id="9ed29-159">Da der Referenzframe außerhalb des Kontexts des Aufrufs von **CaptureAsync** auftritt, steht ein Mechanismus zur Übergabe von Kontextinformationen an den **OptionalReferencePhotoCaptured**-Handler zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="9ed29-159">Because the reference frame arrives out of context of the call to **CaptureAsync**, a mechanism is provided to pass context information to the **OptionalReferencePhotoCaptured** handler.</span></span> <span data-ttu-id="9ed29-160">Rufen Sie zunächst ein Objekt auf, das als Container für die Kontextinformationen dient.</span><span class="sxs-lookup"><span data-stu-id="9ed29-160">First you should call an object that will contain your context information.</span></span> <span data-ttu-id="9ed29-161">Sie können den Namen und den Inhalt dieses Objekts frei wählen.</span><span class="sxs-lookup"><span data-stu-id="9ed29-161">The name and contents of this object is up to you.</span></span> <span data-ttu-id="9ed29-162">In diesem Beispiel wird ein Objekt definiert, das über Member zum Nachverfolgen des Dateinamens und der Kameraausrichtung der Aufnahme verfügt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-162">This example defines an object that has members to track the file name and camera orientation of the capture.</span></span>

[!code-cs[AdvancedCaptureContext](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetAdvancedCaptureContext)]

<span data-ttu-id="9ed29-163">Erstellen Sie eine neue Instanz des Kontextobjekts, füllen Sie dessen Member, und übergeben Sie es an die Überladung von [**CaptureAsync**](https://msdn.microsoft.com/library/windows/apps/mt181388), die ein Objekt als Parameter akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="9ed29-163">Create a new instance of your context object, populate its members, and then pass it into the overload of [**CaptureAsync**](https://msdn.microsoft.com/library/windows/apps/mt181388) that accepts an object as a parameter.</span></span>

[!code-cs[CaptureWithContext](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetCaptureWithContext)]

<span data-ttu-id="9ed29-164">Wandeln Sie im [**OptionalReferencePhotoCaptured**](https://msdn.microsoft.com/library/windows/apps/mt181392)-Ereignishandler die [**Context**](https://msdn.microsoft.com/library/windows/apps/mt181405)-Eigenschaft des [**OptionalReferencePhotoCapturedEventArgs**](https://msdn.microsoft.com/library/windows/apps/mt181404)-Objekts in Ihre Kontextobjektklasse um.</span><span class="sxs-lookup"><span data-stu-id="9ed29-164">In the [**OptionalReferencePhotoCaptured**](https://msdn.microsoft.com/library/windows/apps/mt181392) event handler, cast the [**Context**](https://msdn.microsoft.com/library/windows/apps/mt181405) property of the [**OptionalReferencePhotoCapturedEventArgs**](https://msdn.microsoft.com/library/windows/apps/mt181404) object to your context object class.</span></span> <span data-ttu-id="9ed29-165">In diesem Beispiel wird der Dateiname geändert, um den Referenzframe vom endgültigen HDR-Bild zu unterscheiden. Anschließend wird die **SaveCapturedFrameAsync**-Hilfsmethode aufgerufen, um das Bild zu speichern.</span><span class="sxs-lookup"><span data-stu-id="9ed29-165">This example modifies the file name to distinguish the reference frame image from the final HDR image and then calls the **SaveCapturedFrameAsync** helper method to save the image.</span></span>

[!code-cs[OptionalReferencePhotoCaptured](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetOptionalReferencePhotoCaptured)]

### <a name="receive-a-notification-when-all-frames-have-been-captured"></a><span data-ttu-id="9ed29-166">Empfangen einer Benachrichtigung nach Aufnahme aller Frames</span><span class="sxs-lookup"><span data-stu-id="9ed29-166">Receive a notification when all frames have been captured</span></span>

<span data-ttu-id="9ed29-167">Die HDR-Fotoaufnahme besteht aus zwei Schritten.</span><span class="sxs-lookup"><span data-stu-id="9ed29-167">The HDR photo capture has two steps.</span></span> <span data-ttu-id="9ed29-168">Zuerst werden mehrere Frames aufgenommen, dann werden die Frames zum endgültigen HDR-Bild verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="9ed29-168">First, multiple frames are captured, and then the frames are processed into the final HDR image.</span></span> <span data-ttu-id="9ed29-169">Während der laufenden Aufnahme der HDR-Quellbilder können Sie keine weiteren Aufnahmen starten. Sie können jedoch eine Aufnahme starten, wenn alle Frames aufgenommen wurden, die HDR-Nachverarbeitung aber noch nicht abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="9ed29-169">You can't initiate another capture while the source HDR frames are still being captured, but you can initiate a capture after all of the frames have been captured but before the HDR post-processing is complete.</span></span> <span data-ttu-id="9ed29-170">Das [**AllPhotosCaptured**](https://msdn.microsoft.com/library/windows/apps/mt181387)-Ereignis wird ausgelöst, wenn die HDR-Aufnahmen abgeschlossen sind, um Sie darüber zu informieren, dass Sie eine weitere Aufnahme starten können.</span><span class="sxs-lookup"><span data-stu-id="9ed29-170">The [**AllPhotosCaptured**](https://msdn.microsoft.com/library/windows/apps/mt181387) event is raised when the HDR captures are complete, letting you know that you can initiate another capture.</span></span> <span data-ttu-id="9ed29-171">In einem typischen Szenario wird die Aufnahmeschaltfläche in der Benutzeroberfläche deaktiviert, wenn die HDR-Aufnahme beginnt, und aktiviert, wenn **AllPhotosCaptured** ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="9ed29-171">A typical scenario is to disable your UI's capture button when HDR capture begins and then reenable it when **AllPhotosCaptured** is raised.</span></span>

[!code-cs[AllPhotosCaptured](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetAllPhotosCaptured)]

### <a name="clean-up-the-advancedphotocapture-object"></a><span data-ttu-id="9ed29-172">Bereinigen des AdvancedPhotoCapture-Objekts</span><span class="sxs-lookup"><span data-stu-id="9ed29-172">Clean up the AdvancedPhotoCapture object</span></span>

<span data-ttu-id="9ed29-173">Wenn die App alle Fotos aufgenommen hat, beenden Sie vor dem Löschen des **MediaCapture**-Objekts das [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/mt181386)-Objekt, indem Sie [**FinishAsync**](https://msdn.microsoft.com/library/windows/apps/mt181391) aufrufen und die Membervariable auf NULL festlegen.</span><span class="sxs-lookup"><span data-stu-id="9ed29-173">When your app is done capturing, before disposing of the **MediaCapture** object, you should shut down the [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/mt181386) object by calling [**FinishAsync**](https://msdn.microsoft.com/library/windows/apps/mt181391) and setting your member variable to null.</span></span>

[!code-cs[CleanUpAdvancedPhotoCapture](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetCleanUpAdvancedPhotoCapture)]


## <a name="low-light-photo-capture"></a><span data-ttu-id="9ed29-174">Fotoaufnahme bei schlechten Lichtverhältnissen</span><span class="sxs-lookup"><span data-stu-id="9ed29-174">Low-light photo capture</span></span>
<span data-ttu-id="9ed29-175">Ab Windows 10, Version 1607, kann **AdvancedPhotoCapture** verwendet werden, um Fotos mit einem integrierten Algorithmus aufzunehmen, der die Qualität von Fotos verbessert, die bei schlechten Lichtverhältnissen aufgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="9ed29-175">Starting with Windows 10, version 1607, **AdvancedPhotoCapture** can be used to capture photos using a built-in algorithm that enhances the quality of photos captured in low-light settings.</span></span> <span data-ttu-id="9ed29-176">Wenn Sie das Feature für schlechte Lichtverhältnisse der [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedPhotoCapture)-Klasse verwenden, wertet das System die aktuelle Szene aus und wendet bei Bedarf einen Algorithmus an, um schwierige Lichtverhältnisse zu kompensieren.</span><span class="sxs-lookup"><span data-stu-id="9ed29-176">When you use the low-light feature of the [**AdvancedPhotoCapture**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedPhotoCapture) class, the system will evaluate the current scene and, if needed, apply an algorithm to compensate for low-light conditions.</span></span> <span data-ttu-id="9ed29-177">Wenn das System feststellt, dass der Algorithmus nicht benötigt wird, wird stattdessen eine normale Aufnahme ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-177">If the system determines that the algorithm is not needed, a regular capture is performed instead.</span></span>

<span data-ttu-id="9ed29-178">Ermitteln Sie vor der Verwendung der Aufnahme bei schlechten Lichtverhältnissen, ob das Gerät, auf dem Ihre App derzeit ausgeführt wird, dieses Verfahren unterstützt, indem Sie den [**VideoDeviceController**](https://msdn.microsoft.com/library/windows/apps/br226825) des **MediaCapture**-Objekts und anschließend die [**AdvancedPhotoControl**](https://msdn.microsoft.com/library/windows/apps/mt147840)-Eigenschaft abrufen.</span><span class="sxs-lookup"><span data-stu-id="9ed29-178">Before using low-light photo capture, determine if the device on which your app is currently running supports the technique by getting the **MediaCapture** object's [**VideoDeviceController**](https://msdn.microsoft.com/library/windows/apps/br226825) and then getting the [**AdvancedPhotoControl**](https://msdn.microsoft.com/library/windows/apps/mt147840) property.</span></span> <span data-ttu-id="9ed29-179">Überprüfen Sie, ob die [**SupportedModes**](https://msdn.microsoft.com/library/windows/apps/mt147844)-Sammlung des Videogerätecontrollers [**AdvancedPhotoMode.LowLight**](https://msdn.microsoft.com/library/windows/apps/mt147845) enthält.</span><span class="sxs-lookup"><span data-stu-id="9ed29-179">Check the video device controller's [**SupportedModes**](https://msdn.microsoft.com/library/windows/apps/mt147844) collection to see if it includes [**AdvancedPhotoMode.LowLight**](https://msdn.microsoft.com/library/windows/apps/mt147845).</span></span> <span data-ttu-id="9ed29-180">Wenn dies der Fall ist, wird die Aufnahme bei schlechten Lichtverhältnissen mit **AdvancedPhotoCapture** unterstützt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-180">If it does, low-light capture using **AdvancedPhotoCapture** is supported.</span></span> 
[!code-cs[LowLightSupported1](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetLowLightSupported1)]

[!code-cs[LowLightSupported2](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetLowLightSupported2)]

<span data-ttu-id="9ed29-181">Deklarieren Sie anschließend eine Membervariable zum Speichern des **AdvancedPhotoCapture**-Objekts.</span><span class="sxs-lookup"><span data-stu-id="9ed29-181">Next, declare a member variable to store the **AdvancedPhotoCapture** object.</span></span> 

[!code-cs[DeclareAdvancedCapture](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetDeclareAdvancedCapture)]

<span data-ttu-id="9ed29-182">Erstellen Sie nach der Initialisierung des **MediaCapture**-Objekts in der App ein [**AdvancedPhotoCaptureSettings**](https://msdn.microsoft.com/library/windows/apps/mt147837)-Objekt, und legen Sie den Modus auf [**AdvancedPhotoMode.LowLight**](https://msdn.microsoft.com/library/windows/apps/mt147845) fest.</span><span class="sxs-lookup"><span data-stu-id="9ed29-182">In your app, after you have initialized the **MediaCapture** object, create an [**AdvancedPhotoCaptureSettings**](https://msdn.microsoft.com/library/windows/apps/mt147837) object and set the mode to [**AdvancedPhotoMode.LowLight**](https://msdn.microsoft.com/library/windows/apps/mt147845).</span></span> <span data-ttu-id="9ed29-183">Rufen Sie die [**Configure**](https://msdn.microsoft.com/library/windows/apps/mt147841)-Methode des [**AdvancedPhotoControl**](https://msdn.microsoft.com/library/windows/apps/mt147840)-Objekts auf, und übergeben Sie das erstellte **AdvancedPhotoCaptureSettings**-Objekt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-183">Call the [**AdvancedPhotoControl**](https://msdn.microsoft.com/library/windows/apps/mt147840) object's [**Configure**](https://msdn.microsoft.com/library/windows/apps/mt147841) method, passing in the **AdvancedPhotoCaptureSettings** object you created.</span></span>

<span data-ttu-id="9ed29-184">Rufen Sie die [**PrepareAdvancedPhotoCaptureAsync**](https://msdn.microsoft.com/library/windows/apps/mt181403)-Methode des **MediaCapture**-Objekts auf, und übergeben Sie ein [**ImageEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh700993)-Objekt, das den von der Aufnahme zu verwendenden Codierungstyp angibt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-184">Call the **MediaCapture** object's [**PrepareAdvancedPhotoCaptureAsync**](https://msdn.microsoft.com/library/windows/apps/mt181403), passing in an [**ImageEncodingProperties**](https://msdn.microsoft.com/library/windows/apps/hh700993) object specifying the type of encoding the capture should use.</span></span> 

[!code-cs[CreateAdvancedCaptureLowLightAsync](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetCreateAdvancedCaptureLowLightAsync)]

<span data-ttu-id="9ed29-185">Rufen Sie zum Aufnehmen eines Fotos [**CaptureAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedPhotoCapture.CaptureAsync) auf.</span><span class="sxs-lookup"><span data-stu-id="9ed29-185">To capture a photo, call [**CaptureAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedPhotoCapture.CaptureAsync).</span></span>

[!code-cs[CaptureLowLight](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetCaptureLowLight)]

<span data-ttu-id="9ed29-186">In diesem Beispiel wird wie im obigen HDR-Beispiel eine Hilfsklasse namens **CameraRotationHelper** verwendet, um den Drehungswert zu ermitteln, der im Bild codiert werden muss, damit es von anderen Apps und Geräten richtig angezeigt werden kann.</span><span class="sxs-lookup"><span data-stu-id="9ed29-186">Like the HDR example above, this example uses a helper class called **CameraRotationHelper** to determine the rotation value that should be encoded into the image so that it can be displayed properly by other apps and devices.</span></span> <span data-ttu-id="9ed29-187">Eine vollständige Beschreibung und Auflistung dieser Klasse finden Sie im Artikel [**Handhaben der Geräte- und Bildschirmausrichtung mit „MediaCapture“**](handle-device-orientation-with-mediacapture.md).</span><span class="sxs-lookup"><span data-stu-id="9ed29-187">This class is described and listed in full in the article [**Handle device orientation with MediaCapture**](handle-device-orientation-with-mediacapture.md).</span></span>

<span data-ttu-id="9ed29-188">Die **SaveCapturedFrameAsync**-Hilfsmethode, die das Bild auf einem Datenträger speichert, wird an späterer Stelle in diesem Artikel erläutert.</span><span class="sxs-lookup"><span data-stu-id="9ed29-188">The **SaveCapturedFrameAsync** helper method, which saves the image to disk, is discussed later in this article.</span></span>

<span data-ttu-id="9ed29-189">Sie können mehrere Fotos bei schlechten Lichtverhältnissen aufnehmen, ohne das **AdvancedPhotoCapture**-Objekt neu zu konfigurieren. Nach den Aufnahmen sollten Sie jedoch [**FinishAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedPhotoCapture.FinishAsync) aufrufen, um das Objekt und die zugehörigen Ressourcen zu bereinigen.</span><span class="sxs-lookup"><span data-stu-id="9ed29-189">You can capture multiple low-light photos without reconfiguring the **AdvancedPhotoCapture** object, but when you are done capturing, you should call [**FinishAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedPhotoCapture.FinishAsync) to clean up the object and associated resources.</span></span>

[!code-cs[CleanUpAdvancedPhotoCapture](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetCleanUpAdvancedPhotoCapture)]

## <a name="working-with-advancedcapturedphoto-objects"></a><span data-ttu-id="9ed29-190">Arbeiten mit AdvancedCapturedPhoto-Objekten</span><span class="sxs-lookup"><span data-stu-id="9ed29-190">Working with AdvancedCapturedPhoto objects</span></span>
<span data-ttu-id="9ed29-191">[**AdvancedPhotoCapture.CaptureAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedPhotoCapture.CaptureAsync) gibt ein [**AdvancedCapturedPhoto**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedCapturedPhoto)-Objekt zurück, das das aufgenommene Foto darstellt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-191">[**AdvancedPhotoCapture.CaptureAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedPhotoCapture.CaptureAsync) returns an [**AdvancedCapturedPhoto**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedCapturedPhoto) object representing the captured photo.</span></span> <span data-ttu-id="9ed29-192">Dieses Objekt macht die [**Frame**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedCapturedPhoto.Frame)-Eigenschaft verfügbar, die ein [**CapturedFrame**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CapturedFrame)-Objekt zurückgibt, das das Bild darstellt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-192">This object exposes the [**Frame**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedCapturedPhoto.Frame) property which returns a [**CapturedFrame**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CapturedFrame) object representing the image.</span></span> <span data-ttu-id="9ed29-193">Das [**OptionalReferencePhotoCaptured**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedPhotoCapture.OptionalReferencePhotoCaptured)-Ereignis stellt auch ein **CapturedFrame**-Objekt in seinen Ereignisargumenten bereit.</span><span class="sxs-lookup"><span data-stu-id="9ed29-193">The [**OptionalReferencePhotoCaptured**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.AdvancedPhotoCapture.OptionalReferencePhotoCaptured) event also provides a **CapturedFrame** object in its event args.</span></span> <span data-ttu-id="9ed29-194">Nachdem Sie ein Objekt dieses Typs abgerufen haben, können Sie es für verschiedene Zwecke verwenden, unter anderem zum Erstellen einer [**SoftwareBitmap**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.SoftwareBitmap) oder Speichern des Bilds in einer Datei.</span><span class="sxs-lookup"><span data-stu-id="9ed29-194">After you get an object of this type, there are a number of things you can do with it, including creating a [**SoftwareBitmap**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.SoftwareBitmap) or saving the image to a file.</span></span> 

## <a name="get-a-softwarebitmap-from-a-capturedframe"></a><span data-ttu-id="9ed29-195">Abrufen einer „SoftwareBitmap” aus einem CapturedFrame-Objekt</span><span class="sxs-lookup"><span data-stu-id="9ed29-195">Get a SoftwareBitmap from a CapturedFrame</span></span>
<span data-ttu-id="9ed29-196">Eine **SoftwareBitmap** kann ganz einfach aus einem **CapturedFrame**-Objekt abgerufen werden, indem Sie auf die [**SoftwareBitmap**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CapturedFrame.SoftwareBitmap)-Eigenschaft des Objekts zugreifen.</span><span class="sxs-lookup"><span data-stu-id="9ed29-196">It's trivial to get a **SoftwareBitmap** from a **CapturedFrame** object by simply accessing the [**SoftwareBitmap**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CapturedFrame.SoftwareBitmap) property of the object.</span></span> <span data-ttu-id="9ed29-197">Die meisten Codierungsformate unterstützen **SoftwareBitmap** mit **AdvancedPhotoCapture** jedoch nicht. Sie sollten daher sicherstellen, dass die Eigenschaft nicht NULL ist, bevor Sie sie verwenden.</span><span class="sxs-lookup"><span data-stu-id="9ed29-197">However, most encoding formats do not support **SoftwareBitmap** with **AdvancedPhotoCapture**, so you should check and make sure the property is not null before using it.</span></span>

[!code-cs[SoftwareBitmapFromCapturedFrame](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetSoftwareBitmapFromCapturedFrame)]

<span data-ttu-id="9ed29-198">Das nicht komprimierte Format NV12 ist in der aktuellen Version das einzige Codierungsformat, das **SoftwareBitmap** für **AdvancedPhotoCapture** unterstützt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-198">In the current release, the only encoding format that supports **SoftwareBitmap** for **AdvancedPhotoCapture** is uncompressed NV12.</span></span> <span data-ttu-id="9ed29-199">Wenn Sie das Feature verwenden möchten, müssen Sie daher diese Codierung beim Aufrufen von [**PrepareAdvancedPhotoCaptureAsync**](https://msdn.microsoft.com/library/windows/apps/mt181403) angeben.</span><span class="sxs-lookup"><span data-stu-id="9ed29-199">So, if you want to use this feature, you must specify that encoding when you call [**PrepareAdvancedPhotoCaptureAsync**](https://msdn.microsoft.com/library/windows/apps/mt181403).</span></span> 

[!code-cs[UncompressedNv12](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetUncompressedNv12)]

<span data-ttu-id="9ed29-200">Natürlich können Sie das Bild immer in einer Datei speichern und die Datei dann in einem separaten Schritt in eine **SoftwareBitmap** laden.</span><span class="sxs-lookup"><span data-stu-id="9ed29-200">Of course, you can always save the image to a file and then load the file into a **SoftwareBitmap** in a separate step.</span></span> <span data-ttu-id="9ed29-201">Weitere Informationen zur Verwendung von **SoftwareBitmap** finden Sie im Artikel zum [**Erstellen, Bearbeiten und Speichern von Bitmapbildern**](imaging.md).</span><span class="sxs-lookup"><span data-stu-id="9ed29-201">For more information about working with **SoftwareBitmap**, see [**Create, edit, and save bitmap images**](imaging.md).</span></span>

## <a name="save-a-capturedframe-to-a-file"></a><span data-ttu-id="9ed29-202">Speichern eines „CapturedFrame” in einer Datei</span><span class="sxs-lookup"><span data-stu-id="9ed29-202">Save a CapturedFrame to a file</span></span>
<span data-ttu-id="9ed29-203">Die [**CapturedFrame**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CapturedFrame)-Klasse implementiert die IInputStream-Schnittstelle, sodass sie als Eingabe für einen [**BitmapDecoder**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapDecoder) verwendet werden kann. Anschließend kann ein [**BitmapEncoder**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapEncoder) verwendet werden, um die Bilddaten auf einen Datenträger zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="9ed29-203">The [**CapturedFrame**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.CapturedFrame) class implements the IInputStream interface, so it can be used as the input to a [**BitmapDecoder**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapDecoder), and then a [**BitmapEncoder**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapEncoder) can be used to write the image data to disk.</span></span>

<span data-ttu-id="9ed29-204">Im folgenden Beispiel werden ein neuer Ordner in der Bildbibliothek des Benutzers und eine Datei in diesem Ordner erstellt.</span><span class="sxs-lookup"><span data-stu-id="9ed29-204">In the following example, a new folder in the user's pictures library is created and a file is created within this folder.</span></span> <span data-ttu-id="9ed29-205">Beachten Sie, dass Ihre App die Funktion **Bildbibliothek** in der App-Manifestdatei enthalten muss, um auf dieses Verzeichnis zugreifen zu können.</span><span class="sxs-lookup"><span data-stu-id="9ed29-205">Note that your app will need to include the **Pictures Library** capability in your app manifest file in order to access this directory.</span></span> <span data-ttu-id="9ed29-206">Anschließend wird ein Dateidatenstrom zur angegebenen Datei geöffnet.</span><span class="sxs-lookup"><span data-stu-id="9ed29-206">A file stream is then opened to the specified file.</span></span> <span data-ttu-id="9ed29-207">Als Nächstes wird [**BitmapDecoder.CreateAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapDecoder.CreateAsync) aufgerufen, um den Decoder aus dem **CapturedFrame** zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="9ed29-207">Next, the [**BitmapDecoder.CreateAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapDecoder.CreateAsync) is called to create the decoder from the **CapturedFrame**.</span></span> <span data-ttu-id="9ed29-208">Danach erstellt [**CreateForTranscodingAsync**](https://msdn.microsoft.com/library/windows/apps/br226214) einen Encoder aus dem Dateidatenstrom und dem Decoder.</span><span class="sxs-lookup"><span data-stu-id="9ed29-208">Then [**CreateForTranscodingAsync**](https://msdn.microsoft.com/library/windows/apps/br226214) creates an encoder from the file stream and the decoder.</span></span>

<span data-ttu-id="9ed29-209">In den nächsten Schritten wird die Ausrichtung des Fotos mithilfe der [**BitmapProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapEncoder.BitmapProperties) des Encoders in der Bilddatei codiert.</span><span class="sxs-lookup"><span data-stu-id="9ed29-209">The next steps encode the orientation of the photo into the image file by using the [**BitmapProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapEncoder.BitmapProperties) of the encoder.</span></span> <span data-ttu-id="9ed29-210">Weitere Informationen zur Handhabung der Ausrichtung beim Aufnehmen von Bildern finden Sie unter [**Handhaben der Geräte- und Bildschirmausrichtung mit „MediaCapture“**](handle-device-orientation-with-mediacapture.md).</span><span class="sxs-lookup"><span data-stu-id="9ed29-210">For more information about handling orientation when capturing images, see [**Handle device orientation with MediaCapture**](handle-device-orientation-with-mediacapture.md).</span></span>

<span data-ttu-id="9ed29-211">Zum Schluss wird das Bild mit einem Aufruf von [**FlushAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapEncoder.FlushAsync) in die Datei geschrieben.</span><span class="sxs-lookup"><span data-stu-id="9ed29-211">Finally, the image is written to the file with a call to [**FlushAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Graphics.Imaging.BitmapEncoder.FlushAsync).</span></span>

[!code-cs[SaveCapturedFrameAsync](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetSaveCapturedFrameAsync)]

## <a name="related-topics"></a><span data-ttu-id="9ed29-212">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="9ed29-212">Related topics</span></span>

* [<span data-ttu-id="9ed29-213">Kamera</span><span class="sxs-lookup"><span data-stu-id="9ed29-213">Camera</span></span>](camera.md)
* [<span data-ttu-id="9ed29-214">Allgemeine Foto-, Video- und Audioaufnahme mit „MediaCapture“</span><span class="sxs-lookup"><span data-stu-id="9ed29-214">Basic photo, video, and audio capture with MediaCapture</span></span>](basic-photo-video-and-audio-capture-with-MediaCapture.md)
