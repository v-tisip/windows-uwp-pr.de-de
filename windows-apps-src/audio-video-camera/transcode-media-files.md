---
ms.assetid: A1A0D99A-DCBF-4A14-80B9-7106BEF045EC
description: Mit den Windows.Media.Transcoding-APIs können Sie Videodateien von einem Format in ein anderes transcodieren.
title: Transkodieren von Mediendateien
ms.date: 02/08/2017
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 1a6eb19ca5954b3ce71ecbaefe3339bee78f8717
ms.sourcegitcommit: 681c70f964210ab49ac5d06357ae96505bb78741
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/26/2018
ms.locfileid: "7706410"
---
# <a name="transcode-media-files"></a><span data-ttu-id="e4684-104">Transkodieren von Mediendateien</span><span class="sxs-lookup"><span data-stu-id="e4684-104">Transcode media files</span></span>



<span data-ttu-id="e4684-105">Mit den [**Windows.Media.Transcoding**](https://msdn.microsoft.com/library/windows/apps/br207105)-APIs können Sie Videodateien in ein anderes Format transcodieren.</span><span class="sxs-lookup"><span data-stu-id="e4684-105">You can use the [**Windows.Media.Transcoding**](https://msdn.microsoft.com/library/windows/apps/br207105) APIs to transcode video files from one format to another.</span></span>

<span data-ttu-id="e4684-106">Beim *Transcodieren* wird eine digitale Mediendatei (etwa eine Video- oder Audiodatei) in ein anderes Format konvertiert.</span><span class="sxs-lookup"><span data-stu-id="e4684-106">*Transcoding* is the conversion of a digital media file, such as a video or audio file, from one format to another.</span></span> <span data-ttu-id="e4684-107">Dies geschieht in der Regel durch Decodieren und erneutes Codieren der Datei.</span><span class="sxs-lookup"><span data-stu-id="e4684-107">This is usually done by decoding and then re-encoding the file.</span></span> <span data-ttu-id="e4684-108">Beispiel: Sie konvertieren eine Windows Media-Datei in MP4, um sie auf einem Gerät wiederzugeben, das das MP4-Format unterstützt.</span><span class="sxs-lookup"><span data-stu-id="e4684-108">For example, you might convert a Windows Media file to MP4 so that it can be played on a portable device that supports MP4 format.</span></span> <span data-ttu-id="e4684-109">Oder Sie können eine Videodatei mit hoher Auflösung in eine niedrigere Auflösung konvertieren.</span><span class="sxs-lookup"><span data-stu-id="e4684-109">Or, you might convert a high-definition video file to a lower resolution.</span></span> <span data-ttu-id="e4684-110">In diesem Fall kann die neu codierte Datei den gleichen Codec wie die Originaldatei verwenden, sie besitzt jedoch ein anderes Codierungsprofil.</span><span class="sxs-lookup"><span data-stu-id="e4684-110">In that case, the re-encoded file might use the same codec as the original file, but it would have a different encoding profile.</span></span>

## <a name="set-up-your-project-for-transcoding"></a><span data-ttu-id="e4684-111">Einrichten des Projekts für die Transcodierung</span><span class="sxs-lookup"><span data-stu-id="e4684-111">Set up your project for transcoding</span></span>

<span data-ttu-id="e4684-112">Zusätzlich zu den Namespaces, auf die von der Standardprojektvorlage verwiesen wird, müssen Sie auf die folgenden Namespaces verweisen, um Mediendateien mit dem Code in diesem Artikel transcodieren zu können:</span><span class="sxs-lookup"><span data-stu-id="e4684-112">In addition to the namespaces referenced by the default project template, you will need to reference these namespaces in order to transcode media files using the code in this article.</span></span>

[!code-cs[Using](./code/TranscodeWin10/cs/MainPage.xaml.cs#SnippetUsing)]

## <a name="select-source-and-destination-files"></a><span data-ttu-id="e4684-113">Auswählen der Quell- und Zieldateien</span><span class="sxs-lookup"><span data-stu-id="e4684-113">Select source and destination files</span></span>

<span data-ttu-id="e4684-114">Die Art, wie Ihre App die Quell- und Zieldateien für die Transcodierung ermittelt, hängt von der Implementierung ab.</span><span class="sxs-lookup"><span data-stu-id="e4684-114">The way that your app determines the source and destination files for transcoding depends on your implementation.</span></span> <span data-ttu-id="e4684-115">In diesem Beispiel werden eine [**FileOpenPicker**](https://msdn.microsoft.com/library/windows/apps/br207847)-Klasse und eine [**FileSavePicker**](https://msdn.microsoft.com/library/windows/apps/br207871)-Klasse verwendet, um Benutzern die Auswahl einer Quell- und Zieldatei zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="e4684-115">This example uses a [**FileOpenPicker**](https://msdn.microsoft.com/library/windows/apps/br207847) and a [**FileSavePicker**](https://msdn.microsoft.com/library/windows/apps/br207871) to allow the user to pick a source and a destination file.</span></span>

[!code-cs[TranscodeGetFile](./code/TranscodeWin10/cs/MainPage.xaml.cs#SnippetTranscodeGetFile)]

## <a name="create-a-media-encoding-profile"></a><span data-ttu-id="e4684-116">Erstellen eines Mediencodierungsprofils</span><span class="sxs-lookup"><span data-stu-id="e4684-116">Create a media encoding profile</span></span>

<span data-ttu-id="e4684-117">Das Codierungsprofil enthält die Einstellungen, die die Codierungsart der Zieldatei festlegen.</span><span class="sxs-lookup"><span data-stu-id="e4684-117">The encoding profile contains the settings that determine how the destination file will be encoded.</span></span> <span data-ttu-id="e4684-118">Hier stehen die meisten Optionen zum Transcodieren einer Datei zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="e4684-118">This is where you have the greatest number of options when you transcode a file.</span></span>

<span data-ttu-id="e4684-119">Die [**MediaEncodingProfile**](https://msdn.microsoft.com/library/windows/apps/hh701026)-Klasse stellt statische Methoden zum Erstellen vordefinierter Codierungsprofile bereit:</span><span class="sxs-lookup"><span data-stu-id="e4684-119">The [**MediaEncodingProfile**](https://msdn.microsoft.com/library/windows/apps/hh701026) class provides static methods for creating predefined encoding profiles:</span></span>

### <a name="methods-for-creating-audio-only-encoding-profiles"></a><span data-ttu-id="e4684-120">Methoden zum Erstellen von Codierungsprofilen, die nur Audio enthalten</span><span class="sxs-lookup"><span data-stu-id="e4684-120">Methods for creating Audio-only encoding profiles</span></span>

<span data-ttu-id="e4684-121">Methode</span><span class="sxs-lookup"><span data-stu-id="e4684-121">Method</span></span>  |<span data-ttu-id="e4684-122">Profil</span><span class="sxs-lookup"><span data-stu-id="e4684-122">Profile</span></span>  |
---------|---------|
[**<span data-ttu-id="e4684-123">CreateAlac</span><span class="sxs-lookup"><span data-stu-id="e4684-123">CreateAlac</span></span>**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createalac)     |<span data-ttu-id="e4684-124">Apple Lossless Audio Codec (ALAC)-Audio</span><span class="sxs-lookup"><span data-stu-id="e4684-124">Apple Lossless Audio Codec (ALAC) audio</span></span>         |
[**<span data-ttu-id="e4684-125">CreateFlac</span><span class="sxs-lookup"><span data-stu-id="e4684-125">CreateFlac</span></span>**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createflac)     |<span data-ttu-id="e4684-126">Free Lossless Audio Codec (FLAC)-Audio.</span><span class="sxs-lookup"><span data-stu-id="e4684-126">Free Lossless Audio Codec (FLAC) audio.</span></span>         |
[**<span data-ttu-id="e4684-127">CreateM4a</span><span class="sxs-lookup"><span data-stu-id="e4684-127">CreateM4a</span></span>**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createm4a)     |<span data-ttu-id="e4684-128">AAC-Audio (M4A)</span><span class="sxs-lookup"><span data-stu-id="e4684-128">AAC audio (M4A)</span></span>         |
[**<span data-ttu-id="e4684-129">CreateMp3</span><span class="sxs-lookup"><span data-stu-id="e4684-129">CreateMp3</span></span>**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createmp3)     |<span data-ttu-id="e4684-130">MP3-Audio</span><span class="sxs-lookup"><span data-stu-id="e4684-130">MP3 audio</span></span>         |
[**<span data-ttu-id="e4684-131">CreateWav</span><span class="sxs-lookup"><span data-stu-id="e4684-131">CreateWav</span></span>**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createwav)     |<span data-ttu-id="e4684-132">WAV-Audio</span><span class="sxs-lookup"><span data-stu-id="e4684-132">WAV audio</span></span>         |
[**<span data-ttu-id="e4684-133">CreateWmv</span><span class="sxs-lookup"><span data-stu-id="e4684-133">CreateWmv</span></span>**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createwmv)     |<span data-ttu-id="e4684-134">Windows Media Audio (WMA)</span><span class="sxs-lookup"><span data-stu-id="e4684-134">Windows Media Audio (WMA)</span></span>         |

### <a name="methods-for-creating-audio--video-encoding-profiles"></a><span data-ttu-id="e4684-135">Methoden zum Erstellen von Audio-/Videocodierungsprofilen</span><span class="sxs-lookup"><span data-stu-id="e4684-135">Methods for creating audio / video encoding profiles</span></span>

<span data-ttu-id="e4684-136">Methode</span><span class="sxs-lookup"><span data-stu-id="e4684-136">Method</span></span>  |<span data-ttu-id="e4684-137">Profil</span><span class="sxs-lookup"><span data-stu-id="e4684-137">Profile</span></span>  |
---------|---------|
[**<span data-ttu-id="e4684-138">CreateAvi</span><span class="sxs-lookup"><span data-stu-id="e4684-138">CreateAvi</span></span>**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createavi) |<span data-ttu-id="e4684-139">AVI</span><span class="sxs-lookup"><span data-stu-id="e4684-139">AVI</span></span> |
[**<span data-ttu-id="e4684-140">CreateHevc</span><span class="sxs-lookup"><span data-stu-id="e4684-140">CreateHevc</span></span>**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createhevc) |<span data-ttu-id="e4684-141">High Efficiency Video Coding (HEVC)-Video, auch als H.265-Video bezeichnet</span><span class="sxs-lookup"><span data-stu-id="e4684-141">High Efficiency Video Coding (HEVC) video, also known as H.265 video</span></span> |
[**<span data-ttu-id="e4684-142">CreateMp4</span><span class="sxs-lookup"><span data-stu-id="e4684-142">CreateMp4</span></span>**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createmp4) |<span data-ttu-id="e4684-143">MP4-Video (H.264-Video und AAC-Audio)</span><span class="sxs-lookup"><span data-stu-id="e4684-143">MP4 video (H.264 video plus AAC audio)</span></span> |
[**<span data-ttu-id="e4684-144">CreateWmv</span><span class="sxs-lookup"><span data-stu-id="e4684-144">CreateWmv</span></span>**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createwmv) |<span data-ttu-id="e4684-145">Windows Media Video (WMV)</span><span class="sxs-lookup"><span data-stu-id="e4684-145">Windows Media Video (WMV)</span></span> |


<span data-ttu-id="e4684-146">Der folgende Code erstellt ein Profil für MP4-Video:</span><span class="sxs-lookup"><span data-stu-id="e4684-146">The following code creates a profile for MP4 video.</span></span>

[!code-cs[TranscodeMediaProfile](./code/TranscodeWin10/cs/MainPage.xaml.cs#SnippetTranscodeMediaProfile)]

<span data-ttu-id="e4684-147">Die statische [**CreateMp4**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createmp4)-Methode erstellt ein MP4-Codierungsprofil.</span><span class="sxs-lookup"><span data-stu-id="e4684-147">The static [**CreateMp4**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createmp4) method creates an MP4 encoding profile.</span></span> <span data-ttu-id="e4684-148">Der Parameter für diese Methode gibt die Zielauflösung für das Video an.</span><span class="sxs-lookup"><span data-stu-id="e4684-148">The parameter for this method gives the target resolution for the video.</span></span> <span data-ttu-id="e4684-149">In diesem Fall bedeutet [**VideoEncodingQuality.hd720p**](https://msdn.microsoft.com/library/windows/apps/hh701290): 1280x720Pixel mit 30Bildern pro Sekunde.</span><span class="sxs-lookup"><span data-stu-id="e4684-149">In this case, [**VideoEncodingQuality.hd720p**](https://msdn.microsoft.com/library/windows/apps/hh701290) means 1280 x 720 pixels at 30 frames per second.</span></span> <span data-ttu-id="e4684-150">(„720p“ steht für 720progressive Scanlinien pro Frame.) Dieses Muster gilt auch für die anderen Methoden zum Erstellen vordefinierter Profile.</span><span class="sxs-lookup"><span data-stu-id="e4684-150">("720p" stands for 720 progressive scan lines per frame.) The other methods for creating predefined profiles all follow this pattern.</span></span>

<span data-ttu-id="e4684-151">Alternativ können Sie mit der [**MediaEncodingProfile.CreateFromFileAsync**](https://msdn.microsoft.com/library/windows/apps/hh701047)-Methode ein Profil erstellen, das einer vorhandenen Mediendatei entspricht.</span><span class="sxs-lookup"><span data-stu-id="e4684-151">Alternatively, you can create a profile that matches an existing media file by using the [**MediaEncodingProfile.CreateFromFileAsync**](https://msdn.microsoft.com/library/windows/apps/hh701047) method.</span></span> <span data-ttu-id="e4684-152">Wenn Sie die genauen gewünschten Codierungseinstellungen kennen, können Sie auch ein neues [**MediaEncodingProfile**](https://msdn.microsoft.com/library/windows/apps/hh701026)-Objekt erstellen und die Profildetails ausfüllen.</span><span class="sxs-lookup"><span data-stu-id="e4684-152">Or, if you know the exact encoding settings that you want, you can create a new [**MediaEncodingProfile**](https://msdn.microsoft.com/library/windows/apps/hh701026) object and fill in the profile details.</span></span>

## <a name="transcode-the-file"></a><span data-ttu-id="e4684-153">Transcodieren der Datei</span><span class="sxs-lookup"><span data-stu-id="e4684-153">Transcode the file</span></span>

<span data-ttu-id="e4684-154">Erstellen Sie zum Transcodieren der Datei ein neues [**MediaTranscoder**](https://msdn.microsoft.com/library/windows/apps/br207080)-Objekt, und rufen Sie die [**MediaTranscoder.PrepareFileTranscodeAsync**](https://msdn.microsoft.com/library/windows/apps/hh700936)-Methode auf.</span><span class="sxs-lookup"><span data-stu-id="e4684-154">To transcode the file, create a new [**MediaTranscoder**](https://msdn.microsoft.com/library/windows/apps/br207080) object and call the [**MediaTranscoder.PrepareFileTranscodeAsync**](https://msdn.microsoft.com/library/windows/apps/hh700936) method.</span></span> <span data-ttu-id="e4684-155">Übergeben Sie die Quelldatei, die Zieldatei und das Codierungsprofil.</span><span class="sxs-lookup"><span data-stu-id="e4684-155">Pass in the source file, the destination file, and the encoding profile.</span></span> <span data-ttu-id="e4684-156">Rufen Sie dann die [**TranscodeAsync**](https://msdn.microsoft.com/library/windows/apps/hh700946)-Methode für das [**PrepareTranscodeResult**](https://msdn.microsoft.com/library/windows/apps/hh700941)-Objekt auf, das mit dem asynchronen Transcodierungsvorgang zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="e4684-156">Then call the [**TranscodeAsync**](https://msdn.microsoft.com/library/windows/apps/hh700946) method on the [**PrepareTranscodeResult**](https://msdn.microsoft.com/library/windows/apps/hh700941) object that was returned from the async transcode operation.</span></span>

[!code-cs[TranscodeTranscodeFile](./code/TranscodeWin10/cs/MainPage.xaml.cs#SnippetTranscodeTranscodeFile)]

## <a name="respond-to-transcoding-progress"></a><span data-ttu-id="e4684-157">Reaktion auf Transcodierungsfortschritt</span><span class="sxs-lookup"><span data-stu-id="e4684-157">Respond to transcoding progress</span></span>

<span data-ttu-id="e4684-158">Sie können Reaktionsereignisse registrieren, wenn sich der Fortschritt der asynchronen [**TranscodeAsync**](https://msdn.microsoft.com/library/windows/apps/hh700946)-Klasse ändert.</span><span class="sxs-lookup"><span data-stu-id="e4684-158">You can register events to respond when the progress of the asynchronous [**TranscodeAsync**](https://msdn.microsoft.com/library/windows/apps/hh700946) changes.</span></span> <span data-ttu-id="e4684-159">Diese Ereignisse sind Teil des asynchronen Programmierungsframeworks für Apps für die universelle Windows-Plattform (UWP) und nicht für die Transcodierungs-API spezifisch.</span><span class="sxs-lookup"><span data-stu-id="e4684-159">These events are part of the async programming framework for Universal Windows Platform (UWP) apps and are not specific to the transcoding API.</span></span>

[!code-cs[TranscodeCallbacks](./code/TranscodeWin10/cs/MainPage.xaml.cs#SnippetTranscodeCallbacks)]


## <a name="encode-a-metadata-stream"></a><span data-ttu-id="e4684-160">Codieren Sie einen Metadatenstrom</span><span class="sxs-lookup"><span data-stu-id="e4684-160">Encode a metadata stream</span></span>
<span data-ttu-id="e4684-161">Ab Windows 10, Version 1803, können Sie zeitgesteuerten Metadaten einschließen beim Transcodieren von Mediendateien.</span><span class="sxs-lookup"><span data-stu-id="e4684-161">Starting with Windows 10, version 1803, you can include timed metadata when transcoding media files.</span></span> <span data-ttu-id="e4684-162">Im Gegensatz zu den oben genannten video transcodieren Beispielen müssen verwenden den integrierten Media-Codierung Erstellungsmethoden Profil, z. B. [**MediaEncodingProfile.CreateMp4**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createmp4), Sie manuell erstellen das Codierungsprofil Metadaten zur Unterstützung von des Typs der Metadaten, die Sie codieren .</span><span class="sxs-lookup"><span data-stu-id="e4684-162">Unlike the video transcoding examples above, which use the built-in media encoding profile creation methods, like [**MediaEncodingProfile.CreateMp4**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.mediaencodingprofile.createmp4), you must manually create the metadata encoding profile to support the type of metadata you are encoding.</span></span>

<span data-ttu-id="e4684-163">Dieser erste Schritt beim Erstellen eines Profils der Metadaten-Incoding ist ein [**TimedMetadataEncodingProperties**]-Objekt zu erstellen, die beschreibt die Codierung der Metadaten, die transcodiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="e4684-163">This first step in creating a metadata incoding profile is to create a [**TimedMetadataEncodingProperties**] object that describes the encoding of the metadata to be transcoded.</span></span> <span data-ttu-id="e4684-164">Die Untertyp-Eigenschaft ist eine GUID, die den Typ der Metadaten angibt.</span><span class="sxs-lookup"><span data-stu-id="e4684-164">The Subtype property is a GUID that specifies the type of the metadata.</span></span> <span data-ttu-id="e4684-165">Die Codierung Details für jeden Metadaten ist proprietäre und wird nicht von Windows bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="e4684-165">The encoding details for each metadata type is proprietary and is not provided by Windows.</span></span> <span data-ttu-id="e4684-166">In diesem Beispiel wird die GUID für GoPro-Metadaten (Gprs) verwendet.</span><span class="sxs-lookup"><span data-stu-id="e4684-166">In this example, the GUID for GoPro metadata (gprs) is used.</span></span> <span data-ttu-id="e4684-167">Als Nächstes wird [**SetFormatUserData**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.timedmetadataencodingproperties.setformatuserdata) aufgerufen, um das Festlegen eines binären BLOBs von Daten, die das Datenstromformat, die speziell für das Metadatenformat beschreiben.</span><span class="sxs-lookup"><span data-stu-id="e4684-167">Next, [**SetFormatUserData**](https://docs.microsoft.com/uwp/api/windows.media.mediaproperties.timedmetadataencodingproperties.setformatuserdata) is called to set a binary blob of data describing the stream format that is specific to the metadata format.</span></span> <span data-ttu-id="e4684-168">Anschließend wird ein **TimedMetadataStreamDescriptor**(https://docs.microsoft.com/uwp/api/windows.media.core.timedmetadatastreamdescriptor) aus der codieren Eigenschaften erstellt und einen Titel Bezeichnung und einen Namen zu ermöglichen einer Anwendung Lesen des Streams Endcoded, um den Metadatenstream identifizieren und optional der Name des Streams in der Benutzeroberfläche angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="e4684-168">Next, a **TimedMetadataStreamDescriptor**(https://docs.microsoft.com/uwp/api/windows.media.core.timedmetadatastreamdescriptor) is created from the encoding properites, and a track label and name are to allow an application reading the endcoded stream to identify the metadata stream and optionally display the stream name in the UI.</span></span> 
 
[!code-cs[GetStreamDescriptor](./code/TranscodeWin10/cs/MainPage.xaml.cs#SnippetGetStreamDescriptor)]

<span data-ttu-id="e4684-169">Nach dem Erstellen der **TimedMetadataStreamDescriptor**, können Sie ein **MediaEncodingProfile** erstellen, die das Video, Audio und Metadaten in der Datei codiert werden beschreibt.</span><span class="sxs-lookup"><span data-stu-id="e4684-169">After creating the **TimedMetadataStreamDescriptor**, you can create a **MediaEncodingProfile** that describes the video, audio, and metadata to be encoded in the file.</span></span> <span data-ttu-id="e4684-170">Die **TimedMetadataStreamDescriptor** im letzten Beispiel erstellt wird in diesem Beispiel-Helper-Funktion übergeben und ist die **MediaEncodingProfile** durch Aufrufen von [**SetTimedMetadataTracks**](https://docs.microsoft.com/en-us/uwp/api/windows.media.mediaproperties.mediaencodingprofile.settimedmetadatatracks)hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="e4684-170">The **TimedMetadataStreamDescriptor** created in the last example is passed into this example helper function and is added to the **MediaEncodingProfile** by calling [**SetTimedMetadataTracks**](https://docs.microsoft.com/en-us/uwp/api/windows.media.mediaproperties.mediaencodingprofile.settimedmetadatatracks).</span></span>

[!code-cs[GetMediaEncodingProfile](./code/TranscodeWin10/cs/MainPage.xaml.cs#SnippetGetMediaEncodingProfile)]
 

 




