---
ms.assetid: 159681E4-BF9E-4A57-9FEE-EC7ED0BEFFAD
title: Tipps zu MVVM und Sprachleistung
description: In diesem Thema werden einige Leistungsaspekte in Bezug auf die Wahl von Softwaredesignmustern und Programmiersprachen erläutert.
ms.date: 02/08/2017
ms.topic: article
keywords: Windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 9027362eccfb8130b181bee26a57f13ce1e1af66
ms.sourcegitcommit: b11f305dbf7649c4b68550b666487c77ea30d98f
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/28/2018
ms.locfileid: "7852815"
---
# <a name="mvvm-and-language-performance-tips"></a><span data-ttu-id="c9ff6-104">Tipps zu MVVM und Sprachleistung</span><span class="sxs-lookup"><span data-stu-id="c9ff6-104">MVVM and language performance tips</span></span>


<span data-ttu-id="c9ff6-105">In diesem Thema werden einige Leistungsaspekte in Bezug auf die Wahl von Softwaredesignmustern und Programmiersprachen erläutert.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-105">This topic discusses some performance considerations related to your choice of software design patterns, and programming language.</span></span>

## <a name="the-model-view-viewmodel-mvvm-pattern"></a><span data-ttu-id="c9ff6-106">Das Model-View-ViewModel(MVVM)-Muster</span><span class="sxs-lookup"><span data-stu-id="c9ff6-106">The Model-View-ViewModel (MVVM) pattern</span></span>

<span data-ttu-id="c9ff6-107">Das Model-View-ViewModel(MVVM)-Muster kommt in zahlreichen XAML-Apps zur Anwendung.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-107">The Model-View-ViewModel (MVVM) pattern is common in a lot of XAML apps.</span></span> <span data-ttu-id="c9ff6-108">(MVVM ähnelt sehr stark dem von Fowler beschriebenen Model-View-Presenter-Muster, ist aber speziell auf XAML zugeschnitten.)</span><span class="sxs-lookup"><span data-stu-id="c9ff6-108">(MVVM is very similar to Fowler’s description of the Model-View-Presenter pattern, but it is tailored to XAML).</span></span> <span data-ttu-id="c9ff6-109">Das Problem mit dem MVVM-Muster: Es kann zu Apps mit zu vielen Ebenen und Zuordnungen führen.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-109">The issue with the MVVM pattern is that it can inadvertently lead to apps that have too many layers and too many allocations.</span></span> <span data-ttu-id="c9ff6-110">Vorteile von MVVM:</span><span class="sxs-lookup"><span data-stu-id="c9ff6-110">The motivations for MVVM are these.</span></span>

-   <span data-ttu-id="c9ff6-111">**Aufgabenteilung**.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-111">**Separation of concerns**.</span></span> <span data-ttu-id="c9ff6-112">Es ist immer hilfreich, ein Problem in kleinere Teile zu zerlegen. Mit einem Muster wie MVVM oder MVC können Sie eine App (und sogar ein einzelnes Steuerelement) in die eigentliche Ansicht, ein logisches Modell der Ansicht (Ansichtsmodell) und die von der Ansicht unabhängige App-Logik (das Modell) unterteilen.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-112">It’s always helpful to divide a problem into smaller pieces, and a pattern like MVVM or MVC is a way to divide an app (or even a single control) into smaller pieces: the actual view, a logical model of the view (view-model), and the view-independent app logic (the model).</span></span> <span data-ttu-id="c9ff6-113">Dabei hat es sich bewährt, dass sich die Designer mit einem Tool um die Ansicht, die Entwickler mit einem anderen Tool um das Modell und die Designintegratoren mit beiden Tools um Ansicht und Modell kümmern.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-113">In particular, it’s a popular workflow to have designers own the view using one tool, developers own the model using another tool, and design integrators own the view-model using both tools.</span></span>
-   <span data-ttu-id="c9ff6-114">**Unittests**.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-114">**Unit testing**.</span></span> <span data-ttu-id="c9ff6-115">Für das Ansichtsmodell (und letztlich auch für das Modell) können Modultests durchgeführt werden, die von der Ansicht und somit von Fenstererstellung, Eingaben usw. unabhängig sind.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-115">You can unit test the view-model (and consequently the model) independent of the view, thereby not relying on creating windows, driving input, and so on.</span></span> <span data-ttu-id="c9ff6-116">Dank einer klein gehaltenen Ansicht können Sie einen großen Teil Ihrer App testen, ohne jemals ein Fenster erstellen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-116">By keeping the view small, you can test a large portion of your app without ever having to create a window.</span></span>
-   <span data-ttu-id="c9ff6-117">**Flexibilität beim Ändern der Benutzererfahrung**.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-117">**Agility to user experience changes**.</span></span> <span data-ttu-id="c9ff6-118">Die Ansicht wird in der Regel besonders häufig und meistens zuletzt geändert, wenn die Benutzeroberfläche auf der Grundlage von Endbenutzerfeedback optimiert wird.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-118">The view tends to see the most frequent changes, and the most late changes, as the user experience is tweaked based on end-user feedback.</span></span> <span data-ttu-id="c9ff6-119">Durch die getrennte Behandlung der Ansicht lassen sich diese Änderungen schneller und mit geringeren Auswirkungen auf die App implementieren.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-119">By keeping the view separate, these changes can be accommodated more quickly and with less churn to the app.</span></span>

<span data-ttu-id="c9ff6-120">Es gibt mehrere konkrete Definitionen des MVVM-Musters sowie Drittanbieter-Frameworks, die Sie bei der Implementierung unterstützen.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-120">There are multiple concrete definitions of the MVVM pattern, and 3rd party frameworks that help implement it.</span></span> <span data-ttu-id="c9ff6-121">Die strikte Einhaltung jeglicher Variante des Musters kann jedoch dazu führen, dass der Zusatzaufwand für eine App jedes vernünftige Maß übersteigt.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-121">But strict adherence to any variation of the pattern can lead to apps with a lot more overhead than can be justified.</span></span>

-   <span data-ttu-id="c9ff6-122">Die XAML-Datenbindung ({Binding}-Markuperweiterung) wurde unter anderem für die Verwendung von Modell/Ansicht-Mustern entwickelt.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-122">XAML data binding (the {Binding} markup extension) was designed in part to enable model/view patterns.</span></span> <span data-ttu-id="c9ff6-123">{Binding} ist jedoch mit einer hohen Arbeitssatz- und CPU-Auslastung verbunden.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-123">But {Binding} brings with it non-trivial working set and CPU overhead.</span></span> <span data-ttu-id="c9ff6-124">Die Erstellung einer Bindung führt zu einer Reihe von Zuordnungen, und die Aktualisierung eines Bindungsziels kann zu Reflektion und Boxing führen.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-124">Creating a {Binding} causes a series of allocations, and updating a binding target can cause reflection and boxing.</span></span> <span data-ttu-id="c9ff6-125">Diese Probleme werden mit der {x:Bind}-Markuperweiterung behandelt, die die Bindung zur Erstellungszeit kompiliert.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-125">These problems are being addressed with the {x:Bind} markup extension, which compiles the bindings at build time.</span></span> <span data-ttu-id="c9ff6-126">**Empfehlung:** Verwenden Sie {x:Bind}.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-126">**Recommendation:** use {x:Bind}.</span></span>
-   <span data-ttu-id="c9ff6-127">Bei MVVM wird „Button.Click“ gerne mithilfe eines gängigen ICommand-Hilfsbefehls wie „DelegateCommand“ oder „RelayCommand“ mit dem Ansichtsmodell verknüpft.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-127">It’s popular in MVVM to connect Button.Click to the view-model using an ICommand, such as the common DelegateCommand or RelayCommand helpers.</span></span> <span data-ttu-id="c9ff6-128">Bei diesen Befehlen handelt es sich jedoch um zusätzliche Zuordnungen (einschließlich des CanExecuteChanged-Ereignislisteners), die den Arbeitssatz vergrößern und die Start-/Navigationszeiten für die Seite erhöhen.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-128">Those commands are extra allocations, though, including the CanExecuteChanged event listener, adding to the working set, and adding to the startup/navigation time for the page.</span></span> <span data-ttu-id="c9ff6-129">**Empfehlung:** Ziehen Sie als Alternative zur Verwendung der praktischen ICommand-Schnittstelle die Verwendung von Ereignishandlern im CodeBehind in Betracht. Diese können Sie dann mit den Ansichtsereignissen verknüpfen und bei deren Auslösung einen Befehl für Ihr Ansichtsmodell aufrufen.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-129">**Recommendation:** As an alternative to using the convenient ICommand interface, consider putting event handlers in your code-behind and attaching them to the view events and call a command on your view-model when those events are raised.</span></span> <span data-ttu-id="c9ff6-130">Darüber hinaus müssen Sie zusätzlichen Code hinzufügen, um die Schaltfläche zu deaktivieren, wenn der Befehl nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-130">You'll also need to add extra code to disable the Button when the command is unavailable.</span></span>
-   <span data-ttu-id="c9ff6-131">Bei Verwendung von MVVM erstellen Entwickler gerne eine Seite mit allen möglichen UI-Konfigurationen und reduzieren dann Teile der Struktur, indem sie die Visibility-Eigenschaft an Eigenschaften des Ansichtsmodells binden.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-131">It’s popular in MVVM to create a Page with all possible configurations of the UI, then collapse parts of the tree by binding the Visibility property to properties in the VM.</span></span> <span data-ttu-id="c9ff6-132">Dadurch erhöht sich unnötig die Startzeit, und auch der Arbeitssatz kann sich unnötig vergrößern, da einige Teile der Struktur möglicherweise gar nicht angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-132">This adds unnecessarily to startup time and possibly to working set (because some parts of the tree may never become visible).</span></span> <span data-ttu-id="c9ff6-133">**Empfehlungen:** Verwenden Sie das Feature [x:Load attribute](../xaml-platform/x-load-attribute.md) oder [x:DeferLoadStrategy attribute](../xaml-platform/x-deferloadstrategy-attribute.md), um unnötige Teile der Struktur aus dem Startvorgang zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-133">**Recommendations:** Use the [x:Load attribute](../xaml-platform/x-load-attribute.md) or [x:DeferLoadStrategy attribute](../xaml-platform/x-deferloadstrategy-attribute.md) feature to defer unnecessary portions of the tree out of startup.</span></span> <span data-ttu-id="c9ff6-134">Erstellen Sie außerdem separate Benutzersteuerelemente für die verschiedenen Modi der Seite, und sorgen Sie mithilfe des CodeBehind dafür, dass nur die benötigten Steuerelemente geladen bleiben.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-134">Also, create separate user controls for the different modes of the page and use code-behind to keep only the necessary controls loaded.</span></span>

## <a name="ccx-recommendations"></a><span data-ttu-id="c9ff6-135">Empfehlungen für C++/CX</span><span class="sxs-lookup"><span data-stu-id="c9ff6-135">C++/CX recommendations</span></span>

-   <span data-ttu-id="c9ff6-136">**Verwenden Sie die jeweils aktuelle Version**.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-136">**Use the latest version**.</span></span> <span data-ttu-id="c9ff6-137">Die Leistung des C++/CX-Compilers wird kontinuierlich optimiert.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-137">There are continual performance improvements made to the C++/CX compiler.</span></span> <span data-ttu-id="c9ff6-138">Verwenden Sie für die App-Erstellung das neueste Toolset.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-138">Ensure your app is building using the latest toolset.</span></span>
-   <span data-ttu-id="c9ff6-139">**Deaktivieren Sie RTTI (/GR-)**.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-139">**Disable RTTI (/GR-)**.</span></span> <span data-ttu-id="c9ff6-140">RTTI ist im Compiler standardmäßig aktiviert. Sofern die Option also nicht durch Ihre Buildumgebung deaktiviert wird, verwenden Sie sie wahrscheinlich.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-140">RTTI is on by default in the compiler so, unless your build environment switches it off, you’re probably using it.</span></span> <span data-ttu-id="c9ff6-141">RTTI verursacht einen erheblichen Mehraufwand und sollte deaktiviert werden, sofern Ihr Code nicht davon abhängig ist.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-141">RTTI has significant overhead, and unless your code has a deep dependency on it, you should turn it off.</span></span> <span data-ttu-id="c9ff6-142">Das XAML-Framework erfordert keine Verwendung von RTTI in Ihrem Code.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-142">The XAML framework has no requirement that your code use RTTI.</span></span>
-   <span data-ttu-id="c9ff6-143">**Setzen Sie PPL-Aufgaben sparsam ein**.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-143">**Avoid heavy use of ppltasks**.</span></span> <span data-ttu-id="c9ff6-144">PPL-Aufgaben sind beim Aufrufen asynchroner WinRT-APIs äußerst praktisch, vergrößern aber erheblich den Codeumfang.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-144">Ppltasks are very convenient when calling async WinRT APIs, but they come with significant code size overhead.</span></span> <span data-ttu-id="c9ff6-145">Das C++/CX-Team arbeitet an einem Programmiersprachenfeature namens „await“, das die Leistung deutlich verbessert.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-145">The C++/CX team is working on a language feature – await – that will provide much better performance.</span></span> <span data-ttu-id="c9ff6-146">Vorerst empfiehlt es sich jedoch, PPL-Aufgaben an den langsamsten Pfaden Ihres Codes nur sehr sparsam einzusetzen.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-146">In the meantime, balance your use of ppltasks in the hot paths of your code.</span></span>
-   <span data-ttu-id="c9ff6-147">**Vermeiden Sie die Verwendung von C++/CX in der Geschäftslogik Ihrer App**.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-147">**Avoid use of C++/CX in the “business logic” of your app**.</span></span> <span data-ttu-id="c9ff6-148">C++/CX ist für den komfortablen Zugriff auf WinRT-APIs in C++-Apps konzipiert.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-148">C++/CX is designed to be a convenient way to access WinRT APIs from C++ apps.</span></span> <span data-ttu-id="c9ff6-149">Die dabei verwendeten Wrapper bedeuten einen Zusatzaufwand.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-149">It makes use of wrappers that have overhead.</span></span> <span data-ttu-id="c9ff6-150">Daher empfiehlt es sich, innerhalb der Geschäftslogik bzw. des Modells Ihrer Klasse auf den Einsatz von C++/CX zu verzichten und es nur an der Grenze zwischen Ihrem Code und WinRT zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="c9ff6-150">You should avoid C++/CX inside the business logic/model of your class, and reserve it for use at the boundaries between your code and WinRT.</span></span>