---
author: jwmsft
ms.assetid: 24351dad-2ee3-462a-ae78-2752bb3374c2
title: Hintergrundaktivität optimieren
description: Erstellen Sie UWP-Apps, die mit dem System interagieren, um Hintergrundaufgaben auf eine den Akku effizient nutzende Weise auszuführen.
ms.author: jimwalk
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 932dd3c89933eab9baefe6ff2c45359db6efbb14
ms.sourcegitcommit: f2c9a050a9137a473f28b613968d5782866142c6
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/10/2018
ms.locfileid: "6269562"
---
# <a name="optimize-background-activity"></a><span data-ttu-id="a927d-104">Optimieren von Hintergrundaktivitäten</span><span class="sxs-lookup"><span data-stu-id="a927d-104">Optimize background activity</span></span>

<span data-ttu-id="a927d-105">Universelle Windows-Apps sollten auf allen Gerätefamilien mit konsistenter Qualität ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="a927d-105">Universal Windows apps should perform consistently well across all device families.</span></span> <span data-ttu-id="a927d-106">Auf akkubetriebenen Geräten stellt der Energieverbrauch einen wichtigen Faktor in Bezug auf die allgemeine Erfahrung der Benutzer mit Ihrer App dar.</span><span class="sxs-lookup"><span data-stu-id="a927d-106">On battery-powered devices, power consumption is a critical factor in the user's overall experience with your app.</span></span> <span data-ttu-id="a927d-107">Jeder Benutzer wünscht sich eine Akkulaufzeit für den ganzen Tag. Hierfür muss jedoch jede auf dem Gerät installierte Software, einschließlich Ihrer Software, effizient ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="a927d-107">All-day battery life is a desirable feature to every user, but it requires efficiency from all of the software installed on the device, including your own.</span></span> 

<span data-ttu-id="a927d-108">Das Verhalten von Hintergrundaufgaben ist der wichtigste Faktor für den Energieverbrauch von Apps.</span><span class="sxs-lookup"><span data-stu-id="a927d-108">Background task behavior is arguably the most important factor in the total energy cost of an app.</span></span> <span data-ttu-id="a927d-109">Eine Hintergrundaufgabe ist eine Programmaktivität, die beim System zur Ausführung registriert wurde, ohne dass die App geöffnet ist.</span><span class="sxs-lookup"><span data-stu-id="a927d-109">A background task is any program activity that has been registered with the system to run without the app being open.</span></span> <span data-ttu-id="a927d-110">Weitere Informationen finden Sie unter [Erstellen und Registrieren einer Hintergrundaufgabe außerhalb von Prozessen](https://msdn.microsoft.com/windows/uwp/launch-resume/create-and-register-a-background-task).</span><span class="sxs-lookup"><span data-stu-id="a927d-110">See [Create and register an out-of-process background task](https://msdn.microsoft.com/windows/uwp/launch-resume/create-and-register-a-background-task) for more information.</span></span>

## <a name="background-activity-permissions"></a><span data-ttu-id="a927d-111">Berechtigungen für Hintergrundaktivitäten</span><span class="sxs-lookup"><span data-stu-id="a927d-111">Background activity permissions</span></span>

<span data-ttu-id="a927d-112">Auf Desktop- und Mobilgeräten, die Windows10 Version 1607 oder höher ausführen, können Benutzer ihre „Akkunutzung nach App“ im Abschnitt „Akku“ der Einstellungs-App anzeigen.</span><span class="sxs-lookup"><span data-stu-id="a927d-112">On desktop and mobile devices running Windows 10, version 1607 or later, users can view their "Battery usage by app" in the Battery section of the Settings app.</span></span> <span data-ttu-id="a927d-113">Dort wird eine Liste der Apps mit dem Prozentsatz der Akkulaufzeit angezeigt, den die einzelnen Apps verbraucht haben (als Anteil der seit dem letzten Aufladen verbrauchten Akkulaufzeit).</span><span class="sxs-lookup"><span data-stu-id="a927d-113">Here they will see a list of apps and the percentage of battery life that each app has consumed (out of the amount of battery life that has been used since the last charge).</span></span> <span data-ttu-id="a927d-114">Benutzer können UWP-Apps in dieser Liste auswählen, um Optionen für Hintergrundaktivitäten anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="a927d-114">For UWP apps on this list, users can select the app to open up controls related to background activity.</span></span>

![Akkunutzung pro App](images/battery-usage-by-app.png)

### <a name="background-permissions-on-mobile"></a><span data-ttu-id="a927d-116">Hintergrund-Berechtigungen für Mobilgeräte</span><span class="sxs-lookup"><span data-stu-id="a927d-116">Background permissions on mobile</span></span>

<span data-ttu-id="a927d-117">Auf Mobilgeräten sehen Benutzer eine Liste von Optionsfeldern, welche die Berechtigungen für Hintergrundaufgaben der App angeben.</span><span class="sxs-lookup"><span data-stu-id="a927d-117">On mobile devices, users will see a list of radio buttons that specify the background task permission setting for that app.</span></span> <span data-ttu-id="a927d-118">Hintergrundaktivitäten können festgelegt werden auf „Immer zulassen“, „Niemals zulassen“, oder „Von Windows verwaltet“, sodass die Hintergrundaktivität der App anhand verschiedener Faktoren vom System gesteuert wird.</span><span class="sxs-lookup"><span data-stu-id="a927d-118">Background activity can be set to "Always allowed," "Never allowed," or "Managed by Windows," which means the app's background activity is regulated by the system according to a number of factors.</span></span> 

![Optionsfelder für Hintergrund-Berechtigungen](images/background-task-permissions.png)

### <a name="background-permissions-on-desktop"></a><span data-ttu-id="a927d-120">Hintergrund-Berechtigungen für Desktop</span><span class="sxs-lookup"><span data-stu-id="a927d-120">Background permissions on desktop</span></span>

<span data-ttu-id="a927d-121">Auf Desktopgeräten wird die Option „Von Windows verwaltet” als Ein/Aus-Schalter angezeigt (standardmäßig **Ein**).</span><span class="sxs-lookup"><span data-stu-id="a927d-121">On desktop devices, the "Managed by Windows" setting is presented as a toggle switch, set to **On** by default.</span></span> <span data-ttu-id="a927d-122">Wenn der Benutzer die Option auf **Aus** festlegt, wird ein Kontrollkästchen angezeigt, mit dem die Berechtigungen für Hintergrund-Aktivitäten manuell definiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="a927d-122">If the user switches  to **Off**, they are presented with a checkbox with which they can manually define the background activity permissions.</span></span> <span data-ttu-id="a927d-123">Wenn das Kontrollkästchen aktiviert ist, kann die App jederzeit Hintergrundaufgaben ausführen.</span><span class="sxs-lookup"><span data-stu-id="a927d-123">When the box is checked, the app will be allowed to run background tasks at all times.</span></span> <span data-ttu-id="a927d-124">Wenn das Kontrollkästchen deaktiviert ist, werden die Hintergrundaktivitäten deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="a927d-124">When the box is unchecked, the background activity will be disabled.</span></span>

![Hintergrund-Berechtigungen einschalten](images/background-task-permissions-on.png)

![Hintergrund-Berechtigungen ausschalten](images/background-task-permissions-off.png)

<span data-ttu-id="a927d-127">In Ihrer App können Sie den Enumerationswert [**BackgroundAccessStatus**](https://docs.microsoft.com/en-us/uwp/api/windows.applicationmodel.background.backgroundaccessstatus) verwenden, der durch Aufrufen der [**BackgroundExecutionManager.RequestAccessAsync()**](https://msdn.microsoft.com/library/windows/apps/windows.applicationmodel.background.backgroundexecutionmanager.requestaccessasync.aspx)-Methode zurückgegeben wird, um die aktuell festgelegten Hintergrund-Berechtigungen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="a927d-127">In your app, you can use the [**BackgroundAccessStatus**](https://docs.microsoft.com/en-us/uwp/api/windows.applicationmodel.background.backgroundaccessstatus) enum value returned by a call to the [**BackgroundExecutionManager.RequestAccessAsync()**](https://msdn.microsoft.com/library/windows/apps/windows.applicationmodel.background.backgroundexecutionmanager.requestaccessasync.aspx) method to determine its current background activity permission setting.</span></span>

<span data-ttu-id="a927d-128">Wenn Ihre App keine verantwortliche Verwaltung von Hintergrundaufgaben implementiert, lehnen Benutzer möglicherweise Genehmigungen für Hintergrundaktivitäten für Ihre App insgesamt ab. Dies ist für keine der beiden Parteien vorteilhaft.</span><span class="sxs-lookup"><span data-stu-id="a927d-128">All this is to say that if your app doesn't implement responsible background activity management, the user may deny background permissions to your app altogether, which is not desirable for either party.</span></span> <span data-ttu-id="a927d-129">Wenn Ihre App keine Berechtigung hat, um Hintergrundaktivitäten auszuführen, die für eine Aktion des Benutzers erforderlich sind, kann der Benutzer benachrichtigt und auf die Einstellungs-App geführt werden.</span><span class="sxs-lookup"><span data-stu-id="a927d-129">If your app has been denied permission to run in the background but requires background activity to complete an action for the user, you can notify the user and point them to the Settings app.</span></span> <span data-ttu-id="a927d-130">Dies kann erfolgen durch das [Starten der Einstellungs-App](https://docs.microsoft.com/en-us/windows/uwp/launch-resume/launch-settings-app) auf der Informationsseite für die Hintergrundaktivitäten oder den Akkuverbrauch der App.</span><span class="sxs-lookup"><span data-stu-id="a927d-130">This can be accomplished by [Launching the Settings App](https://docs.microsoft.com/en-us/windows/uwp/launch-resume/launch-settings-app) to the Background Apps or Battery Usage Details page.</span></span>

## <a name="work-with-the-battery-saver-feature"></a><span data-ttu-id="a927d-131">Arbeiten mit dem Stromsparmodus-Feature</span><span class="sxs-lookup"><span data-stu-id="a927d-131">Work with the Battery Saver feature</span></span>
<span data-ttu-id="a927d-132">Der Stromsparmodus ist ein Feature auf Systemebene, das Benutzer in den Einstellungen konfigurieren können.</span><span class="sxs-lookup"><span data-stu-id="a927d-132">Battery Saver is a system-level feature that users can configure in Settings.</span></span> <span data-ttu-id="a927d-133">Es deaktiviert alle Hintergrundaktivitäten aller Apps, wenn der Akkustand einen benutzerdefinierten Schwellenwert unterschreitet. *Ausgenommen* sind Hintergrundaktivitäten von Apps, für die „Immer zugelassen“ festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="a927d-133">It cuts off all background activity of all apps when the battery level drops below a user-defined threshold, *except* for the background activity of apps that have been set to "Always allowed."</span></span>

<span data-ttu-id="a927d-134">Innerhalb Ihrer App zeigen Sie den Status des Stromsparmodus durch einen Verweis auf die [**PowerManager.EnergySaverStatus**](https://docs.microsoft.com/en-us/uwp/api/windows.system.power.energysaverstatus)-Eigenschaft an.</span><span class="sxs-lookup"><span data-stu-id="a927d-134">Check the status of Battery Saver mode from within your app by referencing the [**PowerManager.EnergySaverStatus**](https://docs.microsoft.com/en-us/uwp/api/windows.system.power.energysaverstatus) property.</span></span> <span data-ttu-id="a927d-135">Dieser Enumerationswert lautet entweder **EnergySaverStatus.Disabled**, **EnergySaverStatus.Off** oder **EnergySaverStatus.On**.</span><span class="sxs-lookup"><span data-stu-id="a927d-135">It is an enum value: either **EnergySaverStatus.Disabled**, **EnergySaverStatus.Off** or **EnergySaverStatus.On**.</span></span> <span data-ttu-id="a927d-136">Wenn Ihre App Hintergrundaktivitäten erfordert, aber nicht auf „Immer zulassen” festgelegt ist, sollte die Einstellung **EnergySaverStatus.On** den Benutzer benachrichtigen, dass er den Stromsparmodus deaktivieren muss, damit die betreffende Hintergrundaufgabe ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="a927d-136">If your app requires background activity and is not set to "Always allowed" then it should handle **EnergySaverStatus.On** by notifying the user that the given background task(s) will not run until Battery Saver is off.</span></span> <span data-ttu-id="a927d-137">Auch wenn die Verwaltung von Hintergrundaufgaben den primären Zweck des Stromsparmodus-Features darstellen, kann Ihre App zusätzliche Anpassungen vornehmen, um bei aktiviertem Stromsparmodus zusätzlich Energie zu sparen.</span><span class="sxs-lookup"><span data-stu-id="a927d-137">While background activity management is the primary purpose of the Battery Saver feature, your app can make additional adjustments to further conserve energy when Battery Saver is on.</span></span>  <span data-ttu-id="a927d-138">Wenn der Stromsparmodus aktiviert ist, könnte Ihre App die Verwendung von Animationen reduzieren, das Abrufen von Standorten beenden oder Synchronisierungen und Sicherungen verzögern.</span><span class="sxs-lookup"><span data-stu-id="a927d-138">In the case where Battery Saver is on, your app could reduce its use of animations, stop location polling, or delay syncs and backups.</span></span> 

## <a name="further-optimize-background-tasks"></a><span data-ttu-id="a927d-139">Zusätzliches Optimieren von Hintergrundaufgaben</span><span class="sxs-lookup"><span data-stu-id="a927d-139">Further optimize background tasks</span></span>
<span data-ttu-id="a927d-140">Im Folgenden finden Sie weitere Möglichkeiten für die Registrierung von Hintergrundaufgaben, die mehr Energie sparen sollen.</span><span class="sxs-lookup"><span data-stu-id="a927d-140">The following are additional steps you can take when registering your background tasks to make them more battery-aware.</span></span>

### <a name="use-a-maintenance-trigger"></a><span data-ttu-id="a927d-141">Verwenden eines Wartungsauslösers</span><span class="sxs-lookup"><span data-stu-id="a927d-141">Use a maintenance trigger</span></span> 
<span data-ttu-id="a927d-142">Sie können ein [**MaintenanceTrigger**](https://msdn.microsoft.com/library/windows/apps/windows.applicationmodel.background.maintenancetrigger.aspx)-Objekt anstelle eines [**SystemTrigger**](https://msdn.microsoft.com/library/windows/apps/windows.applicationmodel.background.systemtrigger.aspx)-Objekts verwenden, um festzulegen, wann eine Hintergrundaufgabe gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="a927d-142">A [**MaintenanceTrigger**](https://msdn.microsoft.com/library/windows/apps/windows.applicationmodel.background.maintenancetrigger.aspx) object can be used instead of a [**SystemTrigger**](https://msdn.microsoft.com/library/windows/apps/windows.applicationmodel.background.systemtrigger.aspx) object to determine when a background task starts.</span></span> <span data-ttu-id="a927d-143">Aufgaben, die Wartungsauslöser verwenden, werden nur ausgeführt, wenn das Gerät an die Stromversorgung angeschlossen ist, und dürfen länger ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="a927d-143">Tasks that use maintenance triggers will only run when the device is connected to AC power, and they are allowed to run for longer.</span></span> <span data-ttu-id="a927d-144">Weitere Anweisungen finden Sie unter [Verwenden von Wartungsauslösern](https://msdn.microsoft.com/windows/uwp/launch-resume/use-a-maintenance-trigger).</span><span class="sxs-lookup"><span data-stu-id="a927d-144">See [Use a maintenance trigger](https://msdn.microsoft.com/windows/uwp/launch-resume/use-a-maintenance-trigger) for instructions.</span></span>

### <a name="use-the-backgroundworkcostnothigh-system-condition-type"></a><span data-ttu-id="a927d-145">Verwenden Sie den Systembedingungstyp **BackgroundWorkCostNotHigh**.</span><span class="sxs-lookup"><span data-stu-id="a927d-145">Use the **BackgroundWorkCostNotHigh** system condition type</span></span>
<span data-ttu-id="a927d-146">Die Systembedingungen müssen erfüllt sein, um Hintergrundaufgaben auszuführen. (Weitere Informationen finden Sie unter [Festlegen von Bedingungen zum Ausführen einer Hintergrundaufgabe](https://msdn.microsoft.com/windows/uwp/launch-resume/set-conditions-for-running-a-background-task)).</span><span class="sxs-lookup"><span data-stu-id="a927d-146">System conditions must be met in order for background tasks to run (see [Set conditions for running a background task](https://msdn.microsoft.com/windows/uwp/launch-resume/set-conditions-for-running-a-background-task) for more).</span></span> <span data-ttu-id="a927d-147">Die Kosten für Hintergrundaufgaben stellen eine Messung dar, die die *relativen* Auswirkungen auf den Energieverbrauch angibt, wenn die Hintergrundaufgabe ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a927d-147">The background work cost is a measurement that denotes the *relative* energy impact of running the background task.</span></span> <span data-ttu-id="a927d-148">Eine Aufgabe, die ausgeführt wird, während das Gerät an die Stromversorgung angeschlossen ist, würde als **niedrig** markiert werden (wenig/keine Auswirkung auf den Akku).</span><span class="sxs-lookup"><span data-stu-id="a927d-148">A task running when the device is plugged into AC power would be marked as **low** (little/no impact on battery).</span></span> <span data-ttu-id="a927d-149">Eine Aufgabe, die ausgeführt wird, wenn das Gerät mit Akkustrom betrieben wird und der Bildschirm ausgeschaltet ist, wird als **hoch** markiert, da zu diesem Zeitpunkt vermutlich nur wenige Programmaktivitäten auf dem Gerät ausgeführt werden. Daher verursacht eine Hintergrundaufgabe höhere relative Kosten.</span><span class="sxs-lookup"><span data-stu-id="a927d-149">A task running when the device is on battery power with the screen off is marked as **high** because there is presumably little program activity running on the device at the time, so the background task would have a greater relative cost.</span></span> <span data-ttu-id="a927d-150">Eine Aufgabe, die ausgeführt wird, während das Gerät mit Akkustrom betrieben wird und der Bildschirm *eingeschaltet* ist, wird als **mittel** markiert, da vermutlich einige Programmaktivitäten bereits ausgeführt werden und die Hintergrundaufgabe etwas mehr zum Energieverbrauch beiträgt.</span><span class="sxs-lookup"><span data-stu-id="a927d-150">A task running when the device is on battery power with the screen *on* is marked as **medium**, because there is presumably already some program activity running, and the background task would add a bit more to the energy cost.</span></span> <span data-ttu-id="a927d-151">Die **BackgroundWorkCostNotHigh**-Systembedingung verzögert einfach die Fähigkeit Ihrer Aufgabe, ausgeführt zu werden, bis der Bildschirm eingeschaltet ist oder das Gerät an die Stromversorgung angeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="a927d-151">The **BackgroundWorkCostNotHigh** system condition simply delays your task's ability to run until either the screen is on or the device is connected to AC power.</span></span>

## <a name="test-battery-efficiency"></a><span data-ttu-id="a927d-152">Testen der Akkueffizienz</span><span class="sxs-lookup"><span data-stu-id="a927d-152">Test battery efficiency</span></span>

<span data-ttu-id="a927d-153">Testen Sie Ihre App immer auf realen Geräten, wenn Sie Szenarien mit hohem Energieverbrauch untersuchen.</span><span class="sxs-lookup"><span data-stu-id="a927d-153">Be sure to test your app on real devices for any high-power-consumption scenarios.</span></span> <span data-ttu-id="a927d-154">Es ist sinnvoll, Ihre App auf vielen unterschiedlichen Geräten bei aktiviertem und deaktiviertem Stromsparmodus und in Umgebungen mit unterschiedlichen Netzwerksignalstärken zu testen.</span><span class="sxs-lookup"><span data-stu-id="a927d-154">It's a good idea to test your app on many different devices, with Battery Saver on and off, and in environments of varying network strength.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a927d-155">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="a927d-155">Related topics</span></span>

* [<span data-ttu-id="a927d-156">Erstellen und Registrieren einer Hintergrundaufgabe außerhalb von Prozessen</span><span class="sxs-lookup"><span data-stu-id="a927d-156">Create and register an out-of-process background task</span></span>](https://msdn.microsoft.com/windows/uwp/launch-resume/create-and-register-a-background-task)  
* [<span data-ttu-id="a927d-157">Planen der Leistung</span><span class="sxs-lookup"><span data-stu-id="a927d-157">Planning for performance</span></span>](https://msdn.microsoft.com/windows/uwp/debug-test-perf/planning-and-measuring-performance)  

