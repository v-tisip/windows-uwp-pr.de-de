---
author: jwmsft
ms.assetid: 3A477380-EAC5-44E7-8E0F-18346CC0C92F
title: Virtualisierung von ListView- und GridView-Daten
description: Verbessern Sie die Leistung und Startzeit von ListView und GridView durch Datenvirtualisierung.
ms.author: jimwalk
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, UWP
ms.openlocfilehash: eab90ebf2bcb1912292af6503f833e3bfa334d8b
ms.sourcegitcommit: ec18e10f750f3f59fbca2f6a41bf1892072c3692
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 08/14/2017
---
# <a name="listview-and-gridview-data-virtualization"></a><span data-ttu-id="017b0-104">ListView- und GridView-Datenvirtualisierung</span><span class="sxs-lookup"><span data-stu-id="017b0-104">ListView and GridView data virtualization</span></span>

<span data-ttu-id="017b0-105">\[ Aktualisiert für UWP-Apps unter Windows10.</span><span class="sxs-lookup"><span data-stu-id="017b0-105">\[ Updated for UWP apps on Windows 10.</span></span> <span data-ttu-id="017b0-106">Artikel zu Windows8.x finden Sie im [Archiv](http://go.microsoft.com/fwlink/p/?linkid=619132) \]</span><span class="sxs-lookup"><span data-stu-id="017b0-106">For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \]</span></span>

<span data-ttu-id="017b0-107">**Hinweis**  Weitere Informationen finden Sie unter der „//build/“-Sitzung [Erhebliches Erhöhen der Leistung bei der Interaktion von Benutzern mit großen Mengen von Daten in GridView und ListView](https://channel9.msdn.com/Events/Build/2013/3-158).</span><span class="sxs-lookup"><span data-stu-id="017b0-107">**Note**  For more details, see the //build/ session [Dramatically Increase Performance when Users Interact with Large Amounts of Data in GridView and ListView](https://channel9.msdn.com/Events/Build/2013/3-158).</span></span>

<span data-ttu-id="017b0-108">Verbessern Sie die Leistung und Startzeit von [**ListView**](https://msdn.microsoft.com/library/windows/apps/BR242878) und [**GridView**](https://msdn.microsoft.com/library/windows/apps/BR242705) durch Datenvirtualisierung.</span><span class="sxs-lookup"><span data-stu-id="017b0-108">Improve [**ListView**](https://msdn.microsoft.com/library/windows/apps/BR242878) and [**GridView**](https://msdn.microsoft.com/library/windows/apps/BR242705) performance and startup time through data virtualization.</span></span> <span data-ttu-id="017b0-109">Informationen zu UI-Virtualisierung, Elementreduzierung und die progressive Aktualisierung von Elementen finden Sie unter [Optimieren der ListView- und GridView-Benutzeroberfläche](optimize-gridview-and-listview.md).</span><span class="sxs-lookup"><span data-stu-id="017b0-109">For UI virtualization, element reduction, and progressive updating of items, see [ListView and GridView UI optimization](optimize-gridview-and-listview.md).</span></span>

<span data-ttu-id="017b0-110">Eine Methode zur Datenvirtualisierung ist für einen Datensatz erforderlich, der so groß ist, dass er zu einem bestimmten Zeitpunkt nicht komplett im Arbeitsspeicher gespeichert werden kann oder soll.</span><span class="sxs-lookup"><span data-stu-id="017b0-110">A method of data virtualization is needed for a data set that is so large that it cannot or should not all be stored in memory at one time.</span></span> <span data-ttu-id="017b0-111">Sie laden einen ersten Teil (vom lokalen Datenträger, aus dem Netzwerk oder der Cloud) in den Arbeitsspeicher und wenden die UI-Virtualisierung auf dieses Teildataset an.</span><span class="sxs-lookup"><span data-stu-id="017b0-111">You load an initial portion into memory (from local disk, network, or cloud) and apply UI virtualization to this partial data set.</span></span> <span data-ttu-id="017b0-112">Sie können die Daten später inkrementell oder bei Bedarf von beliebigen Punkten im Master-Dataset (wahlfreier Zugriff) laden.</span><span class="sxs-lookup"><span data-stu-id="017b0-112">You can later load data incrementally, or from arbitrary points in the master data set (random access), on demand.</span></span> <span data-ttu-id="017b0-113">Ob die Datenvirtualisierung für Sie geeignet ist, hängt von vielen Faktoren ab.</span><span class="sxs-lookup"><span data-stu-id="017b0-113">Whether data virtualization is appropriate for you depends on many factors.</span></span>

-   <span data-ttu-id="017b0-114">Die Größe Ihres Datasets</span><span class="sxs-lookup"><span data-stu-id="017b0-114">The size of your data set</span></span>
-   <span data-ttu-id="017b0-115">Die Größe der einzelnen Elemente</span><span class="sxs-lookup"><span data-stu-id="017b0-115">The size of each item</span></span>
-   <span data-ttu-id="017b0-116">Die Quelle des Datasets (lokaler Datenträger, Netzwerk oder Cloud)</span><span class="sxs-lookup"><span data-stu-id="017b0-116">The source of the data set (local disk, network, or cloud)</span></span>
-   <span data-ttu-id="017b0-117">Die gesamte Arbeitsspeichernutzung Ihrer App</span><span class="sxs-lookup"><span data-stu-id="017b0-117">The overall memory consumption of your app</span></span>

<span data-ttu-id="017b0-118">**Hinweis**  Beachten Sie, dass für „ListView“ und „GridView“ standardmäßig ein Feature aktiviert ist, das temporäre Platzhalter für visuelle Elemente anzeigt, wenn der Benutzer den Bildausschnitt schnell verschiebt oder einen schnellen Bildlauf durchführt.</span><span class="sxs-lookup"><span data-stu-id="017b0-118">**Note**  Be aware that a feature is enabled by default for ListView and GridView that displays temporary placeholder visuals while the user is panning/scrolling quickly.</span></span> <span data-ttu-id="017b0-119">Beim Laden von Daten werden diese Platzhalter für visuelle Elemente durch die Elementvorlage ersetzt.</span><span class="sxs-lookup"><span data-stu-id="017b0-119">As data is loaded, these placeholder visuals are replaced with your item template.</span></span> <span data-ttu-id="017b0-120">Sie können das Feature deaktivieren, indem Sie [**ListViewBase.ShowsScrollingPlaceholders**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.listviewbase.showsscrollingplaceholders) auf „false“ festlegen. In diesem Fall wird jedoch empfohlen, das „x: Phase“-Attribut zu verwenden, um die Elemente in der Elementvorlage progressiv zu rendern.</span><span class="sxs-lookup"><span data-stu-id="017b0-120">You can turn the feature off by setting [**ListViewBase.ShowsScrollingPlaceholders**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.listviewbase.showsscrollingplaceholders) to false, but if you do so then we recommend that you use the x:Phase attribute to progressively render the elements in your item template.</span></span> <span data-ttu-id="017b0-121">Siehe [Progressives Aktualisieren von ListView- und GridView-Elementen](optimize-gridview-and-listview.md#update-items-incrementally).</span><span class="sxs-lookup"><span data-stu-id="017b0-121">See [Update ListView and GridView items progressively](optimize-gridview-and-listview.md#update-items-incrementally).</span></span>

<span data-ttu-id="017b0-122">Hier erhalten Sie weitere Informationen über die Verfahren der inkrementellen Datenvirtualisierung und der Datenvirtualisierung mit wahlfreiem Zugriff.</span><span class="sxs-lookup"><span data-stu-id="017b0-122">Here are more details about the incremental and random-access data virtualization techniques.</span></span>

## <a name="incremental-data-virtualization"></a><span data-ttu-id="017b0-123">Inkrementelle Datenvirtualisierung</span><span class="sxs-lookup"><span data-stu-id="017b0-123">Incremental data virtualization</span></span>

<span data-ttu-id="017b0-124">Bei der inkrementellen Datenvirtualisierung werden Daten sequenziell geladen.</span><span class="sxs-lookup"><span data-stu-id="017b0-124">Incremental data virtualization loads data sequentially.</span></span> <span data-ttu-id="017b0-125">Ein [**ListView**](https://msdn.microsoft.com/library/windows/apps/BR242878), das die inkrementelle Datenvirtualisierung verwendet, kann zum Anzeigen einer Sammlung von einer Million Elementen verwendet werden, wobei aber anfänglich nur 50 Elemente geladen werden.</span><span class="sxs-lookup"><span data-stu-id="017b0-125">A [**ListView**](https://msdn.microsoft.com/library/windows/apps/BR242878) that uses incremental data virtualization may be used to view a collection of a million items, but only 50 items are loaded initially.</span></span> <span data-ttu-id="017b0-126">Beim Schwenken/Bildlauf werden die nächsten 50 Elemente geladen.</span><span class="sxs-lookup"><span data-stu-id="017b0-126">As the user pans/scrolls, the next 50 are loaded.</span></span> <span data-ttu-id="017b0-127">Der Ziehpunkt der Bildlaufleiste wird beim Laden der Elemente kleiner.</span><span class="sxs-lookup"><span data-stu-id="017b0-127">As items are loaded, the scroll bar's thumb decreases in size.</span></span> <span data-ttu-id="017b0-128">Für diese Art der Datenvirtualisierung schreiben Sie eine Datenquellenklasse, die diese Schnittstellen implementiert.</span><span class="sxs-lookup"><span data-stu-id="017b0-128">For this type of data virtualization you write a data source class that implements these interfaces.</span></span>

-   [**<span data-ttu-id="017b0-129">IList</span><span class="sxs-lookup"><span data-stu-id="017b0-129">IList</span></span>**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.ilist.aspx)
-   <span data-ttu-id="017b0-130">[**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) (C#/VB) oder [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) (C++/CX)</span><span class="sxs-lookup"><span data-stu-id="017b0-130">[**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) (C#/VB) or [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) (C++/CX)</span></span>
-   [**<span data-ttu-id="017b0-131">ISupportIncrementalLoading</span><span class="sxs-lookup"><span data-stu-id="017b0-131">ISupportIncrementalLoading</span></span>**](https://msdn.microsoft.com/library/windows/apps/Hh701916)

<span data-ttu-id="017b0-132">Eine derartige Datenquelle ist eine speicherinterne Liste, die ständig erweitert werden kann.</span><span class="sxs-lookup"><span data-stu-id="017b0-132">A data source like this is an in-memory list that can be continually extended.</span></span> <span data-ttu-id="017b0-133">Das Elementsteuerelement fordert die Elemente mithilfe der standardmäßigen „Indexer“- und „Count“-Eigenschaften von [**IList**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.ilist.aspx) an.</span><span class="sxs-lookup"><span data-stu-id="017b0-133">The items control will ask for items using the standard [**IList**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.ilist.aspx) indexer and count properties.</span></span> <span data-ttu-id="017b0-134">Die Anzahl sollte die Anzahl der lokalen Elemente darstellen, nicht die tatsächliche Größe des Datasets.</span><span class="sxs-lookup"><span data-stu-id="017b0-134">The count should represent the number of items locally, not the true size of the dataset.</span></span>

<span data-ttu-id="017b0-135">Wenn sich das Elementsteuerelement dem Ende der vorhandenen Daten nähert, ruft es [**ISupportIncrementalLoading.HasMoreItems**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.data.isupportincrementalloading.hasmoreitems) auf.</span><span class="sxs-lookup"><span data-stu-id="017b0-135">When the items control gets close to the end of the existing data, it will call [**ISupportIncrementalLoading.HasMoreItems**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.data.isupportincrementalloading.hasmoreitems).</span></span> <span data-ttu-id="017b0-136">Wenn **true** zurückgegeben wird, ruft es [**ISupportIncrementalLoading.LoadMoreItemsAsync**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.data.isupportincrementalloading.loadmoreitemsasync) auf und übergibt eine empfohlene Anzahl von zu ladenden Elementen.</span><span class="sxs-lookup"><span data-stu-id="017b0-136">If you return **true**, then it will call [**ISupportIncrementalLoading.LoadMoreItemsAsync**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.data.isupportincrementalloading.loadmoreitemsasync) passing an advised number of items to load.</span></span> <span data-ttu-id="017b0-137">Je nachdem, von wo die Daten (lokaler Datenträger, Netzwerk oder Cloud) geladen werden, können Sie eine andere als die empfohlene Anzahl von Elementen laden.</span><span class="sxs-lookup"><span data-stu-id="017b0-137">Depending on where you're loading data from (local disk, network, or cloud), you may choose to load a different number of items than that advised.</span></span> <span data-ttu-id="017b0-138">Wenn Ihr Dienst z.B. Stapel von 50 Elementen unterstützt, aber das Elementsteuerelement nur 10 anfordert, dann können Sie 50 Elemente laden.</span><span class="sxs-lookup"><span data-stu-id="017b0-138">For example, if your service supports batches of 50 items but the items control only asks for 10 then you can load 50.</span></span> <span data-ttu-id="017b0-139">Laden Sie die Daten vom Back-End, fügen Sie sie zur Liste hinzu, und lösen Sie über [**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) oder [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) eine Änderungsbenachrichtigung aus, damit das Elementsteuerelement über die neuen Elemente informiert wird.</span><span class="sxs-lookup"><span data-stu-id="017b0-139">Load the data from your back end, add it to your list, and raise a change notification via [**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) or [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) so that the items control knows about the new items.</span></span> <span data-ttu-id="017b0-140">Geben Sie außerdem die Anzahl der tatsächlich geladenen Elemente zurück.</span><span class="sxs-lookup"><span data-stu-id="017b0-140">Also return a count of the items you actually loaded.</span></span> <span data-ttu-id="017b0-141">Wenn Sie weniger Artikel als empfohlen laden oder das Elementsteuerelement in der Zwischenzeit noch weiter verschoben/durchlaufen wurde, dann wird die Datenquelle erneut aufgerufen, um weitere Elemente zu laden, und der Zyklus wird anschließend fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="017b0-141">If you load fewer items than advised, or the items control has been panned/scrolled even further in the interim, then your data source will be called again for more items and the cycle will continue.</span></span> <span data-ttu-id="017b0-142">Weitere Informationen finden Sie durch Herunterladen des [XAML-Datenbindungsbeispiel](https://code.msdn.microsoft.com/windowsapps/Data-Binding-7b1d67b5) für Windows 8.1 und der Wiederverwendung des Quellcodes in Ihrer App für Windows 10.</span><span class="sxs-lookup"><span data-stu-id="017b0-142">You can learn more by downloading the [XAML data binding sample](https://code.msdn.microsoft.com/windowsapps/Data-Binding-7b1d67b5) for Windows 8.1 and re-using its source code in your Windows 10 app.</span></span>

## <a name="random-access-data-virtualization"></a><span data-ttu-id="017b0-143">Datenvirtualisierung mit wahlfreiem Zugriff</span><span class="sxs-lookup"><span data-stu-id="017b0-143">Random access data virtualization</span></span>

<span data-ttu-id="017b0-144">Die Datenvirtualisierung mit wahlfreiem Zugriff ermöglicht das Laden von Daten, die sich an einem beliebigen Punkt des Datasets befinden.</span><span class="sxs-lookup"><span data-stu-id="017b0-144">Random access data virtualization allows loading from an arbitrary point in the data set.</span></span> <span data-ttu-id="017b0-145">Ein [**ListView**](https://msdn.microsoft.com/library/windows/apps/BR242878), das die Datenvirtualisierung mit wahlfreiem Zugriff verwendet und zum Anzeigen einer Sammlung von einer Million Elementen verwendet wird, kann die Elemente 100.000 bis 100.050 laden.</span><span class="sxs-lookup"><span data-stu-id="017b0-145">A [**ListView**](https://msdn.microsoft.com/library/windows/apps/BR242878) that uses random access data virtualization, used to view a collection of a million items, can load the items 100,000 – 100,050.</span></span> <span data-ttu-id="017b0-146">Wechselt der Benutzer anschließend zum Listenanfang, lädt das Steuerelement die Elemente von 1 bis 50.</span><span class="sxs-lookup"><span data-stu-id="017b0-146">If the user then moves to the beginning of the list, the control loads items 1 – 50.</span></span> <span data-ttu-id="017b0-147">Der Ziehpunkt der Bildlaufleiste gibt jederzeit an, dass **ListView** eine Million Elemente enthält.</span><span class="sxs-lookup"><span data-stu-id="017b0-147">At all times, the scroll bar's thumb indicates that the **ListView** contains a million items.</span></span> <span data-ttu-id="017b0-148">Die Position des Ziehpunkts der Bildlaufleiste gibt Aufschluss über die relative Position der sichtbaren Elemente innerhalb des gesamten Datasets der Sammlung.</span><span class="sxs-lookup"><span data-stu-id="017b0-148">The position of the scroll bar's thumb is relative to where the visible items are located in the collection's entire data set.</span></span> <span data-ttu-id="017b0-149">Diese Art der Datenvirtualisierung kann den Speicherbedarf und die Ladezeiten für die Sammlung erheblich reduzieren.</span><span class="sxs-lookup"><span data-stu-id="017b0-149">This type of data virtualization can significantly reduce the memory requirements and load times for the collection.</span></span> <span data-ttu-id="017b0-150">Zur Aktivierung müssen Sie eine Datenquellenklasse erstellen, die Daten bei Bedarf abruft, einen lokalen Cache verwaltet und diese Schnittstellen implementiert.</span><span class="sxs-lookup"><span data-stu-id="017b0-150">To enable it you need to write a data source class that fetches data on demand and manages a local cache and implements these interfaces.</span></span>

-   [**<span data-ttu-id="017b0-151">IList</span><span class="sxs-lookup"><span data-stu-id="017b0-151">IList</span></span>**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.ilist.aspx)
-   <span data-ttu-id="017b0-152">[**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) (C#/VB) oder [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) (C++/CX)</span><span class="sxs-lookup"><span data-stu-id="017b0-152">[**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) (C#/VB) or [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) (C++/CX)</span></span>
-   <span data-ttu-id="017b0-153">(Optional) [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070)</span><span class="sxs-lookup"><span data-stu-id="017b0-153">(Optionally) [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070)</span></span>
-   <span data-ttu-id="017b0-154">(Optional) [**ISelectionInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877074)</span><span class="sxs-lookup"><span data-stu-id="017b0-154">(Optionally) [**ISelectionInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877074)</span></span>

<span data-ttu-id="017b0-155">[**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070) stellt Informationen dazu bereit, welche Elemente das Steuerelement aktiv verwendet.</span><span class="sxs-lookup"><span data-stu-id="017b0-155">[**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070) provides information on which items the control is actively using.</span></span> <span data-ttu-id="017b0-156">Das Steuerelement ruft diese Methode bei jeder Änderung der Ansicht auf und bezieht diese beiden Sätze von Bereichen ein.</span><span class="sxs-lookup"><span data-stu-id="017b0-156">The items control will call this method whenever its view is changing, and will include these two sets of ranges.</span></span>

-   <span data-ttu-id="017b0-157">Der Satz von Elementen, die sich im Viewport befinden.</span><span class="sxs-lookup"><span data-stu-id="017b0-157">The set of items that are in the viewport.</span></span>
-   <span data-ttu-id="017b0-158">Eine Reihe von nicht virtualisierten Elemente, die das Steuerelement verwendet und möglicherweise nicht im Viewport enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="017b0-158">A set of non-virtualized items that the control is using that may not be in the viewport.</span></span>
    -   <span data-ttu-id="017b0-159">Ein um den Viewport angeordneter Puffer von Elementen, der von den Elementen gesteuert wird, damit die Verschiebung per Toucheingabe reibungslos verläuft.</span><span class="sxs-lookup"><span data-stu-id="017b0-159">A buffer of items around the viewport that the items control keeps so that touch panning is smooth.</span></span>
    -   <span data-ttu-id="017b0-160">Das Element, das den Fokus hat.</span><span class="sxs-lookup"><span data-stu-id="017b0-160">The focused item.</span></span>
    -   <span data-ttu-id="017b0-161">Das erste Element.</span><span class="sxs-lookup"><span data-stu-id="017b0-161">The first item.</span></span>

<span data-ttu-id="017b0-162">Durch die Implementierung von [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070) weiß Ihre Datenquelle, welche Elemente abgerufen und zwischengespeichert werden müssen. Zudem ist ihr bekannt, wann nicht länger im Cache erforderliche Daten gelöscht werden müssen.</span><span class="sxs-lookup"><span data-stu-id="017b0-162">By implementing [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070) your data source knows what items need to be fetched and cached, and when to prune from the cache data that is no longer needed.</span></span> <span data-ttu-id="017b0-163">**IItemsRangeInfo** verwendet [**ItemIndexRange**](https://msdn.microsoft.com/library/windows/apps/Dn877081)-Objekte, um eine Reihe von Elementen auf Basis ihres Indexes in der Sammlung zu beschreiben.</span><span class="sxs-lookup"><span data-stu-id="017b0-163">**IItemsRangeInfo** uses [**ItemIndexRange**](https://msdn.microsoft.com/library/windows/apps/Dn877081) objects to describe a set of items based on their index in the collection.</span></span> <span data-ttu-id="017b0-164">Auf diese Weise werden keine Elementzeiger verwendet, die möglicherweise nicht korrekt oder zuverlässig sind.</span><span class="sxs-lookup"><span data-stu-id="017b0-164">This is so that it doesn't use item pointers, which may not be correct or stable.</span></span> <span data-ttu-id="017b0-165">**IItemsRangeInfo** ist dafür vorgesehen, nur von einer einzelnen Instanz eines Elementsteuerelements verwendet zu werden, da es auf Zustandsinformationen für dieses Elementsteuerelement beruht.</span><span class="sxs-lookup"><span data-stu-id="017b0-165">**IItemsRangeInfo** is designed to be used by only a single instance of an items control because it relies on state information for that items control.</span></span> <span data-ttu-id="017b0-166">Wenn mehrere Elementsteuerelemente Zugriff auf dieselben Daten benötigen, ist jeweils eine separate Instanz der Datenquelle erforderlich.</span><span class="sxs-lookup"><span data-stu-id="017b0-166">If multiple items controls need access to the same data then you will need a separate instance of the data source for each.</span></span> <span data-ttu-id="017b0-167">Sie können einen gemeinsamen Cache teilen, aber die Logik zum Löschen aus dem Cache ist dann komplizierter.</span><span class="sxs-lookup"><span data-stu-id="017b0-167">They can share a common cache, but the logic to purge from the cache will be more complicated.</span></span>

<span data-ttu-id="017b0-168">Hier folgt die grundlegende Strategie für die Datenvirtualisierung mit wahlfreiem Zugriff auf die Datenquelle.</span><span class="sxs-lookup"><span data-stu-id="017b0-168">Here's the basic strategy for your random access data virtualization data source.</span></span>

-   <span data-ttu-id="017b0-169">Bei der Anforderung eines Elements</span><span class="sxs-lookup"><span data-stu-id="017b0-169">When asked for an item</span></span>
    -   <span data-ttu-id="017b0-170">Wenn es im Arbeitsspeicher verfügbar ist, geben Sie es zurück.</span><span class="sxs-lookup"><span data-stu-id="017b0-170">If you have it available in memory, then return it.</span></span>
    -   <span data-ttu-id="017b0-171">Wenn es nicht vorhanden ist, geben Sie Null oder ein Platzhalterelement zurück.</span><span class="sxs-lookup"><span data-stu-id="017b0-171">If you don’t have it, then return either null or a placeholder item.</span></span>
    -   <span data-ttu-id="017b0-172">Verwenden Sie die Anforderung für ein Element (oder die Bereichsinformationen aus [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070)), um zu wissen, welche Elemente erforderlich sind, und um Daten für Elemente asynchron vom Back-End abzurufen.</span><span class="sxs-lookup"><span data-stu-id="017b0-172">Use the request for an item (or the range information from [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070)) to know which items are needed, and to fetch data for items from your back end asynchronously.</span></span> <span data-ttu-id="017b0-173">Lösen Sie nach dem Abrufen der Daten eine Änderungsbenachrichtigung über [**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) oder [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) aus, damit das Elementsteuerelement über das neue Element informiert ist.</span><span class="sxs-lookup"><span data-stu-id="017b0-173">After retrieving the data, raise a change notification via [**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) or [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) so that the items control knows about the new item.</span></span>
-   <span data-ttu-id="017b0-174">(Optional) Wenn sich der Viewport des Elementsteuerelements ändert, identifizieren Sie über Ihre Implementierung von [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070), welche Elemente aus der Datenquelle erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="017b0-174">(Optionally) as the items control's viewport changes, identify what items are needed from your data source via your implementation of [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070).</span></span>

<span data-ttu-id="017b0-175">Die Strategie, wann die Datenelemente geladen werden, wie viele Datenelemente geladen werden und welche Elemente im Arbeitsspeicher verbleiben, hängt darüber hinaus von Ihrer Anwendung ab.</span><span class="sxs-lookup"><span data-stu-id="017b0-175">Beyond that, the strategy for when to load data items, how many to load, and which items to keep in memory is up to your application.</span></span> <span data-ttu-id="017b0-176">Einige allgemeine, zu berücksichtigende Überlegungen:</span><span class="sxs-lookup"><span data-stu-id="017b0-176">Some general considerations to keep in mind:</span></span>

-   <span data-ttu-id="017b0-177">Stellen Sie asynchrone Anforderungen für die Daten. Blockieren Sie nicht den UI-Thread.</span><span class="sxs-lookup"><span data-stu-id="017b0-177">Make asynchronous requests for data; don't block the UI thread.</span></span>
-   <span data-ttu-id="017b0-178">Finden Sie den optimalen Bereich für die Größe der Stapel, in denen Sie Elemente abrufen.</span><span class="sxs-lookup"><span data-stu-id="017b0-178">Find the sweet spot in the size of the batches you fetch items in.</span></span> <span data-ttu-id="017b0-179">Bevorzugen Sie eine kompakte Vorgehensweise.</span><span class="sxs-lookup"><span data-stu-id="017b0-179">Prefer chunky to chatty.</span></span> <span data-ttu-id="017b0-180">Nicht zu klein, dass zu viele kleine Anforderungen erforderlich sind, aber auch nicht zu groß, dass das Abrufen zu lange dauert.</span><span class="sxs-lookup"><span data-stu-id="017b0-180">Not so small that you make too many small requests; not too large that they take too long to retrieve.</span></span>
-   <span data-ttu-id="017b0-181">Berücksichtigen Sie, wie viele Anforderungen gleichzeitig ausstehen sollen.</span><span class="sxs-lookup"><span data-stu-id="017b0-181">Consider how many requests you want to have pending at the same time.</span></span> <span data-ttu-id="017b0-182">Die sequenzielle Ausführung ist einfacher, aber möglicherweise zu langsam, wenn die Verarbeitungszeit hoch ist.</span><span class="sxs-lookup"><span data-stu-id="017b0-182">Performing one at a time is easier, but it may be too slow if turnaround time is high.</span></span>
-   <span data-ttu-id="017b0-183">Können Sie die Datenanforderungen abbrechen?</span><span class="sxs-lookup"><span data-stu-id="017b0-183">Can you cancel requests for data?</span></span>
-   <span data-ttu-id="017b0-184">Ergeben sich Kosten für die einzelnen Transaktionen, wenn Sie einen gehosteten Dienst verwenden?</span><span class="sxs-lookup"><span data-stu-id="017b0-184">If using a hosted service, is there a cost per transaction?</span></span>
-   <span data-ttu-id="017b0-185">Welche Art von Benachrichtigungen werden vom Dienst bereitgestellt, wenn sich die Ergebnisse einer Abfrage ändern?</span><span class="sxs-lookup"><span data-stu-id="017b0-185">What kind of notifications are provided by the service when the results of a query are changed?</span></span> <span data-ttu-id="017b0-186">Können Sie erfahren, ob ein Element bei Index 33 eingefügt wird?</span><span class="sxs-lookup"><span data-stu-id="017b0-186">Will you know if an item is inserted at index 33?</span></span> <span data-ttu-id="017b0-187">Wenn Ihr Dienst Abfragen auf Basis von Schlüssel-plus-Versatz unterstützt, ist dies möglicherweise besser geeignet, anstatt nur einen Index zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="017b0-187">If your service supports queries based on a key-plus-offset, that may be better than just using an index.</span></span>
-   <span data-ttu-id="017b0-188">Wie intelligent soll das Vorabrufen der Elemente verlaufen?</span><span class="sxs-lookup"><span data-stu-id="017b0-188">How smart do you want to be in pre-fetching items?</span></span> <span data-ttu-id="017b0-189">Möchten Sie die Richtung und Geschwindigkeit des Bildlaufs testen und nachverfolgen, um vorherzusagen, welche Elemente erforderlich sind?</span><span class="sxs-lookup"><span data-stu-id="017b0-189">Are you going to try and track the direction and velocity of scrolling to predict which items are needed?</span></span>
-   <span data-ttu-id="017b0-190">Wie offensiv möchten Sie beim Leeren des Caches vorgehen?</span><span class="sxs-lookup"><span data-stu-id="017b0-190">How aggressive do you want to be in purging the cache?</span></span> <span data-ttu-id="017b0-191">Hierbei müssen Arbeitsspeicher und Erfahrung gegeneinander abgewogen werden.</span><span class="sxs-lookup"><span data-stu-id="017b0-191">This is a tradeoff of memory versus experience.</span></span>




