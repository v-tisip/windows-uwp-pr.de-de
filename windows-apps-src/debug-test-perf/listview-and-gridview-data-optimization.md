---
author: jwmsft
ms.assetid: 3A477380-EAC5-44E7-8E0F-18346CC0C92F
title: Virtualisierung von ListView- und GridView-Daten
description: Verbessern Sie die Leistung und Startzeit von ListView und GridView durch Datenvirtualisierung.
ms.author: jimwalk
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 92b81c79eb1be9e21aa7c306ef31b0b3bb62e7d1
ms.sourcegitcommit: bdc40b08cbcd46fc379feeda3c63204290e055af
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/08/2018
ms.locfileid: "6145079"
---
# <a name="listview-and-gridview-data-virtualization"></a><span data-ttu-id="a0f7d-104">ListView- und GridView-Datenvirtualisierung</span><span class="sxs-lookup"><span data-stu-id="a0f7d-104">ListView and GridView data virtualization</span></span>


<span data-ttu-id="a0f7d-105">**Hinweis:** Weitere Einzelheiten finden Sie in der Sitzung //build/ [Erhebliches Erhöhen der Leistung bei der Interaktion von Benutzern mit großen Mengen von Daten in GridView und ListView](https://channel9.msdn.com/Events/Build/2013/3-158).</span><span class="sxs-lookup"><span data-stu-id="a0f7d-105">**Note**For more details, see the //build/ session [Dramatically Increase Performance when Users Interact with Large Amounts of Data in GridView and ListView](https://channel9.msdn.com/Events/Build/2013/3-158).</span></span>

<span data-ttu-id="a0f7d-106">Verbessern Sie die Leistung und Startzeit von [**ListView**](https://msdn.microsoft.com/library/windows/apps/BR242878) und [**GridView**](https://msdn.microsoft.com/library/windows/apps/BR242705) durch Datenvirtualisierung.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-106">Improve [**ListView**](https://msdn.microsoft.com/library/windows/apps/BR242878) and [**GridView**](https://msdn.microsoft.com/library/windows/apps/BR242705) performance and startup time through data virtualization.</span></span> <span data-ttu-id="a0f7d-107">Informationen zu UI-Virtualisierung, Elementreduzierung und die progressive Aktualisierung von Elementen finden Sie unter [Optimieren der ListView- und GridView-Benutzeroberfläche](optimize-gridview-and-listview.md).</span><span class="sxs-lookup"><span data-stu-id="a0f7d-107">For UI virtualization, element reduction, and progressive updating of items, see [ListView and GridView UI optimization](optimize-gridview-and-listview.md).</span></span>

<span data-ttu-id="a0f7d-108">Eine Methode zur Datenvirtualisierung ist für einen Datensatz erforderlich, der so groß ist, dass er zu einem bestimmten Zeitpunkt nicht komplett im Arbeitsspeicher gespeichert werden kann oder soll.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-108">A method of data virtualization is needed for a data set that is so large that it cannot or should not all be stored in memory at one time.</span></span> <span data-ttu-id="a0f7d-109">Sie laden einen ersten Teil (vom lokalen Datenträger, aus dem Netzwerk oder der Cloud) in den Arbeitsspeicher und wenden die UI-Virtualisierung auf dieses Teildataset an.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-109">You load an initial portion into memory (from local disk, network, or cloud) and apply UI virtualization to this partial data set.</span></span> <span data-ttu-id="a0f7d-110">Sie können die Daten später inkrementell oder bei Bedarf von beliebigen Punkten im Master-Dataset (wahlfreier Zugriff) laden.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-110">You can later load data incrementally, or from arbitrary points in the master data set (random access), on demand.</span></span> <span data-ttu-id="a0f7d-111">Ob die Datenvirtualisierung für Sie geeignet ist, hängt von vielen Faktoren ab.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-111">Whether data virtualization is appropriate for you depends on many factors.</span></span>

-   <span data-ttu-id="a0f7d-112">Die Größe Ihres Datasets</span><span class="sxs-lookup"><span data-stu-id="a0f7d-112">The size of your data set</span></span>
-   <span data-ttu-id="a0f7d-113">Die Größe der einzelnen Elemente</span><span class="sxs-lookup"><span data-stu-id="a0f7d-113">The size of each item</span></span>
-   <span data-ttu-id="a0f7d-114">Die Quelle des Datasets (lokaler Datenträger, Netzwerk oder Cloud)</span><span class="sxs-lookup"><span data-stu-id="a0f7d-114">The source of the data set (local disk, network, or cloud)</span></span>
-   <span data-ttu-id="a0f7d-115">Die gesamte Arbeitsspeichernutzung Ihrer App</span><span class="sxs-lookup"><span data-stu-id="a0f7d-115">The overall memory consumption of your app</span></span>

<span data-ttu-id="a0f7d-116">**Hinweis:** Beachten Sie, dass ein Feature für ListView und GridView, das temporäre Platzhalter für visuelle Elemente anzeigt, während der Benutzer Schwenken/Bildlauf schnell ist standardmäßig aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-116">**Note**Be aware that a feature is enabled by default for ListView and GridView that displays temporary placeholder visuals while the user is panning/scrolling quickly.</span></span> <span data-ttu-id="a0f7d-117">Beim Laden von Daten werden diese Platzhalter für visuelle Elemente durch die Elementvorlage ersetzt.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-117">As data is loaded, these placeholder visuals are replaced with your item template.</span></span> <span data-ttu-id="a0f7d-118">Sie können das Feature deaktivieren, indem Sie [**ListViewBase.ShowsScrollingPlaceholders**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.listviewbase.showsscrollingplaceholders) auf „false“ festlegen. In diesem Fall wird jedoch empfohlen, das „x: Phase“-Attribut zu verwenden, um die Elemente in der Elementvorlage progressiv zu rendern.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-118">You can turn the feature off by setting [**ListViewBase.ShowsScrollingPlaceholders**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.listviewbase.showsscrollingplaceholders) to false, but if you do so then we recommend that you use the x:Phase attribute to progressively render the elements in your item template.</span></span> <span data-ttu-id="a0f7d-119">Siehe [Progressives Aktualisieren von ListView- und GridView-Elementen](optimize-gridview-and-listview.md#update-items-incrementally).</span><span class="sxs-lookup"><span data-stu-id="a0f7d-119">See [Update ListView and GridView items progressively](optimize-gridview-and-listview.md#update-items-incrementally).</span></span>

<span data-ttu-id="a0f7d-120">Hier erhalten Sie weitere Informationen über die Verfahren der inkrementellen Datenvirtualisierung und der Datenvirtualisierung mit wahlfreiem Zugriff.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-120">Here are more details about the incremental and random-access data virtualization techniques.</span></span>

## <a name="incremental-data-virtualization"></a><span data-ttu-id="a0f7d-121">Inkrementelle Datenvirtualisierung</span><span class="sxs-lookup"><span data-stu-id="a0f7d-121">Incremental data virtualization</span></span>

<span data-ttu-id="a0f7d-122">Bei der inkrementellen Datenvirtualisierung werden Daten sequenziell geladen.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-122">Incremental data virtualization loads data sequentially.</span></span> <span data-ttu-id="a0f7d-123">Ein [**ListView**](https://msdn.microsoft.com/library/windows/apps/BR242878), das die inkrementelle Datenvirtualisierung verwendet, kann zum Anzeigen einer Sammlung von einer Million Elementen verwendet werden, wobei aber anfänglich nur 50 Elemente geladen werden.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-123">A [**ListView**](https://msdn.microsoft.com/library/windows/apps/BR242878) that uses incremental data virtualization may be used to view a collection of a million items, but only 50 items are loaded initially.</span></span> <span data-ttu-id="a0f7d-124">Beim Schwenken/Bildlauf werden die nächsten 50 Elemente geladen.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-124">As the user pans/scrolls, the next 50 are loaded.</span></span> <span data-ttu-id="a0f7d-125">Der Ziehpunkt der Bildlaufleiste wird beim Laden der Elemente kleiner.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-125">As items are loaded, the scroll bar's thumb decreases in size.</span></span> <span data-ttu-id="a0f7d-126">Für diese Art der Datenvirtualisierung schreiben Sie eine Datenquellenklasse, die diese Schnittstellen implementiert.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-126">For this type of data virtualization you write a data source class that implements these interfaces.</span></span>

-   [**<span data-ttu-id="a0f7d-127">IList</span><span class="sxs-lookup"><span data-stu-id="a0f7d-127">IList</span></span>**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.ilist.aspx)
-   <span data-ttu-id="a0f7d-128">[**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) (C#/VB) oder [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) (C++/CX)</span><span class="sxs-lookup"><span data-stu-id="a0f7d-128">[**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) (C#/VB) or [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) (C++/CX)</span></span>
-   [**<span data-ttu-id="a0f7d-129">ISupportIncrementalLoading</span><span class="sxs-lookup"><span data-stu-id="a0f7d-129">ISupportIncrementalLoading</span></span>**](https://msdn.microsoft.com/library/windows/apps/Hh701916)

<span data-ttu-id="a0f7d-130">Eine derartige Datenquelle ist eine speicherinterne Liste, die ständig erweitert werden kann.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-130">A data source like this is an in-memory list that can be continually extended.</span></span> <span data-ttu-id="a0f7d-131">Das Elementsteuerelement fordert die Elemente mithilfe der standardmäßigen „Indexer“- und „Count“-Eigenschaften von [**IList**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.ilist.aspx) an.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-131">The items control will ask for items using the standard [**IList**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.ilist.aspx) indexer and count properties.</span></span> <span data-ttu-id="a0f7d-132">Die Anzahl sollte die Anzahl der lokalen Elemente darstellen, nicht die tatsächliche Größe des Datasets.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-132">The count should represent the number of items locally, not the true size of the dataset.</span></span>

<span data-ttu-id="a0f7d-133">Wenn sich das Elementsteuerelement dem Ende der vorhandenen Daten nähert, ruft es [**ISupportIncrementalLoading.HasMoreItems**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.data.isupportincrementalloading.hasmoreitems) auf.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-133">When the items control gets close to the end of the existing data, it will call [**ISupportIncrementalLoading.HasMoreItems**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.data.isupportincrementalloading.hasmoreitems).</span></span> <span data-ttu-id="a0f7d-134">Wenn **true** zurückgegeben wird, ruft es [**ISupportIncrementalLoading.LoadMoreItemsAsync**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.data.isupportincrementalloading.loadmoreitemsasync) auf und übergibt eine empfohlene Anzahl von zu ladenden Elementen.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-134">If you return **true**, then it will call [**ISupportIncrementalLoading.LoadMoreItemsAsync**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.data.isupportincrementalloading.loadmoreitemsasync) passing an advised number of items to load.</span></span> <span data-ttu-id="a0f7d-135">Je nachdem, von wo die Daten (lokaler Datenträger, Netzwerk oder Cloud) geladen werden, können Sie eine andere als die empfohlene Anzahl von Elementen laden.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-135">Depending on where you're loading data from (local disk, network, or cloud), you may choose to load a different number of items than that advised.</span></span> <span data-ttu-id="a0f7d-136">Wenn Ihr Dienst z.B. Stapel von 50 Elementen unterstützt, aber das Elementsteuerelement nur 10 anfordert, dann können Sie 50 Elemente laden.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-136">For example, if your service supports batches of 50 items but the items control only asks for 10 then you can load 50.</span></span> <span data-ttu-id="a0f7d-137">Laden Sie die Daten vom Back-End, fügen Sie sie zur Liste hinzu, und lösen Sie über [**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) oder [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) eine Änderungsbenachrichtigung aus, damit das Elementsteuerelement über die neuen Elemente informiert wird.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-137">Load the data from your back end, add it to your list, and raise a change notification via [**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) or [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) so that the items control knows about the new items.</span></span> <span data-ttu-id="a0f7d-138">Geben Sie außerdem die Anzahl der tatsächlich geladenen Elemente zurück.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-138">Also return a count of the items you actually loaded.</span></span> <span data-ttu-id="a0f7d-139">Wenn Sie weniger Artikel als empfohlen laden oder das Elementsteuerelement in der Zwischenzeit noch weiter verschoben/durchlaufen wurde, dann wird die Datenquelle erneut aufgerufen, um weitere Elemente zu laden, und der Zyklus wird anschließend fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-139">If you load fewer items than advised, or the items control has been panned/scrolled even further in the interim, then your data source will be called again for more items and the cycle will continue.</span></span> <span data-ttu-id="a0f7d-140">Sie können weitere Informationen im [XAML-Datenbindungsbeispiel](https://code.msdn.microsoft.com/windowsapps/Data-Binding-7b1d67b5) für Windows8.1 herunterladen und dessen Quellcode in Ihrer Windows 10-app wiederverwenden.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-140">You can learn more by downloading the [XAML data binding sample](https://code.msdn.microsoft.com/windowsapps/Data-Binding-7b1d67b5) for Windows8.1 and re-using its source code in your Windows10 app.</span></span>

## <a name="random-access-data-virtualization"></a><span data-ttu-id="a0f7d-141">Datenvirtualisierung mit wahlfreiem Zugriff</span><span class="sxs-lookup"><span data-stu-id="a0f7d-141">Random access data virtualization</span></span>

<span data-ttu-id="a0f7d-142">Die Datenvirtualisierung mit wahlfreiem Zugriff ermöglicht das Laden von Daten, die sich an einem beliebigen Punkt des Datasets befinden.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-142">Random access data virtualization allows loading from an arbitrary point in the data set.</span></span> <span data-ttu-id="a0f7d-143">Ein [**ListView**](https://msdn.microsoft.com/library/windows/apps/BR242878), das die Datenvirtualisierung mit wahlfreiem Zugriff verwendet und zum Anzeigen einer Sammlung von einer Million Elementen verwendet wird, kann die Elemente 100.000 bis 100.050 laden.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-143">A [**ListView**](https://msdn.microsoft.com/library/windows/apps/BR242878) that uses random access data virtualization, used to view a collection of a million items, can load the items 100,000 – 100,050.</span></span> <span data-ttu-id="a0f7d-144">Wechselt der Benutzer anschließend zum Listenanfang, lädt das Steuerelement die Elemente von 1 bis 50.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-144">If the user then moves to the beginning of the list, the control loads items 1 – 50.</span></span> <span data-ttu-id="a0f7d-145">Der Ziehpunkt der Bildlaufleiste gibt jederzeit an, dass **ListView** eine Million Elemente enthält.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-145">At all times, the scroll bar's thumb indicates that the **ListView** contains a million items.</span></span> <span data-ttu-id="a0f7d-146">Die Position des Ziehpunkts der Bildlaufleiste gibt Aufschluss über die relative Position der sichtbaren Elemente innerhalb des gesamten Datasets der Sammlung.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-146">The position of the scroll bar's thumb is relative to where the visible items are located in the collection's entire data set.</span></span> <span data-ttu-id="a0f7d-147">Diese Art der Datenvirtualisierung kann den Speicherbedarf und die Ladezeiten für die Sammlung erheblich reduzieren.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-147">This type of data virtualization can significantly reduce the memory requirements and load times for the collection.</span></span> <span data-ttu-id="a0f7d-148">Zur Aktivierung müssen Sie eine Datenquellenklasse erstellen, die Daten bei Bedarf abruft, einen lokalen Cache verwaltet und diese Schnittstellen implementiert.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-148">To enable it you need to write a data source class that fetches data on demand and manages a local cache and implements these interfaces.</span></span>

-   [**<span data-ttu-id="a0f7d-149">IList</span><span class="sxs-lookup"><span data-stu-id="a0f7d-149">IList</span></span>**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.ilist.aspx)
-   <span data-ttu-id="a0f7d-150">[**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) (C#/VB) oder [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) (C++/CX)</span><span class="sxs-lookup"><span data-stu-id="a0f7d-150">[**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) (C#/VB) or [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) (C++/CX)</span></span>
-   <span data-ttu-id="a0f7d-151">(Optional) [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070)</span><span class="sxs-lookup"><span data-stu-id="a0f7d-151">(Optionally) [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070)</span></span>
-   <span data-ttu-id="a0f7d-152">(Optional) [**ISelectionInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877074)</span><span class="sxs-lookup"><span data-stu-id="a0f7d-152">(Optionally) [**ISelectionInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877074)</span></span>

<span data-ttu-id="a0f7d-153">[**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070) stellt Informationen dazu bereit, welche Elemente das Steuerelement aktiv verwendet.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-153">[**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070) provides information on which items the control is actively using.</span></span> <span data-ttu-id="a0f7d-154">Das Steuerelement ruft diese Methode bei jeder Änderung der Ansicht auf und bezieht diese beiden Sätze von Bereichen ein.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-154">The items control will call this method whenever its view is changing, and will include these two sets of ranges.</span></span>

-   <span data-ttu-id="a0f7d-155">Der Satz von Elementen, die sich im Viewport befinden.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-155">The set of items that are in the viewport.</span></span>
-   <span data-ttu-id="a0f7d-156">Eine Reihe von nicht virtualisierten Elemente, die das Steuerelement verwendet und möglicherweise nicht im Viewport enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-156">A set of non-virtualized items that the control is using that may not be in the viewport.</span></span>
    -   <span data-ttu-id="a0f7d-157">Ein um den Viewport angeordneter Puffer von Elementen, der von den Elementen gesteuert wird, damit die Verschiebung per Toucheingabe reibungslos verläuft.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-157">A buffer of items around the viewport that the items control keeps so that touch panning is smooth.</span></span>
    -   <span data-ttu-id="a0f7d-158">Das Element, das den Fokus hat.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-158">The focused item.</span></span>
    -   <span data-ttu-id="a0f7d-159">Das erste Element.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-159">The first item.</span></span>

<span data-ttu-id="a0f7d-160">Durch die Implementierung von [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070) weiß Ihre Datenquelle, welche Elemente abgerufen und zwischengespeichert werden müssen. Zudem ist ihr bekannt, wann nicht länger im Cache erforderliche Daten gelöscht werden müssen.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-160">By implementing [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070) your data source knows what items need to be fetched and cached, and when to prune from the cache data that is no longer needed.</span></span> <span data-ttu-id="a0f7d-161">**IItemsRangeInfo** verwendet [**ItemIndexRange**](https://msdn.microsoft.com/library/windows/apps/Dn877081)-Objekte, um eine Reihe von Elementen auf Basis ihres Indexes in der Sammlung zu beschreiben.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-161">**IItemsRangeInfo** uses [**ItemIndexRange**](https://msdn.microsoft.com/library/windows/apps/Dn877081) objects to describe a set of items based on their index in the collection.</span></span> <span data-ttu-id="a0f7d-162">Auf diese Weise werden keine Elementzeiger verwendet, die möglicherweise nicht korrekt oder zuverlässig sind.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-162">This is so that it doesn't use item pointers, which may not be correct or stable.</span></span> <span data-ttu-id="a0f7d-163">**IItemsRangeInfo** ist dafür vorgesehen, nur von einer einzelnen Instanz eines Elementsteuerelements verwendet zu werden, da es auf Zustandsinformationen für dieses Elementsteuerelement beruht.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-163">**IItemsRangeInfo** is designed to be used by only a single instance of an items control because it relies on state information for that items control.</span></span> <span data-ttu-id="a0f7d-164">Wenn mehrere Elementsteuerelemente Zugriff auf dieselben Daten benötigen, ist jeweils eine separate Instanz der Datenquelle erforderlich.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-164">If multiple items controls need access to the same data then you will need a separate instance of the data source for each.</span></span> <span data-ttu-id="a0f7d-165">Sie können einen gemeinsamen Cache teilen, aber die Logik zum Löschen aus dem Cache ist dann komplizierter.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-165">They can share a common cache, but the logic to purge from the cache will be more complicated.</span></span>

<span data-ttu-id="a0f7d-166">Hier folgt die grundlegende Strategie für die Datenvirtualisierung mit wahlfreiem Zugriff auf die Datenquelle.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-166">Here's the basic strategy for your random access data virtualization data source.</span></span>

-   <span data-ttu-id="a0f7d-167">Bei der Anforderung eines Elements</span><span class="sxs-lookup"><span data-stu-id="a0f7d-167">When asked for an item</span></span>
    -   <span data-ttu-id="a0f7d-168">Wenn es im Arbeitsspeicher verfügbar ist, geben Sie es zurück.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-168">If you have it available in memory, then return it.</span></span>
    -   <span data-ttu-id="a0f7d-169">Wenn es nicht vorhanden ist, geben Sie Null oder ein Platzhalterelement zurück.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-169">If you don’t have it, then return either null or a placeholder item.</span></span>
    -   <span data-ttu-id="a0f7d-170">Verwenden Sie die Anforderung für ein Element (oder die Bereichsinformationen aus [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070)), um zu wissen, welche Elemente erforderlich sind, und um Daten für Elemente asynchron vom Back-End abzurufen.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-170">Use the request for an item (or the range information from [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070)) to know which items are needed, and to fetch data for items from your back end asynchronously.</span></span> <span data-ttu-id="a0f7d-171">Lösen Sie nach dem Abrufen der Daten eine Änderungsbenachrichtigung über [**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) oder [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) aus, damit das Elementsteuerelement über das neue Element informiert ist.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-171">After retrieving the data, raise a change notification via [**INotifyCollectionChanged**](https://msdn.microsoft.com/library/windows/apps/xaml/system.collections.specialized.inotifycollectionchanged.aspx) or [**IObservableVector&lt;T&gt;**](https://msdn.microsoft.com/library/windows/apps/BR226052) so that the items control knows about the new item.</span></span>
-   <span data-ttu-id="a0f7d-172">(Optional) Wenn sich der Viewport des Elementsteuerelements ändert, identifizieren Sie über Ihre Implementierung von [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070), welche Elemente aus der Datenquelle erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-172">(Optionally) as the items control's viewport changes, identify what items are needed from your data source via your implementation of [**IItemsRangeInfo**](https://msdn.microsoft.com/library/windows/apps/Dn877070).</span></span>

<span data-ttu-id="a0f7d-173">Die Strategie, wann die Datenelemente geladen werden, wie viele Datenelemente geladen werden und welche Elemente im Arbeitsspeicher verbleiben, hängt darüber hinaus von Ihrer Anwendung ab.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-173">Beyond that, the strategy for when to load data items, how many to load, and which items to keep in memory is up to your application.</span></span> <span data-ttu-id="a0f7d-174">Einige allgemeine, zu berücksichtigende Überlegungen:</span><span class="sxs-lookup"><span data-stu-id="a0f7d-174">Some general considerations to keep in mind:</span></span>

-   <span data-ttu-id="a0f7d-175">Stellen Sie asynchrone Anforderungen für die Daten. Blockieren Sie nicht den UI-Thread.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-175">Make asynchronous requests for data; don't block the UI thread.</span></span>
-   <span data-ttu-id="a0f7d-176">Finden Sie den optimalen Bereich für die Größe der Stapel, in denen Sie Elemente abrufen.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-176">Find the sweet spot in the size of the batches you fetch items in.</span></span> <span data-ttu-id="a0f7d-177">Bevorzugen Sie eine kompakte Vorgehensweise.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-177">Prefer chunky to chatty.</span></span> <span data-ttu-id="a0f7d-178">Nicht zu klein, dass zu viele kleine Anforderungen erforderlich sind, aber auch nicht zu groß, dass das Abrufen zu lange dauert.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-178">Not so small that you make too many small requests; not too large that they take too long to retrieve.</span></span>
-   <span data-ttu-id="a0f7d-179">Berücksichtigen Sie, wie viele Anforderungen gleichzeitig ausstehen sollen.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-179">Consider how many requests you want to have pending at the same time.</span></span> <span data-ttu-id="a0f7d-180">Die sequenzielle Ausführung ist einfacher, aber möglicherweise zu langsam, wenn die Verarbeitungszeit hoch ist.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-180">Performing one at a time is easier, but it may be too slow if turnaround time is high.</span></span>
-   <span data-ttu-id="a0f7d-181">Können Sie die Datenanforderungen abbrechen?</span><span class="sxs-lookup"><span data-stu-id="a0f7d-181">Can you cancel requests for data?</span></span>
-   <span data-ttu-id="a0f7d-182">Ergeben sich Kosten für die einzelnen Transaktionen, wenn Sie einen gehosteten Dienst verwenden?</span><span class="sxs-lookup"><span data-stu-id="a0f7d-182">If using a hosted service, is there a cost per transaction?</span></span>
-   <span data-ttu-id="a0f7d-183">Welche Art von Benachrichtigungen werden vom Dienst bereitgestellt, wenn sich die Ergebnisse einer Abfrage ändern?</span><span class="sxs-lookup"><span data-stu-id="a0f7d-183">What kind of notifications are provided by the service when the results of a query are changed?</span></span> <span data-ttu-id="a0f7d-184">Können Sie erfahren, ob ein Element bei Index 33 eingefügt wird?</span><span class="sxs-lookup"><span data-stu-id="a0f7d-184">Will you know if an item is inserted at index 33?</span></span> <span data-ttu-id="a0f7d-185">Wenn Ihr Dienst Abfragen auf Basis von Schlüssel-plus-Versatz unterstützt, ist dies möglicherweise besser geeignet, anstatt nur einen Index zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-185">If your service supports queries based on a key-plus-offset, that may be better than just using an index.</span></span>
-   <span data-ttu-id="a0f7d-186">Wie intelligent soll das Vorabrufen der Elemente verlaufen?</span><span class="sxs-lookup"><span data-stu-id="a0f7d-186">How smart do you want to be in pre-fetching items?</span></span> <span data-ttu-id="a0f7d-187">Möchten Sie die Richtung und Geschwindigkeit des Bildlaufs testen und nachverfolgen, um vorherzusagen, welche Elemente erforderlich sind?</span><span class="sxs-lookup"><span data-stu-id="a0f7d-187">Are you going to try and track the direction and velocity of scrolling to predict which items are needed?</span></span>
-   <span data-ttu-id="a0f7d-188">Wie offensiv möchten Sie beim Leeren des Caches vorgehen?</span><span class="sxs-lookup"><span data-stu-id="a0f7d-188">How aggressive do you want to be in purging the cache?</span></span> <span data-ttu-id="a0f7d-189">Hierbei müssen Arbeitsspeicher und Erfahrung gegeneinander abgewogen werden.</span><span class="sxs-lookup"><span data-stu-id="a0f7d-189">This is a tradeoff of memory versus experience.</span></span>




