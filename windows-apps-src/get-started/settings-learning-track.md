---
author: TylerMSFT
title: Speichern und Laden von Einstellungen in einer UWP-App
description: Erfahren Sie, wie Sie App-Einstellungen in Apps für die Universelle Windows-Plattform speichern und laden.
ms.author: twhitney
ms.date: 05/07/2018
ms.topic: article
keywords: Erste Schritte, UWP, Windows10, Lernpfad, Einstellungen, Einstellungen speichern, Einstellungen laden
ms.localizationpriority: medium
ms.custom: RS5
ms.openlocfilehash: 63af8aa4ab4d12a3a4aa69bd7d870106e21844f5
ms.sourcegitcommit: 3257416aebb5a7b1515e107866806f8bd57845a8
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/17/2018
ms.locfileid: "7150475"
---
# <a name="save-and-load-settings-in-a-uwp-app"></a><span data-ttu-id="29b41-104">Speichern und Laden von Einstellungen in einer UWP-App</span><span class="sxs-lookup"><span data-stu-id="29b41-104">Save and load settings in a UWP app</span></span>

<span data-ttu-id="29b41-105">In diesem Thema erfahren Sie, was Sie wissen müssen, um mit dem Laden und Speichern von Einstellungen in einer App für die Universelle Windows-Plattform (UWP) zu beginnen.</span><span class="sxs-lookup"><span data-stu-id="29b41-105">This topic covers what you need to know to get started loading, and saving, settings in a Universal Windows Platform (UWP) app.</span></span> <span data-ttu-id="29b41-106">Es werden die wichtigsten APIs vorgestellt, und Sie erhalten Links zu weiteren Informationen.</span><span class="sxs-lookup"><span data-stu-id="29b41-106">The main APIs are introduced, and links are provided to help you learn more.</span></span>

<span data-ttu-id="29b41-107">Verwenden Sie Einstellungen, um die vom Benutzer anpassbaren Aspekte Ihrer App zu realisieren.</span><span class="sxs-lookup"><span data-stu-id="29b41-107">Use settings to remember the user-customizable aspects of your app.</span></span> <span data-ttu-id="29b41-108">Beispielsweise könnten Einstellungen in einer Nachrichten-App festlegen, welche Nachrichtenquellen angezeigt werden und welche Schriftart die App zum Lesen von Artikeln verwenden soll.</span><span class="sxs-lookup"><span data-stu-id="29b41-108">For example, a news reader could use app settings to save which news sources to display and what font to use for reading articles.</span></span>

<span data-ttu-id="29b41-109">Betrachten wir Code zum Speichern und Laden von Appeinstellungen, einschließlich der lokalen und Roamingeinstellungen.</span><span class="sxs-lookup"><span data-stu-id="29b41-109">We’ll look at code to save and load app settings, including local and roaming settings.</span></span>

## <a name="what-do-you-need-to-know"></a><span data-ttu-id="29b41-110">Wissenswertes</span><span class="sxs-lookup"><span data-stu-id="29b41-110">What do you need to know</span></span>

<span data-ttu-id="29b41-111">Verwenden Sie App-Einstellungen, um Konfigurationsdaten wie Benutzereinstellungen und den App-Status zu speichern.</span><span class="sxs-lookup"><span data-stu-id="29b41-111">Use app settings to store configuration data such as user preferences and app state.</span></span>  <span data-ttu-id="29b41-112">Gerätespezifische Einstellungen werden lokal gespeichert.</span><span class="sxs-lookup"><span data-stu-id="29b41-112">Settings that are specific to the device are stored locally.</span></span> <span data-ttu-id="29b41-113">Einstellungen für das jeweilige Gerät, auf dem Ihre App installiert ist, werden im Roaming-Datenspeicher gespeichert.</span><span class="sxs-lookup"><span data-stu-id="29b41-113">Settings that apply on whichever device your app is installed on are stored in the roaming data store.</span></span> <span data-ttu-id="29b41-114">Die Einstellungen werden zwischen Geräten synchronisiert, auf denen der Benutzer mit demselben Microsoft-Konto angemeldet ist und auf denen dieselbe Version der App installiert ist.</span><span class="sxs-lookup"><span data-stu-id="29b41-114">Settings are roamed between devices on which the user is signed in with the same Microsoft Account and have the same version of the app installed.</span></span>

<span data-ttu-id="29b41-115">Die folgenden Datentypen können für Einstellungen verwendet werden: Integer, Double, Float, Chars, Strings, Points, DateTimes u. a.</span><span class="sxs-lookup"><span data-stu-id="29b41-115">The following data types can be used with settings: integers, doubles, floats, chars, strings, Points, DateTimes, and more.</span></span> <span data-ttu-id="29b41-116">Sie können auch Instanzen der Klasse [ApplicationDataCompositeValue](https://docs.microsoft.com/uwp/api/Windows.Storage.ApplicationDataCompositeValue) speichern, was nützlich ist, wenn mehrere Einstellungen vorhanden sind, die als Einheit behandelt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="29b41-116">You can also store instances of the [ApplicationDataCompositeValue](https://docs.microsoft.com/uwp/api/Windows.Storage.ApplicationDataCompositeValue) class which is useful when there are multiple settings that should be treated as a unit.</span></span> <span data-ttu-id="29b41-117">Beispielsweise sollten Schriftname und Schriftgröße für den Text im Lesebereich der App als Einheit gespeichert/abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="29b41-117">For example, a font name and point size for displaying text in the reading pane of your app should be saved/restored as a single unit.</span></span> <span data-ttu-id="29b41-118">Dadurch wird verhindert, dass Einstellungen nicht mehr miteinander synchron sind, falls Einstellungen beim Roaming unterschiedlich schnell übermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="29b41-118">This prevents one setting from getting out of sync with the other due to delays in roaming one setting before the other.</span></span>

<span data-ttu-id="29b41-119">Hier die wichtigsten APIs, die Sie zum Speichern oder Laden von App-Einstellungen benötigen:</span><span class="sxs-lookup"><span data-stu-id="29b41-119">Here are the main APIs you need to know about to save or load app settings:</span></span>

- <span data-ttu-id="29b41-120">[Windows.Storage.ApplicationData.Current.LocalSettings](https://docs.microsoft.com/uwp/api/Windows.Storage.ApplicationData#Windows_Storage_ApplicationData_LocalSettings) ruft den Container für Anwendungseinstellungen aus dem lokalen App-Datenspeicher ab.</span><span class="sxs-lookup"><span data-stu-id="29b41-120">[Windows.Storage.ApplicationData.Current.LocalSettings](https://docs.microsoft.com/uwp/api/Windows.Storage.ApplicationData#Windows_Storage_ApplicationData_LocalSettings) gets the application settings container from the local app data store.</span></span> <span data-ttu-id="29b41-121">Speichern Sie darin Einstellungen, die nicht für das Roaming zwischen Geräten geeignet sind, da sie gerätespezifisch oder zu groß sind.</span><span class="sxs-lookup"><span data-stu-id="29b41-121">Store settings here that are not appropriate to roam between devices because they represent state specific to this device, or are too big.</span></span>
- <span data-ttu-id="29b41-122">[Windows.Storage.ApplicationData.Current.RoamingSettings](https://docs.microsoft.com/uwp/api/windows.storage.applicationdata.roamingsettings#Windows_Storage_ApplicationData_RoamingSettings) ruft den Container für Anwendungseinstellungen aus dem Roaming-App-Datenspeicher ab.</span><span class="sxs-lookup"><span data-stu-id="29b41-122">[Windows.Storage.ApplicationData.Current.RoamingSettings](https://docs.microsoft.com/uwp/api/windows.storage.applicationdata.roamingsettings#Windows_Storage_ApplicationData_RoamingSettings) gets the application settings container from the roaming app data store.</span></span> <span data-ttu-id="29b41-123">Diese Daten werden zwischen Geräten ausgetauscht.</span><span class="sxs-lookup"><span data-stu-id="29b41-123">This data roams between devices.</span></span>
- <span data-ttu-id="29b41-124">[Windows.Storage.ApplicationDataContainer](https://docs.microsoft.com/uwp/api/windows.storage.applicationdatacontainer) ist ein Container, der App-Einstellungen als Schlüssel/Wert-Paare darstellt.</span><span class="sxs-lookup"><span data-stu-id="29b41-124">[Windows.Storage.ApplicationDataContainer](https://docs.microsoft.com/uwp/api/windows.storage.applicationdatacontainer) is a container that represents app settings as key/value pairs.</span></span> <span data-ttu-id="29b41-125">Verwenden Sie diese Klasse zum Erstellen und Abrufen von Werten.</span><span class="sxs-lookup"><span data-stu-id="29b41-125">Use this class to create and retrieve setting values.</span></span>
- <span data-ttu-id="29b41-126">[Windows.Storage.ApplicationDataCompositeValue](https://docs.microsoft.com/uwp/api/Windows.Storage.ApplicationDataCompositeValue) stellt mehrere App-Einstellungen dar, die als Einheit serialisiert werden sollten.</span><span class="sxs-lookup"><span data-stu-id="29b41-126">[Windows.Storage.ApplicationDataCompositeValue](https://docs.microsoft.com/uwp/api/Windows.Storage.ApplicationDataCompositeValue) represents multiple app settings that should be serialized as a unit.</span></span> <span data-ttu-id="29b41-127">Dies ist nützlich, wenn eine Einstellung nicht unabhängig von einer anderen aktualisiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="29b41-127">This is useful when one setting shouldn't be updated independently of another.</span></span>

## <a name="save-app-settings"></a><span data-ttu-id="29b41-128">Speichern von App-Einstellungen</span><span class="sxs-lookup"><span data-stu-id="29b41-128">Save app settings</span></span>

<span data-ttu-id="29b41-129">In dieser Einführung werden wir uns auf zwei einfache Szenarien konzentrieren: Speichern und Laden einer App-Einstellung lokal, und Übertragen einer aus Schrift und Schriftgröße zusammengesetzten Einstellung zwischen Geräten.</span><span class="sxs-lookup"><span data-stu-id="29b41-129">For this introduction, we will focus on two simple scenarios: saving and loading an app setting locally, and roaming a composite font/font size setting between devices.</span></span>

 ```csharp
// Save a setting locally on the device
ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;
localSettings.Values["test setting"] = "a device specific setting";

// Save a composite setting that will be roamed between devices
ApplicationDataContainer roamingSettings = Windows.Storage.ApplicationData.Current.RoamingSettings;
Windows.Storage.ApplicationDataCompositeValue composite = new Windows.Storage.ApplicationDataCompositeValue();
composite["Font"] = "Calibri";
composite["FontSize"] = 11;
roamingSettings.Values["RoamingFontInfo"] = composite;
 ```

<span data-ttu-id="29b41-130">Speichern Sie eine Einstellung auf dem lokalen Gerät, indem Sie zuerst mit `Windows.Storage.ApplicationData.Current.LocalSettings` einen **ApplicationDataContainer** für den lokalen Einstellungsdatenspeicher abrufen.</span><span class="sxs-lookup"><span data-stu-id="29b41-130">Save a setting to the local device, by first getting an **ApplicationDataContainer** for the local settings data store with `Windows.Storage.ApplicationData.Current.LocalSettings`.</span></span> <span data-ttu-id="29b41-131">Schlüssel/Wert-Paare, die Sie dieser Instanz zuweisen, werden im lokalen Datenspeicher für Geräteeinstellungen gespeichert.</span><span class="sxs-lookup"><span data-stu-id="29b41-131">Key/value dictionary pairs that you assign to this instance are saved in the local device setting data store.</span></span>

<span data-ttu-id="29b41-132">Eine Roamingeinstellung speichern Sie nach einem ähnlichen Muster.</span><span class="sxs-lookup"><span data-stu-id="29b41-132">Save a roaming setting using a similar pattern.</span></span> <span data-ttu-id="29b41-133">Rufen Sie zunächst mit `Windows.Storage.ApplicationData.Current.RoamingSettings` einen **ApplicationDataContainer** für den Datenspeicher für Roamingeinstellungen ab.</span><span class="sxs-lookup"><span data-stu-id="29b41-133">First get an **ApplicationDataContainer** for the roaming settings data store with `Windows.Storage.ApplicationData.Current.RoamingSettings`.</span></span> <span data-ttu-id="29b41-134">Dann weisen Sie dieser Instanz Schlüssel/Wert-Paare zu.</span><span class="sxs-lookup"><span data-stu-id="29b41-134">Then assign key/value pairs to this instance.</span></span>  <span data-ttu-id="29b41-135">Die Schlüssel/Wert-Paare werden automatisch zwischen Geräten übertragen (Roaming).</span><span class="sxs-lookup"><span data-stu-id="29b41-135">Those key/value pairs will automatically roam between devices.</span></span>

<span data-ttu-id="29b41-136">Im obigen Codeausschnitt speichert ein **ApplicationDataCompositeValue** mehrere Schlüssel/Wert-Paare.</span><span class="sxs-lookup"><span data-stu-id="29b41-136">In the code snippet above, a  **ApplicationDataCompositeValue** stores multiple key/value pairs.</span></span> <span data-ttu-id="29b41-137">Zusammengesetzte Werte sind nützlich, um sicherzustellen, dass mehrere zusammengehörende Einstellungen synchronisiert bleiben.</span><span class="sxs-lookup"><span data-stu-id="29b41-137">Composite values are useful when you have multiple settings that shouldn't get out of sync with each other.</span></span> <span data-ttu-id="29b41-138">Beim Speichern eines **ApplicationDataCompositeValue** werden die Werte als Einheit (atomar) gespeichert und können auch so geladen werden.</span><span class="sxs-lookup"><span data-stu-id="29b41-138">When you save a **ApplicationDataCompositeValue**, the values are saved and loaded as a unit, or atomically.</span></span> <span data-ttu-id="29b41-139">Auf diese Weise bleiben zusammengehörende Einstellungen synchron, da sie beim Roaming als Einheit und nicht einzeln übertragen werden.</span><span class="sxs-lookup"><span data-stu-id="29b41-139">This way settings that are related won't get out of sync because they are roamed as a unit instead of individually.</span></span>

## <a name="load-app-settings"></a><span data-ttu-id="29b41-140">Laden von App-Einstellungen</span><span class="sxs-lookup"><span data-stu-id="29b41-140">Load app settings</span></span>

```csharp
// load a setting that is local to the device
ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;
String localValue = localSettings.Values["test setting"] as string;

// load a composite setting that roams between devices
ApplicationDataContainer roamingSettings = Windows.Storage.ApplicationData.Current.RoamingSettings;
Windows.Storage.ApplicationDataCompositeValue composite = (ApplicationDataCompositeValue)roamingSettings.Values["RoamingFontInfo"];
if (composite != null)
{
    String fontName = composite["Font"] as string;
    int fontSize = (int)composite["FontSize"];
}
```

<span data-ttu-id="29b41-141">Laden Sie eine Einstellung aus dem lokalen Gerät, indem Sie zuerst mit `Windows.Storage.ApplicationData.Current.LocalSettings` eine **ApplicationDataContainer**-Instanz für den lokalen Einstellungsdatenspeicher abrufen.</span><span class="sxs-lookup"><span data-stu-id="29b41-141">Load a setting from the local device, by first getting an **ApplicationDataContainer** instance for the local settings data store with `Windows.Storage.ApplicationData.Current.LocalSettings`.</span></span> <span data-ttu-id="29b41-142">Verwenden Sie diese dann zum Abrufen von Schlüssel/Wert-Paaren.</span><span class="sxs-lookup"><span data-stu-id="29b41-142">Then use it to retrieve key/value pairs.</span></span>

<span data-ttu-id="29b41-143">Eine Roamingeinstellung laden Sie nach einem ähnlichen Muster.</span><span class="sxs-lookup"><span data-stu-id="29b41-143">Load a roaming setting by following a similar pattern.</span></span> <span data-ttu-id="29b41-144">Rufen Sie zunächst mit `Windows.Storage.ApplicationData.Current.RoamingSettings` eine **ApplicationDataContainer**-Instanz für den Datenspeicher für Roamingeinstellungen ab.</span><span class="sxs-lookup"><span data-stu-id="29b41-144">First get an **ApplicationDataContainer** instance from the roaming settings data store with `Windows.Storage.ApplicationData.Current.RoamingSettings`.</span></span> <span data-ttu-id="29b41-145">Greifen Sie auf Schlüssel/Wert-Paare dieser Instanz zu.</span><span class="sxs-lookup"><span data-stu-id="29b41-145">Access key/value pairs from that instance.</span></span> <span data-ttu-id="29b41-146">Wenn die Daten noch nicht zu dem Gerät gelangt sind, von dem aus Sie auf die Einstellungen zugreifen, erhalten Sie einen **ApplicationDataContainer** mit dem Wert „null”.</span><span class="sxs-lookup"><span data-stu-id="29b41-146">If the data hasn't roamed yet to the device that you are accessing the settings from, you'll get a null **ApplicationDataContainer**.</span></span> <span data-ttu-id="29b41-147">Daher enthält der obige Beispielcode die Prüfung `if (composite != null)`.</span><span class="sxs-lookup"><span data-stu-id="29b41-147">That's why there is a `if (composite != null)` check in the example code above.</span></span>

## <a name="useful-apis-and-docs"></a><span data-ttu-id="29b41-148">Nützliche APIs und Dokumente</span><span class="sxs-lookup"><span data-stu-id="29b41-148">Useful APIs and docs</span></span>

<span data-ttu-id="29b41-149">Nachfolgend finden Sie eine kurze Zusammenfassung der APIs und anderer nützlicher Dokumentation, die Sie beim Speichern und Laden von App-Einstellungen unterstützen.</span><span class="sxs-lookup"><span data-stu-id="29b41-149">Here is a quick summary of APIs, and other useful documentation, to help get you started saving and loading app settings.</span></span>

### <a name="useful-apis"></a><span data-ttu-id="29b41-150">Nützliche APIs</span><span class="sxs-lookup"><span data-stu-id="29b41-150">Useful APIs</span></span>

| <span data-ttu-id="29b41-151">API</span><span class="sxs-lookup"><span data-stu-id="29b41-151">API</span></span> | <span data-ttu-id="29b41-152">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="29b41-152">Description</span></span> |
|------|---------------|
| [<span data-ttu-id="29b41-153">ApplicationData.LocalSettings</span><span class="sxs-lookup"><span data-stu-id="29b41-153">ApplicationData.LocalSettings</span></span>](https://msdn.microsoft.com/library/windows/apps/windows.storage.applicationdata.temporaryfolder) | <span data-ttu-id="29b41-154">Ruft den Container der Anwendungseinstellungen aus dem lokalen App-Datenspeicher ab.</span><span class="sxs-lookup"><span data-stu-id="29b41-154">Gets the application settings container from the local app data store.</span></span> |
| [<span data-ttu-id="29b41-155">ApplicationData.RoamingSettings</span><span class="sxs-lookup"><span data-stu-id="29b41-155">ApplicationData.RoamingSettings</span></span>](https://docs.microsoft.com/uwp/api/windows.storage.applicationdata.roamingsettings) | <span data-ttu-id="29b41-156">Ruft den Container der Anwendungseinstellungen aus dem Roaming-App-Datenspeicher ab.</span><span class="sxs-lookup"><span data-stu-id="29b41-156">Gets the application settings container from the roaming app data store.</span></span> |
| [<span data-ttu-id="29b41-157">ApplicationDataContainer</span><span class="sxs-lookup"><span data-stu-id="29b41-157">ApplicationDataContainer</span></span>](https://docs.microsoft.com/uwp/api/windows.storage.applicationdatacontainer) | <span data-ttu-id="29b41-158">Ein Container für App-Einstellungen, der das Erstellen, Löschen, Aufzählen und Durchlaufen der Containerhierarchie unterstützt.</span><span class="sxs-lookup"><span data-stu-id="29b41-158">A container for app settings that supports creating, deleting, enumerating, and traversing the container hierarchy.</span></span> |
| [<span data-ttu-id="29b41-159">Windows.UI.ApplicationSettings Namespace</span><span class="sxs-lookup"><span data-stu-id="29b41-159">Windows.UI.ApplicationSettings Namespace</span></span>](https://docs.microsoft.com/uwp/api/windows.ui.applicationsettings) | <span data-ttu-id="29b41-160">Stellt Klassen bereit, mit denen Sie die App-Einstellungen definieren, die im Einstellungsbereich der Windows-Shell angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="29b41-160">Provides classes that you'll use to define the app settings that appear in the settings pane of the Windows shell.</span></span> |

### <a name="useful-docs"></a><span data-ttu-id="29b41-161">Nützliche Dokumente</span><span class="sxs-lookup"><span data-stu-id="29b41-161">Useful docs</span></span>

| <span data-ttu-id="29b41-162">Thema</span><span class="sxs-lookup"><span data-stu-id="29b41-162">Topic</span></span> | <span data-ttu-id="29b41-163">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="29b41-163">Description</span></span> |
|-------|----------------|
| [<span data-ttu-id="29b41-164">Richtlinien für App-Einstellungen</span><span class="sxs-lookup"><span data-stu-id="29b41-164">Guidelines for app settings</span></span>](https://docs.microsoft.com/windows/uwp/design/app-settings/guidelines-for-app-settings) | <span data-ttu-id="29b41-165">Erläutert bewährte Methoden für das Erstellen und Anzeigen von App-Einstellungen.</span><span class="sxs-lookup"><span data-stu-id="29b41-165">Describes best practices for creating and displaying app settings.</span></span> |
| [<span data-ttu-id="29b41-166">Speichern und Abrufen von Einstellungen und anderen App-Daten</span><span class="sxs-lookup"><span data-stu-id="29b41-166">Store and retrieve settings and other app data</span></span>](https://docs.microsoft.com/windows/uwp/design/app-settings/store-and-retrieve-app-data#create-and-read-a-local-file) | <span data-ttu-id="29b41-167">Exemplarische Vorgehensweise zum Speichern und Abrufen von Einstellungen, einschließlich der Roamingeinstellungen.</span><span class="sxs-lookup"><span data-stu-id="29b41-167">Walk-through for saving and retrieving settings, including roaming settings.</span></span> |

## <a name="useful-code-samples"></a><span data-ttu-id="29b41-168">Nützliche Codebeispiele</span><span class="sxs-lookup"><span data-stu-id="29b41-168">Useful code samples</span></span>

| <span data-ttu-id="29b41-169">Codebeispiel</span><span class="sxs-lookup"><span data-stu-id="29b41-169">Code sample</span></span> | <span data-ttu-id="29b41-170">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="29b41-170">Description</span></span> |
|-----------------|---------------|
| [<span data-ttu-id="29b41-171">Beispiel für Anwendungsdaten</span><span class="sxs-lookup"><span data-stu-id="29b41-171">Application data sample</span></span>](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/ApplicationData) | <span data-ttu-id="29b41-172">Szenarien 2-4 mit Fokus auf Einstellungen</span><span class="sxs-lookup"><span data-stu-id="29b41-172">Scenarios 2-4 focus on settings</span></span> |
