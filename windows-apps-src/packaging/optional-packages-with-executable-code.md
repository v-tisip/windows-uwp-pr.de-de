---
title: Optionale Pakete mit ausführbarem Code
description: Erfahren Sie, wie Sie Visual Studio verwenden, um ein optionales Paket mit ausführbarem Code zu erstellen.
ms.date: 09/30/2018
ms.topic: article
keywords: Windows10, UWP, App-Installer, AppInstaller, querladen, zugehörige Gruppe, optionale Pakete
ms.localizationpriority: medium
ms.openlocfilehash: 44e32438034cf09695f313d24055b6ed3c82df0b
ms.sourcegitcommit: 079801609165bc7eb69670d771a05bffe236d483
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/27/2019
ms.locfileid: "9115887"
---
# <a name="optional-packages-with-executable-code"></a><span data-ttu-id="ff9c7-104">Optionale Pakete mit ausführbarem Code</span><span class="sxs-lookup"><span data-stu-id="ff9c7-104">Optional packages with executable code</span></span>
 
<span data-ttu-id="ff9c7-105">Optionale Pakete mit ausführbarem Code eignen sich zum Teilen einer großen oder komplexen App oder zum Hinzufügen zu einer App, die bereits veröffentlicht wurde.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-105">Optional packages with executable code are useful for dividing a large or complex app, or for adding on to an app that's already been published.</span></span> <span data-ttu-id="ff9c7-106">Mit Visual Studio 2017, Version 15.7 und .NET Native 2.1 können Sie ausführbaren Code aus optionalen C++- und C#-Paketen laden.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-106">With Visual Studio 2017, version 15.7 and .NET Native 2.1, you can load executable code from both C++ and C# optional packages.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ff9c7-107">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="ff9c7-107">Prerequisites</span></span>
- <span data-ttu-id="ff9c7-108">Visual Studio 2017, Version 15.7</span><span class="sxs-lookup"><span data-stu-id="ff9c7-108">Visual Studio 2017, version 15.7</span></span>
- <span data-ttu-id="ff9c7-109">Windows10, Version 1709</span><span class="sxs-lookup"><span data-stu-id="ff9c7-109">Windows 10, version 1709</span></span>
- <span data-ttu-id="ff9c7-110">Windows10, Version 1709 SDK</span><span class="sxs-lookup"><span data-stu-id="ff9c7-110">Windows 10, version 1709 SDK</span></span>

<span data-ttu-id="ff9c7-111">Informationen zum Abrufen der aktuellen Entwicklungstools finden Sie unter [Downloads und Tools für Windows10](https://developer.microsoft.com/windows/downloads).</span><span class="sxs-lookup"><span data-stu-id="ff9c7-111">To get the latest development tools, see [Downloads and tools for Windows 10](https://developer.microsoft.com/windows/downloads).</span></span> 

> [!NOTE]
> <span data-ttu-id="ff9c7-112">Um eine App an den Store zu übermitteln, die optionale Pakete und/oder zugehörige Gruppen verwendet, benötigen Sie eine Berechtigung.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-112">To submit an app that uses optional packages and/or related sets to the Store, you will need permission.</span></span> <span data-ttu-id="ff9c7-113">Optionale Pakete und zugehörige Gruppen können für Zeile des Business (LOB) oder Unternehmens-apps ohne Partner Center-Berechtigung verwendet werden, wenn sie nicht an den Store übermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-113">Optional packages and related sets can be used for Line of Business (LOB) or enterprise apps without Partner Center permission if they are not submitted to the Store.</span></span> <span data-ttu-id="ff9c7-114">Informationen zum Erhalt einer Berechtigung, eine App zu übermitteln, die optionale Pakete und zugehörige Gruppen verwendet, finden Sie unter [Windows-Support für Entwickler](https://developer.microsoft.com/windows/support).</span><span class="sxs-lookup"><span data-stu-id="ff9c7-114">See [Windows developer support](https://developer.microsoft.com/windows/support) to get permission to submit an app that uses optional packages and related sets.</span></span>

> [!NOTE]
> <span data-ttu-id="ff9c7-115">Optionale Pakete mit ausführbarem Code müssen eine [Verwandte Gruppe](https://docs.microsoft.com/windows/uwp/packaging/optional-packages#related-sets)gehören.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-115">Optional packages containing executable code must be part of a [related set](https://docs.microsoft.com/windows/uwp/packaging/optional-packages#related-sets).</span></span> <span data-ttu-id="ff9c7-116">Sie kann nicht zur Ausführung von Code über ein optionales Paket, es sei denn, sie Teil einer verwandten Gruppe ist.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-116">You will not be able to execute code from an optional package unless it is part of a related set.</span></span>

## <a name="c-optional-packages-with-executable-code"></a><span data-ttu-id="ff9c7-117">Optionale C++-Pakete mit ausführbarem Code</span><span class="sxs-lookup"><span data-stu-id="ff9c7-117">C++ Optional packages with executable code</span></span>

<span data-ttu-id="ff9c7-118">Informationen zum Laden von Code aus einem optionalen C++-Paket finden Sie im [OptionalPackageSample](https://github.com/AppInstaller/OptionalPackageSample)-Repository auf GitHub.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-118">To load code from a C++ optional package, see the [OptionalPackageSample](https://github.com/AppInstaller/OptionalPackageSample) repository on GitHub.</span></span> <span data-ttu-id="ff9c7-119">[OptionalPackageDLL](https://github.com/AppInstaller/OptionalPackageSample/tree/master/OptionalPackageDLL) zeigt, wie Sie ein Projekt mit Code erstellen, der aus dem Hauptpaket heraus ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-119">The [OptionalPackageDLL](https://github.com/AppInstaller/OptionalPackageSample/tree/master/OptionalPackageDLL) shows how to create a project with code that can be executed from the main package.</span></span> <span data-ttu-id="ff9c7-120">Das Projekt MyMainApp zeigt, wie Sie aus der Datei OptionalPackageDLL.dll [Code laden](https://github.com/AppInstaller/OptionalPackageSample/blob/bf6b4915ff1f3b8abfdaacb1ad9e77184c49fe18/MyMainApp/MainPage.xaml.cpp#L182).</span><span class="sxs-lookup"><span data-stu-id="ff9c7-120">The MyMainApp project demonstrates how to [load code](https://github.com/AppInstaller/OptionalPackageSample/blob/bf6b4915ff1f3b8abfdaacb1ad9e77184c49fe18/MyMainApp/MainPage.xaml.cpp#L182) from the OptionalPackageDLL.dll file.</span></span>

## <a name="c-optional-packages-with-executable-code"></a><span data-ttu-id="ff9c7-121">Optionale C#-Pakete mit ausführbarem Code</span><span class="sxs-lookup"><span data-stu-id="ff9c7-121">C# Optional packages with executable code</span></span>

<span data-ttu-id="ff9c7-122">Um mit dem Erstellen eines optionalen Code-Pakets in C# zu beginnen, befolgen Sie die folgenden Schritte zum Konfigurieren Ihrer Projektmappe:</span><span class="sxs-lookup"><span data-stu-id="ff9c7-122">To get started building an optional code package in C#, follow the below steps to configure your solution:</span></span>

1. <span data-ttu-id="ff9c7-123">Erstellen Sie eine neue UWP-Anwendung mit dem Windows 10 Fall Creators Update-SDK (Build 16299 oder höher) als Mindestversion.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-123">Create a new UWP application with the minimum version set to the Windows 10 Fall Creators Update SDK (Build 16299) or higher.</span></span>

2. <span data-ttu-id="ff9c7-124">Fügen Sie der Projektmappe ein neues Projekt **Optional Code Package (Universal Windows)** hinzu.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-124">Add a new **Optional Code Package (Universal Windows)** project to the solution.</span></span> <span data-ttu-id="ff9c7-125">Stellen Sie sicher, dass **Mindestversion** und **Zielversion** mit der Haupt-App übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-125">Ensure the **Minimum Version** and **Target Version** match that of your main app.</span></span>

3. <span data-ttu-id="ff9c7-126">Wenn Sie Ihre Apps an den Store übermitteln möchten, klicken Sie mit der rechten Maustaste auf beide Projekte, und wählen Sie **Store -> App mit dem Store verknüpfen...**</span><span class="sxs-lookup"><span data-stu-id="ff9c7-126">If you plan to submit your apps to the Store, right click on both projects and select **Store -> Associate App with the Store...**</span></span>

4. <span data-ttu-id="ff9c7-127">Öffnen Sie die `Package.appxmanifest`-Datei der Haupt-App und suchen Sie den `Identity Name`-Wert.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-127">Open the `Package.appxmanifest` file of the main app and find the `Identity Name` value.</span></span> <span data-ttu-id="ff9c7-128">Notieren Sie diesen Wert für den nächsten Schritt.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-128">Make a note of this value for the next step.</span></span>

5. <span data-ttu-id="ff9c7-129">Öffnen Sie die `Package.appxmanifest`-Datei des optionalen App-Pakets und suchen Sie den `uap3:MainAppPackageDependency Name`-Wert.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-129">Open the optional app package's `Package.appxmanifest` file and find the `uap3:MainAppPackageDependency Name` value.</span></span> <span data-ttu-id="ff9c7-130">Ändern Sie den `uap3:MainAppPackageDependency Name`-Wert so, dass er dem `Identity Name`-Wert des Pakets der Haupt-App aus dem vorherigen Schritt entspricht.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-130">Update the `uap3:MainAppPackageDependency Name` value to match the `Identity Name` value of the main app package from the previous step.</span></span> 

    <span data-ttu-id="ff9c7-131">Hier ist ein Beispiel für die `Identity` aus dem `Package.appxmanifest` der Haupt-App.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-131">Here's an example of the `Identity` from the main app's `Package.appxmanifest`.</span></span>
    ```XML
    <Identity Name="12345.MainAppProject" Publisher="CN=PublisherName" Version="1.0.0.0" />
    ```

    <span data-ttu-id="ff9c7-132">Die `uap3:MainPackageDependency` des Pakets der optionalen App muss so geändert werden, dass sie mit der `Identity` der Haupt-App übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-132">The optional app package's `uap3:MainPackageDependency` needs to be updated to match the main app's `Identity`.</span></span>
    ```XML
    <uap3:MainPackageDependency Name="12345.MainAppProjectTest" />
    ```

6. <span data-ttu-id="ff9c7-133">Fügen Sie der Haupt-App eine `Bundle.mapping.txt`-Datei hinzu.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-133">Add a `Bundle.mapping.txt` file to the main app.</span></span> <span data-ttu-id="ff9c7-134">Führen Sie die Schritte in diesem [Zugehörige Gruppen](https://docs.microsoft.com/windows/uwp/packaging/optional-packages#related-sets)-Abschnitt aus, um eine entsprechende Gruppe zu erstellen, die beide Apps enthält.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-134">Follow the steps in this [Related sets](https://docs.microsoft.com/windows/uwp/packaging/optional-packages#related-sets) section to create a related set containing both apps.</span></span> 

7. <span data-ttu-id="ff9c7-135">Erstellen Sie das Projekt für das optionale Paket, und navigieren Sie dann zum Paketreferenzordner in der Buildausgabe unter `..\[PathToOptionalPackageProject]\bin\[architecture]\[configuration]\Reference`.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-135">Build the optional package project and then navigate to the package Reference folder in the output from the build found at `..\[PathToOptionalPackageProject]\bin\[architecture]\[configuration]\Reference`.</span></span> <span data-ttu-id="ff9c7-136">Beachten Sie, dass Sie im Pfad zum Referenzordner eine beliebige Architektur auswählen können, da die Datei `.winmd` (Schritt 8) architekturunabhängig ist.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-136">Note that you can choose any architecture in the path to the Reference folder since the `.winmd` file (step 8) is architecture independent.</span></span>

8. <span data-ttu-id="ff9c7-137">Fügen Sie im Projekt der Haupt-App einen Verweis auf die Datei `.winmd` aus diesem Ordner hinzu.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-137">Add a reference from the main app project to the `.winmd` file found in this folder.</span></span> <span data-ttu-id="ff9c7-138">Jedes Mal, wenn Sie den API-Oberflächenbereich im optionalen Paketprojekt ändern, **muss** diese `.winmd`-Datei aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-138">Every time you change the API surface area in the optional package project, this `.winmd` file **must** be updated.</span></span> <span data-ttu-id="ff9c7-139">Diese Referenz enthält das Projekt für die Haupt-App mit den erforderlichen Informationen zum Kompilieren.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-139">This reference provides the main app project with the necessary information to compile.</span></span>

9. <span data-ttu-id="ff9c7-140">Navigieren Sie im Haupt-App-Projekt zu den Projektbuildeigenschaften, und wählen Sie **Mit .NET Native-Toolkette kompilieren**.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-140">In the main app project, navigate to the project build properties and select **Compile with .NET Native tool chain**.</span></span> <span data-ttu-id="ff9c7-141">Derzeit wird nur das Debuggen in .NET Native zur Erstellung von optionalen Codepaketen in C# unterstützt.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-141">Currently, only debugging in .NET Native is supported for optional code package creation in C#.</span></span> <span data-ttu-id="ff9c7-142">Wechseln Sie zu den Debugeigenschaften des Projekts, und wählen Sie **Optionale Pakete bereitstellen**.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-142">Go to the project debug properties and select **Deploy optional packages**.</span></span> <span data-ttu-id="ff9c7-143">Dadurch wird sichergestellt, dass beide Pakete synchronisiert sind, wenn Sie das Haupt-App-Projekt bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-143">This will ensure that both packages are in sync whenever you deploy the main app project.</span></span>

<span data-ttu-id="ff9c7-144">Sobald Sie mit diesen Schritten fertig sind, können Sie Code zum Projekt für das optionale Paket hinzufügen, als wäre es ein verwaltetes WinRT-Komponentenprojekt.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-144">Once you're finished with these steps, you can add code to the optional package project as if it were a managed WinRT Component project.</span></span> <span data-ttu-id="ff9c7-145">Für den Zugriff auf den Code im Haupt-App-Projekt rufen Sie die öffentlichen Methoden auf, die im Projekt für das optionale Paket verfügbar gemacht werden.</span><span class="sxs-lookup"><span data-stu-id="ff9c7-145">To access the code in the main app project, call the public methods exposed in the optional package project.</span></span>