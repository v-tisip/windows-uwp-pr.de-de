---
description: In diesem Artikel erfahren Sie, wie Sie Ihrer UWP-App (Universelle Windows-Plattform) Drag & Drop hinzufügen.
title: Drag & Drop
ms.assetid: A15ED2F5-1649-4601-A761-0F6C707A8B7E
author: msatranjr
ms.author: misatran
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 7854c0bb541c04ec3cc109ad32ce30ba1c8bd52e
ms.sourcegitcommit: 9f059b37e45099b4314c96a0b604449e966d3c3c
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/04/2018
ms.locfileid: "1704649"
---
# <a name="drag-and-drop"></a><span data-ttu-id="5fa6d-104">Drag & Drop</span><span class="sxs-lookup"><span data-stu-id="5fa6d-104">Drag and drop</span></span>



<span data-ttu-id="5fa6d-105">In diesem Artikel erfahren Sie, wie Sie Ihrer App für die universelle Windows-Plattform (UWP) Drag&Drop hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-105">This article explains how to add dragging and dropping in your Universal Windows Platform (UWP) app.</span></span> <span data-ttu-id="5fa6d-106">Drag&Drop ist ein klassisches, natürliches Interaktionsmodell für Inhalte wie Bilder und Dateien.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-106">Drag and drop is a classic, natural way of interacting with content such as images and files.</span></span> <span data-ttu-id="5fa6d-107">Nach der Implementierung stehen Drag & Drop-Vorgänge für sämtliche Richtungen (App zu App, App zu Desktop und Desktop zu App) zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-107">Once implemented, drag and drop works seamlessly in all directions, including app-to-app, app-to-desktop, and desktop-to app.</span></span>

## <a name="set-valid-areas"></a><span data-ttu-id="5fa6d-108">Festlegen gültiger Bereiche</span><span class="sxs-lookup"><span data-stu-id="5fa6d-108">Set valid areas</span></span>

<span data-ttu-id="5fa6d-109">Verwenden Sie die Eigenschaften [**AllowDrop**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.AllowDrop) und [**CanDrag**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.CanDrag), um die Bereiche der App festzulegen, die für Drag & Drop infrage kommen.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-109">Use the [**AllowDrop**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.AllowDrop) and [**CanDrag**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.CanDrag) properties to designate the areas of your app valid for dragging and dropping.</span></span>

<span data-ttu-id="5fa6d-110">Das folgende Markup veranschaulicht, wie Sie mithilfe von [**AllowDrop**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.AllowDrop) in XAML einen bestimmten Bereich der App als gültig für Dropvorgänge festlegen.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-110">The following markup shows how to set a specific area of the app as valid for dropping by using the [**AllowDrop**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.AllowDrop) in XAML.</span></span> <span data-ttu-id="5fa6d-111">Wenn ein Benutzer versucht, Elemente an anderer Stelle abzulegen, wird dies vom System nicht zugelassen.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-111">If a user tries to drop somewhere else, the system won't let them.</span></span> <span data-ttu-id="5fa6d-112">Wenn Benutzer die Möglichkeit haben sollen, Elemente an einer beliebigen Stelle Ihrer App abzulegen, legen Sie den gesamten Hintergrund als Drop-Ziel fest.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-112">If you want users to be able to drop items anywhere on your app, set the entire background as a drop target.</span></span>

[!code-xml[Main](./code/drag_drop/cs/MainPage.xaml#SnippetDropArea)]

<span data-ttu-id="5fa6d-113">Beim Ziehen sollten Sie in der Regel genau festlegen, was gezogen werden kann.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-113">With dragging, you'll usually want to be specific about what's draggable.</span></span> <span data-ttu-id="5fa6d-114">Benutzer möchten meist nicht alle Elemente Ihrer App ziehen, sondern nur bestimmte Elemente wie beispielsweise Bilder.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-114">Users will want to drag certain items, such as pictures, not everything in your app.</span></span> <span data-ttu-id="5fa6d-115">Nachfolgend sehen Sie, wie Sie [**CanDrag**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.CanDrag) mithilfe von XAML festlegen.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-115">Here's how to set [**CanDrag**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.CanDrag) by using XAML.</span></span>

[!code-xml[Main](./code/drag_drop/cs/MainPage.xaml#SnippetDragArea)]

<span data-ttu-id="5fa6d-116">Sie müssen keine weiteren Aktionen durchführen, um das Ziehen zu ermöglichen, es sei denn, Sie möchten die Benutzeroberfläche anpassen (dies wird später in diesem Artikel behandelt).</span><span class="sxs-lookup"><span data-stu-id="5fa6d-116">You don't need to do any other work to allow dragging, unless you want to customize the UI (which is covered later in this article).</span></span> <span data-ttu-id="5fa6d-117">Das Ablegen erfordert einige weitere Schritte.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-117">Dropping requires a few more steps.</span></span>

## <a name="handle-the-dragover-event"></a><span data-ttu-id="5fa6d-118">Verarbeiten des DragOver-Ereignisses</span><span class="sxs-lookup"><span data-stu-id="5fa6d-118">Handle the DragOver event</span></span>

<span data-ttu-id="5fa6d-119">Das [**DragOver**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.DragOver)-Ereignis wird ausgelöst, wenn ein Benutzer ein Element über Ihre App gezogen, aber noch nicht abgelegt hat.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-119">The [**DragOver**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.DragOver) event fires when a user has dragged an item over your app, but not yet dropped it.</span></span> <span data-ttu-id="5fa6d-120">In diesem Handler müssen Sie mithilfe der [**AcceptedOperation**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.DragEventArgs.AcceptedOperation)-Eigenschaft angeben, welche Art von Vorgängen Ihre App unterstützt.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-120">In this handler, you need to specify what kind of operations your app supports by using the [**AcceptedOperation**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.DragEventArgs.AcceptedOperation) property.</span></span> <span data-ttu-id="5fa6d-121">Kopieren ist der häufigste Vorgang.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-121">Copy is the most common.</span></span>

[!code-cs[Main](./code/drag_drop/cs/MainPage.xaml.cs#SnippetGrid_DragOver)]

## <a name="process-the-drop-event"></a><span data-ttu-id="5fa6d-122">Verarbeiten des Dropereignisses</span><span class="sxs-lookup"><span data-stu-id="5fa6d-122">Process the Drop event</span></span>

<span data-ttu-id="5fa6d-123">Das [**Drop**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.Drop)-Ereignis tritt auf, wenn der Benutzer Elemente in einem gültigen Dropbereich ablegt.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-123">The [**Drop**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.Drop) event occurs when the user releases items in a valid drop area.</span></span> <span data-ttu-id="5fa6d-124">Verarbeiten Sie dieses Ereignis mit der [**DataView**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.DragEventArgs.DataView)-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-124">Process them by using the [**DataView**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.DragEventArgs.DataView) property.</span></span>

<span data-ttu-id="5fa6d-125">Der Einfachheit halber wird im folgenden Beispiel angenommen, dass der Benutzer ein einzelnes Foto abgelegt hat und direkt auf dieses zugreift.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-125">For simplicity in the example below, we'll assume the user dropped a single photo and access it directly.</span></span> <span data-ttu-id="5fa6d-126">In der Praxis können Benutzer mehrere Elemente unterschiedlicher Formate gleichzeitig ablegen.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-126">In reality, users can drop multiple items of varying formats simultaneously.</span></span> <span data-ttu-id="5fa6d-127">Die App sollte diese Möglichkeit bereitstellen, indem sie überprüft, welche Dateitypen abgelegt wurden und wie viele vorhanden sind, und jede entsprechend verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-127">Your app should handle this possibility by checking what types of files were dropped and how many there are, and process each accordingly.</span></span> <span data-ttu-id="5fa6d-128">Sie sollten auch überlegen, ob der Benutzer benachrichtigt werden sollte, wenn er versucht, eine Aktion auszuführen, die die App nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-128">You should also consider notifying the user if they're trying to do something your app doesn't support.</span></span>

[!code-cs[Main](./code/drag_drop/cs/MainPage.xaml.cs#SnippetGrid_Drop)]

## <a name="customize-the-ui"></a><span data-ttu-id="5fa6d-129">Anpassen der Benutzeroberfläche</span><span class="sxs-lookup"><span data-stu-id="5fa6d-129">Customize the UI</span></span>

<span data-ttu-id="5fa6d-130">Das System bietet eine Standardbenutzeroberfläche für Drag&Drop.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-130">The system provides a default UI for dragging and dropping.</span></span> <span data-ttu-id="5fa6d-131">Sie können jedoch auch verschiedene Teile der Benutzeroberfläche anpassen, indem Sie benutzerdefinierte Beschriftungen und Symbole festlegen oder angeben, dass keine Benutzeroberfläche angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-131">However, you can also choose to customize various parts of the UI by setting custom captions and glyphs, or by opting not to show a UI at all.</span></span> <span data-ttu-id="5fa6d-132">Verwenden Sie zum Anpassen der Benutzeroberfläche die [**DragEventArgs.DragUIOverride**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.DragEventArgs.DragUIOverride)-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-132">To customize the UI, use the [**DragEventArgs.DragUIOverride**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.DragEventArgs.DragUIOverride) property.</span></span>

[!code-cs[Main](./code/drag_drop/cs/MainPage.xaml.cs#SnippetGrid_DragOverCustom)]

## <a name="open-a-context-menu-on-an-item-you-can-drag-with-touch"></a><span data-ttu-id="5fa6d-133">Öffnen eines Kontextmenüs für ein Element, das per Toucheingabe gezogen werden kann</span><span class="sxs-lookup"><span data-stu-id="5fa6d-133">Open a context menu on an item you can drag with touch</span></span>

<span data-ttu-id="5fa6d-134">Bei der Toucheingabe erfordern das Ziehen eines [**UI-Elements**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement) und das Öffnen des Kontextmenüs ähnliche Touchgesten. Beide beginnen mit Drücken und Halten.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-134">When using touch, dragging a [**UIElement**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement) and opening its context menu share similar touch gestures; each begins with a press and hold.</span></span> <span data-ttu-id="5fa6d-135">Hier erfahren Sie, wie das System zwischen den beiden Aktionen für Elemente unterscheidet, die beide unterstützen:</span><span class="sxs-lookup"><span data-stu-id="5fa6d-135">Here's how the system disambiguates between the two actions for elements in your app that support both:</span></span> 

* <span data-ttu-id="5fa6d-136">Wenn der Benutzer ein Element drückt und hält und es innerhalb von 500Millisekunden zu ziehen beginnt, wird es gezogen. Das Kontextmenü wird nicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-136">If a user presses and holds an item and begins dragging it within 500 milliseconds, the item is dragged and the context menu is not shown.</span></span> 
* <span data-ttu-id="5fa6d-137">Wenn der Benutzer drückt und hält, jedoch nicht innerhalb von 500Millisekunden zieht, wird das Kontextmenü geöffnet.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-137">If the user presses and holds but does not drag within 500 milliseconds, the context menu is opened.</span></span> 
* <span data-ttu-id="5fa6d-138">Wenn der Benutzer bei geöffnetem Kontextmenü versucht, das Element zu ziehen (ohne den Finger anzuheben), wird das Kontextmenü geschlossen und das Ziehen gestartet.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-138">After the context menu is open, if the user tries to drag the item (without lifting their finger), the context menu is dismissed and the drag will start.</span></span>

## <a name="designate-an-item-in-a-listview-or-gridview-as-a-folder"></a><span data-ttu-id="5fa6d-139">Festlegen eines Elements in einer ListView oder GridView als Ordner</span><span class="sxs-lookup"><span data-stu-id="5fa6d-139">Designate an item in a ListView or GridView as a folder</span></span>

<span data-ttu-id="5fa6d-140">Sie können ein [**ListViewItem**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.ListViewItem) oder [**GridViewItem**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.GridViewItem) als Ordner festlegen.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-140">You can specify a [**ListViewItem**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.ListViewItem) or [**GridViewItem**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.GridViewItem) as a folder.</span></span> <span data-ttu-id="5fa6d-141">Dies ist besonders hilfreich für TreeView- und Datei-Explorer-Szenarien.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-141">This is particularly useful for TreeView and File Explorer scenarios.</span></span> <span data-ttu-id="5fa6d-142">Setzen Sie hierzu für das Element die [**AllowDrop**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.AllowDrop)-Eigenschaft auf **True**.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-142">To do so, explicitly set the [**AllowDrop**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.AllowDrop) property to **True** on that item.</span></span> 

<span data-ttu-id="5fa6d-143">Das System zeigt automatisch die entsprechenden Animationen zum Ablegen in einen Ordner anstelle eines Nicht-Ordner-Elements an.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-143">The system will automatically show the appropriate animations for dropping into a folder versus a non-folder item.</span></span> <span data-ttu-id="5fa6d-144">Der App-Code muss für das Ordnerelement (sowie das Nicht-Ordner-Element) auch weiterhin das Ereignis [**Drop**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.Drop) beinhalten, damit die Datenquelle aktualisiert und das abgelegte Element im Zielordner hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="5fa6d-144">Your app code must continue to handle the [**Drop**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.UIElement.Drop) event on the folder item (as well as on the non-folder item) in order to update the data source and add the dropped item to the target folder.</span></span>

## <a name="see-also"></a><span data-ttu-id="5fa6d-145">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="5fa6d-145">See also</span></span>

* [<span data-ttu-id="5fa6d-146">App-zu-App-Kommunikation</span><span class="sxs-lookup"><span data-stu-id="5fa6d-146">App-to-app communication</span></span>](index.md)
* [<span data-ttu-id="5fa6d-147">AllowDrop</span><span class="sxs-lookup"><span data-stu-id="5fa6d-147">AllowDrop</span></span>](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.uielement.allowdrop.aspx)
* [<span data-ttu-id="5fa6d-148">CanDrag</span><span class="sxs-lookup"><span data-stu-id="5fa6d-148">CanDrag</span></span>](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.uielement.candrag.aspx)
* [<span data-ttu-id="5fa6d-149">DragOver</span><span class="sxs-lookup"><span data-stu-id="5fa6d-149">DragOver</span></span>](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.uielement.dragover.aspx)
* [<span data-ttu-id="5fa6d-150">AcceptedOperation</span><span class="sxs-lookup"><span data-stu-id="5fa6d-150">AcceptedOperation</span></span>](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.drageventargs.acceptedoperation.aspx)
* [<span data-ttu-id="5fa6d-151">DataView</span><span class="sxs-lookup"><span data-stu-id="5fa6d-151">DataView</span></span>](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.drageventargs.dataview.aspx)
* [<span data-ttu-id="5fa6d-152">DragUIOverride</span><span class="sxs-lookup"><span data-stu-id="5fa6d-152">DragUIOverride</span></span>](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.drageventargs.draguioverride.aspx)
* [<span data-ttu-id="5fa6d-153">Drop</span><span class="sxs-lookup"><span data-stu-id="5fa6d-153">Drop</span></span>](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.uielement.drop.aspx)
* [<span data-ttu-id="5fa6d-154">IsDragSource</span><span class="sxs-lookup"><span data-stu-id="5fa6d-154">IsDragSource</span></span>](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.listviewbase.isdragsource.aspx)
