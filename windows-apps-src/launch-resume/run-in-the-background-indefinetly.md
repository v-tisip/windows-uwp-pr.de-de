---
author: TylerMSFT
title: Unbegrenzte Ausführung im Hintergrund
description: Verwenden Sie die extendedExecutionUnconstrained-Funktion im Hintergrund, um eine Hintergrundaufgabe oder eine erweiterte Ausführungssitzung ohne zeitliche Begrenzung auszuführen.
ms.assetid: 6E48B8B6-D3BF-4AE2-85FB-D463C448C9D3
keywords: Hintergrundaufgabe, erweiterte Ausführung, Ressourcen, Beschränkungen, Hintergrundaufgabe
ms.author: twhitney
ms.date: 10/3/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: eb6e0735620c4a940d3414f22aaa4f09bb608424
ms.sourcegitcommit: 753e0a7160a88830d9908b446ef0907cc71c64e7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 10/29/2018
ms.locfileid: "5745490"
---
# <a name="run-in-the-background-indefinitely"></a><span data-ttu-id="41be9-104">Unbegrenzte Ausführung im Hintergrund</span><span class="sxs-lookup"><span data-stu-id="41be9-104">Run in the background indefinitely</span></span>

<span data-ttu-id="41be9-105">Um Benutzern die bestmögliche Erfahrung zu bieten, erzwingt Windows Ressourcenbeschränkungen für universelle Windows-Plattform (UWP)-Apps.</span><span class="sxs-lookup"><span data-stu-id="41be9-105">To provide the best experience for users, Windows imposes resource limits on Universal Windows Platform (UWP) apps.</span></span> <span data-ttu-id="41be9-106">Vordergrund-Apps erhalten den größten Arbeitsspeicher und die meiste Ausführungszeit; bei Hintergrund-Apps wird dies eingeschränkt.</span><span class="sxs-lookup"><span data-stu-id="41be9-106">Foreground apps are given the most memory and execution time; background apps get less.</span></span> <span data-ttu-id="41be9-107">Benutzer sind daher vor einer schlechten Vordergrund-App-Leistung und einem hohen Akkuverbrauch geschützt.</span><span class="sxs-lookup"><span data-stu-id="41be9-107">Users are thus protected from poor foreground app performance and heavy battery drain.</span></span>

<span data-ttu-id="41be9-108">Entwickler, die allerdings UWP-Apps für den persönlichen Gebrauch schreiben (d.h. quergeladene Apps, die im Microsoft Store nicht veröffentlicht werden), oder Entwickler von Unternehmens-UWP-Apps sollten alle verfügbaren Ressourcen auf dem Gerät nutzen, ohne Einschränkung für den Hintergrund oder die erweiterte Ausführung.</span><span class="sxs-lookup"><span data-stu-id="41be9-108">However, developers writing UWP apps for personal use (that is, side loaded apps that won't be published in the Microsoft Store), or developers writing Enterprise UWP apps, may want to use all resources available on the device without any background or extended execution throttling.</span></span> <span data-ttu-id="41be9-109">Geschäftssparten und persönliche UWP-Apps können die APIs im Windows Creators Update (Version 1703) verwenden, um die Einschränkung zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="41be9-109">Line of business and personal UWP applications can use APIs in the Windows Creators Update (version 1703) to turn off throttling.</span></span> <span data-ttu-id="41be9-110">Beachten Sie, dass Sie keine App m Microsoft Store anbieten können, die diese APIs verwendet.</span><span class="sxs-lookup"><span data-stu-id="41be9-110">Be aware that you can't put an app into the Microsoft Store if it uses these APIs.</span></span>

## <a name="run-while-minimized"></a><span data-ttu-id="41be9-111">Ausführen bei Minimierung</span><span class="sxs-lookup"><span data-stu-id="41be9-111">Run while minimized</span></span>

<span data-ttu-id="41be9-112">UWP-Apps werden in den angehaltenen Zustand versetzt, wenn sie nicht im Vordergrund ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="41be9-112">UWP apps move to a suspended state when they are not running in the foreground.</span></span> <span data-ttu-id="41be9-113">Auf dem Desktop tritt dies ein, wenn ein Benutzer die App minimiert.</span><span class="sxs-lookup"><span data-stu-id="41be9-113">On desktop, this occurs when a user minimizes the app.</span></span> <span data-ttu-id="41be9-114">Apps verwenden eine erweiterte Ausführungssitzung, um auch während sie minimiert sind ausgeführt zu werden.</span><span class="sxs-lookup"><span data-stu-id="41be9-114">Apps use an extended execution session in order to continue running while minimized.</span></span> <span data-ttu-id="41be9-115">Die erweiterten Ausführungs-APIs, die vom Microsoft Store akzeptiert werden, werden ausführlich unter [Verschieben der angehaltenen App mithilfe der erweiterten Ausführung](https://docs.microsoft.com/windows/uwp/launch-resume/run-minimized-with-extended-execution) erklärt.</span><span class="sxs-lookup"><span data-stu-id="41be9-115">The extended execution APIs that are accepted by the Microsoft Store are detailed in [Postpone app suspension with extended execution](https://docs.microsoft.com/windows/uwp/launch-resume/run-minimized-with-extended-execution).</span></span>

<span data-ttu-id="41be9-116">Wenn Sie eine App entwickeln, die nicht für die Übermittlung an den Microsoft Store gedacht ist, können Sie die eingeschränkte Funktion [ExtendedExecutionForegroundSession](https://docs.microsoft.com/uwp/api/windows.applicationmodel.extendedexecution.foreground.extendedexecutionforegroundsession) mit der `extendedExecutionUnconstrained` verwenden, damit Ihre App ausgeführt wird, während sie minimiert ist, unabhängig vom Stromverbrauch des Geräts.</span><span class="sxs-lookup"><span data-stu-id="41be9-116">If you are developing an app that is not intended to be submitted into the Microsoft Store, then you can use the [ExtendedExecutionForegroundSession](https://docs.microsoft.com/uwp/api/windows.applicationmodel.extendedexecution.foreground.extendedexecutionforegroundsession) with the `extendedExecutionUnconstrained` restricted capability so that your app can continue to run while minimized, regardless of the energy state of the device.</span></span>  

<span data-ttu-id="41be9-117">Die `extendedExecutionUnconstrained`-Funktion wird als eingeschränkte Funktion im App-Manifest hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="41be9-117">The `extendedExecutionUnconstrained` capability is added as a restricted capability in your app's manifest.</span></span> <span data-ttu-id="41be9-118">Weitere Informationen zu eingeschränkten Funktionen finden Sie unter [Deklarationen von App-Funktionen](https://docs.microsoft.com/windows/uwp/packaging/app-capability-declarations).</span><span class="sxs-lookup"><span data-stu-id="41be9-118">See [App capability declarations](https://docs.microsoft.com/windows/uwp/packaging/app-capability-declarations) for more information about restricted capabilities.</span></span>

_<span data-ttu-id="41be9-119">Package.appxmanifest</span><span class="sxs-lookup"><span data-stu-id="41be9-119">Package.appxmanifest</span></span>_
```xml
<Package ...>
...
  <Capabilities>  
    <rescap:Capability Name="extendedExecutionUnconstrained"/>  
  </Capabilities>  
</Package>
```

<span data-ttu-id="41be9-120">Bei Verwendung der `extendedExecutionUnconstrained`-Funktion, werden [ExtendedExecutionForegroundSession](https://docs.microsoft.com/uwp/api/windows.applicationmodel.extendedexecution.foreground.extendedexecutionforegroundsession) und [ExtendedExecutionForegroundReason](https://docs.microsoft.com/en-us/uwp/api/windows.applicationmodel.extendedexecution.foreground.extendedexecutionforegroundreason) verwendet anstatt von [ExtendedExecutionSession](https://docs.microsoft.com/uwp/api/windows.applicationmodel.extendedexecution.extendedexecutionsession) und [ExtendedExecutionReason](https://docs.microsoft.com/uwp/api/windows.applicationmodel.extendedexecution.extendedexecutionreason).</span><span class="sxs-lookup"><span data-stu-id="41be9-120">When you use the `extendedExecutionUnconstrained` capability, [ExtendedExecutionForegroundSession](https://docs.microsoft.com/uwp/api/windows.applicationmodel.extendedexecution.foreground.extendedexecutionforegroundsession) and [ExtendedExecutionForegroundReason](https://docs.microsoft.com/en-us/uwp/api/windows.applicationmodel.extendedexecution.foreground.extendedexecutionforegroundreason) are used rather than [ExtendedExecutionSession](https://docs.microsoft.com/uwp/api/windows.applicationmodel.extendedexecution.extendedexecutionsession) and [ExtendedExecutionReason](https://docs.microsoft.com/uwp/api/windows.applicationmodel.extendedexecution.extendedexecutionreason).</span></span> <span data-ttu-id="41be9-121">Das gleiche Muster zum Erstellen der Sitzung, Einrichten von Mitgliedern und zum Anfordern der asynchronen Erweiterung ist trotzdem gültig:</span><span class="sxs-lookup"><span data-stu-id="41be9-121">The same pattern for creating the session, setting members, and requesting the extension asynchronously still applies:</span></span> 

```cs
var newSession = new ExtendedExecutionForegroundSession();  
newSession.Reason = ExtendedExecutionForegroundReason.Unconstrained;  
newSession.Description = "Long Running Processing";  
newSession.Revoked += SessionRevoked;  
ExtendedExecutionResult result = await newSession.RequestExtensionAsync();  
switch (result)  
{  
    case ExtendedExecutionResult.Allowed:  
        DoLongRunningWork();  
        break;  

    default:  
    case ExtendedExecutionResult.Denied:  
        DoShortRunningWork();  
        break;  
}
```

<span data-ttu-id="41be9-122">Sie können diese erweiterte Ausführungssitzung anfordern, sobald die App in den Vordergrund geholt wird.</span><span class="sxs-lookup"><span data-stu-id="41be9-122">You can request this extended execution session as soon as the app comes to the foreground.</span></span> <span data-ttu-id="41be9-123">Uneingeschränkte erweiterte Ausführungssitzungen sind nicht durch Energie-Kontingente oder durch den Stromsparmodus des Betriebssystems eingeschränkt.</span><span class="sxs-lookup"><span data-stu-id="41be9-123">Unconstrained extended execution sessions are not limited by energy quotas or by the operating system battery saver.</span></span> <span data-ttu-id="41be9-124">Solange ein Verweis auf das Sitzungsobjekt vorhanden ist, bleibt die App im ausgeführten Zustand und geht nicht in den angehaltenen Zustand über.</span><span class="sxs-lookup"><span data-stu-id="41be9-124">As long as a reference to the session object exists, the app will stay in the running state and not enter the suspended state.</span></span> <span data-ttu-id="41be9-125">Wenn die App vom Benutzer geschlossen wird, wird die Sitzung gesperrt.</span><span class="sxs-lookup"><span data-stu-id="41be9-125">If the app is closed by the user, the session will be revoked.</span></span>

<span data-ttu-id="41be9-126">Das Registrieren eines **gesperrten** Ereignisses ermöglicht Ihrer App alle erforderlichen Bereinigungen durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="41be9-126">Registering for the **Revoked** event will enable your app to do any cleanup work required.</span></span> <span data-ttu-id="41be9-127">Im angehaltenen Zustand können Sie eine erweiterte Ausführungssitzung mit [ExtendedExecutionReason.SavingData](https://docs.microsoft.com/uwp/api/windows.applicationmodel.extendedexecution.extendedexecutionreason) erstellen, um Benutzerdaten zu speichern, bevor die App beendet und aus dem Speicher entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="41be9-127">In the suspending state, you can create an extended execution session with   [ExtendedExecutionReason.SavingData](https://docs.microsoft.com/uwp/api/windows.applicationmodel.extendedexecution.extendedexecutionreason) to save user data before the app is terminated and removed from memory.</span></span>

## <a name="run-background-tasks-indefinitely"></a><span data-ttu-id="41be9-128">Unbegrenzte Ausführung von Hintergrundaufgaben</span><span class="sxs-lookup"><span data-stu-id="41be9-128">Run background tasks indefinitely</span></span>

<span data-ttu-id="41be9-129">In der universellen Windows-Plattform werden Hintergrundaufgaben als Prozesse bezeichnet, die im Hintergrund ohne jede Benutzeroberfläche ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="41be9-129">In the Universal Windows Platform, background tasks are processes that run in the background without any form of user interface.</span></span> <span data-ttu-id="41be9-130">Hintergrundaufgaben werden in der Regel maximal 25Sekunden ausgeführt, bevor sie abgebrochen werden.</span><span class="sxs-lookup"><span data-stu-id="41be9-130">Background tasks may generally run for a maximum of twenty-five seconds before they are cancelled.</span></span> <span data-ttu-id="41be9-131">Einige zeitintensivere Aufgaben enthalten ebenfalls eine Überprüfung, um sicherzustellen, dass die Hintergrundaufgabe sich nicht im Leerlauf oder mit Speicher befindet.</span><span class="sxs-lookup"><span data-stu-id="41be9-131">Some of the longer-running tasks also have a check to ensure that the background task is not sitting idle or using memory.</span></span> <span data-ttu-id="41be9-132">Im Windows Creators Update (Version 1703), wurde die eingeschränkte Funktion [extendedBackgroundTaskTime](https://docs.microsoft.com/windows/uwp/packaging/app-capability-declarations) eingeführt, um diese Einschränkungen zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="41be9-132">In the Windows Creators Update (version 1703), the [extendedBackgroundTaskTime](https://docs.microsoft.com/windows/uwp/packaging/app-capability-declarations) restricted capability was introduced to remove these limits.</span></span> <span data-ttu-id="41be9-133">Die **extendedBackgroundTaskTime**-Funktion wird als eingeschränkte Funktion im App-Manifest hinzugefügt:</span><span class="sxs-lookup"><span data-stu-id="41be9-133">The **extendedBackgroundTaskTime** capability is added as a restricted capability in your app's manifest file:</span></span>

_<span data-ttu-id="41be9-134">Package.appxmanifest</span><span class="sxs-lookup"><span data-stu-id="41be9-134">Package.appxmanifest</span></span>_
```xml
<Package ...>
   <Capabilities>  
       <rescap:Capability Name="extendedBackgroundTaskTime"/>  
   </Capabilities>  
</Package>
```

<span data-ttu-id="41be9-135">Diese Funktion entfernt die Einschränkungen der Ausführungszeit und den Überwachungsdienst der Leerlaufaufgaben.</span><span class="sxs-lookup"><span data-stu-id="41be9-135">This capability removes execution time limitations and the idle task watchdog.</span></span> <span data-ttu-id="41be9-136">Sobald eine Hintergrundaufgabe gestartet wurde, sei es durch einen Trigger oder einen Aufruf des App-Diensts, kann diese unbegrenzt ausgeführt werden, nachdem eine Verzögerung auf der [BackgroundTaskInstance](https://docs.microsoft.com/uwp/api/Windows.ApplicationModel.Background.IBackgroundTaskInstance) durch die **Run**-Methode bereitgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="41be9-136">Once a background task has started, whether by a trigger or an app service call, once it takes a deferral on the [BackgroundTaskInstance](https://docs.microsoft.com/uwp/api/Windows.ApplicationModel.Background.IBackgroundTaskInstance) provided by the **Run** method, it can run indefinitely.</span></span> <span data-ttu-id="41be9-137">Wenn die App auf **Von Windows verwaltet** festgelegt wurde, kann möglicherweise noch ein Energiekontingent angewendet werden und die Hintergrundaufgaben werden nicht aktiviert, wenn der Stromsparmodus aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="41be9-137">If the app is set to **Managed By Windows**, then it still may have an energy quota applied to it, and its background tasks will not activated when Battery Saver is active.</span></span><span data-ttu-id="41be9-138">Dies kann in den OS-Einstellungen geändert werden.</span><span class="sxs-lookup"><span data-stu-id="41be9-138"> This can be changed with OS settings.</span></span> <span data-ttu-id="41be9-139">Weitere Informationen finden Sie unter [Optimieren von Hintergrundaktivitäten](https://docs.microsoft.com/windows/uwp/debug-test-perf/optimize-background-activity).</span><span class="sxs-lookup"><span data-stu-id="41be9-139">More information is available in [Optimizing Background Activity](https://docs.microsoft.com/windows/uwp/debug-test-perf/optimize-background-activity).</span></span>

<span data-ttu-id="41be9-140">Die universelle Windows-Plattform überwacht die Aufgabenausführung im Hintergrund, um eine gute Akkulaufzeit und eine reibungslose Vordergrund-App-Umgebung zu gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="41be9-140">The Universal Windows Platform monitors background task execution to ensure good battery life and a smooth foreground app experience.</span></span> <span data-ttu-id="41be9-141">Persönliche Apps und branchenspezifische Unternehmens-Apps können jedoch die erweiterte Ausführung und die **extendedBackgroundTaskTime**-Funktion zum Erstellen von Apps verwenden, die solange wie notwendig und unabhängig von der Verfügbarkeit des Geräts ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="41be9-141">However, personal apps and Enterprise line-of-Business apps can use extended execution and the **extendedBackgroundTaskTime** capability to create apps that will run as long as needed regardless of the device's resource availability.</span></span>

<span data-ttu-id="41be9-142">Beachten Sie, das die **extendedExecutionUnconstrained** und **extendedBackgroundTaskTime**-Funktionen die Standardrichtlinie für UWP-Apps überschreiben können und einen erheblichen Akkuverbrauch verursachen können.</span><span class="sxs-lookup"><span data-stu-id="41be9-142">Be aware that the **extendedExecutionUnconstrained** and **extendedBackgroundTaskTime** capabilities can override default policy for UWP apps and may cause significant battery drain.</span></span> <span data-ttu-id="41be9-143">Bestätigen Sie vor der Nutzung dieser Funktionen, dass die Richtlinien für die standardmäßige erweiterte Ausführung und die Hintergrundaufgabenzeit nicht Ihren Bedürfnissen entspricht und führen Sie unter Umständen Tests in einer Umgebung mit eingeschränktem Akku aus, um die Auswirkungen zu verstehen, die Ihre App auf ein Gerät hat.</span><span class="sxs-lookup"><span data-stu-id="41be9-143">Before using these capabilities, first confirm that the default extended execution and background task time policies do not meet your needs and perform testing in battery-constrained conditions to understand the impact your app will have on a device.</span></span>

## <a name="see-also"></a><span data-ttu-id="41be9-144">Weitere Informationen:</span><span class="sxs-lookup"><span data-stu-id="41be9-144">See also</span></span>

[<span data-ttu-id="41be9-145">Hintergrund Aufgaben-Ressourceeinschränkungen entfernen</span><span class="sxs-lookup"><span data-stu-id="41be9-145">Remove background task resource restrictions</span></span>](https://docs.microsoft.com/windows/application-management/enterprise-background-activity-controls)
