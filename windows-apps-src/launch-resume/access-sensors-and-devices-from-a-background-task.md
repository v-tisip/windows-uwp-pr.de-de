---
author: muhsinking
title: Zugreifen auf Sensoren und Geräte von einer Hintergrundaufgabe
description: Mit DeviceUseTrigger kann Ihre universelle Windows-App im Hintergrund auf Sensoren und Peripheriegeräte zugreifen. Dies ist selbst dann möglich, wenn die Vordergrund-App angehalten wird.
ms.assetid: B540200D-9FF2-49AF-A224-50877705156B
ms.author: mukin
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, Uwp, Hintergrundaufgabe, für die
ms.localizationpriority: medium
ms.openlocfilehash: 1666d64c26c8ccfecda142e50f2e672d0f4c8864
ms.sourcegitcommit: 71e8eae5c077a7740e5606298951bb78fc42b22c
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/14/2018
ms.locfileid: "6673315"
---
# <a name="access-sensors-and-devices-from-a-background-task"></a><span data-ttu-id="e6984-104">Zugreifen auf Sensoren und Geräte mittels einer Hintergrundaufgabe</span><span class="sxs-lookup"><span data-stu-id="e6984-104">Access sensors and devices from a background task</span></span>




<span data-ttu-id="e6984-105">[**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) ermöglicht Ihrer universellen Windows-App, im Hintergrund auf Sensoren und Peripheriegeräte zuzugreifen, selbst dann, wenn die Vordergrund-App angehalten wurde.</span><span class="sxs-lookup"><span data-stu-id="e6984-105">[**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) lets your Universal Windows app access sensors and peripheral devices in the background, even when your foreground app is suspended.</span></span> <span data-ttu-id="e6984-106">Je nachdem, wo Ihre App ausgeführt wird, kann sie eine Hintergrundaufgabe zum Synchronisieren von Daten mit Geräten oder zum Überwachen von Sensoren verwenden.</span><span class="sxs-lookup"><span data-stu-id="e6984-106">For example, depending on where your app is running, it could use a background task to synchronize data with devices or monitor sensors.</span></span> <span data-ttu-id="e6984-107">Zur Verbesserung der Akkulaufzeit und Sicherstellung der Zustimmung durch den Benutzer unterliegt die Nutzung von [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) den Richtlinien, die in diesem Thema beschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="e6984-107">To help preserve battery life and ensure the appropriate user consent, the use of [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) is subject to policies that are described in this topic.</span></span>

<span data-ttu-id="e6984-108">Erstellen Sie zum Zugreifen auf Sensoren oder Peripheriegeräte im Hintergrund eine Hintergrundaufgabe, für die [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e6984-108">To access sensors or peripheral devices in the background, create a background task that uses the [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337).</span></span> <span data-ttu-id="e6984-109">Ein Beispiel für die Vorgehensweise auf einem PC finden Sie unter [Beispiel für ein benutzerdefiniertes USB-Gerät](http://go.microsoft.com/fwlink/p/?LinkId=301975 ).</span><span class="sxs-lookup"><span data-stu-id="e6984-109">For an example that shows how this is done on a PC, see the [Custom USB device sample](http://go.microsoft.com/fwlink/p/?LinkId=301975 ).</span></span> <span data-ttu-id="e6984-110">Ein Beispiel für ein Smartphone finden Sie unter [Beispiel für Hintergrundsensoren](http://go.microsoft.com/fwlink/p/?LinkId=393307).</span><span class="sxs-lookup"><span data-stu-id="e6984-110">For an example on a phone, see the [Background Sensors sample](http://go.microsoft.com/fwlink/p/?LinkId=393307).</span></span>

> [!Important]
> <span data-ttu-id="e6984-111">**DeviceUseTrigger** kann nicht für In-Process-Hintergrundaufgaben verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="e6984-111">**DeviceUseTrigger** cannot be used with in-process background tasks.</span></span> <span data-ttu-id="e6984-112">Die Informationen in diesem Thema gelten nur für Out-of-Process-Hintergrundaufgaben.</span><span class="sxs-lookup"><span data-stu-id="e6984-112">The info in this topic only applies to background tasks that run out-of-process.</span></span>

## <a name="device-background-task-overview"></a><span data-ttu-id="e6984-113">Hintergrundaufgabe für Geräte – Übersicht</span><span class="sxs-lookup"><span data-stu-id="e6984-113">Device background task overview</span></span>

<span data-ttu-id="e6984-114">Wenn Ihre App für den Benutzer nicht mehr sichtbar ist, wird die App von Windows angehalten oder beendet, um Arbeitsspeicher und CPU-Ressourcen freizugeben.</span><span class="sxs-lookup"><span data-stu-id="e6984-114">When your app is no longer visible to the user, Windows will suspend or terminate your app to reclaim memory and CPU resources.</span></span> <span data-ttu-id="e6984-115">Dies ermöglicht anderen Apps die Ausführung im Vordergrund und reduziert den Stromverbrauch.</span><span class="sxs-lookup"><span data-stu-id="e6984-115">This allows other apps to run in the foreground and reduces battery consumption.</span></span> <span data-ttu-id="e6984-116">In diesem Fall wären alle laufenden Datenereignisse ohne die Hilfe einer Hintergrundaufgabe verloren.</span><span class="sxs-lookup"><span data-stu-id="e6984-116">When this happens, without the help of a background task, any ongoing data events will be lost.</span></span> <span data-ttu-id="e6984-117">Windows stellt den Trigger für die Hintergrundaufgabe bereit: [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337). Damit kann Ihre App lange Synchronisierungs- und Überwachungsvorgänge auf Geräten und Sensoren auch dann sicher im Hintergrund ausführen, wenn Ihre App angehalten wurde.</span><span class="sxs-lookup"><span data-stu-id="e6984-117">Windows provides the background task trigger, [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337), to let your app perform long running sync and monitoring operations on devices and sensors safely in the background, even if your app is suspended.</span></span> <span data-ttu-id="e6984-118">Weitere Informationen zum App-Lebenszyklus finden Sie unter [Starten, Fortsetzen und Hintergrundaufgaben](index.md).</span><span class="sxs-lookup"><span data-stu-id="e6984-118">For more info about app lifecycle, see [Launching, resuming, and background tasks](index.md).</span></span> <span data-ttu-id="e6984-119">Weitere Informationen zu Hintergrundaufgaben finden Sie unter [Unterstützen von Apps durch Hintergrundaufgaben](support-your-app-with-background-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="e6984-119">For more about background tasks, see [Support your app with background tasks](support-your-app-with-background-tasks.md).</span></span>

<span data-ttu-id="e6984-120">**Hinweis:** In einer universellen Windows-app Synchronisieren eines Geräts im Hintergrund erfordert, dass der Benutzer Hintergrund Synchronisierung von Ihrer app genehmigt hat.</span><span class="sxs-lookup"><span data-stu-id="e6984-120">**Note**In a Universal Windows app, syncing a device in the background requires that your user has approved background syncing by your app.</span></span> <span data-ttu-id="e6984-121">Das Gerät muss – mit E/A-Aktivierung – auch mit dem PC verbunden oder gekoppelt sein und kann maximal zehn Minuten lang Aktivitäten im Hintergrund ausführen.</span><span class="sxs-lookup"><span data-stu-id="e6984-121">The device must also be connected to or paired with the PC, with active I/O, and is allowed a maximum of 10 minutes of background activity.</span></span> <span data-ttu-id="e6984-122">Weitere Details zur Richtlinienerzwingung sind weiter unten in diesem Thema beschrieben.</span><span class="sxs-lookup"><span data-stu-id="e6984-122">More detail on policy enforcement is described later in this topic.</span></span>

### <a name="limitation-critical-device-operations"></a><span data-ttu-id="e6984-123">Einschränkung: Kritische Gerätevorgänge</span><span class="sxs-lookup"><span data-stu-id="e6984-123">Limitation: critical device operations</span></span>

<span data-ttu-id="e6984-124">Einige kritische Gerätevorgänge (wie etwa zeitaufwändige Firmwareupdates) können mithilfe von [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) nicht durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e6984-124">Some critical device operations, such as long running firmware updates, cannot be performed with the [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337).</span></span> <span data-ttu-id="e6984-125">Diese Vorgänge können nur auf dem PC und nur von einer privilegierten App durchgeführt werden, für die [**DeviceServicingTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297315) verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e6984-125">Such operations can be performed only on the PC, and only by a privileged app that uses the [**DeviceServicingTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297315).</span></span> <span data-ttu-id="e6984-126">Eine *privilegierte App* ist eine App, die vom Gerätehersteller dafür autorisiert wurde, diese Vorgänge auszuführen.</span><span class="sxs-lookup"><span data-stu-id="e6984-126">A *privileged app* is an app that the device's manufacturer has authorized to perform those operations.</span></span> <span data-ttu-id="e6984-127">Mithilfe von Metadaten wird angegeben, welche App, falls zutreffend, als privilegierte App für ein Gerät festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="e6984-127">Device metadata is used to specify which app, if any, has been designated as the privileged app for a device.</span></span> <span data-ttu-id="e6984-128">Weitere Informationen finden Sie unter [Gerätesynchronisierung und -update für Microsoft Store-Geräte-Apps](http://go.microsoft.com/fwlink/p/?LinkId=306619).</span><span class="sxs-lookup"><span data-stu-id="e6984-128">For more info, see [Device sync and update for Microsoft Store device apps](http://go.microsoft.com/fwlink/p/?LinkId=306619).</span></span>

## <a name="protocolsapis-supported-in-a-deviceusetrigger-background-task"></a><span data-ttu-id="e6984-129">In einer DeviceUseTrigger-Hintergrundaufgabe unterstützte Protokolle/APIs</span><span class="sxs-lookup"><span data-stu-id="e6984-129">Protocols/APIs supported in a DeviceUseTrigger background task</span></span>

<span data-ttu-id="e6984-130">Hintergrundaufgaben mit [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) ermöglichen Ihrer App die Kommunikation über viele Protokolle/APIs. Die meisten davon werden von den vom System ausgelösten Hintergrundaufgaben nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="e6984-130">Background tasks that use [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) let your app communicate over many protocols/APIs, most of which aren't supported by system-triggered background tasks.</span></span> <span data-ttu-id="e6984-131">Folgende Protokolle werden von einer universellen Windows-App unterstützt.</span><span class="sxs-lookup"><span data-stu-id="e6984-131">The following are supported on a Universal Windows app.</span></span>

| <span data-ttu-id="e6984-132">Protokoll</span><span class="sxs-lookup"><span data-stu-id="e6984-132">Protocol</span></span>         | <span data-ttu-id="e6984-133">DeviceUseTrigger in einer universellen Windows-App</span><span class="sxs-lookup"><span data-stu-id="e6984-133">DeviceUseTrigger in a Universal Windows app</span></span>                                                                                                                                                    |
|------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
| <span data-ttu-id="e6984-134">USB</span><span class="sxs-lookup"><span data-stu-id="e6984-134">USB</span></span>              | ![Dieses Protokoll wird unterstützt.](images/ap-tools.png)                                                                                                                                            |
| <span data-ttu-id="e6984-136">HID</span><span class="sxs-lookup"><span data-stu-id="e6984-136">HID</span></span>              | ![Dieses Protokoll wird unterstützt.](images/ap-tools.png)                                                                                                                                            |
| <span data-ttu-id="e6984-138">Bluetooth RFCOMM</span><span class="sxs-lookup"><span data-stu-id="e6984-138">Bluetooth RFCOMM</span></span> | ![Dieses Protokoll wird unterstützt.](images/ap-tools.png)                                                                                                                                            |
| <span data-ttu-id="e6984-140">Bluetooth GATT</span><span class="sxs-lookup"><span data-stu-id="e6984-140">Bluetooth GATT</span></span>   | ![Dieses Protokoll wird unterstützt.](images/ap-tools.png)                                                                                                                                            |
| <span data-ttu-id="e6984-142">MTP</span><span class="sxs-lookup"><span data-stu-id="e6984-142">MTP</span></span>              | ![Dieses Protokoll wird unterstützt.](images/ap-tools.png)                                                                                                                                            |
| <span data-ttu-id="e6984-144">Netzwerk (drahtgebunden)</span><span class="sxs-lookup"><span data-stu-id="e6984-144">Network wired</span></span>    | ![Dieses Protokoll wird unterstützt.](images/ap-tools.png)                                                                                                                                            |
| <span data-ttu-id="e6984-146">Netzwerk (WLAN)</span><span class="sxs-lookup"><span data-stu-id="e6984-146">Network Wi-Fi</span></span>    | ![Dieses Protokoll wird unterstützt.](images/ap-tools.png)                                                                                                                                            |
| <span data-ttu-id="e6984-148">IDeviceIOControl</span><span class="sxs-lookup"><span data-stu-id="e6984-148">IDeviceIOControl</span></span> | ![DeviceServicingTrigger unterstützt IDeviceIOControl.](images/ap-tools.png)                                                                                                                       |
| <span data-ttu-id="e6984-150">Sensor-API</span><span class="sxs-lookup"><span data-stu-id="e6984-150">Sensors API</span></span>      | ![<span data-ttu-id="e6984-151">](images/ap-tools.png)deviceservicingtrigger supports universal sensors apis[ (auf Sensoren der ](https://msdn.microsoft.com/library/windows/apps/dn894631)universellen Gerätefamilie beschränkt)</span><span class="sxs-lookup"><span data-stu-id="e6984-151">deviceservicingtrigger supports universal sensors apis](images/ap-tools.png) (limited to sensors in the [universal device family](https://msdn.microsoft.com/library/windows/apps/dn894631))</span></span> |

## <a name="registering-background-tasks-in-the-app-package-manifest"></a><span data-ttu-id="e6984-152">Registrieren von Hintergrundaufgaben im App-Paketmanifest</span><span class="sxs-lookup"><span data-stu-id="e6984-152">Registering background tasks in the app package manifest</span></span>

<span data-ttu-id="e6984-153">Ihre App führt Synchronisierungs- und Aktualisierungsvorgänge in Code durch, der als Teil einer Hintergrundaufgabe ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="e6984-153">Your app will perform sync and update operations in code that runs as part of a background task.</span></span> <span data-ttu-id="e6984-154">Dieser Code ist in eine Windows-Runtime-Klasse eingebettet, mit der [**IBackgroundTask**](https://msdn.microsoft.com/library/windows/apps/br224794) implementiert wird (oder auf einer dedizierten JavaScript-Seite für JavaScript-Apps).</span><span class="sxs-lookup"><span data-stu-id="e6984-154">This code is embedded in a Windows Runtime class that implements [**IBackgroundTask**](https://msdn.microsoft.com/library/windows/apps/br224794) (or in a dedicated JavaScript page for JavaScript apps).</span></span> <span data-ttu-id="e6984-155">Zum Verwenden einer [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337)-Hintergrundaufgabe muss Ihre App diese in der App-Manifestdatei einer Vordergrund-App deklarieren, wie dies auch für vom System ausgelöste Hintergrundaufgaben erfolgt.</span><span class="sxs-lookup"><span data-stu-id="e6984-155">To use a [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) background task, your app must declare it in the app manifest file of a foreground app, like it does for system-triggered background tasks.</span></span>

<span data-ttu-id="e6984-156">In diesem Beispiel für eine App-Paketmanifestdatei ist **DeviceLibrary.SyncContent** der Einstiegspunkt für eine Hintergrundaufgabe, die [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) verwendet.</span><span class="sxs-lookup"><span data-stu-id="e6984-156">In this example of an app package manifest file, **DeviceLibrary.SyncContent** is the entry point for a background task that uses the [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337).</span></span>

```xml
<Extensions>
  <Extension Category="windows.backgroundTasks" EntryPoint="DeviceLibrary.SyncContent">
    <BackgroundTasks>
      <m2:Task Type="deviceUse" />
    </BackgroundTasks>
  </Extension>
</Extensions>
```

## <a name="introduction-to-using-deviceusetrigger"></a><span data-ttu-id="e6984-157">Einführung in die Verwendung von DeviceUseTrigger</span><span class="sxs-lookup"><span data-stu-id="e6984-157">Introduction to using DeviceUseTrigger</span></span>

<span data-ttu-id="e6984-158">Führen Sie diese grundlegenden Schritte aus, um [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="e6984-158">To use the [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337), follow these basic steps.</span></span> <span data-ttu-id="e6984-159">Weitere Informationen zu Hintergrundaufgaben finden Sie unter [Unterstützen Ihrer App mit Hintergrundaufgaben](support-your-app-with-background-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="e6984-159">For more info about background tasks, see [Support your app with background tasks](support-your-app-with-background-tasks.md).</span></span>

1.  <span data-ttu-id="e6984-160">Ihre App registriert die Hintergrundaufgabe im App-Manifest und bettet den Code für die Hintergrundaufgabe in einer Windows-Runtime-Klasse ein, die IBackgroundTask implementiert, oder in eine dedizierte JavaScript-Seite für JavaScript-Apps.</span><span class="sxs-lookup"><span data-stu-id="e6984-160">Your app registers its background task in the app manifest and embeds the background task code in a Windows Runtime class that implements IBackgroundTask or in a dedicated JavaScript page for JavaScript apps.</span></span>
2.  <span data-ttu-id="e6984-161">Beim Starten erstellt und konfiguriert Ihre App ein Triggerobjekt vom Typ [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) und speichert die Triggerinstanz für die künftige Verwendung.</span><span class="sxs-lookup"><span data-stu-id="e6984-161">When your app starts, it will create and configure a trigger object of type [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337), and store the trigger instance for future use.</span></span>
3.  <span data-ttu-id="e6984-162">Die App prüft, ob die Hintergrundaufgabe bereits registriert wurde. Wenn nicht, führt sie dafür die Registrierung für den Trigger durch.</span><span class="sxs-lookup"><span data-stu-id="e6984-162">Your app checks whether the background task has been previously registered and, if not, registers it against the trigger.</span></span> <span data-ttu-id="e6984-163">Beachten Sie, dass es für die App nicht zulässig ist, Bedingungen für die Aufgabe festzulegen, die diesem Trigger zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="e6984-163">Note that your app isn't allowed to set conditions on the task associated with this trigger.</span></span>
4.  <span data-ttu-id="e6984-164">Wenn Ihre App die Hintergrundaufgabe auslösen muss, muss sie zuerst [**RequestAccessAsync**](https://msdn.microsoft.com/library/windows/apps/hh700485) aufrufen, um zu prüfen, ob die App eine Hintergrundaufgabe anfordern kann.</span><span class="sxs-lookup"><span data-stu-id="e6984-164">When your app needs to trigger the background task, it must first call [**RequestAccessAsync**](https://msdn.microsoft.com/library/windows/apps/hh700485) to check if the app is able to request a background task.</span></span>
5.  <span data-ttu-id="e6984-165">Wenn die App die Hintergrundaufgabe anfordern kann, ruft sie die [**RequestAsync**](https://msdn.microsoft.com/library/windows/apps/dn297341)-Aktivierungsmethode für das Triggerobjekt des Geräts auf.</span><span class="sxs-lookup"><span data-stu-id="e6984-165">If the app can request the background task, it calls the [**RequestAsync**](https://msdn.microsoft.com/library/windows/apps/dn297341) activation method on the device trigger object.</span></span>
6.  <span data-ttu-id="e6984-166">Ihre Hintergrundaufgabe wird nicht wie andere Hintergrundaufgaben gedrosselt (es gilt kein CPU-Zeitkontingent), sondern wird mit reduzierter Priorität ausgeführt, um die Reaktionsfähigkeit von Vordergrund-Apps aufrechtzuerhalten.</span><span class="sxs-lookup"><span data-stu-id="e6984-166">Your background task isn’t throttled like other system background tasks (there's no CPU time quota) but will run with reduced priority to keep foreground apps responsive.</span></span>
7.  <span data-ttu-id="e6984-167">Windows überprüft dann anhand des Triggertyps, ob die erforderlichen Richtlinien erfüllt sind, einschließlich der Anforderung einer Zustimmung des Benutzers für den Vorgang, bevor die Hintergrundaufgabe gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="e6984-167">Windows will then validate, based on the trigger type, that the necessary policies have been met, including requesting user consent for the operation before starting the background task.</span></span>
8.  <span data-ttu-id="e6984-168">Windows überwacht die Systembedingungen und die Aufgabenlaufzeit und bricht die Aufgabe ggf. ab, falls die erforderlichen Bedingungen nicht mehr erfüllt sind.</span><span class="sxs-lookup"><span data-stu-id="e6984-168">Windows monitors system conditions and task runtime and, if necessary, cancels the task if the required conditions are no longer met.</span></span>
9.  <span data-ttu-id="e6984-169">Wenn die Hintergrundaufgabe den aktuellen Status oder den Abschluss des Vorgangs meldet, empfängt die App diese Ereignisse über die Status- und Abschlussereignisse der registrierten Aufgabe.</span><span class="sxs-lookup"><span data-stu-id="e6984-169">When the background tasks reports progress or completion, your app will receive these events through progress and completed events on the registered task.</span></span>

<span data-ttu-id="e6984-170">**Wichtige**  diese wichtigen Punkte berücksichtigen, wenn Sie die [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337)verwenden:</span><span class="sxs-lookup"><span data-stu-id="e6984-170">**Important** Consider these important points when using the [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337):</span></span>

-   <span data-ttu-id="e6984-171">Die Möglichkeit, programmgesteuert Hintergrundaufgaben auslösen, mit denen die [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) wurde in Windows8.1 und Windows Phone 8.1 eingeführt.</span><span class="sxs-lookup"><span data-stu-id="e6984-171">The ability to programmatically trigger background tasks that use the [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) was first introduced in Windows8.1 and Windows Phone 8.1.</span></span>

-   <span data-ttu-id="e6984-172">Bestimmte Richtlinien werden von Windows erzwungen, um sicherzustellen, dass die Zustimmung des Benutzers vorliegt, wenn Peripheriegeräte auf dem PC aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="e6984-172">Certain policies are enforced by Windows to ensure user consent when updating peripheral devices on the PC.</span></span>

-   <span data-ttu-id="e6984-173">Weitere Richtlinien werden erzwungen, um für Benutzer die Akkulaufzeit zu verlängern, wenn Peripheriegeräte synchronisiert und aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="e6984-173">Additional polices are enforced to preserve user battery life when syncing and updating peripheral devices.</span></span>

-   <span data-ttu-id="e6984-174">Hintergrundaufgaben, für die [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) verwendet wird, können von Windows ggf. abgebrochen werden, wenn bestimmte Richtlinienanforderungen nicht mehr erfüllt sind, einschließlich einer Maximaldauer für die Hintergrundzeit (Gesamtbetrachtungszeit).</span><span class="sxs-lookup"><span data-stu-id="e6984-174">Background tasks that use [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) might be canceled by Windows when certain policy requirements are no longer met, including a maximum amount of background time (wall clock time).</span></span> <span data-ttu-id="e6984-175">Es ist wichtig, diese Richtlinienanforderungen zu berücksichtigen, wenn Sie diese Hintergrundaufgaben zum Interagieren mit Ihrem Peripheriegerät verwenden.</span><span class="sxs-lookup"><span data-stu-id="e6984-175">It's important to consider these policy requirements when using these background tasks to interact with your peripheral device.</span></span>

<span data-ttu-id="e6984-176">**Tipp:** Laden Sie ein Beispiel, um zu sehen, wie diese Hintergrundaufgaben funktionieren.</span><span class="sxs-lookup"><span data-stu-id="e6984-176">**Tip**To see how these background tasks work, download a sample.</span></span> <span data-ttu-id="e6984-177">Ein Beispiel für die Vorgehensweise auf einem PC finden Sie unter [Beispiel für ein benutzerdefiniertes USB-Gerät](http://go.microsoft.com/fwlink/p/?LinkId=301975 ).</span><span class="sxs-lookup"><span data-stu-id="e6984-177">For an example that shows how this is done on a PC, see the [Custom USB device sample](http://go.microsoft.com/fwlink/p/?LinkId=301975 ).</span></span> <span data-ttu-id="e6984-178">Ein Beispiel für ein Smartphone finden Sie unter [Beispiel für Hintergrundsensoren](http://go.microsoft.com/fwlink/p/?LinkId=393307).</span><span class="sxs-lookup"><span data-stu-id="e6984-178">For an example on a phone, see the [Background Sensors sample](http://go.microsoft.com/fwlink/p/?LinkId=393307).</span></span>
 
## <a name="frequency-and-foreground-restrictions"></a><span data-ttu-id="e6984-179">Einschränkungen in Bezug auf die Häufigkeit und den Vordergrund</span><span class="sxs-lookup"><span data-stu-id="e6984-179">Frequency and foreground restrictions</span></span>

<span data-ttu-id="e6984-180">Es besteht keine Einschränkung hinsichtlich der Häufigkeit, mit der Ihre App Vorgänge initiieren kann, aber sie kann nur jeweils einen Hintergrundaufgabenvorgang mit [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) ausführen (dies wirkt sich nicht auf andere Arten von Hintergrundaufgaben aus) und eine Hintergrundaufgabe nur initiieren, während sich Ihre App im Vordergrund befindet.</span><span class="sxs-lookup"><span data-stu-id="e6984-180">There is no restriction on the frequency with which your app can initiate operations, but your app can run only one [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) background task operation at a time (this does not affect other types of background tasks), and can initiate a background task only while your app is in the foreground.</span></span> <span data-ttu-id="e6984-181">Wenn sich Ihre App nicht im Vordergrund befindet, kann sie eine Hintergrundaufgabe nicht mit **DeviceUseTrigger** initiieren.</span><span class="sxs-lookup"><span data-stu-id="e6984-181">When your app isn't in the foreground, it is unable to initiate a background task with **DeviceUseTrigger**.</span></span> <span data-ttu-id="e6984-182">Ihre App kann keine zweite **DeviceUseTrigger**-Hintergrundaufgabe initiieren, bevor die erste Hintergrundaufgabe abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="e6984-182">Your app can't initiate a second **DeviceUseTrigger** background task before the first background task has completed.</span></span>

## <a name="device-restrictions"></a><span data-ttu-id="e6984-183">Einschränkungen in Bezug auf Geräte</span><span class="sxs-lookup"><span data-stu-id="e6984-183">Device restrictions</span></span>

<span data-ttu-id="e6984-184">Jede App ist zwar auf die Registrierung und Ausführung von nur einer [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337)-Hintergrundaufgabe beschränkt, aber das Gerät (auf dem Ihre App ausgeführt wird) kann mehreren Apps das Registrieren und Ausführen von **DeviceUseTrigger**-Hintergrundaufgaben erlauben.</span><span class="sxs-lookup"><span data-stu-id="e6984-184">While each app is limited to registering and running only one [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) background task, the device (on which your app is running) may allow multiple apps to register and run **DeviceUseTrigger** background tasks.</span></span> <span data-ttu-id="e6984-185">Je nach Gerät kann ggf. eine Obergrenze für die Gesamtzahl an **DeviceUseTrigger**-Hintergrundaufgaben aller Apps gelten.</span><span class="sxs-lookup"><span data-stu-id="e6984-185">Depending on the device, there may be a limit on the total number of **DeviceUseTrigger** background tasks from all apps.</span></span> <span data-ttu-id="e6984-186">Dies verringert den Stromverbrauch auf Geräten, auf denen die Ressourcen knapp sind.</span><span class="sxs-lookup"><span data-stu-id="e6984-186">This helps preserve battery on resource-constrained devices.</span></span> <span data-ttu-id="e6984-187">Weitere Informationen hierzu finden Sie in der folgenden Tabelle.</span><span class="sxs-lookup"><span data-stu-id="e6984-187">See the following table for more details.</span></span>

<span data-ttu-id="e6984-188">Über eine einzelne [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337)-Hintergrundaufgabe kann Ihre App auf eine unbegrenzte Zahl von Peripheriegeräten oder Sensoren zugreifen, die nur von den unterstützten APIs und Protokollen beschränkt wird, die in der obigen Tabelle aufgeführt sind.</span><span class="sxs-lookup"><span data-stu-id="e6984-188">From a single [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) background task, your app can access an unlimited number of peripheral devices or sensors - limited only by the supported APIs and protocols that were listed in the previous table.</span></span>

## <a name="background-task-policies"></a><span data-ttu-id="e6984-189">Richtlinien für Hintergrundaufgaben</span><span class="sxs-lookup"><span data-stu-id="e6984-189">Background task policies</span></span>

<span data-ttu-id="e6984-190">Windows erzwingt Richtlinien, wenn von Ihrer App eine [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337)-Hintergrundaufgabe verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e6984-190">Windows enforces policies when your app uses a [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) background task.</span></span> <span data-ttu-id="e6984-191">Wenn diese Richtlinien nicht erfüllt sind, wird die Hintergrundaufgabe ggf. abgebrochen.</span><span class="sxs-lookup"><span data-stu-id="e6984-191">If these policies aren't met, the background task might be canceled.</span></span> <span data-ttu-id="e6984-192">Es ist wichtig, diese Richtlinienanforderungen zu berücksichtigen, wenn Sie diese Art von Hintergrundaufgaben zum Interagieren mit Geräten oder Sensoren verwenden.</span><span class="sxs-lookup"><span data-stu-id="e6984-192">It's important to consider these policy requirements when using this type of background task to interact with devices or sensors.</span></span>

### <a name="task-initiation-policies"></a><span data-ttu-id="e6984-193">Richtlinien für die Aufgabeninitiierung</span><span class="sxs-lookup"><span data-stu-id="e6984-193">Task initiation policies</span></span>

<span data-ttu-id="e6984-194">In dieser Tabelle ist aufgeführt, welche Richtlinien für die Aufgabeninitiierung für universelle Windows-Apps gelten.</span><span class="sxs-lookup"><span data-stu-id="e6984-194">This table indicates which task initiation policies apply to a Universal Windows app.</span></span>

| <span data-ttu-id="e6984-195">Richtlinie</span><span class="sxs-lookup"><span data-stu-id="e6984-195">Policy</span></span> | <span data-ttu-id="e6984-196">DeviceUseTrigger in einer universellen Windows-App</span><span class="sxs-lookup"><span data-stu-id="e6984-196">DeviceUseTrigger in a Universal Windows app</span></span> |
|--------|---------------------------------------------|
| <span data-ttu-id="e6984-197">Ihre App befindet sich beim Auslösen der Hintergrundaufgabe im Vordergrund.</span><span class="sxs-lookup"><span data-stu-id="e6984-197">Your app is in the foreground when triggering the background task.</span></span> | ![Richtlinie gilt](images/ap-tools.png) |
| <span data-ttu-id="e6984-199">Das Gerät ist an das System angeschlossen (bzw. befindet sich bei einem Drahtlosgerät in Reichweite).</span><span class="sxs-lookup"><span data-stu-id="e6984-199">The device is attached to the system (or in range for a wireless device).</span></span> | ![Richtlinie gilt](images/ap-tools.png) |
| <span data-ttu-id="e6984-201">Die App kann mithilfe der unterstützten Geräteperipherie-APIs (Windows-Runtime-APIs für USB, HID, Bluetooth, Sensoren usw.) auf das Gerät zugreifen.</span><span class="sxs-lookup"><span data-stu-id="e6984-201">The device is accessible to the app using the supported device peripheral APIs (the Windows Runtime APIs for USB, HID, Bluetooth, Sensors, and so on).</span></span> <span data-ttu-id="e6984-202">Falls Ihre App nicht auf das Gerät oder den Sensor zugreifen kann, wird der Zugriff auf die Hintergrundaufgabe verweigert.</span><span class="sxs-lookup"><span data-stu-id="e6984-202">If your app can't access the device or sensor, access to the background task is denied.</span></span> | ![Richtlinie gilt](images/ap-tools.png) |
| <span data-ttu-id="e6984-204">Der von der App bereitgestellte Einstiegspunkt für die Hintergrundaufgabe wird im App-Paketmanifest registriert.</span><span class="sxs-lookup"><span data-stu-id="e6984-204">Background task entry point provided by the app is registered in the app package manifest.</span></span> | ![Richtlinie gilt](images/ap-tools.png) |
| <span data-ttu-id="e6984-206">Es wird nur eine [DeviceUseTrigger](https://msdn.microsoft.com/library/windows/apps/dn297337)-Hintergrundaufgabe pro App ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="e6984-206">Only one [DeviceUseTrigger](https://msdn.microsoft.com/library/windows/apps/dn297337) background task is running per app.</span></span> | ![Richtlinie gilt](images/ap-tools.png) |
| <span data-ttu-id="e6984-208">Die maximale Anzahl von [DeviceUseTrigger](https://msdn.microsoft.com/library/windows/apps/dn297337)-Hintergrundaufgaben wurde auf dem Gerät (auf dem die App ausgeführt wird) noch nicht erreicht.</span><span class="sxs-lookup"><span data-stu-id="e6984-208">The maximum number of [DeviceUseTrigger](https://msdn.microsoft.com/library/windows/apps/dn297337) background tasks has not yet been reached on the device (on which your app is running).</span></span> | <span data-ttu-id="e6984-209">**Familie der Desktopgeräte**: Eine unbegrenzte Anzahl von Aufgaben kann registriert und parallel ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e6984-209">**Desktop device family**: An unlimited number of tasks can be registered and run in parallel.</span></span> <span data-ttu-id="e6984-210">**Familie der Mobilgeräte**: 1 Aufgabe auf einem 512-MB-Gerät. Andernfalls können 2 Aufgaben registriert und parallel ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e6984-210">**Mobile device family**: 1 task on a 512 MB device; otherwise, 2 tasks can be registered and run in parallel.</span></span> |
| <span data-ttu-id="e6984-211">Maximale Anzahl von Peripheriegeräten oder Sensoren, auf die Ihre App über eine einzelne [DeviceUseTrigger](https://msdn.microsoft.com/library/windows/apps/dn297337)-Hintergrundaufgabe zugreifen kann, wenn sie die unterstützten APIs/Protokolle verwendet.</span><span class="sxs-lookup"><span data-stu-id="e6984-211">The maximum number of peripheral devices or sensors that your app can access from a single [DeviceUseTrigger](https://msdn.microsoft.com/library/windows/apps/dn297337) background task, when using the supported APIs/protocols.</span></span> | <span data-ttu-id="e6984-212">Unbegrenzt</span><span class="sxs-lookup"><span data-stu-id="e6984-212">unlimited</span></span> |
| <span data-ttu-id="e6984-213">Die Hintergrundaufgabe verbraucht pro Minute 400ms an CPU-Zeit (bei einer CPU mit 1GHz), wenn der Bildschirm gesperrt ist. Bei nicht gesperrtem Bildschirm wird diese Zeit innerhalb von 5Minuten verbraucht.</span><span class="sxs-lookup"><span data-stu-id="e6984-213">Your background task consumes 400ms of CPU time (assuming a 1GHz CPU) every minute when the screen is locked, or every 5 minutes when the screen is not locked.</span></span> <span data-ttu-id="e6984-214">Wenn diese Richtlinie nicht erfüllt wird, kann dies zum Abbruch der Aufgabe führen.</span><span class="sxs-lookup"><span data-stu-id="e6984-214">Failure to meet this policy can result in cancellation of your task.</span></span> | ![Richtlinie gilt](images/ap-tools.png) |

### <a name="runtime-policy-checks"></a><span data-ttu-id="e6984-216">Richtlinienprüfung zur Laufzeit</span><span class="sxs-lookup"><span data-stu-id="e6984-216">Runtime policy checks</span></span>

<span data-ttu-id="e6984-217">Windows erzwingt die folgenden Richtlinienanforderungen zur Laufzeit, während Ihre Aufgabe im Hintergrund ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="e6984-217">Windows enforces the following runtime policy requirements while your task is running in the background.</span></span> <span data-ttu-id="e6984-218">Wenn eine der Laufzeitanforderungen nicht mehr erfüllt (true) ist, bricht Windows die Hintergrundaufgabe für das Gerät ab.</span><span class="sxs-lookup"><span data-stu-id="e6984-218">If any of the runtime requirements stops being true, Windows will cancel your device background task.</span></span>

<span data-ttu-id="e6984-219">In dieser Tabelle ist aufgeführt, welche Laufzeitrichtlinien für universelle Windows-Apps gelten.</span><span class="sxs-lookup"><span data-stu-id="e6984-219">This table indicates which runtime policies apply to a Universal Windows app.</span></span>

| <span data-ttu-id="e6984-220">Richtlinienprüfung</span><span class="sxs-lookup"><span data-stu-id="e6984-220">Policy check</span></span> | <span data-ttu-id="e6984-221">DeviceUseTrigger in einer universellen Windows-App</span><span class="sxs-lookup"><span data-stu-id="e6984-221">DeviceUseTrigger in a Universal Windows app</span></span> |
|--------------|:-------------------------------------------:|
| <span data-ttu-id="e6984-222">Das Gerät ist an das System angeschlossen (bzw. befindet sich bei einem Drahtlosgerät in Reichweite).</span><span class="sxs-lookup"><span data-stu-id="e6984-222">The device is attached to the system (or in range for a wireless device).</span></span> | ![Richtlinienprüfung gilt](images/ap-tools.png) |
| <span data-ttu-id="e6984-224">Aufgabe führt regelmäßig E/A-Vorgänge für das Gerät durch (1 E/A alle 5 Sekunden).</span><span class="sxs-lookup"><span data-stu-id="e6984-224">Task is performing regular I/O to the device (1 I/O every 5 seconds).</span></span> | ![Richtlinienprüfung gilt](images/ap-tools.png) |
| <span data-ttu-id="e6984-226">Die App hat die Aufgabe nicht abgebrochen.</span><span class="sxs-lookup"><span data-stu-id="e6984-226">App has not canceled the task.</span></span> | ![Richtlinienprüfung gilt](images/ap-tools.png) |
| <span data-ttu-id="e6984-228">Gesamtbetrachtungszeit-Limit – Gesamtzeit, die die Aufgabe der App im Hintergrund ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="e6984-228">Wall-clock time limit – the total amount of time your app’s task can run in the background.</span></span> | <span data-ttu-id="e6984-229">**Familie der Desktopgeräte**: 10 Minuten.</span><span class="sxs-lookup"><span data-stu-id="e6984-229">**Desktop device family**: 10 minutes.</span></span> <span data-ttu-id="e6984-230">**Familie der Mobilgeräte**: Kein Zeitlimit.</span><span class="sxs-lookup"><span data-stu-id="e6984-230">**Mobile device family**: No time limit.</span></span> <span data-ttu-id="e6984-231">Um Ressourcen zu schonen, können maximal eine oder zwei Aufgaben gleichzeitig ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e6984-231">To conserve resources, no more than 1 or 2 tasks can execute at once.</span></span> |
| <span data-ttu-id="e6984-232">Die App wurde nicht beendet.</span><span class="sxs-lookup"><span data-stu-id="e6984-232">App has not exited.</span></span> | ![Richtlinienprüfung gilt](images/ap-tools.png) |

## <a name="best-practices"></a><span data-ttu-id="e6984-234">Bewährte Methoden</span><span class="sxs-lookup"><span data-stu-id="e6984-234">Best practices</span></span>

<span data-ttu-id="e6984-235">Unten sind bewährte Methoden für Apps angegeben, von denen die [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337)-Hintergrundaufgaben verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="e6984-235">The following are best practices for apps that use the [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) background tasks.</span></span>

### <a name="programming-a-background-task"></a><span data-ttu-id="e6984-236">Programmieren einer Hintergrundaufgabe</span><span class="sxs-lookup"><span data-stu-id="e6984-236">Programming a background task</span></span>

<span data-ttu-id="e6984-237">Mit dem Verwenden der [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337)-Hintergrundaufgabe über Ihre App wird sichergestellt, dass alle von der Vordergrund-App gestarteten Synchronisierungs- oder Überwachungsvorgänge im Hintergrund weiterhin ausgeführt werden, wenn Benutzer Apps wechseln und Ihre Vordergrund-App von Windows angehalten wird.</span><span class="sxs-lookup"><span data-stu-id="e6984-237">Using the [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) background task from your app ensures that any sync or monitoring operations started from your foreground app continue to run in the background if your users switch apps and your foreground app is suspended by Windows.</span></span> <span data-ttu-id="e6984-238">Wir empfehlen Ihnen, dieses allgemeine Modell zum Registrieren, Auslösen und Aufheben der Registrierung von Hintergrundaufgaben zu verwenden:</span><span class="sxs-lookup"><span data-stu-id="e6984-238">We recommend that you follow this overall model for registering, triggering, and unregistering your background tasks:</span></span>

1.  <span data-ttu-id="e6984-239">Rufen Sie [**RequestAccessAsync**](https://msdn.microsoft.com/library/windows/apps/hh700485) auf, um zu überprüfen, ob die App eine Hintergrundaufgabe anfordern kann.</span><span class="sxs-lookup"><span data-stu-id="e6984-239">Call [**RequestAccessAsync**](https://msdn.microsoft.com/library/windows/apps/hh700485) to check if the app is able to request a background task.</span></span> <span data-ttu-id="e6984-240">Dies muss erfolgen, bevor eine Hintergrundaufgabe registriert wird.</span><span class="sxs-lookup"><span data-stu-id="e6984-240">This must be done before registering a background task.</span></span>

2.  <span data-ttu-id="e6984-241">Registrieren Sie die Hintergrundaufgabe, bevor Sie den Trigger anfordern.</span><span class="sxs-lookup"><span data-stu-id="e6984-241">Register the background task before requesting the trigger.</span></span>

3.  <span data-ttu-id="e6984-242">Verbinden Sie Ereignishandler für den aktuellen Status und den Abschluss mit dem Trigger.</span><span class="sxs-lookup"><span data-stu-id="e6984-242">Connect progress and completion event handlers to your trigger.</span></span> <span data-ttu-id="e6984-243">Wenn Ihre App aus dem angehaltenen Zustand zurückkehrt, stellt Windows für die App alle in die Warteschlange eingereihten Ereignisse zum Status und Abschluss bereit, mit denen der Status der Hintergrundaufgaben ermittelt werden kann.</span><span class="sxs-lookup"><span data-stu-id="e6984-243">When your app returns from suspension, Windows will provide your app with any queued progress or completion events that can be used to determine the status of your background tasks.</span></span>

4.  <span data-ttu-id="e6984-244">Schließen Sie alle geöffneten Geräte- oder Sensorobjekte, wenn Sie Ihre [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337)-Hintergrundaufgabe auslösen, damit diese Geräte bzw. Sensoren geöffnet und von der Hintergrundaufgabe verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="e6984-244">Close any open device or sensor objects when you trigger your [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) background task so that those devices or sensors are free to be opened and used by your background task.</span></span>

5.  <span data-ttu-id="e6984-245">Registrieren Sie den Trigger.</span><span class="sxs-lookup"><span data-stu-id="e6984-245">Register the trigger.</span></span>

6.  <span data-ttu-id="e6984-246">Berücksichtigen Sie die Auswirkung auf den Stromverbrauch, die mit dem Zugreifen auf ein Gerät oder einen Sensor über eine Hintergrundaufgabe verbunden ist.</span><span class="sxs-lookup"><span data-stu-id="e6984-246">Carefully consider the battery impact of accessing a device or senor from a background task.</span></span> <span data-ttu-id="e6984-247">Wenn Sie das Berichtsintervall eines Sensors zu häufig ausführen, wird die Aufgabe unter Umständen so oft ausgeführt, dass der Akku eines Smartphones schnell leer ist.</span><span class="sxs-lookup"><span data-stu-id="e6984-247">For example, having the report interval of a sensor run too frequently could cause the task to run so often that it quickly drains a phone's battery.</span></span>

7.  <span data-ttu-id="e6984-248">Heben Sie die Registrierung der Hintergrundaufgabe auf, wenn die Hintergrundaufgabe abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="e6984-248">When your background task completes, unregister it.</span></span>

8.  <span data-ttu-id="e6984-249">Führen Sie die Registrierung für Abbruchereignisse über die Klasse der Hintergrundaufgabe durch.</span><span class="sxs-lookup"><span data-stu-id="e6984-249">Register for cancellation events from your background task class.</span></span> <span data-ttu-id="e6984-250">Die Registrierung für Abbruchereignisse ermöglicht dem Code der Hintergrundaufgabe das saubere Beenden der ausgeführten Hintergrundaufgabe, wenn sie von Windows oder Ihrer Vordergrund-App abgebrochen wird.</span><span class="sxs-lookup"><span data-stu-id="e6984-250">Registering for cancellation events will allow your background task code to cleanly stop your running background task when canceled by Windows or your foreground app.</span></span>

9.  <span data-ttu-id="e6984-251">Heben Sie die Registrierung beim Beenden der App auf (nicht beim Anhalten), und brechen Sie alle laufenden Aufgaben ab, wenn diese für die App nicht mehr benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="e6984-251">On app exit (not suspension), unregister and cancel any running tasks if your app no longer needs them.</span></span> <span data-ttu-id="e6984-252">Auf Systemen mit knappen Ressourcen, z. B. Smartphones mit wenig Arbeitsspeicher, ermöglicht diese Maßnahme anderen Apps die Verwendung einer [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337)-Hintergrundaufgabe.</span><span class="sxs-lookup"><span data-stu-id="e6984-252">On resource-constrained systems, such as low-memory phones, this will allow other apps to use a [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) background task.</span></span>

    -   <span data-ttu-id="e6984-253">Heben Sie die Registrierung auf, und brechen Sie alle laufenden Aufgaben ab, wenn Ihre App beendet wird.</span><span class="sxs-lookup"><span data-stu-id="e6984-253">When your app exits, unregister and cancel any running tasks.</span></span>

    -   <span data-ttu-id="e6984-254">Beim Beenden der App werden die Hintergrundaufgaben abgebrochen, und alle vorhandenen Ereignishandler werden von den vorhandenen Hintergrundaufgaben getrennt.</span><span class="sxs-lookup"><span data-stu-id="e6984-254">When your app exits, your background tasks will be canceled and any existing event handlers will be disconnected from your existing background tasks.</span></span> <span data-ttu-id="e6984-255">Sie können den Zustand Ihrer Hintergrundaufgaben dann nicht mehr ermitteln.</span><span class="sxs-lookup"><span data-stu-id="e6984-255">This prevents you from determining the state of your background tasks.</span></span> <span data-ttu-id="e6984-256">Wenn Sie die Registrierung der Hintergrundaufgabe aufheben und sie abbrechen, können die Hintergrundaufgaben mit Ihrem Abbruchcode sauber beendet werden.</span><span class="sxs-lookup"><span data-stu-id="e6984-256">Unregistering and canceling the background task will allow your cancellation code to cleanly stop your background tasks.</span></span>

### <a name="cancelling-a-background-task"></a><span data-ttu-id="e6984-257">Abbrechen einer Hintergrundaufgabe</span><span class="sxs-lookup"><span data-stu-id="e6984-257">Cancelling a background task</span></span>

<span data-ttu-id="e6984-258">Zum Abbrechen einer Aufgabe, die im Hintergrund Ihrer Vordergrund-App ausgeführt wird, verwenden Sie die Unregister-Methode des [**BackgroundTaskRegistration**](https://msdn.microsoft.com/library/windows/apps/br224786)-Objekts, das Sie in der App zum Registrieren der [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337)-Hintergrundaufgabe verwenden.</span><span class="sxs-lookup"><span data-stu-id="e6984-258">To cancel a task running in the background from your foreground app, use the Unregister method on the [**BackgroundTaskRegistration**](https://msdn.microsoft.com/library/windows/apps/br224786) object you use in your app to register the [**DeviceUseTrigger**](https://msdn.microsoft.com/library/windows/apps/dn297337) background task.</span></span> <span data-ttu-id="e6984-259">Wenn Sie die Registrierung der Hintergrundaufgabe mithilfe der [**Unregister**](https://msdn.microsoft.com/library/windows/apps/br229869)-Methode unter **BackgroundTaskRegistration** aufheben, bricht die Infrastruktur der Hintergrundaufgaben Ihre Hintergrundaufgabe ab.</span><span class="sxs-lookup"><span data-stu-id="e6984-259">Unregistering your background task by using the [**Unregister**](https://msdn.microsoft.com/library/windows/apps/br229869) method on **BackgroundTaskRegistration** will cause the background task infrastructure to cancel your background task.</span></span>

<span data-ttu-id="e6984-260">Für die [**Unregister**](https://msdn.microsoft.com/library/windows/apps/br229869)-Methode wird zusätzlich der boolesche Wert "true" oder „false“ verwendet, um anzugeben, ob derzeit ausgeführte Instanzen der Hintergrundaufgabe abgebrochen werden sollen, ohne deren Beendigung abzuwarten.</span><span class="sxs-lookup"><span data-stu-id="e6984-260">The [**Unregister**](https://msdn.microsoft.com/library/windows/apps/br229869) method additionally takes a Boolean true or false value to indicate if currently running instances of your background task should be canceled without allowing them to finish.</span></span> <span data-ttu-id="e6984-261">Weitere Informationen finden Sie im API-Referenzthema für **Unregister**.</span><span class="sxs-lookup"><span data-stu-id="e6984-261">For more info, see the API reference for **Unregister**.</span></span>

<span data-ttu-id="e6984-262">Zusätzlich zu [**Unregister**](https://msdn.microsoft.com/library/windows/apps/br229869) muss Ihre App auch [**BackgroundTaskDeferral.Complete**](https://msdn.microsoft.com/library/windows/apps/hh700504) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="e6984-262">In addition to [**Unregister**](https://msdn.microsoft.com/library/windows/apps/br229869), your app will also need to call [**BackgroundTaskDeferral.Complete**](https://msdn.microsoft.com/library/windows/apps/hh700504).</span></span> <span data-ttu-id="e6984-263">So wird dem System mitgeteilt, dass der asynchrone Vorgang, der einer Hintergrundaufgabe zugeordnet ist, abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="e6984-263">This informs the system that the asynchronous operation associated with a background task has finished.</span></span>
