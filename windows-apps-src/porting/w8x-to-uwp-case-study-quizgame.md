---
author: stevewhims
ms.assetid: 88e16ec8-deff-4a60-bda6-97c5dabc30b8
description: Dieses Thema enthält eine Fallstudie zum Portieren eines funktionierenden Peer-to-Peer-Quiz spielen WinRT 8.1-Beispielapp zu einer app für Windows 10 universelle Windows-Plattform (UWP).
title: Windows-Runtime 8.x zu universeller Windows-Plattform (UWP) – Fallstudie, QuizGame-Beispiel-App (Peer-zu-Peer)
ms.author: stwhi
ms.date: 02/08/2017
ms.topic: article
keywords: Windows10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 69aae85f4e0bb01833114ae5b2cbfab45e9dd84d
ms.sourcegitcommit: e814a13978f33654d8e995584f4b047cb53e0aef
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/05/2018
ms.locfileid: "6039732"
---
# <a name="windows-runtime-8x-to-uwp-case-study-quizgame-sample-app"></a><span data-ttu-id="f67d3-104">Windows-Runtime 8.x zu UWP – Fallstudie: QuizGame-Beispiel-app</span><span class="sxs-lookup"><span data-stu-id="f67d3-104">Windows Runtime 8.x to UWP case study: QuizGame sample app</span></span>




<span data-ttu-id="f67d3-105">Dieses Thema enthält eine Fallstudie zum Portieren eines funktionierenden Peer-to-Peer-Quiz spielen WinRT 8.1-Beispielapp zu einer app Windows10Universal Windows-Plattform (UWP).</span><span class="sxs-lookup"><span data-stu-id="f67d3-105">This topic presents a case study of porting a functioning peer-to-peer quiz game WinRT 8.1 sample app to a Windows10Universal Windows Platform (UWP) app.</span></span>

<span data-ttu-id="f67d3-106">Eine universelle 8.1-app wird ein zwei Versionen derselben App erstellt: ein app-Paket für Windows8.1 und ein anderes app-Paket für Windows Phone 8.1.</span><span class="sxs-lookup"><span data-stu-id="f67d3-106">A Universal 8.1 app is one that builds two versions of the same app: one app package for Windows8.1, and a different app package for Windows Phone 8.1.</span></span> <span data-ttu-id="f67d3-107">Für die WinRT8.1-Version von QuizGame wird eine Anordnung mit einem Projekt für eine universelle Windows-App verwendet. Dabei wird aber ein anderer Ansatz gewählt und für die beiden Plattformen jeweils eine App mit unterschiedlicher Funktionalität erstellt.</span><span class="sxs-lookup"><span data-stu-id="f67d3-107">The WinRT 8.1 version of QuizGame uses a Universal Windows app project arrangement, but it takes a different approach and it builds a functionally distinct app for the two platforms.</span></span> <span data-ttu-id="f67d3-108">Windows8.1 app-Paket dient als Host für eine Sitzung des quizspiels, während das Windows Phone 8.1-app-Paket die Rolle des Clients für den Host übernimmt.</span><span class="sxs-lookup"><span data-stu-id="f67d3-108">The Windows8.1 app package serves as the host for a quiz game session, while the Windows Phone 8.1 app package plays the role of the client to the host.</span></span> <span data-ttu-id="f67d3-109">Die beiden Hälften der Quizspielsitzung kommunizieren per Peer-zu-Peer-Netzwerkverbindung.</span><span class="sxs-lookup"><span data-stu-id="f67d3-109">The two halves of the quiz game session communicate via peer-to-peer networking.</span></span>

<span data-ttu-id="f67d3-110">Die individuelle Anpassung der beiden Hälften für PC bzw. Telefone ist sinnvoll.</span><span class="sxs-lookup"><span data-stu-id="f67d3-110">Tailoring the two halves to PC, and phone, respectively makes good sense.</span></span> <span data-ttu-id="f67d3-111">Aber wäre es nicht sogar noch besser, wenn Sie sowohl den Host als auch den Client auf nahezu jedem beliebigen Gerät ausführen könnten?</span><span class="sxs-lookup"><span data-stu-id="f67d3-111">But, wouldn't it be even better if you could run both the host and the client on just about any device of your choosing?</span></span> <span data-ttu-id="f67d3-112">In diesem Fall werden Fallstudie werden wir beide apps zu Windows 10 portieren, in denen sie jeweils ein einzelnes app-Paket erstellt, das Benutzer auf einer Vielzahl von Geräten installieren können.</span><span class="sxs-lookup"><span data-stu-id="f67d3-112">In this case study, we'll port both apps to Windows10 where they will each build into a single app package that users can install onto a wide range of devices.</span></span>

<span data-ttu-id="f67d3-113">Für die App werden Muster verwendet, bei denen Ansichten und Ansichtsmodelle genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="f67d3-113">The app uses patterns that make use of views and view models.</span></span> <span data-ttu-id="f67d3-114">Sie werden sehen, dass der Portiervorgang für diese App aufgrund dieser klaren Trennung sehr einfach ist.</span><span class="sxs-lookup"><span data-stu-id="f67d3-114">As a result of this clean separation, the porting process for this app is very straightforward, as you'll see.</span></span>

<span data-ttu-id="f67d3-115">**Hinweis:** in diesem Beispiel wird davon ausgegangen, Ihr Netzwerk konfiguriert ist, zum Senden und Empfangen von benutzerdefinierten UDP gruppieren multicast-Pakete (die meisten Heimnetzwerken sind, obwohl das Netzwerk möglicherweise nicht).</span><span class="sxs-lookup"><span data-stu-id="f67d3-115">**Note**This sample assumes your network is configured to send and receive custom UDP group multicast packets (most home networks are, although your work network may not be).</span></span> <span data-ttu-id="f67d3-116">Im Beispiel werden auch TCP-Pakete gesendet und empfangen.</span><span class="sxs-lookup"><span data-stu-id="f67d3-116">The sample also sends and receives TCP packets.</span></span>

 

<span data-ttu-id="f67d3-117">**Hinweis:**  Wenn beim Öffnen von QuizGame10 in Visual Studio die Meldung "Visual Studio-Update erforderlich", klicken Sie dann die Schritte im [TargetPlatformVersion](w8x-to-uwp-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="f67d3-117">**Note** When opening QuizGame10 in Visual Studio, if you see the message "Visual Studio update required", then follow the steps in [TargetPlatformVersion](w8x-to-uwp-troubleshooting.md).</span></span>

 

## <a name="downloads"></a><span data-ttu-id="f67d3-118">Downloads</span><span class="sxs-lookup"><span data-stu-id="f67d3-118">Downloads</span></span>

<span data-ttu-id="f67d3-119">[Laden Sie die universelle 8.1-App „QuizGame“ herunter](http://go.microsoft.com/fwlink/?linkid=532953).</span><span class="sxs-lookup"><span data-stu-id="f67d3-119">[Download the QuizGame Universal 8.1 app](http://go.microsoft.com/fwlink/?linkid=532953).</span></span> <span data-ttu-id="f67d3-120">Dies ist der ursprünglichen Zustand der App vor dem Portieren.</span><span class="sxs-lookup"><span data-stu-id="f67d3-120">This is the initial state of the app prior to porting.</span></span> 

<span data-ttu-id="f67d3-121">[Laden der "quizgame10" Windows 10-app](http://go.microsoft.com/fwlink/?linkid=532954).</span><span class="sxs-lookup"><span data-stu-id="f67d3-121">[Download the QuizGame10 Windows10 app](http://go.microsoft.com/fwlink/?linkid=532954).</span></span> <span data-ttu-id="f67d3-122">Dies ist der Zustand der App direkt nach dem Portieren.</span><span class="sxs-lookup"><span data-stu-id="f67d3-122">This is the state of the app just after  porting.</span></span> 

<span data-ttu-id="f67d3-123">[Die aktuelle Version dieses Beispiels finden Sie auf GitHub](https://github.com/Microsoft/Windows-appsample-quizgame).</span><span class="sxs-lookup"><span data-stu-id="f67d3-123">[See the latest version of this sample on GitHub](https://github.com/Microsoft/Windows-appsample-quizgame).</span></span>

## <a name="the-winrt-81-solution"></a><span data-ttu-id="f67d3-124">WinRT8.1-Projektmappe</span><span class="sxs-lookup"><span data-stu-id="f67d3-124">The WinRT 8.1 solution</span></span>


<span data-ttu-id="f67d3-125">So sieht QuizGame aus. Dies ist die App, die wir portieren werden.</span><span class="sxs-lookup"><span data-stu-id="f67d3-125">Here’s what QuizGame—the app that we're going to port—looks like.</span></span>

![QuizGame-Host-App – Ausführung unter Windows](images/w8x-to-uwp-case-studies/c04-01-win81-how-the-host-app-looks.png)

<span data-ttu-id="f67d3-127">QuizGame-Host-App – Ausführung unter Windows</span><span class="sxs-lookup"><span data-stu-id="f67d3-127">The QuizGame host app running on Windows</span></span>

 

![QuizGame-Client-App – Ausführung unter Windows Phone](images/w8x-to-uwp-case-studies/c04-02-wp81-how-the-client-app-looks.png)

<span data-ttu-id="f67d3-129">QuizGame-Client-App – Ausführung unter Windows Phone</span><span class="sxs-lookup"><span data-stu-id="f67d3-129">The QuizGame client app running on Windows Phone</span></span>

## <a name="a-walkthrough-of-quizgame-in-use"></a><span data-ttu-id="f67d3-130">Exemplarische Vorgehensweise für die Nutzung von QuizGame</span><span class="sxs-lookup"><span data-stu-id="f67d3-130">A walkthrough of QuizGame in use</span></span>

<span data-ttu-id="f67d3-131">Dies ist eine kurze hypothetische Beschreibung der App-Nutzung. Sie enthält aber nützliche Informationen, falls Sie die App selbst per WLAN ausprobieren möchten.</span><span class="sxs-lookup"><span data-stu-id="f67d3-131">This is a short hypothetical account of the app in use, but it provides useful info should you want to try out the app for yourself over your wireless network.</span></span>

<span data-ttu-id="f67d3-132">In einer Bar wird ein lustiges Quizspiel veranstaltet.</span><span class="sxs-lookup"><span data-stu-id="f67d3-132">A fun quiz game is taking place in a bar.</span></span> <span data-ttu-id="f67d3-133">Es gibt in der Bar einen großen Fernseher, der für alle Gäste sichtbar ist.</span><span class="sxs-lookup"><span data-stu-id="f67d3-133">There's a big TV in the bar that everyone can see.</span></span> <span data-ttu-id="f67d3-134">Der Quizmaster nutzt einen PC, dessen Ausgabe auf dem Fernseher zu sehen ist.</span><span class="sxs-lookup"><span data-stu-id="f67d3-134">The quizmaster has a PC whose output is being shown on the TV.</span></span> <span data-ttu-id="f67d3-135">Auf diesem PC wird die „Host-App“ ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="f67d3-135">That PC has "the host app" running on it.</span></span> <span data-ttu-id="f67d3-136">Alle Personen, die am Quiz teilnehmen möchten, müssen lediglich die „Client-App“ auf Ihrem Telefon oder Surface-Gerät installieren.</span><span class="sxs-lookup"><span data-stu-id="f67d3-136">Anyone who wants to take part in the quiz just needs to install "the client app" on their phone or Surface.</span></span>

<span data-ttu-id="f67d3-137">Die Host-App befindet sich im Lobbymodus, und auf dem großen Fernseher wird angezeigt, dass sie bereit für die Verbindung mit Client-App ist.</span><span class="sxs-lookup"><span data-stu-id="f67d3-137">The host app is in lobby mode, and on the big TV, it's advertising that it's ready for client apps to connect.</span></span> <span data-ttu-id="f67d3-138">Joan startet die Client-App auf ihrem Mobilgerät.</span><span class="sxs-lookup"><span data-stu-id="f67d3-138">Joan launches the client app on her mobile device.</span></span> <span data-ttu-id="f67d3-139">Sie gibt ihren Namen in das Textfeld **Spielername** ein und tippt dann auf **Spiel beitreten**.</span><span class="sxs-lookup"><span data-stu-id="f67d3-139">She types her name into the **Player name** text box and taps **Join game**.</span></span> <span data-ttu-id="f67d3-140">Die Host-App bestätigt, dass Joan beigetreten ist. Ihr Name wird angezeigt, und in der Client-App von Joan wird angegeben, dass auf den Beginn des Spiels gewartet wird.</span><span class="sxs-lookup"><span data-stu-id="f67d3-140">The host app acknowledges that Joan has joined by displaying her name, and Joan’s client app indicates that it's waiting for the game to begin.</span></span> <span data-ttu-id="f67d3-141">Als Nächstes führt Maxwell auf seinem mobilen Gerät die gleichen Schritte aus.</span><span class="sxs-lookup"><span data-stu-id="f67d3-141">Next, Maxwell goes through those same steps on his mobile device.</span></span>

<span data-ttu-id="f67d3-142">Der Quizmaster klickt auf **Spiel starten**, und in der Host-App werden eine Frage und die möglichen Antworten angezeigt (sowie eine Liste mit den verbundenen Spielern in normaler Schriftbreite und grauer Farbe).</span><span class="sxs-lookup"><span data-stu-id="f67d3-142">The quizmaster clicks **Start game** and the host app shows a question and the possible answers (it also shows a list of the joined players in normal fontweight, colored gray).</span></span> <span data-ttu-id="f67d3-143">Gleichzeitig werden die Antworten auf den Clientgeräten als Schaltflächen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="f67d3-143">Simultaneously, the answers appear displayed on buttons on joined client devices.</span></span> <span data-ttu-id="f67d3-144">Joan tippt auf die Schaltfläche mit der Antwort „1975“. Daraufhin werden alle Schaltflächen deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="f67d3-144">Joan taps the button with the answer "1975" on it whereupon all her buttons become disabled.</span></span> <span data-ttu-id="f67d3-145">In der Host-App wird Joans Name grün (und fett) angezeigt, um zu bestätigen, dass ihre Antwort eingegangen ist.</span><span class="sxs-lookup"><span data-stu-id="f67d3-145">On the host app, Joan’s name is painted green (and becomes bold) in acknowledgment of the receipt of her answer.</span></span> <span data-ttu-id="f67d3-146">Maxwell antwortet ebenfalls.</span><span class="sxs-lookup"><span data-stu-id="f67d3-146">Maxwell answers, also.</span></span> <span data-ttu-id="f67d3-147">Der Quizmaster sieht, dass die Namen aller Spieler grün sind, und klickt auf **Nächste Frage**.</span><span class="sxs-lookup"><span data-stu-id="f67d3-147">The quizmaster, noting that all players' names are green, clicks **Next question**.</span></span>

<span data-ttu-id="f67d3-148">Nach diesem Muster werden weitere Fragen gestellt und beantwortet.</span><span class="sxs-lookup"><span data-stu-id="f67d3-148">Questions continue to be asked and answered in this same cycle.</span></span> <span data-ttu-id="f67d3-149">Nachdem die letzte Frage in der Host-App angezeigt wurde, lautet der Text der Schaltfläche nicht mehr **Nächste Frage**, sondern **Ergebnisse anzeigen**.</span><span class="sxs-lookup"><span data-stu-id="f67d3-149">When the last question is being shown on the host app, **Show results** is the content of the button, and not **Next question**.</span></span> <span data-ttu-id="f67d3-150">Nach dem Klicken auf **Ergebnisse anzeigen** werden die Ergebnisse angezeigt.</span><span class="sxs-lookup"><span data-stu-id="f67d3-150">When **Show results** is clicked, the results are shown.</span></span> <span data-ttu-id="f67d3-151">Wenn auf **Zurück zur Lobby** geklickt wird, beginnt der Spielzyklus von vorne. Spieler, die bereits beigetreten sind, sind jetzt aber schon angegeben.</span><span class="sxs-lookup"><span data-stu-id="f67d3-151">Clicking **Return to lobby** returns to the beginning of the game lifecycle with the exception that joined players remain joined.</span></span> <span data-ttu-id="f67d3-152">Nach dem Zurücksetzen auf den Lobbymodus können neue Spieler beitreten. Dies ist ein guter Zeitpunkt für Spieler, das Spiel zu verlassen (obwohl dies jederzeit durch Tippen auf **Spiel verlassen** möglich ist).</span><span class="sxs-lookup"><span data-stu-id="f67d3-152">But, going back to the lobby gives new players a chance to join, and even a convenient time for joined players to leave (although a joined player can leave at any time by tapping **Leave game**).</span></span>

## <a name="local-test-mode"></a><span data-ttu-id="f67d3-153">Lokaler Testmodus</span><span class="sxs-lookup"><span data-stu-id="f67d3-153">Local test mode</span></span>

<span data-ttu-id="f67d3-154">Wenn Sie die App und ihre Interaktionen auf einem einzelnen PC ausprobieren möchten, anstatt verteilt über mehrere Geräte, können Sie die Host-App im lokalen Testmodus erstellen.</span><span class="sxs-lookup"><span data-stu-id="f67d3-154">To try out the app and its interactions on a single PC instead of distributed across devices, you can build the host app in local test mode.</span></span> <span data-ttu-id="f67d3-155">In diesem Modus entfällt die Nutzung der Netzwerkverbindung vollständig.</span><span class="sxs-lookup"><span data-stu-id="f67d3-155">This mode completely bypasses use of the network.</span></span> <span data-ttu-id="f67d3-156">Stattdessen zeigt die Benutzeroberfläche der Host-App den Hostteil links im Fenster an, und auf der rechten Seite sind zwei Kopien der Client-App-UI vertikal übereinander zu sehen (beachten Sie, dass in dieser Version die UI des lokalen Testmodus für eine PC-Anzeige festgelegt ist, sie passt sich nicht an kleine Geräte an).</span><span class="sxs-lookup"><span data-stu-id="f67d3-156">Instead, the UI of the host app displays the host portion to the left of the window and, to the right, two copies of the client app UI stacked vertically (note that, in this version, the local test mode UI is fixed for a PC display; it does not adapt to small devices).</span></span> <span data-ttu-id="f67d3-157">Diese UI-Segmente, die alle Teil derselben App sind, kommunizieren untereinander über einen so genannten Client Communicator. Damit werden die Interaktionen simuliert, die sonst über das Netzwerk erfolgen würden.</span><span class="sxs-lookup"><span data-stu-id="f67d3-157">These segments of UI, all in the same app, communicate with one another via a mock client communicator, which simulates the interactions that would otherwise take place over the network.</span></span>

<span data-ttu-id="f67d3-158">Legen Sie zum Aktivieren des lokalen Testmodus den Eintrag **LOCALTESTMODEON** (in den Projekteigenschaften) als Symbol für die bedingte Kompilierung fest, und führen Sie eine Neuerstellung durch.</span><span class="sxs-lookup"><span data-stu-id="f67d3-158">To activate local test mode, define **LOCALTESTMODEON** (in project properties) as a conditional compilation symbol, and rebuild.</span></span>

## <a name="porting-to-a-windows10-project"></a><span data-ttu-id="f67d3-159">Portieren auf ein Windows 10-Projekt</span><span class="sxs-lookup"><span data-stu-id="f67d3-159">Porting to a Windows10 project</span></span>

<span data-ttu-id="f67d3-160">QuizGame verfügt über die folgenden Bestandteile:</span><span class="sxs-lookup"><span data-stu-id="f67d3-160">QuizGame has the following pieces.</span></span>

-   <span data-ttu-id="f67d3-161">P2PHelper</span><span class="sxs-lookup"><span data-stu-id="f67d3-161">P2PHelper.</span></span> <span data-ttu-id="f67d3-162">Dies ist eine portable Klassenbibliothek, in der die Peer-zu-Peer-Netzwerklogik enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="f67d3-162">This is a portable class library that contains the peer-to-peer networking logic.</span></span>
-   <span data-ttu-id="f67d3-163">QuizGame.Windows</span><span class="sxs-lookup"><span data-stu-id="f67d3-163">QuizGame.Windows.</span></span> <span data-ttu-id="f67d3-164">Dies ist das Projekt, das das app-Paket für die Host-app Windows8.1 ausgerichtete erstellt.</span><span class="sxs-lookup"><span data-stu-id="f67d3-164">This is the project that builds the app package for the host app, which targets Windows8.1.</span></span>
-   <span data-ttu-id="f67d3-165">QuizGame.WindowsPhone</span><span class="sxs-lookup"><span data-stu-id="f67d3-165">QuizGame.WindowsPhone.</span></span> <span data-ttu-id="f67d3-166">Dies ist das Projekt, mit dem das App-Paket für die Client-App für Windows Phone8.1 erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="f67d3-166">This is the project that builds the app package for the client app, which targets Windows Phone 8.1.</span></span>
-   <span data-ttu-id="f67d3-167">QuizGame.Shared</span><span class="sxs-lookup"><span data-stu-id="f67d3-167">QuizGame.Shared.</span></span> <span data-ttu-id="f67d3-168">Dies ist das Projekt, das den Quellcode, die Markupdateien und andere Assets und Ressourcen enthält, die von den beiden anderen Projekten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f67d3-168">This is the project that contains source code, markup files, and other assets and resources, that are used by both of the other two projects.</span></span>

<span data-ttu-id="f67d3-169">Für diese Fallstudie verwenden wir die üblichen Optionen, die unter [Bei einer Universal8.1-App](w8x-to-uwp-root.md) in Bezug auf die zu unterstützenden Geräte beschrieben sind.</span><span class="sxs-lookup"><span data-stu-id="f67d3-169">For this case study, we have the usual options described in [If you have a Universal 8.1 app](w8x-to-uwp-root.md) with respect to what devices to support.</span></span>

<span data-ttu-id="f67d3-170">Basierend auf diesen Optionen, müssen wir "quizgame.Windows" für ein neues Windows 10 mit dem Namen "quizgamehost" portieren.</span><span class="sxs-lookup"><span data-stu-id="f67d3-170">Based on those options, we'll port QuizGame.Windows to a new Windows10 project called QuizGameHost.</span></span> <span data-ttu-id="f67d3-171">Und wir Portieren "quizgame.windowsphone" zu ein neues Windows 10 mit dem Namen "quizgameclient".</span><span class="sxs-lookup"><span data-stu-id="f67d3-171">And, we'll port QuizGame.WindowsPhone to a new Windows10 project called QuizGameClient.</span></span> <span data-ttu-id="f67d3-172">Diese Projekte sind für die universelle Gerätefamilie bestimmt, damit sie auf jedem Gerät ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="f67d3-172">These projects will target the universal device family, so they will run on any device.</span></span> <span data-ttu-id="f67d3-173">Wir belassen die QuizGame.Shared-Quelldateien usw. in ihrem eigenen Ordner und verknüpfen diese freigegebenen Dateien mit den beiden neuen Projekten.</span><span class="sxs-lookup"><span data-stu-id="f67d3-173">And, we'll keep the QuizGame.Shared source files, etc, in their own folder, and we'll link those shared files into the two new projects.</span></span> <span data-ttu-id="f67d3-174">Wir verwenden wieder eine einzelne Projektmappe und nennen sie QuizGame10.</span><span class="sxs-lookup"><span data-stu-id="f67d3-174">Just like before, we'll keep everything in one solution and we'll name it QuizGame10.</span></span>

**<span data-ttu-id="f67d3-175">QuizGame10-Projektmappe</span><span class="sxs-lookup"><span data-stu-id="f67d3-175">The QuizGame10 solution</span></span>**

-   <span data-ttu-id="f67d3-176">Erstellen Sie eine neue Projektmappe (**Neues Projekt** &gt; **Andere Projekttypen** &gt; **Visual Studio-Projektmappen**), und geben Sie Ihr den Namen „QuizGame10“.</span><span class="sxs-lookup"><span data-stu-id="f67d3-176">Create a new solution (**New Project** &gt; **Other Project Types** &gt; **Visual Studio Solutions**) and name it QuizGame10.</span></span>

**<span data-ttu-id="f67d3-177">P2PHelper</span><span class="sxs-lookup"><span data-stu-id="f67d3-177">P2PHelper</span></span>**

-   <span data-ttu-id="f67d3-178">Erstellen Sie in der Projektmappe ein neues Windows 10-Klassenbibliotheksprojekt (**Neues Projekt** &gt; **Windows Universal** &gt; **Class Library (Universal Windows)**) und nennen Sie es P2PHelper.</span><span class="sxs-lookup"><span data-stu-id="f67d3-178">In the solution, create a new Windows10 class library project (**New Project** &gt; **Windows Universal** &gt; **Class Library (Windows Universal)**) and name it P2PHelper.</span></span>
-   <span data-ttu-id="f67d3-179">Löschen Sie „Class1.cs“ aus dem neuen Projekt.</span><span class="sxs-lookup"><span data-stu-id="f67d3-179">Delete Class1.cs from the new project.</span></span>
-   <span data-ttu-id="f67d3-180">Kopieren Sie „P2PSession.cs“, „P2PSessionClient.cs“ und „P2PSessionHost.cs“ in den Ordner des neuen Projekts, und fügen Sie die kopierten Dateien in das neue Projekt ein.</span><span class="sxs-lookup"><span data-stu-id="f67d3-180">Copy P2PSession.cs, P2PSessionClient.cs, and P2PSessionHost.cs into the new project's folder and include the copied files in the new project.</span></span>
-   <span data-ttu-id="f67d3-181">Das Projekt kann dann ohne weitere Änderungen erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="f67d3-181">The project will build without needing further changes.</span></span>

**<span data-ttu-id="f67d3-182">Freigegebene Dateien</span><span class="sxs-lookup"><span data-stu-id="f67d3-182">Shared files</span></span>**

-   <span data-ttu-id="f67d3-183">Kopieren Sie die Ordner „Common“, „Model“, „View“ und „ViewModel“ aus „\\QuizGame.Shared\\“ in „\\QuizGame10\\“.</span><span class="sxs-lookup"><span data-stu-id="f67d3-183">Copy the folders Common, Model, View, and ViewModel from \\QuizGame.Shared\\ to \\QuizGame10\\.</span></span>
-   <span data-ttu-id="f67d3-184">„Common“, „Model“, „View“ und „ViewModel“ sind die Ordner, die gemeint sind, wenn es um die freigegebenen Ordner auf dem Datenträger geht.</span><span class="sxs-lookup"><span data-stu-id="f67d3-184">Common, Model, View, and ViewModel are what we'll mean when we refer to the shared folders on disk.</span></span>

**<span data-ttu-id="f67d3-185">QuizGameHost</span><span class="sxs-lookup"><span data-stu-id="f67d3-185">QuizGameHost</span></span>**

-   <span data-ttu-id="f67d3-186">Erstellen Sie ein neues Windows 10-Projekt (**Hinzufügen** &gt; **Neues Projekt** &gt; **Windows Universal** &gt; **Leere Anwendung (Windows Universal)**) und nennen Sie es "quizgamehost".</span><span class="sxs-lookup"><span data-stu-id="f67d3-186">Create a new Windows10 app project (**Add** &gt; **New Project** &gt; **Windows Universal** &gt; **Blank Application (Windows Universal)**) and name it QuizGameHost.</span></span>
-   <span data-ttu-id="f67d3-187">Fügen Sie einen Verweis auf P2PHelper hinzu (**Verweis hinzufügen** &gt; **Projekte** &gt; **Lösung** &gt; **P2PHelper**).</span><span class="sxs-lookup"><span data-stu-id="f67d3-187">Add a reference to P2PHelper (**Add Reference** &gt; **Projects** &gt; **Solution** &gt; **P2PHelper**).</span></span>
-   <span data-ttu-id="f67d3-188">Erstellen Sie im **Projektmappen-Explorer** für jeden freigegebenen Ordner auf dem Datenträger einen neuen Ordner.</span><span class="sxs-lookup"><span data-stu-id="f67d3-188">In **Solution Explorer**, create a new folder for each of the shared folders on disk.</span></span> <span data-ttu-id="f67d3-189">Klicken Sie nacheinander mit der rechten Maustaste auf die einzelnen Ordner, die Sie gerade erstellt haben, und klicken Sie dann auf **Hinzufügen** &gt; **Vorhandenes Element**. Wechseln Sie anschließend eine Ordnerebene nach oben.</span><span class="sxs-lookup"><span data-stu-id="f67d3-189">In turn, right-click each folder you just created and click **Add** &gt; **Existing Item** and navigate up a folder.</span></span> <span data-ttu-id="f67d3-190">Öffnen Sie den entsprechenden freigegebenen Ordner, wählen Sie alle Dateien aus, und klicken Sie anschließend auf **Link hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="f67d3-190">Open the appropriate shared folder, select all files, and then click **Add As Link**.</span></span>
-   <span data-ttu-id="f67d3-191">Kopieren Sie „MainPage.xaml“ aus „\\QuizGame.Windows\\“ in „\\QuizGameHost\\“, und ändern Sie den Namespace in „QuizGameHost“.</span><span class="sxs-lookup"><span data-stu-id="f67d3-191">Copy MainPage.xaml from \\QuizGame.Windows\\ to \\QuizGameHost\\ and change the namespace to QuizGameHost.</span></span>
-   <span data-ttu-id="f67d3-192">Kopieren Sie „App.xaml“ aus „\\QuizGame.Shared\\“ in „\\QuizGameHost\\“, und ändern Sie den Namespace in „QuizGameHost“.</span><span class="sxs-lookup"><span data-stu-id="f67d3-192">Copy App.xaml from \\QuizGame.Shared\\ to \\QuizGameHost\\ and change the namespace to QuizGameHost.</span></span>
-   <span data-ttu-id="f67d3-193">Anstatt „app.xaml.cs“ zu überschreiben, behalten wir die Version im neuen Projekt bei und nehmen nur eine gezielte Änderung vor, um den lokalen Testmodus zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="f67d3-193">Instead of overwriting app.xaml.cs, we'll keep the version in the new project and just make one targeted change to it to support local test mode.</span></span> <span data-ttu-id="f67d3-194">Ersetzen Sie in „app.xaml.cs“ die folgende Codezeile:</span><span class="sxs-lookup"><span data-stu-id="f67d3-194">In app.xaml.cs, replace this line of code:</span></span>

```CSharp
rootFrame.Navigate(typeof(MainPage), e.Arguments);
```

<span data-ttu-id="f67d3-195">durch diese Codezeile:</span><span class="sxs-lookup"><span data-stu-id="f67d3-195">with this:</span></span>

```CSharp
#if LOCALTESTMODEON
    rootFrame.Navigate(typeof(TestView), e.Arguments);
#else
    rootFrame.Navigate(typeof(MainPage), e.Arguments);
#endif
```

-   <span data-ttu-id="f67d3-196">Fügen Sie unter **Eigenschaften** &gt; **Erstellen** &gt; **Bedingte Kompilierungssymbole** den Text „LOCALTESTMODEON“ hinzu.</span><span class="sxs-lookup"><span data-stu-id="f67d3-196">In **Properties** &gt; **Build** &gt; **conditional compilation symbols**, add LOCALTESTMODEON.</span></span>
-   <span data-ttu-id="f67d3-197">Jetzt können Sie wieder auf den Code zurückgreifen, den Sie der Datei „app.xaml.cs“ hinzugefügt haben, und den TestView-Typ auflösen.</span><span class="sxs-lookup"><span data-stu-id="f67d3-197">You'll now be able to go back to the code you added to app.xaml.cs and resolve the TestView type.</span></span>
-   <span data-ttu-id="f67d3-198">Ändern Sie in „package.appxmanifest“ den capability-Namen von „internetClient“ in „internetClientServer“.</span><span class="sxs-lookup"><span data-stu-id="f67d3-198">In package.appxmanifest, change the capability name from internetClient to internetClientServer.</span></span>

**<span data-ttu-id="f67d3-199">QuizGameClient</span><span class="sxs-lookup"><span data-stu-id="f67d3-199">QuizGameClient</span></span>**

-   <span data-ttu-id="f67d3-200">Erstellen Sie ein neues Windows 10-Projekt (**Hinzufügen** &gt; **Neues Projekt** &gt; **Windows Universal** &gt; **Leere Anwendung (Windows Universal)**) und nennen Sie es "quizgameclient".</span><span class="sxs-lookup"><span data-stu-id="f67d3-200">Create a new Windows10 app project (**Add** &gt; **New Project** &gt; **Windows Universal** &gt; **Blank Application (Windows Universal)**) and name it QuizGameClient.</span></span>
-   <span data-ttu-id="f67d3-201">Fügen Sie einen Verweis auf P2PHelper hinzu (**Verweis hinzufügen** &gt; **Projekte** &gt; **Lösung** &gt; **P2PHelper**).</span><span class="sxs-lookup"><span data-stu-id="f67d3-201">Add a reference to P2PHelper (**Add Reference** &gt; **Projects** &gt; **Solution** &gt; **P2PHelper**).</span></span>
-   <span data-ttu-id="f67d3-202">Erstellen Sie im **Projektmappen-Explorer** für jeden freigegebenen Ordner auf dem Datenträger einen neuen Ordner.</span><span class="sxs-lookup"><span data-stu-id="f67d3-202">In **Solution Explorer**, create a new folder for each of the shared folders on disk.</span></span> <span data-ttu-id="f67d3-203">Klicken Sie nacheinander mit der rechten Maustaste auf die einzelnen Ordner, die Sie gerade erstellt haben, und klicken Sie dann auf **Hinzufügen** &gt; **Vorhandenes Element**. Wechseln Sie anschließend eine Ordnerebene nach oben.</span><span class="sxs-lookup"><span data-stu-id="f67d3-203">In turn, right-click each folder you just created and click **Add** &gt; **Existing Item** and navigate up a folder.</span></span> <span data-ttu-id="f67d3-204">Öffnen Sie den entsprechenden freigegebenen Ordner, wählen Sie alle Dateien aus, und klicken Sie anschließend auf **Link hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="f67d3-204">Open the appropriate shared folder, select all files, and then click **Add As Link**.</span></span>
-   <span data-ttu-id="f67d3-205">Kopieren Sie „MainPage.xaml“ aus „\\QuizGame.WindowsPhone\\“ in „\\QuizGameClient\\“, und ändern Sie den Namespace in „QuizGameClient“.</span><span class="sxs-lookup"><span data-stu-id="f67d3-205">Copy MainPage.xaml from \\QuizGame.WindowsPhone\\ to \\QuizGameClient\\ and change the namespace to QuizGameClient.</span></span>
-   <span data-ttu-id="f67d3-206">Kopieren Sie „App.xaml“ aus „\\QuizGame.Shared\\“ in „\\QuizGameClient\\“, und ändern Sie den Namespace in „QuizGameClient“.</span><span class="sxs-lookup"><span data-stu-id="f67d3-206">Copy App.xaml from \\QuizGame.Shared\\ to \\QuizGameClient\\ and change the namespace to QuizGameClient.</span></span>
-   <span data-ttu-id="f67d3-207">Ändern Sie in „package.appxmanifest“ den capability-Namen von „internetClient“ in „internetClientServer“.</span><span class="sxs-lookup"><span data-stu-id="f67d3-207">In package.appxmanifest, change the capability name from internetClient to internetClientServer.</span></span>

<span data-ttu-id="f67d3-208">Nun können Sie die Erstellung durchführen und die App ausführen.</span><span class="sxs-lookup"><span data-stu-id="f67d3-208">You'll now be able to build and run.</span></span>

## <a name="adaptive-ui"></a><span data-ttu-id="f67d3-209">Adaptive UI</span><span class="sxs-lookup"><span data-stu-id="f67d3-209">Adaptive UI</span></span>

<span data-ttu-id="f67d3-210">Die app QuizGameHost Windows10 sieht in Ordnung, wenn die app in einem breiten Fenster ausgeführt wird (die nur auf einem Gerät mit großem Bildschirm möglich ist).</span><span class="sxs-lookup"><span data-stu-id="f67d3-210">The QuizGameHost Windows10 app looks fine when the app is running in a wide window (which is only possible on a device with a large screen).</span></span> <span data-ttu-id="f67d3-211">Aber wenn das Fenster der App schmal ist (auf kleinen und großen Geräten möglich), wird die UI so gestaucht, dass die Lesbarkeit nicht mehr gewährleistet ist.</span><span class="sxs-lookup"><span data-stu-id="f67d3-211">When the app's window is narrow, though (which happens on a small device, and can also happen on a large device), the UI is squashed so much that it's unreadable.</span></span>

<span data-ttu-id="f67d3-212">Wir können das adaptive Visual State-Manager-Feature nutzen, um dies zu beheben. Dies ist unter [Fallstudie: Bookstore2](w8x-to-uwp-case-study-bookstore2.md) beschrieben.</span><span class="sxs-lookup"><span data-stu-id="f67d3-212">We can use the adaptive Visual State Manager feature to remedy this, as we explained in [Case study: Bookstore2](w8x-to-uwp-case-study-bookstore2.md).</span></span> <span data-ttu-id="f67d3-213">Zuerst legen wir die Eigenschaften für visuelle Elemente so fest, dass für die UI standardmäßig das schmale Layout gewählt wird.</span><span class="sxs-lookup"><span data-stu-id="f67d3-213">First, set properties on visual elements so that, by default, the UI is laid out in the narrow state.</span></span> <span data-ttu-id="f67d3-214">Alle diese Änderungen werden in „\\View\\HostView.xaml“ vorgenommen.</span><span class="sxs-lookup"><span data-stu-id="f67d3-214">All of these changes take place in \\View\\HostView.xaml.</span></span>

-   <span data-ttu-id="f67d3-215">Ändern Sie im **Grid**-Hauptelement den **Height**-Wert des **RowDefinition**-Elements von „140“ in „Auto“.</span><span class="sxs-lookup"><span data-stu-id="f67d3-215">In the main **Grid**, change the **Height** of the first **RowDefinition** from "140" to "Auto".</span></span>
-   <span data-ttu-id="f67d3-216">Legen Sie im **Grid**-Element, in dem das **TextBlock**-Element mit dem Namen `pageTitle` enthalten ist, `x:Name="pageTitleGrid"` und `Height="60"` fest.</span><span class="sxs-lookup"><span data-stu-id="f67d3-216">On the **Grid** that contains the **TextBlock** named `pageTitle`, set `x:Name="pageTitleGrid"` and `Height="60"`.</span></span> <span data-ttu-id="f67d3-217">Diese ersten beiden Schritte dienen dazu, dass wir die Höhe des **RowDefinition**-Elements über einen Setter in einem visuellen Zustand effektiv steuern können.</span><span class="sxs-lookup"><span data-stu-id="f67d3-217">These first two steps are so that we can effectively control the height of that **RowDefinition** via a setter in a visual state.</span></span>
-   <span data-ttu-id="f67d3-218">Geben Sie unter `pageTitle` den Code `Margin="-30,0,0,0"` an.</span><span class="sxs-lookup"><span data-stu-id="f67d3-218">On `pageTitle`, set `Margin="-30,0,0,0"`.</span></span>
-   <span data-ttu-id="f67d3-219">Legen Sie für das **Grid**-Element, das mit dem Kommentar `<!-- Content -->` angegeben wird, `x:Name="contentGrid"` und `Margin="-18,12,0,0"` fest.</span><span class="sxs-lookup"><span data-stu-id="f67d3-219">On the **Grid** indicated by the comment `<!-- Content -->`, set `x:Name="contentGrid"` and `Margin="-18,12,0,0"`.</span></span>
-   <span data-ttu-id="f67d3-220">Geben Sie für das **TextBlock**-Element direkt oberhalb des Kommentars `<!-- Options -->` den Code `Margin="0,0,0,24"` an.</span><span class="sxs-lookup"><span data-stu-id="f67d3-220">On the **TextBlock** immediately above the comment `<!-- Options -->`, set `Margin="0,0,0,24"`.</span></span>
-   <span data-ttu-id="f67d3-221">Ändern Sie im standardmäßigen **TextBlock**-Stil (erste Ressource in der Datei) den Wert des **FontSize**-Setters in „15“.</span><span class="sxs-lookup"><span data-stu-id="f67d3-221">In the default **TextBlock** style (the first resource in the file), change the **FontSize** setter's value to "15".</span></span>
-   <span data-ttu-id="f67d3-222">Ändern Sie unter `OptionContentControlStyle` den Wert des **FontSize**-Setters in „20“.</span><span class="sxs-lookup"><span data-stu-id="f67d3-222">In `OptionContentControlStyle`, change the **FontSize** setter's value to "20".</span></span> <span data-ttu-id="f67d3-223">Durch diesen und den vorherigen Schritt erhalten wir eine gute Typhierarchie, die auf allen Geräten einwandfrei funktioniert.</span><span class="sxs-lookup"><span data-stu-id="f67d3-223">This step and the previous one will give us a good type ramp that will work well on all devices.</span></span> <span data-ttu-id="f67d3-224">Dies sind deutlich flexiblere Größen als "30" für die Windows8.1-app verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="f67d3-224">These are much more flexible sizes than the "30" we were using for the Windows8.1 app.</span></span>
-   <span data-ttu-id="f67d3-225">Fügen Sie dem **Grid**-Stammelement schließlich den geeigneten Visual State-Manager-Markupcode hinzu.</span><span class="sxs-lookup"><span data-stu-id="f67d3-225">Finally, add the appropriate Visual State Manager markup to the root **Grid**.</span></span>

```xml
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup>
        <VisualState x:Name="WideState">
            <VisualState.StateTriggers>
                <AdaptiveTrigger MinWindowWidth="548"/>
            </VisualState.StateTriggers>
            <VisualState.Setters>
                <Setter Target="pageTitleGrid.Height" Value="140"/>
                <Setter Target="pageTitle.Margin" Value="0,0,30,40"/>
                <Setter Target="contentGrid.Margin" Value="40,40,0,0"/>
            </VisualState.Setters>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups>
```

## <a name="universal-styling"></a><span data-ttu-id="f67d3-226">Universelle Formatierung</span><span class="sxs-lookup"><span data-stu-id="f67d3-226">Universal styling</span></span>


<span data-ttu-id="f67d3-227">Sie werden feststellen, dass die Schaltflächen in Windows 10, die gleiche toucheingabeziel in der Vorlage padding besitzen.</span><span class="sxs-lookup"><span data-stu-id="f67d3-227">You'll notice that in Windows10, the buttons don't have the same touch-target padding in their template.</span></span> <span data-ttu-id="f67d3-228">Dies lässt sich mit zwei kleinen Änderungen beheben.</span><span class="sxs-lookup"><span data-stu-id="f67d3-228">Two small changes will remedy that.</span></span> <span data-ttu-id="f67d3-229">Fügen Sie diesen Markupcode zuerst in QuizGameHost und QuizGameClient jeweils der Datei „app.xaml“ hinzu.</span><span class="sxs-lookup"><span data-stu-id="f67d3-229">First, add this markup to app.xaml in both QuizGameHost and QuizGameClient.</span></span>

```xml
<Style TargetType="Button">
    <Setter Property="Margin" Value="12"/>
</Style>
```

<span data-ttu-id="f67d3-230">Fügen Sie diesen Setter anschließend dem `OptionButtonStyle`-Element in „\\View\\ClientView.xaml“ hinzu.</span><span class="sxs-lookup"><span data-stu-id="f67d3-230">And second, add this setter to `OptionButtonStyle` in \\View\\ClientView.xaml.</span></span>

```xml
<Setter Property="Margin" Value="6"/>
```

<span data-ttu-id="f67d3-231">Dank dieser letzten Optimierung verhält sich die App genauso wie vor dem Portieren und sieht auch genauso aus. Der entscheidende Vorteil ist aber, dass sie jetzt auf allen Geräten ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="f67d3-231">With that last tweak, the app will behave and look just the same as it did before the port, with the additional value that it will now run everywhere.</span></span>

## <a name="conclusion"></a><span data-ttu-id="f67d3-232">Fazit</span><span class="sxs-lookup"><span data-stu-id="f67d3-232">Conclusion</span></span>

<span data-ttu-id="f67d3-233">Die App, die wir im Rahmen dieser Fallstudie portiert haben, war eine relativ komplexe App mit mehrere Projekten, einer Klassenbibliothek und einer größeren Menge an Code und UI-Elementen.</span><span class="sxs-lookup"><span data-stu-id="f67d3-233">The app that we ported in this case study was a relatively complex one involving several projects, a class library, and quite a large amount of code and user interface.</span></span> <span data-ttu-id="f67d3-234">Trotzdem war der Portiervorgang einfach.</span><span class="sxs-lookup"><span data-stu-id="f67d3-234">Even so, the port was straightforward.</span></span> <span data-ttu-id="f67d3-235">Einige der das einfache Portieren ist für die große Ähnlichkeit zwischen der Windows 10-Entwicklerplattform und den Windows8.1 und Windows Phone 8.1-Plattformen.</span><span class="sxs-lookup"><span data-stu-id="f67d3-235">Some of the ease of porting is directly attributable to the similarity between the Windows10 developer platform and the Windows8.1 and Windows Phone 8.1 platforms.</span></span> <span data-ttu-id="f67d3-236">Ein anderer Grund ist der Entwurf der ursprünglichen App, bei dem darauf geachtet wurde, dass die Modelle, Ansichtsmodelle und Ansichten separat gehalten wurden.</span><span class="sxs-lookup"><span data-stu-id="f67d3-236">Some is due to the way the original app was designed to keep the models, the view models, and the views separate.</span></span>
