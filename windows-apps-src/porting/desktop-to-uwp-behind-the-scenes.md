---
author: normesta
Description: "Dieser Artikel beschäftigt sich eingehender damit, wie die Desktop-Brücke funktioniert."
title: "Hintergrundinformationen zur Desktop-Brücke"
ms.author: normesta
ms.date: 05/25/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows10, UWP
ms.assetid: a399fae9-122c-46c4-a1dc-a1a241e5547a
ms.openlocfilehash: 050499baaf383fc135d833ae1e4733c95f2b5fa1
ms.sourcegitcommit: 7540962003b38811e6336451bb03d46538b35671
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 05/26/2017
---
# <a name="behind-the-scenes-of-the-desktop-bridge"></a><span data-ttu-id="edc8a-104">Hintergrundinformationen zur Desktop-Brücke</span><span class="sxs-lookup"><span data-stu-id="edc8a-104">Behind the scenes of the Desktop Bridge</span></span>

<span data-ttu-id="edc8a-105">Dieser Artikel beschäftigt sich eingehender damit, wie die Desktop-Brücke funktioniert.</span><span class="sxs-lookup"><span data-stu-id="edc8a-105">This article provides a deeper dive on how the Desktop Bridge works under the covers.</span></span>

<span data-ttu-id="edc8a-106">Ein wichtiges Ziel der Desktop-Brücke besteht darin, den Anwendungszustand vom Systemzustand bestmöglich zu trennen und dabei die Kompatibilität mit anderen Apps aufrechtzuerhalten.</span><span class="sxs-lookup"><span data-stu-id="edc8a-106">A key goal of the Desktop Bridge is to separate application state from system state as much as possible while maintaining compatibility with other apps.</span></span> <span data-ttu-id="edc8a-107">Die Brücke erreicht dies, indem sie die Anwendung in einem Paket für die universelle Windows-Plattform (UWP) platziert und anschließend einige zur Laufzeit am Dateisystem und an der Registrierung vorgenommene Änderungen ermittelt und umleitet.</span><span class="sxs-lookup"><span data-stu-id="edc8a-107">The bridge accomplishes this by placing the application inside a Universal Windows Platform (UWP) package, and then detecting and redirecting some changes  it makes to the file system and registry at runtime.</span></span>

<span data-ttu-id="edc8a-108">Pakete, die Sie für die Desktop-App erstellen, sind vertrauenswürdige Anwendungen nur für den Desktop, die nicht virtualisiert sind und sich nicht in der Sandbox befinden.</span><span class="sxs-lookup"><span data-stu-id="edc8a-108">Packages that you create for your desktop app are desktop-only, full-trust applications and are not virtualized or sandboxed.</span></span> <span data-ttu-id="edc8a-109">Dies ermöglicht es ihnen, auf die gleiche Weise mit anderen Apps zu interagieren wie klassische Desktop-Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="edc8a-109">This allows them to interact with other apps the same way classic desktop applications do.</span></span>

## <a name="installation"></a><span data-ttu-id="edc8a-110">Installation</span><span class="sxs-lookup"><span data-stu-id="edc8a-110">Installation</span></span>

<span data-ttu-id="edc8a-111">App-Pakete werden mit der ausführbaren Datei *app_name.exe* unter *C:\Programme\WindowsApps\package_name* installiert.</span><span class="sxs-lookup"><span data-stu-id="edc8a-111">App packages are installed under *C:\Program Files\WindowsApps\package_name*, with the executable titled *app_name.exe*.</span></span> <span data-ttu-id="edc8a-112">Jeder Paketordner enthält ein Manifest (AppxManifest.xml), das einen speziellen XML-Namespace für verpackte Apps enthält.</span><span class="sxs-lookup"><span data-stu-id="edc8a-112">Each package folder contains a manifest (named AppxManifest.xml) that contains a special XML namespace for packaged apps.</span></span> <span data-ttu-id="edc8a-113">In der Manifestdatei ist ein ```<EntryPoint>```-Element enthalten, das auf die vertrauenswürdige App verweist.</span><span class="sxs-lookup"><span data-stu-id="edc8a-113">Inside that manifest file is an ```<EntryPoint>``` element, which references the full-trust app.</span></span> <span data-ttu-id="edc8a-114">Wenn die App gestartet wird, wird sie nicht im App-Container, sondern stattdessen wie gewohnt als Benutzer ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="edc8a-114">When that app is launched, it does not run inside an app container, but instead it runs as the user as it normally would.</span></span>

<span data-ttu-id="edc8a-115">Nach der Bereitstellung werden Paketdateien als schreibgeschützt markiert und vom Betriebssystem gesperrt.</span><span class="sxs-lookup"><span data-stu-id="edc8a-115">After deployment, package files are marked read-only and heavily locked down by the operating system.</span></span> <span data-ttu-id="edc8a-116">Windows verhindert, dass Apps gestartet werden, wenn diese Dateien manipuliert werden.</span><span class="sxs-lookup"><span data-stu-id="edc8a-116">Windows prevents apps from launching if these files are tampered with.</span></span>

## <a name="file-system"></a><span data-ttu-id="edc8a-117">Dateisystem</span><span class="sxs-lookup"><span data-stu-id="edc8a-117">File system</span></span>

<span data-ttu-id="edc8a-118">Zur Aufnahme des App-Zustands versucht die Brücke, Änderungen zu erfassen, die die App an „AppData“ vornimmt.</span><span class="sxs-lookup"><span data-stu-id="edc8a-118">In order to contain app state, the bridge attempts to capture changes the app makes to AppData.</span></span> <span data-ttu-id="edc8a-119">Alle Schreibvorgänge in den AppData-Ordner des Benutzers (z.B. *C:\Benutzer\Benutzername\AppData*), einschließlich Erstellungs-, Lösch- und Aktualisierungsvorgänge, werden direkt an einen privaten Speicherort pro Benutzer und App kopiert.</span><span class="sxs-lookup"><span data-stu-id="edc8a-119">All write to the user's AppData folder (e.g., *C:\Users\user_name\AppData*), including create, delete, and update, are copied on write to a private per-user, per-app location.</span></span> <span data-ttu-id="edc8a-120">Dadurch entsteht der Eindruck, dass die verpackte App die tatsächlichen AppData-Elemente bearbeitet, obwohl eigentlich eine private Kopie geändert wird.</span><span class="sxs-lookup"><span data-stu-id="edc8a-120">This creates the illusion that the packaged app is editing the real AppData when it is actually modifying a private copy.</span></span> <span data-ttu-id="edc8a-121">Durch eine derartige Umleitung von Schreibvorgängen kann das System alle von der App vorgenommenen Dateiänderungen nachverfolgen.</span><span class="sxs-lookup"><span data-stu-id="edc8a-121">By redirecting writes this way, the system can track all file modifications made by the app.</span></span> <span data-ttu-id="edc8a-122">Dadurch kann das System diese Dateien bereinigen, wenn die App deinstalliert wird, und somit die Systemüberlastung verringern und bessere App-Deinstallationsmöglichkeiten für den Benutzer bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="edc8a-122">This allows the system to clean up those files when the app is uninstalled, thus reducing system "rot" and providing a better app removal experience for the user.</span></span>

<span data-ttu-id="edc8a-123">Zusätzlich zur Umleitung von „AppData“ führt die Brücke bekannte Windows-Ordner („System32“, „Programme (x86)“ usw.) dynamisch mit den entsprechenden Verzeichnissen im App-Paket zusammen.</span><span class="sxs-lookup"><span data-stu-id="edc8a-123">In addition to redirecting AppData, the bridge also dynamically merges Windows' well-known folders (System32, Program Files (x86), etc) with corresponding directories in the app package.</span></span> <span data-ttu-id="edc8a-124">Jedes verpackte Paket enthält im Stammverzeichnis einen Ordner mit dem Namen „VFS“.</span><span class="sxs-lookup"><span data-stu-id="edc8a-124">Each package contains a folder named "VFS" at its root.</span></span> <span data-ttu-id="edc8a-125">Alle Lesevorgänge für Verzeichnisse oder Dateien im VFS-Verzeichnis werden zur Laufzeit mit den jeweiligen nativen Entsprechungen zusammengeführt.</span><span class="sxs-lookup"><span data-stu-id="edc8a-125">Any reads of directories or files in the VFS directory are merged at runtime with their respective native counterparts.</span></span> <span data-ttu-id="edc8a-126">Beispiel: Eine App kann *C:\Programme\WindowsApps\Paketname\VFS\SystemX86\vc10.dll* als Teil des App-Pakets enthalten, die Datei wird aber scheinbar unter *C:\Windows\System32\vc10.dll* installiert.</span><span class="sxs-lookup"><span data-stu-id="edc8a-126">For example, an app could contain *C:\Program Files\WindowsApps\package_name\VFS\SystemX86\vc10.dll* as part of its app package, but the file would appear to be installed at *C:\Windows\System32\vc10.dll*.</span></span>  <span data-ttu-id="edc8a-127">Dies gewährleistet die Kompatibilität mit Desktopanwendungen, die davon ausgehen, dass sich Dateien an Speicherorten ohne Pakete befinden.</span><span class="sxs-lookup"><span data-stu-id="edc8a-127">This maintains compatibility with desktop applications that may expect files to live in non-package locations.</span></span>

<span data-ttu-id="edc8a-128">Schreibvorgänge in Dateien/Ordner im verpackten App-Paket sind nicht zulässig.</span><span class="sxs-lookup"><span data-stu-id="edc8a-128">Writes to files/folders in the app package are not allowed.</span></span> <span data-ttu-id="edc8a-129">Schreibvorgänge in Dateien und Ordner, die nicht Teil des Pakets sind, werden von der Brücke ignoriert und sind nur zulässig, wenn der Benutzer über entsprechende Berechtigungen verfügt.</span><span class="sxs-lookup"><span data-stu-id="edc8a-129">Writes to files and folders that are not part of the package are ignored by the bridge and are allowed as long as the user has permission.</span></span>

### <a name="common-operations"></a><span data-ttu-id="edc8a-130">Allgemeine Vorgänge</span><span class="sxs-lookup"><span data-stu-id="edc8a-130">Common operations</span></span>

<span data-ttu-id="edc8a-131">Diese kurze Referenztabelle enthält allgemeine Dateisystemvorgänge und Informationen zur Verarbeitung durch die Brücke.</span><span class="sxs-lookup"><span data-stu-id="edc8a-131">This short reference table shows common file system operations and how the bridge handles them.</span></span>

<span data-ttu-id="edc8a-132">Vorgang</span><span class="sxs-lookup"><span data-stu-id="edc8a-132">Operation</span></span> | <span data-ttu-id="edc8a-133">Ergebnis</span><span class="sxs-lookup"><span data-stu-id="edc8a-133">Result</span></span> | <span data-ttu-id="edc8a-134">Beispiel</span><span class="sxs-lookup"><span data-stu-id="edc8a-134">Example</span></span>
:--- | :--- | :---
<span data-ttu-id="edc8a-135">Lesen oder Enumerieren einer bekannten Windows-Datei oder eines bekannten Windows-Ordners</span><span class="sxs-lookup"><span data-stu-id="edc8a-135">Read or enumerate a well-known Windows file or folder</span></span> | <span data-ttu-id="edc8a-136">Eine dynamische Zusammenführung von *C:\Programme\Paketname\VFS\bekannter Ordner* mit der lokalen Systementsprechung</span><span class="sxs-lookup"><span data-stu-id="edc8a-136">A dynamic merge of *C:\Program Files\package_name\VFS\well_known_folder* with the local system counterpart.</span></span> | <span data-ttu-id="edc8a-137">Der Lesevorgang für *C:\Windows\System32* gibt den Inhalt von *C:\Windows\System32* und den Inhalt von *C:\Programme\WindowsApps\Paketname\VFS\SystemX86* zurück.</span><span class="sxs-lookup"><span data-stu-id="edc8a-137">Reading *C:\Windows\System32* returns the contents of *C:\Windows\System32* plus the contents of *C:\Program Files\WindowsApps\package_name\VFS\SystemX86*.</span></span>
<span data-ttu-id="edc8a-138">Schreiben unter „AppData“</span><span class="sxs-lookup"><span data-stu-id="edc8a-138">Write under AppData</span></span> | <span data-ttu-id="edc8a-139">Kopie bei Schreibvorgang an einem Speicherort pro Benutzer und App</span><span class="sxs-lookup"><span data-stu-id="edc8a-139">Copy-on-written to a per-user, per-app location.</span></span> | <span data-ttu-id="edc8a-140">Für „AppData“ ist dies in der Regel *C:\Benutzer\Benutzername\AppData*.</span><span class="sxs-lookup"><span data-stu-id="edc8a-140">AppData is typically *C:\Users\user_name\AppData*.</span></span>  
<span data-ttu-id="edc8a-141">Schreibvorgänge im Paket</span><span class="sxs-lookup"><span data-stu-id="edc8a-141">Write inside the package</span></span> | <span data-ttu-id="edc8a-142">Nicht zulässig</span><span class="sxs-lookup"><span data-stu-id="edc8a-142">Not allowed.</span></span> <span data-ttu-id="edc8a-143">Das Paket ist schreibgeschützt.</span><span class="sxs-lookup"><span data-stu-id="edc8a-143">The package is read-only.</span></span> | <span data-ttu-id="edc8a-144">Schreibvorgänge unter *C:\Programme\WindowsApps\Paketname* sind nicht zulässig.</span><span class="sxs-lookup"><span data-stu-id="edc8a-144">Writes under *C:\Program Files\WindowsApps\package_name* are not allowed.</span></span>
<span data-ttu-id="edc8a-145">Schreibvorgänge außerhalb des Pakets</span><span class="sxs-lookup"><span data-stu-id="edc8a-145">Writes outside the package</span></span> | <span data-ttu-id="edc8a-146">Von der Brücke ignoriert.</span><span class="sxs-lookup"><span data-stu-id="edc8a-146">Ignored by the bridge.</span></span> <span data-ttu-id="edc8a-147">Zulässig, wenn der Benutzer über entsprechende Berechtigungen verfügt.</span><span class="sxs-lookup"><span data-stu-id="edc8a-147">Allowed if the user has permissions.</span></span> | <span data-ttu-id="edc8a-148">Ein Schreibvorgang in *C:\Windows\System32\foo.dll* ist zulässig, wenn das Paket nicht *C:\Programme\WindowsApps\Paketname\VFS\SystemX86\foo.dll* enthält und der Benutzer über entsprechende Berechtigungen verfügt.</span><span class="sxs-lookup"><span data-stu-id="edc8a-148">A write to *C:\Windows\System32\foo.dll* is allowed if the package does not contain *C:\Program Files\WindowsApps\package_name\VFS\SystemX86\foo.dll* and the user has permissions.</span></span>

### <a name="packaged-vfs-locations"></a><span data-ttu-id="edc8a-149">Gepackte VFS-Speicherorte</span><span class="sxs-lookup"><span data-stu-id="edc8a-149">Packaged VFS locations</span></span>

<span data-ttu-id="edc8a-150">Der folgenden Tabelle können Sie entnehmen, wo Dateien, die zu Ihrem Paket gehören, für die App im System überlagert sind.</span><span class="sxs-lookup"><span data-stu-id="edc8a-150">The following table shows where files shipping as part of your package are overlaid on the system for the app.</span></span> <span data-ttu-id="edc8a-151">Die App geht davon aus, dass sich diese Dateien an den aufgeführten Systemspeicherorten befinden, während sie sich tatsächlich an den umgeleiteten Speicherorten unter *C:\Programme\WindowsApps\Paketname\VFS* befinden.</span><span class="sxs-lookup"><span data-stu-id="edc8a-151">Your app will perceive these files to be in the listed system locations, when in fact they are in the redirected locations inside *C:\Program Files\WindowsApps\package_name\VFS*.</span></span> <span data-ttu-id="edc8a-152">Die FOLDERID-Speicherorte stammen von der [**KNOWNFOLDERID**](https://msdn.microsoft.com/library/windows/desktop/dd378457.aspx)-Konstante.</span><span class="sxs-lookup"><span data-stu-id="edc8a-152">The FOLDERID locations are from the [**KNOWNFOLDERID**](https://msdn.microsoft.com/library/windows/desktop/dd378457.aspx) constants.</span></span>

<span data-ttu-id="edc8a-153">Systemspeicherort</span><span class="sxs-lookup"><span data-stu-id="edc8a-153">System Location</span></span> | <span data-ttu-id="edc8a-154">Umgeleiteter Speicherort (unter [Paketstammverzeichnis]\VFS\)</span><span class="sxs-lookup"><span data-stu-id="edc8a-154">Redirected Location (Under [PackageRoot]\VFS\)</span></span> | <span data-ttu-id="edc8a-155">Gültig für Architekturen</span><span class="sxs-lookup"><span data-stu-id="edc8a-155">Valid on architectures</span></span>
 :--- | :--- | :---
<span data-ttu-id="edc8a-156">FOLDERID_SystemX86</span><span class="sxs-lookup"><span data-stu-id="edc8a-156">FOLDERID_SystemX86</span></span> | <span data-ttu-id="edc8a-157">SystemX86</span><span class="sxs-lookup"><span data-stu-id="edc8a-157">SystemX86</span></span> | <span data-ttu-id="edc8a-158">x86, amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-158">x86, amd64</span></span>
<span data-ttu-id="edc8a-159">FOLDERID_System</span><span class="sxs-lookup"><span data-stu-id="edc8a-159">FOLDERID_System</span></span> | <span data-ttu-id="edc8a-160">SystemX64</span><span class="sxs-lookup"><span data-stu-id="edc8a-160">SystemX64</span></span> | <span data-ttu-id="edc8a-161">amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-161">amd64</span></span>
<span data-ttu-id="edc8a-162">FOLDERID_ProgramFilesX86</span><span class="sxs-lookup"><span data-stu-id="edc8a-162">FOLDERID_ProgramFilesX86</span></span> | <span data-ttu-id="edc8a-163">ProgramFilesX86</span><span class="sxs-lookup"><span data-stu-id="edc8a-163">ProgramFilesX86</span></span> | <span data-ttu-id="edc8a-164">x86, amd6</span><span class="sxs-lookup"><span data-stu-id="edc8a-164">x86, amd6</span></span>
<span data-ttu-id="edc8a-165">FOLDERID_ProgramFilesX64</span><span class="sxs-lookup"><span data-stu-id="edc8a-165">FOLDERID_ProgramFilesX64</span></span> | <span data-ttu-id="edc8a-166">ProgramFilesX64</span><span class="sxs-lookup"><span data-stu-id="edc8a-166">ProgramFilesX64</span></span> | <span data-ttu-id="edc8a-167">amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-167">amd64</span></span>
<span data-ttu-id="edc8a-168">FOLDERID_ProgramFilesCommonX86</span><span class="sxs-lookup"><span data-stu-id="edc8a-168">FOLDERID_ProgramFilesCommonX86</span></span> | <span data-ttu-id="edc8a-169">ProgramFilesCommonX86</span><span class="sxs-lookup"><span data-stu-id="edc8a-169">ProgramFilesCommonX86</span></span> | <span data-ttu-id="edc8a-170">x86, amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-170">x86, amd64</span></span>
<span data-ttu-id="edc8a-171">FOLDERID_ProgramFilesCommonX64</span><span class="sxs-lookup"><span data-stu-id="edc8a-171">FOLDERID_ProgramFilesCommonX64</span></span> | <span data-ttu-id="edc8a-172">ProgramFilesCommonX64</span><span class="sxs-lookup"><span data-stu-id="edc8a-172">ProgramFilesCommonX64</span></span> | <span data-ttu-id="edc8a-173">amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-173">amd64</span></span>
<span data-ttu-id="edc8a-174">FOLDERID_Windows</span><span class="sxs-lookup"><span data-stu-id="edc8a-174">FOLDERID_Windows</span></span> | <span data-ttu-id="edc8a-175">Windows</span><span class="sxs-lookup"><span data-stu-id="edc8a-175">Windows</span></span> | <span data-ttu-id="edc8a-176">x86, amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-176">x86, amd64</span></span>
<span data-ttu-id="edc8a-177">FOLDERID_ProgramData</span><span class="sxs-lookup"><span data-stu-id="edc8a-177">FOLDERID_ProgramData</span></span> | <span data-ttu-id="edc8a-178">Gemeinsamer AppData-Ordner</span><span class="sxs-lookup"><span data-stu-id="edc8a-178">Common AppData</span></span> | <span data-ttu-id="edc8a-179">x86, amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-179">x86, amd64</span></span>
<span data-ttu-id="edc8a-180">FOLDERID_System\catroot</span><span class="sxs-lookup"><span data-stu-id="edc8a-180">FOLDERID_System\catroot</span></span> | <span data-ttu-id="edc8a-181">AppVSystem32Catroot</span><span class="sxs-lookup"><span data-stu-id="edc8a-181">AppVSystem32Catroot</span></span> | <span data-ttu-id="edc8a-182">x86, amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-182">x86, amd64</span></span>
<span data-ttu-id="edc8a-183">FOLDERID_System\catroot2</span><span class="sxs-lookup"><span data-stu-id="edc8a-183">FOLDERID_System\catroot2</span></span> | <span data-ttu-id="edc8a-184">AppVSystem32Catroot2</span><span class="sxs-lookup"><span data-stu-id="edc8a-184">AppVSystem32Catroot2</span></span> | <span data-ttu-id="edc8a-185">x86, amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-185">x86, amd64</span></span>
<span data-ttu-id="edc8a-186">FOLDERID_System\drivers\etc</span><span class="sxs-lookup"><span data-stu-id="edc8a-186">FOLDERID_System\drivers\etc</span></span> | <span data-ttu-id="edc8a-187">AppVSystem32DriversEtc</span><span class="sxs-lookup"><span data-stu-id="edc8a-187">AppVSystem32DriversEtc</span></span> | <span data-ttu-id="edc8a-188">x86, amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-188">x86, amd64</span></span>
<span data-ttu-id="edc8a-189">FOLDERID_System\driverstore</span><span class="sxs-lookup"><span data-stu-id="edc8a-189">FOLDERID_System\driverstore</span></span> | <span data-ttu-id="edc8a-190">AppVSystem32Driverstore</span><span class="sxs-lookup"><span data-stu-id="edc8a-190">AppVSystem32Driverstore</span></span> | <span data-ttu-id="edc8a-191">x86, amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-191">x86, amd64</span></span>
<span data-ttu-id="edc8a-192">FOLDERID_System\logfiles</span><span class="sxs-lookup"><span data-stu-id="edc8a-192">FOLDERID_System\logfiles</span></span> | <span data-ttu-id="edc8a-193">AppVSystem32Logfiles</span><span class="sxs-lookup"><span data-stu-id="edc8a-193">AppVSystem32Logfiles</span></span> | <span data-ttu-id="edc8a-194">x86, amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-194">x86, amd64</span></span>
<span data-ttu-id="edc8a-195">FOLDERID_System\spool</span><span class="sxs-lookup"><span data-stu-id="edc8a-195">FOLDERID_System\spool</span></span> | <span data-ttu-id="edc8a-196">AppVSystem32Spool</span><span class="sxs-lookup"><span data-stu-id="edc8a-196">AppVSystem32Spool</span></span> | <span data-ttu-id="edc8a-197">x86, amd64</span><span class="sxs-lookup"><span data-stu-id="edc8a-197">x86, amd64</span></span>

## <a name="registry"></a><span data-ttu-id="edc8a-198">Registrierung</span><span class="sxs-lookup"><span data-stu-id="edc8a-198">Registry</span></span>

<span data-ttu-id="edc8a-199">Die Brücke behandelt die Registrierung ähnlich wie das Dateisystem.</span><span class="sxs-lookup"><span data-stu-id="edc8a-199">The bridge handles the registry similarly to the file system.</span></span> <span data-ttu-id="edc8a-200">App-Pakete enthalten eine Datei namens „registry.dat“, die als logische Entsprechung für *HKLM\Software* in der tatsächlichen Registrierung dient.</span><span class="sxs-lookup"><span data-stu-id="edc8a-200">App packages contain a registry.dat file, which serves as the logical equivalent of *HKLM\Software* in the real registry.</span></span> <span data-ttu-id="edc8a-201">Zur Laufzeit führt diese virtuelle Registrierung den Inhalt dieser Struktur in der nativen Systemstruktur zusammen, um beide Strukturen in einer Ansicht darzustellen.</span><span class="sxs-lookup"><span data-stu-id="edc8a-201">At runtime, this virtual registry merges the contents of this hive into the native system hive to provide a singular view of both.</span></span> <span data-ttu-id="edc8a-202">Wenn „registry.dat“ beispielsweise einen einzelnen Schlüssel namens „Foo“ enthält, enthält ein Lesevorgang für *HKLM\Software* zur Laufzeit scheinbar ebenfalls „Foo“ (zusätzlich zu allen nativen Systemschlüsseln).</span><span class="sxs-lookup"><span data-stu-id="edc8a-202">For example, if registry.dat contains a single key "Foo", then a read of *HKLM\Software* at runtime will also appear to contain "Foo" (in addition to all the native system keys).</span></span>

<span data-ttu-id="edc8a-203">Nur Schlüssel unter *HKLM\Software* sind Teil des Pakets. Schlüssel unter *HKCU* oder in anderen Registrierungsbereichen sind nicht Teil des Pakets.</span><span class="sxs-lookup"><span data-stu-id="edc8a-203">Only keys under *HKLM\Software* are part of the package; keys under *HKCU* or other parts of the registry are not.</span></span> <span data-ttu-id="edc8a-204">Schreibvorgänge für Schlüssel oder Werte im Paket sind nicht zulässig.</span><span class="sxs-lookup"><span data-stu-id="edc8a-204">Writes to keys or values in the package are not allowed.</span></span> <span data-ttu-id="edc8a-205">Schreibvorgänge für Schlüssel oder Werte, die nicht Teil des Pakets sind, werden von der Brücke ignoriert und sind nur zulässig, wenn der Benutzer über entsprechende Berechtigungen verfügt.</span><span class="sxs-lookup"><span data-stu-id="edc8a-205">Writes to keys or values not part of the package are ignored by the bridge and allowed as long as the user has permission.</span></span>

<span data-ttu-id="edc8a-206">Alle Schreibvorgänge unter „HKCU“ entsprechen Kopie bei Schreibvorgang an einem privaten Speicherort pro Benutzer und App.</span><span class="sxs-lookup"><span data-stu-id="edc8a-206">All writes under HKCU are copy-on-written to a private per-user, per-app location.</span></span> <span data-ttu-id="edc8a-207">Dies bietet die gleichen Vorteile wie die Behandlung des Dateisystems durch die Brücke in Bezug auf die Bereinigung bei der Deinstallation.</span><span class="sxs-lookup"><span data-stu-id="edc8a-207">This provides the same benefits as the bridge's handling of the file system with respect to uninstall cleanup.</span></span> <span data-ttu-id="edc8a-208">In der Regel können Deinstallationsprogramme *HKEY_CURRENT_USER* nicht bereinigen, da die Bereitstellung von Registrierungsdaten für abgemeldete Benutzer aufgehoben wird und die Daten daher nicht verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="edc8a-208">Traditionally, uninstallers are unable to clean *HKEY_CURRENT_USER* because the registry data for logged out users is unmounted and unavailable.</span></span>

<span data-ttu-id="edc8a-209">Alle Schreibvorgänge werden während der Paketaktualisierung beibehalten und nur gelöscht, wenn die App vollständig entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="edc8a-209">All writes are kept during package upgrade and only deleted when the app is removed entirely.</span></span>

### <a name="common-operations"></a><span data-ttu-id="edc8a-210">Allgemeine Vorgänge</span><span class="sxs-lookup"><span data-stu-id="edc8a-210">Common operations</span></span>

<span data-ttu-id="edc8a-211">Diese kurze Referenztabelle enthält allgemeine Registrierungsvorgänge und Informationen zur Verarbeitung durch die Brücke.</span><span class="sxs-lookup"><span data-stu-id="edc8a-211">This short reference table shows common registry operations and how the bridge handles them.</span></span>

<span data-ttu-id="edc8a-212">Vorgang</span><span class="sxs-lookup"><span data-stu-id="edc8a-212">Operation</span></span> | <span data-ttu-id="edc8a-213">Ergebnis</span><span class="sxs-lookup"><span data-stu-id="edc8a-213">Result</span></span> | <span data-ttu-id="edc8a-214">Beispiel</span><span class="sxs-lookup"><span data-stu-id="edc8a-214">Example</span></span>
:--- | :--- | :---
<span data-ttu-id="edc8a-215">Lesen oder Enumerieren von *HKLM\Software*</span><span class="sxs-lookup"><span data-stu-id="edc8a-215">Read or enumerate *HKLM\Software*</span></span> | <span data-ttu-id="edc8a-216">Eine dynamische Zusammenführung der Paketstruktur mit der lokalen Systementsprechung</span><span class="sxs-lookup"><span data-stu-id="edc8a-216">A dynamic merge of the package hive with the local system counterpart.</span></span> | <span data-ttu-id="edc8a-217">Wenn „registry.dat“ einen einzelnen Schlüssel namens „Foo“ enthält, zeigt ein Lesevorgang von *HKLM\Software* zur Laufzeit die Inhalte von *HKLM\Software* und *HKLM\Software\Foo* an.</span><span class="sxs-lookup"><span data-stu-id="edc8a-217">If registry.dat contains a single key "Foo," at runtime a read of *HKLM\Software* will show the contents of both *HKLM\Software* plus *HKLM\Software\Foo*.</span></span>
<span data-ttu-id="edc8a-218">Schreibvorgänge unter „HKCU“</span><span class="sxs-lookup"><span data-stu-id="edc8a-218">Writes under HKCU</span></span> | <span data-ttu-id="edc8a-219">Kopie bei Schreibvorgang an einem privaten Speicherort pro Benutzer und App</span><span class="sxs-lookup"><span data-stu-id="edc8a-219">Copy-on-written to a per-user, per-app private location.</span></span> | <span data-ttu-id="edc8a-220">Identisch mit „AppData“ für Dateien</span><span class="sxs-lookup"><span data-stu-id="edc8a-220">The same as AppData for files.</span></span>
<span data-ttu-id="edc8a-221">Schreibvorgänge im Paket</span><span class="sxs-lookup"><span data-stu-id="edc8a-221">Writes inside the package.</span></span> | <span data-ttu-id="edc8a-222">Nicht zulässig</span><span class="sxs-lookup"><span data-stu-id="edc8a-222">Not allowed.</span></span> <span data-ttu-id="edc8a-223">Das Paket ist schreibgeschützt.</span><span class="sxs-lookup"><span data-stu-id="edc8a-223">The package is read-only.</span></span> | <span data-ttu-id="edc8a-224">Schreibvorgänge unter *HKLM\Software* sind nicht zulässig, wenn ein entsprechender Schlüssel/Wert in der Paketstruktur vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="edc8a-224">Writes under *HKLM\Software* are not allowed if a corresponding key/value exist in the package hive.</span></span>
<span data-ttu-id="edc8a-225">Schreibvorgänge außerhalb des Pakets</span><span class="sxs-lookup"><span data-stu-id="edc8a-225">Writes outside the package</span></span> | <span data-ttu-id="edc8a-226">Von der Brücke ignoriert.</span><span class="sxs-lookup"><span data-stu-id="edc8a-226">Ignored by the bridge.</span></span> <span data-ttu-id="edc8a-227">Zulässig, wenn der Benutzer über entsprechende Berechtigungen verfügt.</span><span class="sxs-lookup"><span data-stu-id="edc8a-227">Allowed if the user has permissions.</span></span> | <span data-ttu-id="edc8a-228">Schreibvorgänge unter *HKLM\Software* sind zulässig, sofern kein entsprechender Schlüssel/Wert in der Paketstruktur vorhanden ist und der Benutzer über entsprechende Zugriffsberechtigungen verfügt.</span><span class="sxs-lookup"><span data-stu-id="edc8a-228">Writes under *HKLM\Software* are allowed as long as a corresponding key/value does not exist in the package hive and the user has the correct access permissions.</span></span>

## <a name="uninstallation"></a><span data-ttu-id="edc8a-229">Deinstallation</span><span class="sxs-lookup"><span data-stu-id="edc8a-229">Uninstallation</span></span>

<span data-ttu-id="edc8a-230">Wenn ein Paket vom Benutzer deinstalliert wird, werden alle Dateien und Ordner unter *C:\Programme\WindowsApps\Paketname* sowie alle umgeleiteten Schreibvorgänge für „AppData“ oder die Registrierung entfernt, die von der Brücke erfasst wurden.</span><span class="sxs-lookup"><span data-stu-id="edc8a-230">When a package is uninstalled by the user, all files and folders located under *C:\Program Files\WindowsApps\package_name* are removed, as well as any redirected writes to AppData or the registry that were captured by the bridge.</span></span>

## <a name="next-steps"></a><span data-ttu-id="edc8a-231">Nächste Schritte</span><span class="sxs-lookup"><span data-stu-id="edc8a-231">Next steps</span></span>

**<span data-ttu-id="edc8a-232">Antworten auf bestimmte Fragen finden</span><span class="sxs-lookup"><span data-stu-id="edc8a-232">Find answers to specific questions</span></span>**

<span data-ttu-id="edc8a-233">Unser Team überwacht diese [StackOverflow-Tags](http://stackoverflow.com/questions/tagged/project-centennial+or+desktop-bridge).</span><span class="sxs-lookup"><span data-stu-id="edc8a-233">Our team monitors these [StackOverflow tags](http://stackoverflow.com/questions/tagged/project-centennial+or+desktop-bridge).</span></span>

**<span data-ttu-id="edc8a-234">Geben Sie Feedback zu diesem Artikel</span><span class="sxs-lookup"><span data-stu-id="edc8a-234">Give feedback about this article</span></span>**

<span data-ttu-id="edc8a-235">Verwenden Sie den Kommentarabschnitt weiter unten.</span><span class="sxs-lookup"><span data-stu-id="edc8a-235">Use the comments section below.</span></span>
